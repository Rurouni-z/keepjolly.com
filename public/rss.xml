<?xml version="1.0" encoding="utf-8"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>æ‚ é—²ã®å°å±‹</title><link>https://keepjolly.com/</link><description>ä¸€ä¸ªæç®€ä¸»é¢˜çš„åšå®¢ã€‚</description><generator>Hugo 0.111.3 https://gohugo.io/</generator><language>zh-CN</language><managingEditor>1366475809@qq.com (Rurouni)</managingEditor><webMaster>1366475809@qq.com (Rurouni)</webMaster><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><lastBuildDate>Sat, 06 May 2023 13:51:54 +0000</lastBuildDate><atom:link rel="self" type="application/rss+xml" href="https://keepjolly.com/rss.xml"/><item><title>ä¸‰ç»´é‡å»ºä¹‹è·¯ä¸Š</title><link>https://keepjolly.com/archives/three-d-reconstruction-1/</link><guid isPermaLink="true">https://keepjolly.com/archives/three-d-reconstruction-1/</guid><pubDate>Sun, 26 Mar 2023 09:07:02 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>instant-ngp --scene data/nerf/fox
è§†é¢‘ï¼š&lt;a href="https://www.bilibili.com/video/BV1mT4y1o7Q2">è®¡ç®—æœºè§†è§‰ä¹‹ä¸‰ç»´é‡å»º&lt;/a>
æ‰¾åˆ°ä¸€ä¸ªåŒæ ·æ˜¯è¿™ä¸ªè§†é¢‘çš„&lt;a href="https://blog.csdn.net/xijuezhu8128/category_11916420.html">ç¬”è®°ç½‘å€&lt;/a>
&lt;a name="PVvJl">&lt;/a>&lt;/p>
&lt;h2 id="æ‘„åƒæœºå‡ ä½•">æ‘„åƒæœºå‡ ä½•&lt;/h2>
&lt;p>&lt;a name="yUygC">&lt;/a>&lt;/p>
&lt;h3 id="é’ˆå­”æ¨¡å‹--é€é•œ">é’ˆå­”æ¨¡å‹ &amp;amp; é€é•œ&lt;/h3>
&lt;p>&lt;a name="kEeEO">&lt;/a>&lt;/p>
&lt;h4 id="é’ˆå­”æ‘„åƒæœº">é’ˆå­”æ‘„åƒæœº&lt;/h4>
&lt;p>ç‰©ä½“ç›´æ¥æ˜ å°„åˆ°èƒ¶ç‰‡ä¸Šï¼Œä¼šå¯¼è‡´å¤šä¸ªç‚¹æ˜ å°„åˆ°åŒä¸€ä¸ªç‚¹ä¸Šï¼Œå› æ­¤é‡‡ç”¨é’ˆå­”æˆåƒã€‚å¦‚ä¸‹å›¾ï¼Œå…¶ä¸­x,y,zæ˜¯ä¸–ç•Œç‚¹Pwåœ¨æ‘„åƒæœºåæ ‡ç³»ä¸Šçš„åæ ‡ï¼Œå·²çŸ¥ï¼›fæ˜¯ç„¦è·ï¼Œå·²çŸ¥ï¼›ç”±æ­¤å¯æ±‚å¾—P'åœ¨åƒå¹³é¢åæ ‡ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="DVeeA">&lt;/a>&lt;/p>
&lt;h4 id="åŠ é€é•œ">åŠ é€é•œ&lt;/h4>
&lt;p>å¯ä»¥è®©ä¸Šè¿°æ‘„åƒæœºä¿æŒç„¦è·è¶Šå°ï¼Œå›¾åƒè¶Šæ¸…æ™°çš„æƒ…å†µä¸‹ï¼Œ&lt;strong>å¢åŠ äº®åº¦&lt;/strong>ã€‚
é€é•œå°†æ‰€æœ‰å¹³è¡Œäºå…‰è½´çš„å…‰çº¿æ±‡èšåˆ°ç„¦ç‚¹ï¼Œç„¦ç‚¹åˆ°é€é•œä¸­å¿ƒçš„è·ç¦»ç§°ä¸ºç„¦è·ï¼ˆéä¸Šè¿°ç„¦è·ï¼‰ã€‚ç©¿è¿‡é€é•œä¸­å¿ƒçš„å…‰çº¿çš„&lt;strong>æ–¹å‘ä¸ä¼šæ”¹å˜&lt;/strong>ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-1.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
äº§ç”Ÿçš„é—®é¢˜ï¼š&lt;/p>
&lt;ul>
&lt;li>å¤±ç„¦ï¼Œç‰©ä½“â€œèšç„¦â€æœ‰ç‰¹å®šè·ç¦»ï¼Œä¸€äº›åœ°æ–¹æ¸…æ™°ï¼Œä¸€äº›åœ°æ–¹æ¨¡ç³Š&lt;/li>
&lt;li>å¾„å‘ç•¸å˜
&lt;a name="QKFdG">&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="æ‘„åƒæœºå‡ ä½•-1">æ‘„åƒæœºå‡ ä½•&lt;/h3>
&lt;p>ä¸ºäº†å°†åƒå¹³é¢å›¾åƒï¼ˆè¿ç»­ï¼‰è½¬åˆ°æ•°å­—å›¾åƒï¼ˆç¦»æ•£ï¼‰ï¼Œä½¿å…¶å¯è¢«å»ºæ¨¡ã€‚è¿›è¡Œä¸€äº›ä¿®æ­£ï¼š
å‰ä¸‰æ­¥æ˜¯æ‘„åƒæœºåæ ‡ç³»ä¸‹
&lt;a name="zyC7R">&lt;/a>&lt;/p>
&lt;h4 id="1-åç½®-å•ä½å˜æ¢">1. åç½® å•ä½å˜æ¢&lt;/h4>
&lt;p>ï¼ˆä¸‹å›¾f=f+z0,ç®€åŒ–ç¬¦å·ï¼‰&lt;/p>
&lt;ul>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-2.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>&lt;a name="bcZVp">&lt;/a>&lt;/p>
&lt;h4 id="2-è½¬åŒ–ä¸ºé½æ¬¡åæ ‡ç³»">2. è½¬åŒ–ä¸ºé½æ¬¡åæ ‡ç³»&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-3.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
å…¶ä¸­Mæ˜¯ç›¸æœºå†…å‚ï¼Œä¸å˜çŸ©é˜µï¼ŒPæ˜¯3Dç‚¹ï¼Œå˜åŒ–å‘é‡ï¼Œå»ºç«‹äº†P'åˆ°Pçš„çº¿æ€§å…³ç³»
&lt;a name="S7JfO">&lt;/a>&lt;/p>
&lt;h5 id="æ’æ›²å°†åæ ‡è½¬ä¸ºçº¿æ€§å…³ç³»">æ’æ›²ï¼šå°†åæ ‡è½¬ä¸ºçº¿æ€§å…³ç³»&lt;/h5>
&lt;ul>
&lt;li>é½æ¬¡åæ ‡ï¼šEtoHï¼šå¤šåŠ ä¸€ç»´ï¼Œå€¼ä¸º1ï¼›HtoEï¼šå‰n-1ç»´é™¤ä»¥ç¬¬nç»´ï¼ˆEæ¬§æ°ç©ºé—´ã€Hé½æ¬¡ç©ºé—´ï¼‰&lt;/li>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-4.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">ï¼ˆÎ±=fkã€‚Î²=flï¼‰&lt;/li>
&lt;li>çº¦å®šåç»­Phå†™åšPï¼Œé™¤éç‰¹åˆ«æŒ‡æ˜æ˜¯æ¬§å¼ç©ºé—´ä¸‹çš„P&lt;/li>
&lt;li>&lt;img src="https://cdn.nlark.com/yuque/0/2023/png/12600461/1679105948768-f4b176af-ef6a-4e1c-9bfb-e2bd5cbc20c3.png#averageHue=%23fbf9f9&amp;amp;clientId=u304ec050-67df-4&amp;amp;from=paste&amp;amp;height=225&amp;amp;id=u10073beb&amp;amp;name=image.png&amp;amp;originHeight=429&amp;amp;originWidth=796&amp;amp;originalType=binary&amp;amp;ratio=1.2699999809265137&amp;amp;rotation=0&amp;amp;showTitle=false&amp;amp;size=74795&amp;amp;status=done&amp;amp;style=none&amp;amp;taskId=u1bf1fadc-ef79-4920-9d90-13d609f21c6&amp;amp;title=&amp;amp;width=417.75933837890625" alt="image.png">&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>&lt;a name="thwSn">&lt;/a>&lt;/p>
&lt;h4 id="3-æ‘„åƒæœºåç§»">3. æ‘„åƒæœºåç§»&lt;/h4>
&lt;p>å·¥è‰ºé—®é¢˜ï¼Œä¸èƒ½å‚ç›´ï¼Œæ‰€ä»¥éœ€è¦åŠ åç§»ç³»æ•°
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-5.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
è‡ªç”±åº¦ï¼šÎ±ï¼ŒÎ²ï¼ŒÎ¸ï¼ŒCxï¼ŒCy
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-6.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;hr>
&lt;p>&lt;a name="dUwn6">&lt;/a>&lt;/p>
&lt;h4 id="4-ä¸–ç•Œåæ ‡ç³»è½¬æ¢åˆ°æ‘„åƒæœºåæ ‡ç³»">4. ä¸–ç•Œåæ ‡ç³»è½¬æ¢åˆ°æ‘„åƒæœºåæ ‡ç³»&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-7.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="SDFNM">&lt;/a>&lt;/p>
&lt;h4 id="5-æ‘„åƒæœºæ¨¡å‹pkr-tpw">5. æ‘„åƒæœºæ¨¡å‹P'=K[R T]Pw&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-8.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
RTçŸ©é˜µå…·ä½“å†…å®¹ä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œå¦‚æœ‰é“¾æ¥æ¬¢è¿è¯„è®ºï¼Œåé¢çš„&lt;strong>æ‘„åƒæœºæ ‡å®šçš„&lt;/strong>&lt;a href="https://keepjolly.com/archives/three-d-reconstruction-1/#HFfse">&lt;strong>è¡¥å……çŸ¥è¯†&lt;/strong>&lt;/a>&lt;strong>æœ‰è®²&lt;/strong>&lt;/p>
&lt;hr>
&lt;p>&lt;a name="Vb4P5">&lt;/a>&lt;/p>
&lt;h5 id="ç‰©ç†æ„ä¹‰è‡ªç”±åº¦æ¬§å¼ç©ºé—´">ç‰©ç†æ„ä¹‰ã€è‡ªç”±åº¦ã€æ¬§å¼ç©ºé—´&lt;/h5>
&lt;ol>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-9.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;li>è‡ªç”±åº¦ï¼šäº”ä¸ªå†…å‚+6ä¸ªå¤–å‚ï¼ˆ3ä¸ªæ—‹è½¬3ä¸ªå¹³ç§»ï¼‰= 11ä¸ªè‡ªç”±åº¦ï¼ˆå›¾ä¸­åº”è¯¥æ˜¯1Ã—4ï¼‰&lt;/li>
&lt;li>é½æ¬¡ç©ºé—´è½¬æ¢ä¸ºæ¬§å¼ç©ºé—´ï¼š&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-10.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="nXOMW">&lt;/a>&lt;/li>
&lt;/ol>
&lt;h4 id="fauferaså®šç†">Fauferaså®šç†&lt;/h4>
&lt;p>é›¶å€¾æ–œå°±æ˜¯æ²¡æœ‰Î¸
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-11.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="Bm2Md">&lt;/a>&lt;/p>
&lt;h4 id="æŠ•å½±å˜æ¢çš„æ€§è´¨">æŠ•å½±å˜æ¢çš„æ€§è´¨&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-12.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="bRqXq">&lt;/a>&lt;/p>
&lt;h3 id="å…¶ä»–æ‘„åƒæœºæ¨¡å‹">å…¶ä»–æ‘„åƒæœºæ¨¡å‹&lt;/h3>
&lt;p>&lt;a name="bo1qJ">&lt;/a>&lt;/p>
&lt;h4 id="è§„èŒƒåŒ–æ‘„åƒæœº">è§„èŒƒåŒ–æ‘„åƒæœº&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-13.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="k4TrS">&lt;/a>&lt;/p>
&lt;h4 id="å¼±é€è§†æŠ•å½±æ‘„åƒæœº">å¼±é€è§†æŠ•å½±æ‘„åƒæœº&lt;/h4>
&lt;p>å½“ç›¸å¯¹æ™¯æ·±å°äºå…¶ä¸ç›¸æœºçš„è·ç¦»æ—¶ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œä¸€äº›ç®€åŒ–ï¼Œå°±ç®€å•åœ°è®¤ä¸ºè¿™äº›ç‚¹å°±åœ¨ä¸€ä¸ªæ·±åº¦ä¸Šï¼Œç›´æ¥æŠ•å½±åˆ°å¹³é¢ä¸Šï¼Œé€‚åˆæ‹æ‘„ä¸­è¿œè·ç¦»å›¾åƒ
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-14.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ul>
&lt;li>å…¶ä¸­f'ä¸ºç„¦è·ï¼Œz0æ˜¯ç‰©ä½“åˆ°å…‰åœˆOçš„è·ç¦»ï¼Œxyç‰©ä½“çœŸå®ä½ç½®ï¼Œx'y'åƒç´ é¢ä½ç½®ã€‚è¿™æ ·å­å°†z0å›ºå®šä¸ºå¸¸æ•°ï¼Œä½¿å…¶ä¸ºçº¿æ€§å˜æ¢ï¼Œè€Œä¸æ˜¯&lt;a href="https://keepjolly.com/archives/three-d-reconstruction-1/#kEeEO">éçº¿æ€§å˜æ¢&lt;/a>ã€‚&lt;/li>
&lt;/ul>
&lt;p>våº”è¯¥æ˜¯ 1Ã—3 çŸ©é˜µï¼ŒAbvæ˜¯K[R T]ä¹‹åçš„ç»“æœ
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-15.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-16.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="UQgMG">&lt;/a>&lt;/p>
&lt;h4 id="æ­£äº¤æŠ•å½±æ‘„åƒæœº">æ­£äº¤æŠ•å½±æ‘„åƒæœº&lt;/h4>
&lt;p>å½“æ‘„åƒæœºä¸­å¿ƒåˆ°åƒå¹³é¢è·ç¦»æ— é™è¿œæ—¶ï¼Œç›´æ¥æ˜ å°„ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-17.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="WR68Q">&lt;/a>&lt;/p>
&lt;h4 id="æ€»ç»“">æ€»ç»“&lt;/h4>
&lt;ul>
&lt;li>æ­£äº¤æŠ•å½±ï¼Œæ›´å¤šåœ°åº”ç”¨åœ¨å»ºç­‘è®¾è®¡AUTOCADï¼Œæˆ–è€…å·¥ä¸šè®¾è®¡è¡Œä¸š&lt;/li>
&lt;li>å¼±é€è§†æŠ•å½±åœ¨æ•°å­¦æ–¹é¢æ›´ç®€å•ï¼Œå½“ç‰©ä½“è¾ƒå°ä¸”è¾ƒè¿œæ—¶å‡†ç¡®ï¼Œå¸¸ç”¨äºå›¾åƒè¯†åˆ«ä»»åŠ¡&lt;/li>
&lt;li>é€è§†æŠ•å½±å¯¹äº3Dåˆ°2Dæ˜ å°„çš„å»ºæ¨¡æ›´ä¸ºå‡†ç¡®ï¼Œç”¨äºè¿åŠ¨æ¢å¤ç»“æ„æˆ–SLAM&lt;/li>
&lt;li>å‚è€ƒåšå®¢
&lt;ul>
&lt;li>&lt;a href="https://zhuanlan.zhihu.com/p/154808198">æœºå™¨è§†è§‰å­¦ä¹ ï¼ˆä¸ƒï¼‰æ‘„åƒæœºæ¨¡å‹&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blog.csdn.net/qq_28087491/article/details/107965151">å¸¸ç”¨ç›¸æœºæŠ•å½±åŠç•¸å˜æ¨¡å‹ï¼ˆé’ˆå­”|å¹¿è§’|é±¼çœ¼ï¼‰&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.cnblogs.com/silence-cho/p/15023822.html">é’ˆå­”ç›¸æœºæˆåƒæ¨¡å‹&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.jianshu.com/p/510f43de2164">äºŒç»´åæ ‡è½¬æ¢ä¸åæ ‡ç³»è½¬æ¢&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blog.csdn.net/swety_gxy/article/details/73087848">ä¸‰ç»´ç©ºé—´ä¸­çš„å‡ ä½•å˜æ¢-å¹³ç§»æ—‹è½¬ç¼©æ”¾&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://pengfeixc.com/blogs/computer-graphics">è®¡ç®—æœºå›¾å½¢å­¦&lt;/a>
&lt;a name="etdZi">&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="è¡¥å……çŸ¥è¯†">è¡¥å……çŸ¥è¯†&lt;/h3>
&lt;p>&lt;a name="IMPSW">&lt;/a>&lt;/p>
&lt;h4 id="çº¿æ€§æ–¹ç¨‹ç»„çš„æœ€å°äºŒä¹˜è§£">çº¿æ€§æ–¹ç¨‹ç»„çš„æœ€å°äºŒä¹˜è§£&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-18.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="SU3hp">&lt;/a>&lt;/p>
&lt;h4 id="é½æ¬¡çº¿æ€§æ–¹ç¨‹ç»„çš„æœ€å°äºŒä¹˜è§£">é½æ¬¡çº¿æ€§æ–¹ç¨‹ç»„çš„æœ€å°äºŒä¹˜è§£&lt;/h4>
&lt;p>åªéœ€è®°ä½é½æ¬¡çº¿æ€§ç”¨å¥‡å¼‚å€¼åˆ†è§£å³å¯ï¼Œåé¢ç»å¸¸ç”¨
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-19.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="qCzTi">&lt;/a>&lt;/p>
&lt;h4 id="éçº¿æ€§æ–¹ç¨‹ç»„çš„æœ€å°äºŒä¹˜è§£">éçº¿æ€§æ–¹ç¨‹ç»„çš„æœ€å°äºŒä¹˜è§£&lt;/h4>
&lt;p>åªéœ€è®°ä½é½æ¬¡éçº¿æ€§ç”¨ç‰›é¡¿ã€L-Mæ–¹æ³•å³å¯ï¼Œåé¢ç»å¸¸ç”¨
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-20.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="VWsOw">&lt;/a>&lt;/p>
&lt;h2 id="æ‘„åƒæœºæ ‡å®š">æ‘„åƒæœºæ ‡å®š&lt;/h2>
&lt;p>æ‘„åƒæœºæ ‡å®šï¼Œå³&lt;strong>å·²çŸ¥ç‚¹åæ ‡æ±‚è§£æ‘„åƒæœºå†…ã€å¤–å‚æ•°çŸ©é˜µ&lt;/strong>ï¼Œä½¿å¾—äºŒç»´è½¬ä¸‰ç»´å¯è¡Œã€‚
æ›´æ¢ç¬¦å·ï¼šp=P'ï¼ˆåƒå¹³é¢P'å˜ä¸ºpï¼‰ P=Pwï¼ˆä¸–ç•Œåæ ‡Pwå˜ä¸ºPï¼‰ã€‚
&lt;a name="UKmUo">&lt;/a>&lt;/p>
&lt;h3 id="1-æ ‡å®šé—®é¢˜åŸºæœ¬æ€è·¯">1. æ ‡å®šé—®é¢˜åŸºæœ¬æ€è·¯&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-21.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="nhXJc">&lt;/a>&lt;/p>
&lt;h3 id="2-è¶…å®šé½æ¬¡æ–¹ç¨‹çš„åŸå› ">2. è¶…å®šé½æ¬¡æ–¹ç¨‹çš„åŸå› &lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-22.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="LDwvq">&lt;/a>&lt;/p>
&lt;h3 id="3-è½¬æ¢æˆçŸ©é˜µå½¢å¼">3. è½¬æ¢æˆçŸ©é˜µå½¢å¼&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-23.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="NVpqQ">&lt;/a>&lt;/p>
&lt;h3 id="4-åˆ©ç”¨å¥‡å¼‚å€¼åˆ†è§£æ±‚è¶…å®šé½æ¬¡æ–¹ç¨‹">4. åˆ©ç”¨å¥‡å¼‚å€¼åˆ†è§£æ±‚è¶…å®šé½æ¬¡æ–¹ç¨‹&lt;/h3>
&lt;p>å…¶ä¸­Mæ±‚è§£çš„å€¼æ˜¯çœŸå®ä¸–ç•Œçš„å€¼å·®ä¸€ä¸ª&lt;strong>æ”¾å¤§ç³»æ•°&lt;/strong>
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-24.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="b0ZeZ">&lt;/a>&lt;/p>
&lt;h3 id="5-æå–æ‘„åƒæœºç³»æ•°">5. æå–æ‘„åƒæœºç³»æ•°&lt;/h3>
&lt;p>è¯¦ç»†è¿‡ç¨‹å‚è§ï¼š&lt;a href="https://niecongchong.blog.csdn.net/article/details/127209507#t5">æå–æ‘„åƒæœºå†…å‚æ•°&lt;/a>
è¯¾å ‚çŸ¥è¯†ï¼šäº’ç›¸å‚ç›´ç‚¹ä¹˜Â·ä¸º0ï¼ˆr1r2r3äº’ç›¸å‚ç›´ï¼‰ï¼›r1Ã—r2=r3 ï¼ˆå¦å¤–å›¾ä¸­çŸ©é˜µå¤§å°å¯èƒ½æœ‰è¯¯ï¼‰
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-25.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="i3JVJ">&lt;/a>&lt;/p>
&lt;h4 id="51-æ±‚u0v0æ”¾å¤§ç³»æ•°Ï">5.1 æ±‚u0ã€v0ï¼Œæ”¾å¤§ç³»æ•°Ï&lt;/h4>
&lt;p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆaæœ‰æ—¶å€™è½¬ç½®æœ‰æ—¶å€™ä¸è½¬ç½®
u0ã€v0å°±æ˜¯&lt;a href="https://keepjolly.com/archives/three-d-reconstruction-1/#zyC7R">åç½®Cxã€Cy&lt;/a>
r1Â·r3 = 0ï¼›r2Â·r3=0ï¼›r3Â·r3=1ï¼Œä¸”éƒ½äº’ä¸ç›¸å…³ï¼Œæ­£äº¤çŸ©é˜µ
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-26.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
ï¼ˆå›¾ä¸­æ˜¯ç‚¹ä¹˜ä¸æ˜¯å‰ä¹˜ï¼‰
&lt;a name="PatrE">&lt;/a>&lt;/p>
&lt;h4 id="52-æ±‚Î¸">5.2 æ±‚Î¸&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-27.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
ç„¶åå·¦å¼å­ç‚¹ä¹˜ æ¯”ä¸Š å³å¼å­ç‚¹ä¹˜å³å¯å‡ºç°ä¸‹å›¾ ï¼ˆå…·ä½“çœ‹è§†é¢‘ï¼Œè™½ç„¶è®²çš„ä¹Ÿä¸æ€ä¹ˆæ¸…æ¥šï¼Œå‚è€ƒå¼¹å¹•æˆ–å‰é¢çš„&lt;a href="https://niecongchong.blog.csdn.net/article/details/127209507#t5">é“¾æ¥&lt;/a>ï¼‰
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-28.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
ps. å¦‚æœÎ¸=90Â° åˆ™ç¬¦åˆfaugeraså®šç†
&lt;a name="qT9nR">&lt;/a>&lt;/p>
&lt;h4 id="53-æ±‚Î±å’ŒÎ²">5.3 æ±‚Î±å’ŒÎ²&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-29.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
å¦‚æœÎ±=Î²ï¼Œåˆ™ç¬¦åˆfaugeraså®šç†
&lt;a name="inEAt">&lt;/a>&lt;/p>
&lt;h4 id="54-æ±‚å¤–å‚r1r2r3">5.4 æ±‚å¤–å‚r1ï¼Œr2ï¼Œr3&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-30.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="oFdwP">&lt;/a>&lt;/p>
&lt;h4 id="55-æ±‚å¤–å‚t">5.5 æ±‚å¤–å‚T&lt;/h4>
&lt;p>Kæ»¡ç§©æ‰€å¿…å¯é€†
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-31.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="jJbl2">&lt;/a>&lt;/p>
&lt;h4 id="56-æ€»ç»“">5.6 æ€»ç»“&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-32.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
å–ç‚¹ä¸èƒ½éƒ½ä½äºåŒä¸€å¹³é¢ï¼Œå¦åˆ™ä¸‰ç‚¹ç¡®å®šä¸€ä¸ªå¹³é¢ï¼Œå¤šä½™çš„ç‚¹éƒ½æ˜¯æ²¡ç”¨çš„
&lt;a name="acfQ6">&lt;/a>&lt;/p>
&lt;h3 id="å¾„å‘ç•¸å˜çš„æ‘„åƒæœºæ ‡å®š">å¾„å‘ç•¸å˜çš„æ‘„åƒæœºæ ‡å®š&lt;/h3>
&lt;p>&lt;a name="Q1aWO">&lt;/a>&lt;/p>
&lt;h4 id="1-ç•¸å˜æ¨¡å‹">1. ç•¸å˜æ¨¡å‹&lt;/h4>
&lt;p>SÎ»å°±æ˜¯ç•¸å˜çŸ©é˜µ
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-33.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="uZX1S">&lt;/a>&lt;/p>
&lt;h4 id="2-éçº¿æ€§æ±‚è§£">2. éçº¿æ€§æ±‚è§£&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-34.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
m1m2m3æ˜¯&lt;a href="https://keepjolly.com/archives/three-d-reconstruction-1/#b0ZeZ">æå–æ‘„åƒæœºç³»æ•°&lt;/a>é‡Œçš„æŠ•å½±çŸ©é˜µçš„ä¸‰è¡Œ
&lt;a name="CQYTA">&lt;/a>&lt;/p>
&lt;h4 id="3-æ±‚è§£çº¿æ€§éƒ¨åˆ†åŠ å¿«è¿­ä»£">3. æ±‚è§£çº¿æ€§éƒ¨åˆ†åŠ å¿«è¿­ä»£&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-35.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
uiÃ·viå³åœ¨åŸä¸–ç•Œåæ ‡ä¸‹çš„ç­‰æ¯”ä¾‹ç¼©æ”¾ç›´çº¿ï¼Œå°±é‚£ä¸ªd2
&lt;a name="HFfse">&lt;/a>&lt;/p>
&lt;h3 id="è¡¥å……çŸ¥è¯†-1">è¡¥å……çŸ¥è¯†&lt;/h3>
&lt;p>&lt;a name="AFtVr">&lt;/a>&lt;/p>
&lt;h4 id="2då¹³é¢ä¸Šçš„å˜æ¢">2Då¹³é¢ä¸Šçš„å˜æ¢&lt;/h4>
&lt;p>&lt;a name="JcnrV">&lt;/a>&lt;/p>
&lt;h5 id="æ¬§å¼å˜æ¢">æ¬§å¼å˜æ¢&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-36.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="WH0r5">&lt;/a>&lt;/p>
&lt;h5 id="ç›¸ä¼¼å˜æ¢">ç›¸ä¼¼å˜æ¢&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-37.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="mgqTd">&lt;/a>&lt;/p>
&lt;h5 id="ä»¿å°„å˜æ¢">ä»¿å°„å˜æ¢&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-38.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="qkdFZ">&lt;/a>&lt;/p>
&lt;h5 id="é€è§†å˜æ¢">é€è§†å˜æ¢&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-39.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="CWnR3">&lt;/a>&lt;/p>
&lt;h4 id="3då˜æ¢">3Då˜æ¢&lt;/h4>
&lt;p>&lt;a name="YMczI">&lt;/a>&lt;/p>
&lt;h5 id="æ¬§å¼ç›¸ä¼¼å˜æ¢">æ¬§å¼+ç›¸ä¼¼å˜æ¢&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-40.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="Nmej8">&lt;/a>&lt;/p>
&lt;h5 id="ä»¿å°„å˜æ¢-1">ä»¿å°„å˜æ¢&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-41.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="Aa7tF">&lt;/a>&lt;/p>
&lt;h5 id="é€è§†å˜æ¢-1">é€è§†å˜æ¢&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-42.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="i8fr7">&lt;/a>&lt;/p>
&lt;h2 id="å•è§†å›¾å‡ ä½•">å•è§†å›¾å‡ ä½•&lt;/h2>
&lt;p>ç”¨å•å¼ å›¾æ„å»ºä¸‰ç»´æ¨¡å‹
&lt;a name="VYNZX">&lt;/a>&lt;/p>
&lt;h3 id="å•è§†æµ‹é‡">å•è§†æµ‹é‡&lt;/h3>
&lt;p>00:17:46 å½±æ¶ˆç‚¹
&lt;a name="VaZCW">&lt;/a>&lt;/p>
&lt;h4 id="æ— ç©·è¿œç‚¹æ— ç©·è¿œçº¿æ— ç©·è¿œé¢">æ— ç©·è¿œç‚¹ã€æ— ç©·è¿œçº¿ã€æ— ç©·è¿œé¢&lt;/h4>
&lt;p>&lt;a name="EVjLI">&lt;/a>&lt;/p>
&lt;h5 id="2dç©ºé—´">2Dç©ºé—´&lt;/h5>
&lt;p>&lt;strong>ç”¨lè¡¨ç¤ºä¸€æ¡ç›´çº¿&lt;/strong>
&lt;img src="https://cdn.nlark.com/yuque/0/2023/png/12600461/1678154285531-0bfa14f4-d345-4ae1-b317-ef2e02729257.png#averageHue=%23ebebf2&amp;amp;clientId=u68e9a600-0c37-4&amp;amp;from=paste&amp;amp;height=317&amp;amp;id=u83842eee&amp;amp;name=image.png&amp;amp;originHeight=684&amp;amp;originWidth=1256&amp;amp;originalType=binary&amp;amp;ratio=1.2699999809265137&amp;amp;rotation=0&amp;amp;showTitle=false&amp;amp;size=55246&amp;amp;status=done&amp;amp;style=none&amp;amp;taskId=u88b7be70-3edb-4ab6-acfc-5e588cfc20e&amp;amp;title=&amp;amp;width=583.00146484375" alt="image.png">
&lt;strong>xæ˜¯ä¸¤æ¡ç›´çº¿çš„äº¤ç‚¹ï¼Œxæ˜¯lå’Œl'çš„å‰ä¹˜&lt;/strong>
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-43.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;strong>2Dç©ºé—´ä¸­çš„æ— ç©·è¿œç‚¹å³å½“å‰ç›´çº¿æ–¹å‘çš„å‰ä¸¤è¡ŒåŠ 0å³å¯ã€‚[a,b,0]&lt;/strong>
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-44.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;strong>2Dç©ºé—´ä¸­çš„æ— ç©·è¿œç›´çº¿&lt;/strong>
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-45.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="IGTw5">&lt;/a>&lt;/p>
&lt;h5 id="3dç©ºé—´">3Dç©ºé—´&lt;/h5>
&lt;ul>
&lt;li>3Dç©ºé—´çš„é¢&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-46.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ul>
&lt;li>3Dç©ºé—´ä¸­çš„ç›´çº¿&lt;/li>
&lt;/ul>
&lt;p>ä¸ºäº†æ–¹ä¾¿ï¼Œå°†å…¶ç›´çº¿å®šä¹‰ä¸ºç›´çº¿æ–¹å‘ï¼Œæˆ–è€…ä¸¤å¹³é¢çš„äº¤çº¿
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-47.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ul>
&lt;li>3Dç©ºé—´ä¸­çš„æ— ç©·è¿œç‚¹&lt;/li>
&lt;/ul>
&lt;p>æ ¹æ®2Dä¸­çš„æ— ç©·è¿œç‚¹ï¼Œå³åœ¨ç›´çº¿æ–¹å‘ä¸Šï¼ˆa,b,cï¼‰æœ€åä¸€è¡Œå¤šåŠ 0å³å¯
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-48.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ul>
&lt;li>3Dç©ºé—´ä¸­çš„æ— ç©·è¿œå¹³é¢&lt;/li>
&lt;/ul>
&lt;p>æ— ç©·è¿œç›´çº¿å³ä¸ºåŒä¸ªå¹³é¢ä¸Šçš„å¹³è¡Œçº¿ä¸Šçš„æ— ç©·è¿œç‚¹é›†æ±‡èšæˆæ— ç©·è¿œç›´çº¿ï¼›æˆ–è€…æ˜¯ä¸¤ä¸ªå¹³è¡Œå¹³é¢åœ¨æ— ç©·è¿œå¤„äº¤ä¸ä¸€æ¡ç›´çº¿ã€‚è§†é¢‘ä½ç½®33:30.
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-49.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="iDZeo">&lt;/a>&lt;/p>
&lt;h3 id="å½±æ¶ˆç‚¹å’Œå½±æ¶ˆé¢">å½±æ¶ˆç‚¹å’Œå½±æ¶ˆé¢&lt;/h3>
&lt;p>&lt;a name="isQzT">&lt;/a>&lt;/p>
&lt;h4 id="2då¹³é¢">2Då¹³é¢&lt;/h4>
&lt;ul>
&lt;li>&lt;strong>æ— ç©·è¿œç‚¹çš„å˜æ¢&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>åªè¦ç¬¬ä¸‰è¡Œä¸º0å°±æ˜¯æ— ç©·è¿œç‚¹ï¼Œé€è§†é™¤évä¸º0å¦åˆ™å°±ä¸æ˜¯ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-50.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ— ç©·è¿œçº¿çš„å˜æ¢&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-51.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
é€è§†ä¸€èˆ¬ä¸æ˜¯æ— ç©·è¿œçº¿ï¼Œä»¿å°„ä¸€èˆ¬æ˜¯æ— ç©·è¿œçº¿ã€‚
å› ä¸ºä»¿å°„å˜æ¢ä¿æŒå¹³è¡Œçº¿ä¸å˜ï¼Œè€Œé€è§†å˜æ¢å¯èƒ½ä¼šæœ‰åœ¨è¿‘å¤„æœ‰äº¤ç‚¹è€Œä¸ä¼šåœ¨æ— ç©·è¿œå¤„ç›¸äº¤ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-52.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="r58RU">&lt;/a>&lt;/p>
&lt;h4 id="å½±æ¶ˆç‚¹">å½±æ¶ˆç‚¹&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-53.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;strong>å½±æ¶ˆç‚¹ä¸ç›´çº¿æ–¹å‘&lt;/strong>
ä¹Ÿå¯è¿™æ ·ç†è§£ï¼šKæ˜¯åšä»¿å°„å˜æ¢ï¼Œæ‰€ä»¥v=Kdï¼ˆä¸ºä»€ä¹ˆè¿™é‡Œè¯æ˜çš„æ—¶å€™ä¸è€ƒè™‘å¤–å‚çŸ©é˜µï¼Œæ‘„åƒæœºåæ ‡ç³»ï¼Ÿï¼‰
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-54.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="eePSg">&lt;/a>&lt;/p>
&lt;h4 id="å½±æ¶ˆçº¿">å½±æ¶ˆçº¿&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-55.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ul>
&lt;li>æ©™è‰²å³å½±æ¶ˆçº¿&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-56.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="ulA20">&lt;/a>&lt;/p>
&lt;h4 id="å½±æ¶ˆçº¿ä¸å¹³é¢æ³•å‘é‡">å½±æ¶ˆçº¿ä¸å¹³é¢æ³•å‘é‡&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-57.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="FRZVb">&lt;/a>&lt;/p>
&lt;h4 id="æ€»ç»“å•è§†å›¾é‡æ„å…³é”®">æ€»ç»“ï¼ˆå•è§†å›¾é‡æ„å…³é”®ï¼‰&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-58.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="bTJ9Z">&lt;/a>&lt;/p>
&lt;h3 id="å•è§†å›¾é‡æ„">å•è§†å›¾é‡æ„&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-59.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-60.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
åœ¨å‡è®¾ä¸‹ï¼ŒÎ¸å·²çŸ¥ï¼ŒÎ±=Î²ï¼Œåˆ™è¿˜å‰©ä¸‹Cxï¼ŒCyæœªçŸ¥ï¼Œä¸€å…±ä¸‰ä¸ªå˜é‡æœªçŸ¥ï¼Ÿï¼Œå¹¶ä¸”v1v2v3äº’ç›¸åœ¨ä¸‰ç»´ä¸­æ˜¯å‚ç›´å…³ç³»ï¼Œç„¶åä¸‰ä¸ªæ–¹ç¨‹æ±‚è§£ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-61.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-62.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="epDTg">&lt;/a>&lt;/p>
&lt;h4 id="æ€»ç»“-1">æ€»ç»“&lt;/h4>
&lt;p>æ ¹æ®å‰é¢çš„æ±‚å‡ºæ‘„åƒæœºå†…å‚çŸ©é˜µåï¼Œå°±å¯ä»¥æ ¹æ®æ‘„åƒæœºå‡ ä½•æ¥è·å–åƒç´ ç‚¹å’Œä¸‰ç»´ç‚¹çš„å…³ç³»ï¼Œç„¶åæ ¹æ®åœºæ™¯å¹³é¢æ–¹å‘næ¥é‡å»ºä¸‰ç»´åœºæ™¯ã€‚
ç¼ºç‚¹æ˜¯ï¼šåœºæ™¯çš„å®é™…æ¯”ä¾‹æ— æ³•æ¢å¤ï¼Œéœ€è¦æ‰‹åŠ¨é€‰æ‹©å½±æ¶ˆç‚¹ä¸å½±æ¶ˆçº¿ï¼Œè¿˜éœ€è¦åœºæ™¯å…ˆéªŒä¿¡æ¯ï¼ˆç‚¹å¯¹åº”å…³ç³»ï¼Œçº¿ã€é¢å‡ ä½•ä¿¡æ¯ç­‰ï¼‰
&lt;a name="Z6Nsa">&lt;/a>&lt;/p>
&lt;h3 id="æ€»ç»“-2">æ€»ç»“&lt;/h3>
&lt;p>01:16:00.çŸ¥é“æ³•å‘é‡å’Œå½±æ¶ˆçº¿çš„å…³ç³»ï¼Œå½±æ¶ˆç‚¹å’Œç›´çº¿çš„æ–¹å‘åï¼Œç„¶åé€šè¿‡å–ä¸‰å‚ç›´çš„é¢æ¥è®¡ç®—æ‘„åƒæœºçš„å†…å‚çŸ©é˜µï¼Œåœ¨ä¸¤ä¸ªå‡è®¾ä¸‹æˆç«‹ã€‚ç„¶åé€šè¿‡æ³•å‘é‡å’Œå½±æ¶ˆçº¿çš„å…³ç³»ï¼Œå·²çŸ¥å½±æ¶ˆçº¿å°±å¯æ±‚å¹³é¢æ³•å‘é‡ï¼Œç„¶åé€šè¿‡p=MPï¼Œè·å¾—ä¸‰ç»´ç‚¹å°±å¯ä»¥ä¸‰ç»´é‡æ„äº†å—ï¼ŸæœŸå¾…è¯„è®ºå•è§†å›¾é‡æ„è¯¦ç»†è¿‡ç¨‹
æ¨èé˜…è¯»åšå®¢ï¼š&lt;a href="https://blog.csdn.net/Nismilesucc/article/details/121056910">å•è§†å›¾æµ‹é‡&lt;/a>
&lt;a name="VwLVo">&lt;/a>&lt;/p>
&lt;h2 id="harrisè§’ç‚¹">Harrisè§’ç‚¹&lt;/h2>
&lt;p>&lt;a href="https://www.bilibili.com/video/BV1nz4y197Qv">è§†é¢‘åœ°å€&lt;/a>
&lt;a name="Rx6wg">&lt;/a>&lt;/p>
&lt;h3 id="1-uvä¸euvçš„å…³ç³»">1. uvä¸Euvçš„å…³ç³»&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-63.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
é€šè¿‡è§‚å¯Ÿuvçš„å˜åŒ–è¿›è€Œè§‚å¯ŸE(u, v)çš„å˜åŒ–ï¼Œä»è€Œå‘ç°æ˜¯ä¸æ˜¯è§’ç‚¹ï¼Œä½†æ˜¯æ­¤å¤„ä¸æ–¹ä¾¿ï¼Œéƒ½éœ€è¦ç»è¿‡Iæ¥è®¡ç®—ï¼Œä¸‹é¢é€šè¿‡æ³°å‹’äºŒé˜¶å±•å¼€ï¼Œç®€åŒ–è¿ç®—
&lt;a name="NpI6o">&lt;/a>&lt;/p>
&lt;h3 id="2-æ³°å‹’å±•å¼€">2. æ³°å‹’å±•å¼€&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-64.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
å¾—åˆ°Mä¸Euvçš„å…³ç³»ï¼Œè¿›è€Œåªéœ€è¦åˆ†æMçŸ©é˜µ
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-65.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="dKqDb">&lt;/a>&lt;/p>
&lt;h3 id="mçŸ©é˜µå¯¹å˜åŒ–ç¨‹åº¦çš„å…³ç³»">MçŸ©é˜µå¯¹å˜åŒ–ç¨‹åº¦çš„å…³ç³»&lt;/h3>
&lt;p>Ræ˜¯æ—‹è½¬çŸ©é˜µä½¿å…¶å˜ä¸ºæ°´å¹³æ¤­åœ†ï¼Œ Î»æ˜¯æ–¹å‘å˜åŒ–å‰§çƒˆç¨‹åº¦ï¼Œå…¶å€¼è¶Šå¤§ï¼ˆÎ»1ï¼ŒÎ»2ï¼‰åˆ™å˜åŒ–è¶Šå¿«
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-66.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-67.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="NR12n">&lt;/a>&lt;/p>
&lt;h3 id="3-æ›´è¿›ä¸€æ­¥è½¬åŒ–">3. æ›´è¿›ä¸€æ­¥è½¬åŒ–&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-68.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="BkiH2">&lt;/a>&lt;/p>
&lt;h4 id="æ€»ç»“-3">æ€»ç»“&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-69.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ul>
&lt;li>Partially invariant to affine intensity change&lt;/li>
&lt;li>Corner location is covariant w.r.t. translation&lt;/li>
&lt;li>Corner location is covariant w.r.t. rotation&lt;/li>
&lt;li>Corner location is not covariant to scaling!&lt;br>
&lt;a name="AVnWo">&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="siftç‰¹å¾">SIFTç‰¹å¾&lt;/h2>
&lt;p>&lt;a name="pRCYJ">&lt;/a>&lt;/p>
&lt;h3 id="scale-selection">Scale selection&lt;/h3>
&lt;p>Spatial selection: the magnitude of the Laplacian response will achieve &lt;strong>a maximum at the center of the blob&lt;/strong>, provided the scale of the Laplacian is â€œ&lt;strong>matched&lt;/strong>â€ to the scale of the blob&lt;br>
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-70.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
The response of a derivative of Gaussian filter to a perfect step **edge decreases as Ïƒ increases **
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-71.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
To keep response the same (scale-invariant), must **multiply Gaussian derivative by Ïƒï¼Œ**å›ºå®šä¸º1/âˆš2Î 
Laplacian is the second Gaussian derivative, so it **must be multiplied by Ïƒ2 **
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-72.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="hDlGR">&lt;/a>&lt;/p>
&lt;h4 id="blob-detection-in-2d">Blob detection in 2D&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-73.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
å‰é¢å¬å®Œä¸€éæ²¡å¬æ‡‚ï¼Œå¯ä»¥å»26:30min
&lt;a name="lm8Lh">&lt;/a>&lt;/p>
&lt;h4 id="characteristic-scale-å°ºåº¦ç‰¹æ€§">Characteristic scale å°ºåº¦ç‰¹æ€§&lt;/h4>
&lt;p>æ‰¾åˆ°å¯¹åº”æ ¸åï¼Œå°±å¯ä»¥åœ¨å›¾ä¸­ç”»å‡ºå¯¹åº”åœ†åœˆï¼Œr=âˆš2Î Ïƒ
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-74.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="l5g8s">&lt;/a>&lt;/p>
&lt;h4 id="scale-space-blob-detector">Scale-space blob detector&lt;/h4>
&lt;p>ä¸‰ä¸ªå°ºåº¦ä¸ºä¸€ç»„è¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰å°ºåº¦å˜åŒ–Ïƒæœ€å¤§çš„é‚£ä¸ªç‚¹å¹¶ä¸”åœ¨3&lt;em>3&lt;/em>3-1ä¸ªç‚¹å†…æ˜¯å°ºåº¦å˜åŒ–Ïƒæœ€å¤§çš„ï¼Œæ‰è¾“å‡ºåœ†
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-75.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="vovnz">&lt;/a>&lt;/p>
&lt;h3 id="siftæ›´é«˜æ•ˆçš„åšæ³•">SIFTï¼Œæ›´é«˜æ•ˆçš„åšæ³•&lt;/h3>
&lt;p>åŸå…ˆç”¨æ‹‰æ™®æ‹‰æ–¯å¤ªè€—æ—¶ï¼Œå›¾ç‰‡è¶Šå¤§è®¡ç®—é‡è¶Šå¤§
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-76.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-77.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
ä¸‹å›¾å¬ä¸æ‡‚çš„è¯ç»§ç»­å¾€åå¬ï¼Œåœ¨è€å¸ˆé—®å¤§å®¶çš„æ—¶å€™ å›å¤3åé¢çš„æ—¶é—´è®²çš„å¾ˆæ¸…æ™° 1:09:20
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-78.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ol>
&lt;li>é¦–å…ˆDoGè¿‘ä¼¼äºæ‹‰æ™®æ‹‰æ–¯ç®—å­ï¼Œå®ƒåˆ©ç”¨å·®åˆ†æ¥é€¼è¿‘ï¼Œæ‰€ä»¥é€šè¿‡æ„é€ DoGå‡å°‘è¿ç®—é‡&lt;/li>
&lt;li>ä¸ºäº†è¾“å‡ºä¸€ä¸ªå°ºåº¦ç©ºé—´ï¼Œéœ€è¦ä¸‰ä¸ªDoGç»“æœï¼Œå› æ­¤å›¾ä¸­åªèƒ½è¾“å‡ºä¸¤ä¸ªå°ºåº¦ç©ºé—´kã€k2ï¼ˆæœ‰å¯èƒ½ä¼šå› ä¸ºnmsè€Œå‡å°‘ï¼Œæš‚ä¸è€ƒè™‘ï¼‰
&lt;ol>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-79.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;li>åŒç†ï¼š &lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-80.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;ol>
&lt;li>è¿™é‡Œå› ä¸ºä¸‹é‡‡æ ·äº†ï¼Œä¸ºäº†è·å¾—åŸå›¾çš„åœ†åŠå¾„å¤§å°ï¼Œæ‰€ä»¥ä¹˜ä»¥2 [1:12:10]&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>ä¸ºäº†ä½¿å…¶è¾“å‡ºçš„å°ºåº¦ç©ºé—´å¯ä»¥è¿ç»­ï¼Œå³æ˜ å°„åˆ°åæ ‡è½´ä¸Šæ˜¯ä¸€æ¡ç›´çº¿ï¼Œä»è€Œæ ¹æ®Ïƒæ¨å‡ºåŠå¾„rï¼Œè¿›è€Œæ¯”è¾ƒæœ€å¤§å€¼å‡ºç°åœ¨é‚£ä¸ªå°ºåº¦ç©ºé—´å†…ï¼Œä¸ºäº†å®Œæˆä¸Šè¿°çš„&lt;a href="https://keepjolly.com/archives/three-d-reconstruction-1/#UlNnH">Characteristic scale å°ºåº¦ç‰¹æ€§&lt;/a>ã€‚
&lt;ol>
&lt;li>æ€ä¹ˆè¿ç»­å‘¢ï¼Œæ—¢è®©$k=2^{1/s}$(sæ˜¯è¾“å‡ºçš„å°ºåº¦ç©ºé—´ä¸ªæ•°)ï¼Œå½“s=2æ—¶ï¼Œ$k\sigma , k^2\sigma ,2k\sigma ,2k^2\sigma = \sqrt{ 2} \sigma,2\sigma,2\sqrt{ 2} \sigma,4 \sigma$,ä»¥âˆš2å€çš„é€Ÿç‡ç¨³å®šå¢åŠ ï¼Œå½¢æˆç­‰æ¯”åºåˆ—&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>æ ¹æ®så¯å¾—DoGéœ€è¦S+2å±‚ï¼Œé«˜æ–¯å“åº”éœ€è¦S+3å±‚ï¼Œç„¶åè®¡ç®—å„ä¸ªk,k2,k3å³å¯&lt;/li>
&lt;li>ä¸‹é‡‡æ ·çš„å±‚æ˜¯é€šè¿‡å‰ä¸€ä¸ªé‡‡æ ·å±‚çš„å€’æ•°ç¬¬ä¸‰å±‚å¾—åˆ°ï¼Œå› ä¸ºç¬¬ä¸‰å±‚ï¼ˆç¬¬3æ¡.aå°ç‚¹ï¼‰æ˜¯$k^2\sigma = 2\sigma$ï¼Œè€Œä¸‹é‡‡æ ·ç¬¬ä¸€å±‚æ˜¯$\sigma$,ç›¸å·®ä¸¤å€ã€‚&lt;/li>
&lt;li>æœ‰äº†ä¸‹é‡‡æ ·å±‚å°±å¯ä»¥å‡å°‘è®¡ç®—é‡äº†ï¼Œå› ä¸ºåƒç´ ç‚¹å˜å°‘äº†
&lt;a name="g2xuV">&lt;/a>&lt;/li>
&lt;/ol>
&lt;h3 id="çœŸå®åº”ç”¨çš„æ”¹è¿›">çœŸå®åº”ç”¨çš„æ”¹è¿›&lt;/h3>
&lt;p>&lt;a name="Tlrbn">&lt;/a>&lt;/p>
&lt;h4 id="è§£å†³-affine-covariance">è§£å†³ affine covariance&lt;/h4>
&lt;p>åˆ©ç”¨MçŸ©é˜µè°ƒæ•´æ¢¯åº¦å¤§å°ï¼Œè®©å°Î»ç­‰äºå¤§Î» ï¼Œä½¿å…¶$\lambda1\lambda2$ä¸€è‡´ï¼Œæ¯æ¬¡è°ƒæ•´ä¸¤ä¸ªå€¼çš„æ—¶å€™ï¼ŒåŒæ—¶ä¿®æ”¹æ£€æµ‹åœ†çš„å¤§å°ï¼Œ
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-81.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="OK6lw">&lt;/a>&lt;/p>
&lt;h4 id="è§£å†³è§’åº¦é—®é¢˜">è§£å†³è§’åº¦é—®é¢˜&lt;/h4>
&lt;p>è®¡ç®—æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾åï¼Œå°†å…¶æ•´ä½“æ–¹å‘è½¬åˆ°åŒä¸€ä¸ªæ–¹å‘ï¼Œå³å¯æ¯”è¾ƒ
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-82.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-83.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="S2peS">&lt;/a>&lt;/p>
&lt;h4 id="è§£å†³å…‰ç…§é—®é¢˜">è§£å†³å…‰ç…§é—®é¢˜&lt;/h4>
&lt;p>&lt;strong>å°†å½’ä¸€åŒ–åçš„å›¾ç‰‡è®¡ç®—å„ä¸ªå±€éƒ¨æ ¼å­çš„æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾&lt;/strong>ï¼Œä¸ºä»€ä¹ˆä¸ç”¨å…¨å±€ç›´æ–¹å›¾æ˜¯å› ä¸ºæ›´ç»†è‡´ä¸€ç‚¹ï¼Œé˜²æ­¢å…¨å±€ä¸‹è™½ç„¶æ–¹å‘ä¸€è‡´ï¼Œä½†æ˜¯å±€éƒ¨å…¶å®ä¸å¤ªä¸€æ ·ã€‚ç”¨4Ã—4æ˜¯å› ä¸ºç²¾ç»†ç¨‹åº¦é€‚ä¸­ï¼Œå®éªŒç»“æœå¾—å‡ºã€‚
&lt;a name="uLp2j">&lt;/a>&lt;/p>
&lt;h4 id="åŒ¹é…é—®é¢˜">åŒ¹é…é—®é¢˜&lt;/h4>
&lt;p>è¿‘é‚»åŒ¹é…
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-84.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="oQ5oK">&lt;/a>&lt;/p>
&lt;h2 id="è¯†åˆ«è¯è¢‹æ¨¡å‹">è¯†åˆ«&amp;amp;è¯è¢‹æ¨¡å‹&lt;/h2>
&lt;p>&lt;a name="BJ9o3">&lt;/a>&lt;/p>
&lt;h3 id="è§†è§‰ä»»åŠ¡">è§†è§‰ä»»åŠ¡&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-85.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="MGz4J">&lt;/a>&lt;/p>
&lt;h4 id="éš¾ç‚¹">éš¾ç‚¹&lt;/h4>
&lt;ul>
&lt;li>ç±»åˆ«å¤š&lt;/li>
&lt;li>è§†è§‰å˜æ¢å¤§&lt;/li>
&lt;li>å…‰ç…§&lt;/li>
&lt;li>å°ºåº¦&lt;/li>
&lt;li>å½¢å˜&lt;/li>
&lt;li>é®æŒ¡&lt;/li>
&lt;li>ç‰©ä½“å’Œç¯å¢ƒç›¸ä¼¼ background clutter&lt;/li>
&lt;li>åŒä¸ªç±»åˆ«ä¸åŒå½¢çŠ¶ intra-class variation&lt;br>
&lt;a name="aqDvU">&lt;/a>&lt;/li>
&lt;/ul>
&lt;h4 id="åŸºæœ¬é—®é¢˜">åŸºæœ¬é—®é¢˜&lt;/h4>
&lt;p>&lt;a name="fZSdt">&lt;/a>&lt;/p>
&lt;h5 id="representation">Representation&lt;/h5>
&lt;ul>
&lt;li>ç”¨å±€éƒ¨ç‰¹å¾æ¥è¡¨ç¤ºä¸€ä¸ªç‰©ä½“&lt;/li>
&lt;li>ç‰¹å¾ç›´æ¥æ”¾åˆ°è¯è¢‹å†…æˆ–è€…å­˜å‚¨ç‰¹å¾çš„ç›¸ä¼¼å…³ç³»
&lt;ul>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-86.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>è§£å†³æ–¹æ³•
&lt;ul>
&lt;li>å¤„ç†intra-class å˜åŒ–ï¼Œä½¿ç”¨æ¦‚ç‡æ¨¡å‹&lt;/li>
&lt;li>å¸¸ç”¨æ–¹æ³•ï¼šäº§ç”Ÿå¼ã€åˆ¤åˆ«å¼ã€æ··åˆå¼
&lt;ul>
&lt;li>äº§ç”Ÿå¼æ˜¯åˆ©ç”¨åŒä¸ªç‰©ä½“çš„ç‰¹å¾ç›¸ä¼¼åº¦&lt;/li>
&lt;li>åˆ¤åˆ«å¼æ˜¯åˆ©ç”¨ä¸åŒç‰©ä½“çš„ç‰¹å¾å·®å¼‚æ€§
&lt;a name="ItqzP">&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h5 id="learning">Learning&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-87.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="ZIUgZ">&lt;/a>&lt;/p>
&lt;h5 id="recognition">Recognition&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-88.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="Nz4FC">&lt;/a>&lt;/p>
&lt;h4 id="how-to-represent-an-object-category">How to represent an object category;&lt;/h4>
&lt;p>å°†å›¾ç‰‡è¡¨ç¤ºæˆä¸€ä¸ªå‘é‡
&lt;a name="p1SF5">&lt;/a>&lt;/p>
&lt;h5 id="bag-of-features-models">Bag-of-features models&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090143-89.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E7%A0%94%E7%A9%B6%E7%94%9F%E5%86%85%E5%AE%B9/">ç ”ç©¶ç”Ÿå†…å®¹</category><category domain="https://keepjolly.com/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</category><category domain="https://keepjolly.com/tags/%E4%B8%89%E7%BB%B4%E9%87%8D%E5%BB%BA/">ä¸‰ç»´é‡å»º</category></item><item><title>C++å­¦ä¹ </title><link>https://keepjolly.com/archives/cplusplus-learn/</link><guid isPermaLink="true">https://keepjolly.com/archives/cplusplus-learn/</guid><pubDate>Sun, 26 Mar 2023 09:06:56 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>source insight&lt;/p>
&lt;h2 id="c-æ¦‚æ‹¬">C++ æ¦‚æ‹¬&lt;/h2>
&lt;p>C++ä¼˜ç‚¹&lt;/p>
&lt;ul>
&lt;li>å¼ºå¤§çš„å°è£…èƒ½åŠ›ï¼šæ—¢æœ‰å¼€å‘å·¥ç¨‹èƒ½åŠ›ï¼Œåˆä¿ç•™é«˜æ€§èƒ½&lt;/li>
&lt;li>é«˜æ€§èƒ½ï¼šè¿è¡Œå¿«ï¼Œå¿«å¹¶ä¸”å ç”¨èµ„æºå°‘æ˜¯C++çš„è¿½æ±‚&lt;/li>
&lt;li>ä½åŠŸè€—ï¼šé€‚åˆåµŒå…¥å¼&lt;/li>
&lt;/ul>
&lt;p>C++ç¼ºç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>è¯­æ³•å¤æ‚ï¼Œç»†èŠ‚å¤š&lt;/li>
&lt;li>éœ€è¦å¥½çš„è§„èŒƒå’ŒèŒƒå¼&lt;/li>
&lt;/ul>
&lt;h2 id="c-åŸºç¡€è¯­æ³•">C++ åŸºç¡€è¯­æ³•&lt;/h2>
&lt;h3 id="ç¼–ç¨‹è¯­è¨€å±‚æ¬¡">ç¼–ç¨‹è¯­è¨€å±‚æ¬¡&lt;/h3>
&lt;ol>
&lt;li>æœºå™¨è¯­è¨€ï¼Œæ±‡ç¼–è¯­è¨€&lt;/li>
&lt;li>ç¼–è¯‘å‹è¯­è¨€ C++ï¼ŒC
&lt;ol>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090137.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>è§£é‡Šå‹è¯­è¨€ Basic Python Java&lt;/li>
&lt;li>è„šæœ¬è¯­è¨€ bash csh&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>é€çº§è¿è¡Œæ•ˆç‡ä½ï¼Œæ›´æ˜“ç†è§£&lt;/li>
&lt;/ul>
&lt;h3 id="æ•°æ®ç±»å‹">æ•°æ®ç±»å‹&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090137-1.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
ç–‘é—®ï¼Œä¸ºä»€ä¹ˆ64ä½ä¸‰ä¸ªå­—èŠ‚å¯¹é½&lt;/p>
&lt;h3 id="å¸¸é‡">å¸¸é‡&lt;/h3>
&lt;p>å®šä¹‰å¸¸é‡çš„æ–¹æ³•ï¼š&lt;/p>
&lt;ul>
&lt;li>#defineï¼š #define PI 3.14159
&lt;ul>
&lt;li>#define MA(x) x*(x-1)&lt;/li>
&lt;li>MA(1 + (a + b)) = 1+(a+b)*(1+(a+b)-1)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>constï¼šconst double PI = 3.14159 ï¼ˆæ¨èï¼‰&lt;/li>
&lt;/ul>
&lt;p>æ•´æ•°å¸¸é‡å‰ç¼€ï¼š0x åå…­è¿›åˆ¶ã€0 å…«è¿›åˆ¶ã€0b
æ•´æ•°å¸¸é‡åç¼€ï¼šu(unsigned)ã€l(long)ã€å¯ç»„åˆä½¿ç”¨ï¼Œå¤§å°å†™ä»»æ„
å­—ç¬¦å¸¸é‡ï¼šå•å¼•å·æ‹¬èµ·æ¥ï¼Œç”¨Lï¼ˆå¿…é¡»å¤§å†™ï¼‰è¡¨ç¤ºå®½å­—ç¬¦å¸¸é‡&lt;/p>
&lt;h2 id="è¿ç®—ç¬¦ä¸è¡¨è¾¾å¼">è¿ç®—ç¬¦ä¸è¡¨è¾¾å¼&lt;/h2>
&lt;h3 id="å…³ç³»è¿ç®—ç¬¦">å…³ç³»è¿ç®—ç¬¦&lt;/h3>
&lt;p>A == B å…¶å€¼ä¸ºboolç±»å‹ è€Œç›´æ¥åˆ¤æ–­ä¸º1ä¸ºintç±»å‹ï¼Œæ³¨æ„ç©ºé—´å¤§å°&lt;/p>
&lt;h3 id="æ‚é¡¹è¿ç®—ç¬¦">æ‚é¡¹è¿ç®—ç¬¦&lt;/h3>
&lt;p>ï¼Œï¼šé¡ºåºæ‰§è¡Œä¸€ç³»åˆ—è¿ç®—åï¼Œå–æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼ˆint o = a,b,cï¼‰&lt;/p>
&lt;h3 id="è¡¥ç ">è¡¥ç &lt;/h3>
&lt;p>æ­£æ•°åŸè¡¥åç ä¸€è‡´
è´Ÿæ•°&lt;/p>
&lt;ul>
&lt;li>åç æ˜¯åŸç é™¤ç¬¦å·ä½å–åï¼Œè¡¥ç =åç +1ï¼Œåç =è¡¥ç -1&lt;/li>
&lt;li>äºŒè¿›åˆ¶toè¡¥ç ï¼š$B 2 T_{w}(\vec{x}) \stackrel{.}{=} x_{w-1} 2^{w-1}+\sum_{i=0}^{w-2} x_{i} 2^{i}$&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://bbs.huaweicloud.com/blogs/280855">ä¸€æ–‡ææ¸…äºŒè¿›åˆ¶è¡¥ç &lt;/a>&lt;/p>
&lt;h3 id="å­—èŠ‚åº">å­—èŠ‚åº&lt;/h3>
&lt;p>ä¸€ä¸ªå­—åœ¨å†…å­˜ä¸­å¦‚ä½•ä»¥byteå­˜æ”¾&lt;/p>
&lt;ul>
&lt;li>å¤§ç«¯æ³•ï¼šå¤§å¤šæ•°IBMæœºå™¨ã€ç½‘ç»œä¼ è¾“ï¼Œæ­£åºå­˜æ”¾ 8f ff ff ff&lt;/li>
&lt;li>å°ç«¯æ³•ï¼šIntelå…¼å®¹æœºï¼Œé€†åºå­˜æ”¾ï¼Œä½†å­—èŠ‚å†…æ­£åº ff ff ff 8f&lt;/li>
&lt;/ul>
&lt;h3 id="ä½è¿ç®—">ä½è¿ç®—&lt;/h3>
&lt;h2 id="cé™·é˜±å’Œcæ”¹è¿›">Cé™·é˜±å’ŒC++æ”¹è¿›&lt;/h2>
&lt;h3 id="charè¯­æ³•é™·é˜±">charè¯­æ³•é™·é˜±&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">c1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æˆªæ–­ï¼š1.ä¿ç•™ç¬¬ä¸€ä¸ªå­—ç¬¦ 2.ä¿ç•™ç¬¬äºŒä¸ªå­—ç¬¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">c1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// char* 32biæœºå™¨å 4ä½ï¼Œ64å 8ä½ï¼Œä¸ºäº†æœç´¢æ•´ä¸ªåœ°å€ç©ºé—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">s1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ==&amp;gt; &amp;#39;/&amp;#39;&amp;#39;\0&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// const char* s2 = &amp;#39;/&amp;#39;; å­—ç¬¦å¸¸é‡-&amp;gt;char* ç±»å‹ä¸åŒ¹é…
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">s2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">c1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// C++ æ”¹è¿›ï¼Œ string åœ¨namespace stdä¸­
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">s1&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// s
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">s2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;yes&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// yes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ•°ç»„é€€åŒ–é™·é˜±">æ•°ç»„é€€åŒ–é™·é˜±&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;vector&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">// double average1(int arr[10], int len) {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">double&lt;/span> &lt;span class="nf">average1&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">arr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// Cï¼šæ•°ç»„é€€åŒ–æˆæŒ‡é’ˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ä¼ é€’charæ•°ç»„å¯ä»¥é€šè¿‡è®¡ç®—åˆ°&amp;#39;\0&amp;#39;çš„é•¿åº¦æ¥ä¸å€ŸåŠ©len
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å½¢å‚arr[10]å˜ä¸ºintæŒ‡é’ˆ,arr[0]ä¸ºintç±»å‹ =&amp;gt; len = 4/4 = 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// int len = sizeof(arr) / sizeof(arr[0]);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// C++ æ”¹è¿›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">double&lt;/span> &lt;span class="nf">average3&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">double&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;::&lt;/span>&lt;span class="n">iterator&lt;/span> &lt;span class="n">it&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">begin&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// auto it = v.begin();
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(;&lt;/span> &lt;span class="n">it&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">double&lt;/span> &lt;span class="nf">average2DV&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&amp;amp;&lt;/span> &lt;span class="n">vv&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">double&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">unsigned&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">unsigned&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">vv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">unsigned&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">vv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">vv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">size&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">vv&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// +&amp;#39; &amp;#39;è‡ªåŠ¨å˜ä¸ºint
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">size&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">50&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// std::cout &amp;lt;&amp;lt; average1(arr, len) &amp;lt;&amp;lt; std::endl;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">vt&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">average3&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vt&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">vv&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">average2DV&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vv&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç§»ä½é—®é¢˜">ç§»ä½é—®é¢˜&lt;/h3>
&lt;p>é—®é¢˜ï¼š
é€»è¾‘å³ç§»è¿˜æ˜¯ç®—æ•°å³ç§» -&amp;gt; å³ç§»åªå¯¹æ— ç¬¦å·æ•°
ç§»ä½æ“ä½œä½æ•°çš„é™åˆ¶ -&amp;gt; ç§»ä½æ•°å¤§äº0ï¼Œ å°äºä½æ•°&lt;/p>
&lt;ul>
&lt;li>Cä¸­éœ€è¦è€ƒè™‘æ•´æ•°ç§»ä½ä¸Šä¸‹æ–‡æƒ…å†µï¼ˆæœ‰æ— ç¬¦å·æ•°ï¼Œç±»å‹å å­—èŠ‚æ•°ï¼‰&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;bitset&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">a1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mh">0x63&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 0110 0011
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">a1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a1&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 0000 0110 é€»è¾‘å³ç§»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;0x%x&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">a2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mh">0x95&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 1001 0101
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">a2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a2&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 1111 1001 ç®—æ³•å³ç§»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;0x%x&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">unsigned&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="n">a3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mh">0x95&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 1001 0101 Cå»ºè®®å…ˆè½¬æ— ç¬¦å·å†å³ç§»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">a3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a3&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 0000 1001 é€»è¾‘å³ç§»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;0x%x&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a3&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//const unsigned char priv = 0xff;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//const unsigned char P_BACKUP = (1 &amp;lt;&amp;lt; 7);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//const unsigned char P_ADMIN = (1 &amp;lt;&amp;lt; 8); // è¶…è¿‡charä½æ•°-&amp;gt; =0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//// åˆ¤æ–­ç”¨æˆ·æƒé™çš„æŠ€å·§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//if (priv &amp;amp; P_BACKUP) cout &amp;lt;&amp;lt; &amp;#34;BACKUP&amp;#34; &amp;lt;&amp;lt; endl;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// C++ æ”¹è¿›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">bitset&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">priv&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mh">0xff&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bitset&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">P_BACKUP&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bitset&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">P_ADMIN&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// è¶…è¿‡charä½æ•°-&amp;gt; =0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// åˆ¤æ–­ç”¨æˆ·æƒé™çš„æŠ€å·§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">priv&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">P_BACKUP&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">P_BACKUP&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;BACKUP&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç±»å‹è½¬æ¢é—®é¢˜">ç±»å‹è½¬æ¢é—®é¢˜&lt;/h3>
&lt;p>Cç¼ºé™·ï¼šéšå¼è½¬æ¢é—®é¢˜ï¼ˆsizeof(unsigned long long) è·Ÿintæ¯”è¾ƒï¼Œintè½¬æ¢ä¸ºunsigned intï¼‰ã€doubleé™¤æ³•é—®é¢˜
C++æ”¹è¿›ï¼šstatic_castã€const_castã€dynamic_castã€reinterpret_castï¼Œå»ºè®®å°½é‡å°‘ä½¿ç”¨è½¬æ¢ï¼Œå¤šé•¿å•Š&lt;/p>
&lt;h3 id="æº¢å‡ºé—®é¢˜">æº¢å‡ºé—®é¢˜&lt;/h3>
&lt;p>Cæ•´æ•°å›ºå®šä¸ºintæ‰€å å­—èŠ‚ï¼Œæº¢å‡ºä¼šæœ‰é—®é¢˜
C++ï¼šä½¿ç”¨booståº“çš„cpp_int&lt;/p>
&lt;h3 id="å­—ç¬¦ä¸²é—®é¢˜">å­—ç¬¦ä¸²é—®é¢˜&lt;/h3>
&lt;p>C ä»¥'\0'ç»“å°¾ï¼Œé‡åˆ°å³åœæ­¢ï¼Œå¿½è§†å…¶åé¢çš„å€¼ï¼Œè¿è¡Œæ•ˆç‡ä½ï¼Œåªèƒ½ä»¥'\0'è¡¨ç¤ºå­—ç¬¦ä¸²ç»“æŸ
C++ï¼šstringåº“ï¼ˆä»ä¿ç•™'\0'ï¼‰ã€redisåº“ï¼ˆç”¨å¤šä¸ªç»“æ„ä½“ä¼˜åŒ–å­˜å‚¨ç©ºé—´ï¼Œå¹¶ç”¨lené˜²æ­¢'\0'é—®é¢˜ï¼‰
å­—ç¬¦ä¸²æ¯”è¾ƒ &amp;gt;&amp;lt; æ¯”è¾ƒçš„æ˜¯é¦–åœ°å€å¤§å°&lt;/p>
&lt;h3 id="å¤´æ–‡ä»¶é¡ºåº">å¤´æ–‡ä»¶é¡ºåº&lt;/h3>
&lt;ul>
&lt;li>ç³»ç»Ÿçš„å¤´æ–‡ä»¶è¦æ”¾åœ¨æœ€å‰é¢ï¼›&lt;/li>
&lt;li>å…¶æ¬¡æ˜¯è¯­è¨€ç›¸å…³çš„ï¼›&lt;/li>
&lt;li>ç„¶åæ¯”è¾ƒå¤è€çš„ç¬¬ä¸‰æ–¹åº“å¤´æ–‡ä»¶ï¼›&lt;/li>
&lt;li>æ¯”è¾ƒæ–°çš„ç¬¬ä¸‰æ–¹åº“å¤´æ–‡ä»¶ï¼›&lt;/li>
&lt;li>æœ€åæ‰æ˜¯è‡ªå®šä¹‰çš„å¤´æ–‡ä»¶ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="åŸºç¡€å®¹å™¨">åŸºç¡€å®¹å™¨&lt;/h2>
&lt;h3 id="æ•°ç»„å·®ä¸€é”™è¯¯">æ•°ç»„ï¼ˆå·®ä¸€é”™è¯¯ï¼‰&lt;/h3>
&lt;ul>
&lt;li>off-by-one error
&lt;ul>
&lt;li>è§£å†³æ€è·¯ï¼šå…ˆè€ƒè™‘ç®€å•ç‰¹ä¾‹ï¼Œç„¶åå¤–æ¨ç»“æœï¼›ä»”ç»†è®¡ç®—è¾¹ç•Œ&lt;/li>
&lt;li>åˆ¤æ–­èŒƒå›´æ—¶é‡‡å–å·¦é—­å³å¼€ï¼Œä½¿å…¶ç›¸å‡ä¸ºå…ƒç´ ä¸ªæ•° for (int i =0; i&amp;lt;10; i++)&lt;/li>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090137-2.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://blog.csdn.net/caomiao2006/article/details/7401833">æ•°ç»„çš„ä¸‹æ ‡è®¿é—®å’ŒæŒ‡é’ˆè®¿é—®æ–¹å¼æ•ˆç‡åˆ†æ&lt;/a>
äºŒç»´æ•°ç»„è®¿é—®æ—¶çš„åŸåˆ™ï¼šå°½å¯èƒ½æ»¡è¶³ç©ºé—´å±€éƒ¨æ€§&lt;/p>
&lt;ul>
&lt;li>åœ¨ä¸€ä¸ªå°çš„æ—¶é—´çª—å£å†…ï¼Œè®¿é—®çš„å˜é‡åœ°å€è¶Šæ¥è¿‘è¶Šå¥½ï¼Œæ‰§è¡Œé€Ÿåº¦è¶Šå¿«&lt;/li>
&lt;li>ä¸€èˆ¬å°†æœ€é•¿çš„å¾ªç¯æ”¾æœ€å†…å±‚ï¼Œæœ€çŸ­çš„æ”¾æœ€å¤–å±‚ï¼Œä»¥å‡å°‘CPUè·¨åˆ‡å¾ªç¯å±‚çš„æ¬¡æ•°&lt;/li>
&lt;/ul>
&lt;h4 id="vector">vector&lt;/h4>
&lt;h3 id="å­—ç¬¦ä¸²">å­—ç¬¦ä¸²&lt;/h3>
&lt;p>è¡¨ç¤ºUnicodeå­—ç¬¦é›†ï¼š&lt;/p>
&lt;ul>
&lt;li>UTF-8ï¼š1byteè¡¨ç¤ºå­—ç¬¦ï¼Œå…¼å®¹ASCIIç ï¼›ç‰¹ç‚¹æ˜¯å­˜å‚¨æ•ˆç‡é«˜ï¼Œå˜é•¿ï¼ˆä¸æ–¹ä¾¿å†…éƒ¨éšæœºè®¿é—®ï¼‰ï¼Œæ— å­—èŠ‚åºé—®é¢˜ï¼ˆä½œä¸ºå¤–éƒ¨ç¼–ç ï¼Œä¾›å…¶ä»–å¹³å°ä½¿ç”¨Linuxï¼‰
&lt;ul>
&lt;li>å¾®è½¯å¹³å°ä¸‹åˆç»†åˆ†ä¸ºUTF-8-BOMï¼ŒäºŒè¿›åˆ¶é¦–ä½ä¸ºEF BB BFï¼Œå¯èƒ½åœ¨å…¶ä»–å¹³å°æœ‰é—®é¢˜ï¼Œå¯ä»¥åˆ å»é¦–ä½æ¥é€‚é…&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>UTF-16ï¼šåˆ†ä¸ºUTF-16BD(big endian)ã€UTF-16LD(little endian)ï¼›ç‰¹ç‚¹æ˜¯å®šé•¿ï¼ˆæ–¹ä¾¿å†…éƒ¨éšæœºè®¿é—®ï¼‰ï¼Œæœ‰&lt;a href="https://keepjolly.com/archives/cplusplus-learn/#UlvJH">å­—èŠ‚åº&lt;/a>é—®é¢˜ã€‚
&lt;ul>
&lt;li>BDæ–‡ä»¶çš„äºŒè¿›åˆ¶é¦–ä½ä¸ºFE FFã€LDä¸ºFF FEï¼ˆæ­£åºï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>UTF-32ï¼šåˆ†ä¸ºUTF-32BDã€UTF-32LDï¼›ç‰¹ç‚¹åŒä¸Š&lt;/li>
&lt;/ul>
&lt;p>å­—ç¬¦ä¸²çš„æŒ‡é’ˆè¡¨ç¤ºæ–¹æ³•&lt;/p>
&lt;ul>
&lt;li>char[] å’Œ char*çš„åŒºåˆ«ï¼š
&lt;ol>
&lt;li>char[] åœ°å€ä¸å¯å˜ å…¶å†…çš„å€¼å¯å˜&lt;/li>
&lt;li>char* åœ°å€å¯å˜ï¼Œå…¶å†…çš„å€¼å–å†³äºæ‰€æŒ‡å­˜å‚¨åŒºåŸŸæ˜¯å¦å¯å˜&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ul>
&lt;h4 id="å¸¸ç”¨å‡½æ•°å®‰å…¨é—®é¢˜">å¸¸ç”¨å‡½æ•°å®‰å…¨é—®é¢˜&lt;/h4>
&lt;ul>
&lt;li>strlenã€strcpyç­‰æ²¡æœ‰å¯¹è¾¹ç•Œæ£€æŸ¥å®¹æ˜“å¯¼è‡´ç¼“å†²åŒºæº¢å‡ºï¼Œä¿®æ”¹ä¸€äº›å€¼&lt;/li>
&lt;li>ä¿®æ”¹ä¸ºstrlen_sã€strcpy_sç­‰å‡½æ•°&lt;/li>
&lt;li>è°ƒè¯•æ—¶åŠ å…¥_CRT_SECURE_NO_WARNINGS&lt;/li>
&lt;/ul>
&lt;h3 id="string-å’Œ-char">String å’Œ char*&lt;/h3>
&lt;p>char* / char[] ï¼š&lt;/p>
&lt;ul>
&lt;li>strcpy_s æ‹·è´&lt;/li>
&lt;li>strlen å­—ç¬¦ä¸²é•¿åº¦&lt;/li>
&lt;li>strcat æ‹¼æ¥&lt;/li>
&lt;li>strcmp æ¯”è¾ƒASCIIç &lt;/li>
&lt;/ul>
&lt;p>Stringï¼š&lt;/p>
&lt;ul>
&lt;li>=&lt;/li>
&lt;li>str.size() \ str.length()&lt;/li>
&lt;li>+=&lt;/li>
&lt;li>==&lt;/li>
&lt;li>str.capacity() å®¹é‡ï¼Œè‡ªåŠ¨æ‰©å®¹&lt;/li>
&lt;/ul>
&lt;p>ç›¸æ¯”æ¥è¯´String æ€§èƒ½ä¸æ˜¯ç‰¹åˆ«å¥½&lt;/p>
&lt;h2 id="cæŒ‡é’ˆ">C++æŒ‡é’ˆ&lt;/h2>
&lt;p>æŒ‡é’ˆå ç”¨ç©ºé—´ç”±æ“ä½œç³»ç»Ÿä½æ•°å†³å®šï¼Œå› ä¸ºè¦æŒ‡å‘æ‰€æœ‰åœ°å€&lt;/p>
&lt;h3 id="å·¦å€¼ä¸å³å€¼">å·¦å€¼ä¸å³å€¼&lt;/h3>
&lt;p>å·¦å€¼ä¸ºç¼–è¯‘å™¨ä¸ºå…¶å•ç‹¬åˆ†é…ä¸€å—å­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥å–å…¶åœ°å€ã€‚å¯ä»¥æ”¾åœ¨ä»»æ„ä¾§èµ‹å€¼è¿ç®—ç¬¦&lt;/p>
&lt;ul>
&lt;li>å‡½æ•°æˆ–æ•°æ®æˆå‘˜çš„åå­—&lt;/li>
&lt;/ul>
&lt;p>å³å€¼ä¸ºæ•°æ®æœ¬èº«ï¼Œä¸èƒ½å–å…¶åœ°å€ã€‚åªèƒ½æ”¾åœ¨èµ‹å€¼è¿ç®—ç¬¦å³ä¾§ã€‚&lt;/p>
&lt;ul>
&lt;li>æ²¡æœ‰æ ‡è¯†ç¬¦(å˜é‡å)ï¼Œä¸å¯ä»¥&amp;amp;å–åœ°å€çš„è¡¨è¾¾å¼ï¼Œä¸€èˆ¬ç§°ä¸ºâ€œä¸´æ—¶å¯¹è±¡â€ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="æŒ‡é’ˆåˆ†ç±»">æŒ‡é’ˆåˆ†ç±»&lt;/h3>
&lt;h4 id="æ•°ç»„æŒ‡é’ˆ">æ•°ç»„æŒ‡é’ˆ&lt;/h4>
&lt;p>array of pointersï¼š&lt;/p>
&lt;ul>
&lt;li>int* a[4]ï¼ŒåŒ…å«å››ä¸ªæŒ‡é’ˆçš„aæ•°ç»„&lt;/li>
&lt;li>è¾“å‡ºç»“æœï¼š*(a[3])&lt;/li>
&lt;/ul>
&lt;p>a pointer to an arrayï¼š&lt;/p>
&lt;ul>
&lt;li>int (*a)[4]ï¼ŒæŒ‡å‘ä¸€ä¸ªåŒ…å«å››ä¸ªå€¼çš„æ•°ç»„ï¼Œå…¶ä¸­4è¦ä¸æ•°ç»„ä¸ªæ•°åŒ¹é…&lt;/li>
&lt;li>è¾“å‡ºç»“æœï¼š(*a)[3] -&amp;gt; array[3] &amp;lt;=&amp;gt; *(array+3) &amp;lt;=&amp;gt; array[3]&lt;/li>
&lt;li>åŒæ ·çš„
&lt;ul>
&lt;li>int *a = array&lt;/li>
&lt;li>è¾“å‡ºç»“æœï¼š*(a+3)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="constæŒ‡é’ˆ">constæŒ‡é’ˆ&lt;/h4>
&lt;p>constä¿®é¥°çš„éƒ¨åˆ†ä¸ºä¸å¯ä¿®æ”¹å†…å®¹ï¼Œå…¶ä¿®é¥°çš„éƒ¨åˆ†çœ‹å·¦ä¾§æœ€è¿‘çš„éƒ¨åˆ†ï¼Œå¦‚æœå·¦ä¾§æ²¡æœ‰ï¼Œåˆ™çœ‹å³ä¾§&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;#34;stdafx.h&amp;#34;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">unsigned&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_LEN&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">strHelloworld&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="s">&amp;#34;helloworld&amp;#34;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä¸strHelloWorldå˜é‡å…±äº«å†…å­˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">pStr1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;helloworld&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// const char* ä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„charå†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// å¯¼è‡´æ­¤å¤„èµ‹å€¼åä½¿å¾—pStr1æŒ‡å‘çš„ç©ºé—´å¯è¢«ä¿®æ”¹ï¼Œä¸èƒ½åªè¯»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="n">pStr2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">strHelloworld&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆå€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="k">const&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="n">pStr3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;helloworld&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// const char* const ä¸èƒ½ä¿®æ”¹å†…å®¹å’ŒæŒ‡é’ˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">pStr1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">strHelloworld&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//pStr2 = strHelloworld; // pStr2ä¸å¯æ”¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//pStr3 = strHelloworld; // pStr3ä¸å¯æ”¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">unsigned&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">strnlen_s&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pStr2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">MAX_LEN&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">len&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">unsigned&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">index&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//pStr1[index] += 1; // pStr1é‡Œçš„å€¼ä¸å¯æ”¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">pStr2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//pStr3[index] += 1; // pStr3é‡Œçš„å€¼ä¸å¯æ”¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å¤šçº§æŒ‡é’ˆ">å¤šçº§æŒ‡é’ˆ&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span>&lt;span class="o">**&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// *æœ‰ä»å³å‘å·¦çš„ç»“åˆæ€§ï¼Œä¸æ¸…æ¥šä¼˜å…ˆçº§å°±ç”¨æ‹¬å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="é‡æŒ‡é’ˆ">é‡æŒ‡é’ˆ&lt;/h4>
&lt;p>æœªåˆå§‹åŒ–çš„æŒ‡é’ˆ&lt;/p>
&lt;ul>
&lt;li>å¯èƒ½å¯¼è‡´æ— æ³•å®šä½é”™è¯¯&lt;/li>
&lt;li>ç”¨æŒ‡é’ˆè¿›è¡Œé—´æ¥è®¿é—®æ—¶ï¼Œç¡®ä¿è®¿é—®çš„å€¼å·²è¢«åˆå§‹åŒ–èµ‹å€¼&lt;/li>
&lt;/ul>
&lt;p>NULLæŒ‡é’ˆ&lt;/p>
&lt;ul>
&lt;li>åˆå§‹åŒ–æŒ‡é’ˆï¼Œä½¿å…¶æ— åœ°å€&lt;/li>
&lt;li>å¯¹æŒ‡é’ˆè¿›è¡Œé—´æ¥å¼•ç”¨æ—¶ï¼Œæœ€å¥½åˆ¤æ–­æŒ‡é’ˆæ˜¯å¦NULL&lt;/li>
&lt;li>ä¸ç”¨ï¼Œæ²¡æœ‰åˆå§‹åŒ–ï¼Œè¶…å‡ºèŒƒå›´æ—¶ï¼Œä½¿å…¶NULL&lt;/li>
&lt;/ul>
&lt;p>é‡æŒ‡é’ˆåˆ†ç±»&lt;/p>
&lt;ul>
&lt;li>æŒ‡é’ˆå˜é‡æ²¡æœ‰åˆå§‹åŒ–&lt;/li>
&lt;li>å·²ç»é‡Šæ”¾ä¸ç”¨çš„æŒ‡é’ˆæ²¡æœ‰ç½®NULL&lt;/li>
&lt;li>æŒ‡é’ˆæ“ä½œè¶…è¶Šäº†å˜é‡çš„ä½œç”¨èŒƒå›´ï¼ŒæŒ‡å‘ä¸ç¡®å®šçš„ç©ºé—´&lt;/li>
&lt;/ul>
&lt;h3 id="æŒ‡é’ˆåŸºæœ¬æ“ä½œ">æŒ‡é’ˆåŸºæœ¬æ“ä½œ&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span> &lt;span class="n">ch&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sc">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">ch&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ++,--æ“ä½œç¬¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">cp2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">cp&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">cp3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cp&lt;/span>&lt;span class="o">++;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">cp4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">cp&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">cp5&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cp&lt;/span>&lt;span class="o">--;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ++ å·¦å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//++cp2 = 97;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//cp2++ = 97;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// *++, ++*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">*++&lt;/span>&lt;span class="n">cp2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">98&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// cp2åœ°å€åŠ 1åèµ‹å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">ch3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">*++&lt;/span>&lt;span class="n">cp2&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// cp2åœ°å€åŠ 1åå°†å¼•ç”¨çš„å€¼ç»™å·¦å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">cp2&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">98&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// å°†cp2æŒ‡å‘çš„ç©ºé—´èµ‹å€¼ååœ°å€åŠ 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">ch4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">cp2&lt;/span>&lt;span class="o">++;&lt;/span> &lt;span class="c1">// å°†cpå¼•ç”¨çš„å€¼ç»™å·¦å€¼ååœ°å€åŠ 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ++++, ----æ“ä½œç¬¦ç­‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//c = a++b; // error
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// è´ªå¿ƒæ³•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//d = a++++b; // error
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">char&lt;/span> &lt;span class="n">ch5&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">++*++&lt;/span>&lt;span class="n">cp&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="c1">// 1.å…ˆcpåœ°å€+1, 2.å¾—åˆ°å…¶å¼•ç”¨çš„å€¼, 3.å€¼+1, 4.èµ‹ç»™å·¦å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a href="https://www.iteye.com/blog/hzdiy-736816">delete and delete[]&lt;/a>ã€åˆ é™¤æŒ‡é’ˆåå¹¶ä¸ä¼šç½®ä¸ºnullptr
å¯¹äºåƒ int/char/long/int*/struct ç­‰ç­‰ç®€å•æ•°æ®ç±»å‹ï¼Œç”±äºå¯¹è±¡æ²¡æœ‰ destructorï¼Œæ‰€ä»¥ç”¨ delete å’Œ delete [] æ˜¯ä¸€æ ·çš„ï¼ä½†æ˜¯å¦‚æœæ˜¯C++ å¯¹è±¡æ•°ç»„å°±ä¸åŒäº†ï¼&lt;/p>
&lt;h3 id="å†…å­˜åˆ†é…">å†…å­˜åˆ†é…&lt;/h3>
&lt;p>&lt;img src="https://cdn.nlark.com/yuque/0/2023/png/12600461/1676602885720-04081f99-124e-471a-b4c2-ae6ad1b73d69.png#averageHue=%23fbd26b&amp;amp;clientId=u4e1a1f95-50a9-4&amp;amp;from=paste&amp;amp;height=439&amp;amp;id=uacc70f9e&amp;amp;name=image.png&amp;amp;originHeight=439&amp;amp;originWidth=453&amp;amp;originalType=binary&amp;amp;ratio=1&amp;amp;rotation=0&amp;amp;showTitle=false&amp;amp;size=67840&amp;amp;status=done&amp;amp;style=none&amp;amp;taskId=uf57f9d7d-4d1e-4042-9966-df9a6ba186e&amp;amp;title=&amp;amp;width=453" alt="image.png">&lt;/p>
&lt;ul>
&lt;li>stackï¼šç”±ç¨‹åºåˆ†é…åœ°å€&lt;/li>
&lt;li>heapï¼šç”±ç¨‹åºå‘˜åˆ†é…åœ°å€ new/delete&lt;/li>
&lt;li>heapå’Œbssä¹‹é—´æ˜¯å¸¸é‡åŒº&lt;/li>
&lt;li>bssï¼šæœªåˆå§‹åŒ–åŒº&lt;/li>
&lt;li>gvapï¼šåˆå§‹åŒ–åŒº&lt;/li>
&lt;li>textï¼šä»£ç ã€å‡½æ•°ã€‚ã€‚ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;string&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// (GVAR)å…¨å±€åˆå§‹åŒ–åŒº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">p1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// (bss)å…¨å±€æœªåˆå§‹åŒ–åŒº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// (text)ä»£ç åŒº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// (stack)æ ˆåŒºå˜é‡ 32ä½/64ä½åœ°å€é€’å‡/é€’å¢ æ ˆåŒºåˆå§‹åŒ–å€¼cc
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;abc&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// (stack)æ ˆåŒºå˜é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">p2&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// (stack)æ ˆåŒºå˜é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">p3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;123456&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 123456\0åœ¨å¸¸é‡åŒº, p3åœ¨(stack)æ ˆåŒº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">static&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// (GVAR)å…¨å±€(é™æ€)åˆå§‹åŒ–åŒº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">p1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// (heap)å †åŒºå˜é‡ 32ä½/64ä½åœ°å€é€’å¢ å †åŒºåˆå§‹åŒ–å€¼cd
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">p2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// (heap)å †åŒºå˜é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">p4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">char&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// (heap)å †åŒºå˜é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">strcpy_s&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;123456&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// (text)ä»£ç åŒº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// (text)ä»£ç åŒº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="cæ™ºèƒ½æŒ‡é’ˆ">C++æ™ºèƒ½æŒ‡é’ˆ&lt;/h3>
&lt;p>auto_ptr:&lt;/p>
&lt;ul>
&lt;li>C++17 åºŸå¼ƒ&lt;/li>
&lt;li>ä¼šè‡ªåŠ¨åˆ é™¤æŒ‡é’ˆä»¥åŠæŒ‡å‘çš„å¯¹è±¡ï¼Œä¼šäº§ç”Ÿæ‰€æœ‰æƒè½¬ç§»ç°è±¡&lt;/li>
&lt;/ul>
&lt;p>unique_ptr:&lt;/p>
&lt;ul>
&lt;li>ä¸“å±æ‰€æœ‰æƒï¼Œunique_ptrç®¡ç†çš„å†…å­˜ï¼Œåªèƒ½è¢«ä¸€ä¸ªæŒ‡é’ˆæŒæœ‰ï¼Œä¸æ”¯æŒå¤åˆ¶&lt;/li>
&lt;li>è¯¥æŒ‡é’ˆç¦æ­¢å¤åˆ¶ï¼Œå› æ­¤ç”¨æ˜¯std::move()è¯­å¥è¿›è¡Œæ‰€æœ‰æƒè½¬ç§»&lt;/li>
&lt;li>ç¦»å¼€ä½œç”¨åŸŸåï¼Œè‡ªåŠ¨é‡Šæ”¾æŒ‡é’ˆå’Œæ•°æ®&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://stackoverflow.com/a/20895705">share_ptr&lt;/a> / weak_ptrï¼š&lt;/p>
&lt;ul>
&lt;li>é€šè¿‡ä¸€ä¸ªå¼•ç”¨è®¡æ•°å…±äº«å¯¹è±¡ï¼Œå½“è®¡æ•°ä½0æ—¶ï¼Œè°ƒç”¨ææ„å‡½æ•°&lt;/li>
&lt;li>ä¼šå¸¦æ¥é¢å¤–çš„å­˜å‚¨å¼€ é”€&lt;/li>
&lt;li>weak_ptrç”¨äºé˜²æ­¢å¾ªç¯å¼•ç”¨&lt;/li>
&lt;/ul>
&lt;h3 id="å¼•ç”¨">å¼•ç”¨&lt;/h3>
&lt;p>ä¸€ä¸ªç‰¹æ®Šçš„æŒ‡é’ˆï¼Œå¯ä»¥çœ‹ä½œæ˜¯å˜é‡çš„åˆ«åï¼Œä½†ä¼šåŒæ—¶ä¿®æ”¹å˜é‡çš„å€¼ï¼Œä¸”ä¸å¯æ›´æ¢æŒ‡é’ˆå¯¹è±¡
æœ‰äº†æŒ‡é’ˆä¸ºä»€ä¹ˆè¿˜è¦å¼•ç”¨ï¼Ÿä¸ºäº†æ”¯æŒå‡½æ•°è¿ç®—ç¬¦é‡è½½
æœ‰äº†å¼•ç”¨ä¸ºä»€ä¹ˆè¿˜ç”¨æŒ‡é’ˆï¼Ÿä¸ºäº†å…¼å®¹C
å‡½æ•°ä¼ å‚è¯´æ˜ï¼š&lt;/p>
&lt;ul>
&lt;li>å¯¹å†…ç½®åŸºç¡€ç±»å‹ï¼ˆå¦‚intï¼Œdoubleï¼‰è€Œè¨€ï¼Œå‡½æ•°ä¼ é€’æ—¶pass by valueæ›´é«˜æ•ˆï¼Œç›´æ¥ä¼ å€¼è€Œä¸æ˜¯æŒ‡é’ˆ/å¼•ç”¨&lt;/li>
&lt;li>å¯¹é¢å‘å¯¹è±¡ä¸­çš„è‡ªå®šä¹‰ç±»å‹è€Œè¨€ï¼Œä¼ é€’æ—¶pass by reference to constæ›´é«˜æ•ˆï¼Œå› ä¸ºé˜²æ­¢ä¼ é€’å¤§æ•°æ®è€Œä½¿ç”¨åœ°å€å ç”¨ç©ºé—´æ›´å°ï¼Œconstä¸ºäº†é˜²æ­¢æ— æ„çš„ä¿®æ”¹&lt;/li>
&lt;/ul>
&lt;h2 id="cåŸºç¡€è¯­æ³•">C++åŸºç¡€è¯­æ³•&lt;/h2>
&lt;h3 id="if">if&lt;/h3>
&lt;p>ifå°†å‘½ä¸­ç‡é«˜ï¼ˆæ›´å®¹æ˜“åˆ¤true/falseï¼‰çš„æ¡ä»¶æ”¾é¦–ä½ï¼Œä½¿å¾—åˆ¤æ–­æ¡ä»¶æ›´å¿«
ä¸switchæ¯”è¾ƒ
ä½¿ç”¨åœºæ™¯ï¼š&lt;/p>
&lt;ul>
&lt;li>switchåªæ”¯æŒå¸¸é‡å€¼å›ºå®šç›¸ç­‰çš„åˆ†æ”¯åˆ¤æ–­&lt;/li>
&lt;li>ifå¯ä»¥åˆ¤æ–­åŒºé—´&lt;/li>
&lt;li>switchæ˜¯ifçš„ç‰¹é›†&lt;/li>
&lt;/ul>
&lt;p>æ€§èƒ½æ¯”è¾ƒï¼š&lt;/p>
&lt;ul>
&lt;li>åˆ†æ”¯è¾ƒå°‘æ—¶ï¼Œå·®åˆ«ä¸å¤§ï¼›åˆ†æ”¯å¤šæ—¶ï¼Œswitchæ›´å¿«ï¼Œå› ä¸ºæ˜¯æ±‡ç¼–æ˜¯æŸ¥è¡¨çš„å½¢å¼&lt;/li>
&lt;li>ifå¤šåˆ†æ”¯çš„å¼€å§‹å‡ ä¸ªåˆ†æ”¯æ•ˆæœé«˜ï¼Œä¹‹åæ•ˆç‡é€’å‡ï¼›å› ä¸ºæ±‡ç¼–ä¸‹éœ€è¦ä¸æ–­åˆ¤æ–­å†è·³è½¬&lt;/li>
&lt;li>switchæ‰€æœ‰caseé€Ÿåº¦å‡ ä¹ä¸€æ ·ï¼ŒæŸ¥è¡¨å½¢å¼&lt;/li>
&lt;/ul>
&lt;h3 id="æšä¸¾">æšä¸¾&lt;/h3>
&lt;ul>
&lt;li>æšä¸¾å€¼ä¸å¯ä»¥åšå·¦å€¼&lt;/li>
&lt;li>éæšä¸¾å˜é‡ä¸å¯ä»¥èµ‹å€¼ç»™æšä¸¾å˜é‡ï¼Œé™¤éå¼ºè½¬ï¼›æšä¸¾å¯ä»¥èµ‹å€¼ç»™éæšä¸¾&lt;/li>
&lt;/ul>
&lt;h3 id="union--struct">Union / Struct&lt;/h3>
&lt;p>å…±ç”¨ä½“&lt;/p>
&lt;ul>
&lt;li>æ‰€æœ‰å˜é‡å ç”¨æœ€å¤§ç©ºé—´çš„å˜é‡çš„å­˜å‚¨ç©ºé—´&lt;/li>
&lt;li>å¤§å­—èŠ‚æœ€åèµ‹å€¼ä¼šè¦†ç›–å°å­—èŠ‚å†…å®¹&lt;/li>
&lt;li>èµ‹å€¼ä»å†…å­˜æœ€å³è¾¹èµ‹å€¼&lt;/li>
&lt;/ul>
&lt;p>ç¼ºçœå¯¹é½åŸåˆ™&lt;/p>
&lt;ul>
&lt;li>char ä»»ä½•åœ°å€&lt;/li>
&lt;li>short å¶æ•°åœ°å€&lt;/li>
&lt;li>int 4çš„æ•´æ•°å€åœ°å€&lt;/li>
&lt;li>double 8çš„æ•´æ•°å€åœ°å€
&lt;ul>
&lt;li>32ä½å†…å­˜é‡Œä¸€è¡Œå››å­—èŠ‚ï¼Œå˜é‡å ç”¨ç©ºé—´ä¸è¶³ä¼šæ‰©å……åˆ°æœ€å¤§å ç”¨ç©ºé—´å˜é‡&lt;/li>
&lt;li>32ä½ï¼Œchar+int=8ï¼›8+double=16&lt;/li>
&lt;li>32ä½ï¼Œchar[5]+int = 16ï¼›16+double=24&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä¿®æ”¹é»˜è®¤ç¼–è¯‘é€‰é¡¹ï¼š
&lt;ul>
&lt;li>visual C++ï¼š#pragma pack(n)&lt;/li>
&lt;li>g++ï¼š&lt;em>attribute&lt;/em>(aligned(n))ã€&lt;em>attribute&lt;/em>(&lt;em>packed&lt;/em>)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="å¾ªç¯">å¾ªç¯&lt;/h3>
&lt;p>do whileæ›´å¿« while æ¬¡ä¹‹ foræœ€æ…¢ï¼Œä½†å®é™…å¼€å‘ä¸é‡è§†é€Ÿåº¦çš„è¯ï¼Œæ— æ‰€è°“&lt;/p>
&lt;h3 id="å‡½æ•°é‡è½½">å‡½æ•°é‡è½½&lt;/h3>
&lt;ol>
&lt;li>çœ‹debugè¿è¡Œè¿‡ç¨‹&lt;/li>
&lt;li>çœ‹åæ±‡ç¼–çš„åœ°å€&lt;/li>
&lt;li>æ‰¾åˆ°debug/.objæ–‡ä»¶ï¼Œæœæœå‡½æ•°åï¼Œå¤åˆ¶ã€?å‡½æ•°å@@xxã€‘ï¼Œæœç´¢ã€undnameã€‘ï¼Œcmdå‘½ä»¤ ã€undname å¤åˆ¶å€¼ã€‘&lt;/li>
&lt;/ol>
&lt;p>ç”¨å‡½æ•°æŒ‡é’ˆæ¥ç¡®å®šæŸä¸ªå‡½æ•°ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸€èˆ¬å½¢å¼ï¼šæ•°æ®ç±»å‹(*æŒ‡é’ˆå˜é‡å)(å‚æ•°è¡¨)&lt;/li>
&lt;li>bool ProcessNum(int i, int j, int(*p)(int a, int b)) // å›è°ƒå‡½æ•°&lt;/li>
&lt;/ul>
&lt;h3 id="å‘½åç©ºé—´">å‘½åç©ºé—´&lt;/h3>
&lt;p>namespace ç©ºé—´å{ ... }
æ³¨æ„ä½¿ç”¨using namespace stdï¼Œä¼šå¼•å…¥æ‰€æœ‰ç©ºé—´å†…æ–¹æ³•ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ–¹æ³•åå†²çª&lt;/p>
&lt;ul>
&lt;li>å»ºè®®å¼•å…¥ç‰¹å®šç©ºé—´å†…æ–¹æ³•åï¼Œusing namespace std::cout;&lt;/li>
&lt;li>æˆ–ç›´æ¥æŒ‡å®šè¯¥æ–¹æ³•æ˜¯è¯¥ç©ºé—´å†…ï¼Œstd::cout &amp;lt;&amp;lt;&lt;/li>
&lt;/ul>
&lt;h3 id="å‡½æ•°ä½“heckè¿‡ç¨‹">å‡½æ•°ä½“heckè¿‡ç¨‹&lt;/h3>
&lt;p>å‡½æ•°è°ƒç”¨æ–¹å¼ï¼š_cdecl(/Gd) (C/C++â†’é«˜çº§â†’è°ƒç”¨çº¦å®š)&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ä½åœ°å€&lt;/th>
&lt;th>esp&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>...&lt;/td>
&lt;td>...&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ï¼ˆåœ°å€å‘ä¸Šé€’å‡ï¼‰&lt;/td>
&lt;td>ebx ï¼ˆæ ˆå‘ä¸Šå¢é•¿ï¼‰&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>é«˜åœ°å€&lt;/td>
&lt;td>ebp&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ä¼ å‚æ—¶ä¸ºä»€ä¹ˆé»˜è®¤å‚æ•°è¦åœ¨æœ€å³è¾¹ï¼Œå› ä¸ºæ±‡ç¼–æ—¶å…ˆpushæœ€å³è¾¹çš„å€¼ï¼ˆä¸åŒè°ƒç”¨æ–¹å¼æœ‰å·®åˆ«ï¼‰&lt;/p>
&lt;h3 id="å†…è”å‡½æ•°inline">å†…è”å‡½æ•°inline&lt;/h3>
&lt;p>ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œå¤æ‚å‡½æ•°å¯èƒ½ä¸ä¼šå†…è”&lt;/p>
&lt;h3 id="é€’å½’">é€’å½’&lt;/h3>
&lt;p>å››ä¸ªåŸºæœ¬æ³•åˆ™ï¼š&lt;/p>
&lt;ul>
&lt;li>åŸºå‡†æƒ…å½¢ï¼šæ— éœ€é€’å½’å°±èƒ½è§£å‡º&lt;/li>
&lt;li>ä¸æ–­é€’è¿›ï¼šæ¯æ¬¡é€’å½’éƒ½é è¿‘åŸºå‡†æƒ…å½¢&lt;/li>
&lt;li>è®¾è®¡æ³•åˆ™ï¼šå‡è®¾æ‰€æœ‰é€’å½’éƒ½èƒ½è¿è¡Œ&lt;/li>
&lt;li>åˆæˆæ•ˆç›Šæ³•åˆ™ï¼šä¸åšé‡å¤æ€§å·¥ä½œ&lt;/li>
&lt;/ul>
&lt;p>ç¼ºé™·ï¼š&lt;/p>
&lt;ul>
&lt;li>ç©ºé—´ä¸Šå¼€è¾Ÿå¤§é‡æ ˆç©ºé—´&lt;/li>
&lt;li>æ—¶é—´ä¸Šå¤§é‡é‡å¤è¿ç®—&lt;/li>
&lt;/ul>
&lt;p>ä¼˜åŒ–ï¼š&lt;/p>
&lt;ul>
&lt;li>å°¾é€’å½’ï¼šæ‰€æœ‰é€’å½’å½¢å¼çš„è°ƒç”¨éƒ½å‡ºç°åœ¨å‡½æ•°çš„æœ«å°¾&lt;/li>
&lt;li>ä½¿ç”¨å¾ªç¯æ›¿ä»£&lt;/li>
&lt;li>ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼Œç©ºé—´æ¢æ—¶é—´&lt;/li>
&lt;/ul>
&lt;h2 id="cé«˜çº§è¯­æ³•">C++é«˜çº§è¯­æ³•&lt;/h2>
&lt;h3 id="ç±»">ç±»&lt;/h3>
&lt;p>C++ä½¿ç”¨structã€classå®šä¹‰ç±»
structé»˜è®¤æˆå‘˜æƒé™æ˜¯publicã€classé»˜è®¤private&lt;/p>
&lt;h3 id="è¿ç®—ç¬¦é‡è½½">è¿ç®—ç¬¦é‡è½½&lt;/h3>
&lt;h4 id="ä¸´æ—¶å¯¹è±¡">ä¸´æ—¶å¯¹è±¡&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// mainè°ƒç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">Complex&lt;/span> &lt;span class="n">C&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">C&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å¯¹è±¡å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">Complex&lt;/span> &lt;span class="n">Complex&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="k">operator&lt;/span>&lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="n">Complex&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">const&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œå¹¶ä¸”ä¼šè§¦å‘æ‹·è´æ„é€ ï¼Œæµªè´¹æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">Complex&lt;/span> &lt;span class="n">tmp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tmp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_real&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">_real&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_real&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tmp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_image&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">_image&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_image&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">tmp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç›´æ¥è¿”å›åˆ›å»ºå¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//return Complex(_real + c._real, _image + c._image);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸´æ—¶å¯¹è±¡çš„å¤„ç†ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 1. è‡ªå»ºæ‹·è´æ„é€ 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">Complex&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">Complex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="n">Complex&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_real&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_real&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_image&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_image&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;Complex::Complex(const Complex&amp;amp; c)&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 2. å®šä¹‰æ—¶èµ‹å€¼ï¼ˆä¸‹æ¬¡éƒ½å®šä¹‰æ—¶èµ‹å€¼ï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">Complex&lt;/span> &lt;span class="n">C&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å¹¶ä¸”é‡è½½ç¬¦ç›´æ¥returnå¯¹è±¡ è€Œä¸æ˜¯åˆ›å»ºä¸´æ—¶å¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ­¤å¤–å¯èŠ‚çœè°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å‰ç½®åç½®">å‰ç½®åç½®++&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Complex&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">Complex&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="k">operator&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="c1">// å‰ç½®++ æ•ˆç‡å¿«
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_real&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_image&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Complex&lt;/span> &lt;span class="n">Complex&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="k">operator&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// åç½®++
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//Complex tmp(*this);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//_real++;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//_image++;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//return tmp;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nf">Complex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">_real&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_image&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="æ ‡å‡†è¾“å…¥è¾“å‡º">æ ‡å‡†è¾“å…¥è¾“å‡º&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// .h
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">friend&lt;/span> &lt;span class="n">ostream&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="k">operator&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ostream&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="n">Complex&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">friend&lt;/span> &lt;span class="n">istream&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="k">operator&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">istream&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">is&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Complex&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// .cpp
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">ostream&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="k">operator&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ostream&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="n">Complex&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">os&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;real value is &amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_real&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34; image value is &amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_image&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">istream&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="k">operator&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">istream&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">is&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Complex&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">is&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_real&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_image&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">is&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é˜²æ­¢ç¼“å†²åŒºé—ç•™æ•°æ®ï¼š
cin.ignore(numeric_limits&lt;a href="std::streamsize">std::streamsize&lt;/a>::max(), '\n'); // æ¸…ç©ºç¼“å†²åŒºè„æ•°æ®&lt;/p>
&lt;h4 id="æ–‡ä»¶æ“ä½œ">æ–‡ä»¶æ“ä½œ&lt;/h4>
&lt;p>æ–‡ä»¶çš„æ‰“å¼€æ–¹å¼ï¼š&lt;/p>
&lt;ul>
&lt;li>ios::in æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»ï¼ˆifstreamé»˜è®¤ï¼‰&lt;/li>
&lt;li>ios::out æ‰“å¼€æ–‡ä»¶è¿›è¡Œå†™ï¼ˆofstreamé»˜è®¤ios::out | ios::truncï¼‰&lt;/li>
&lt;li>ios::ate æ‰“å¼€ä¸€ä¸ªå·²æœ‰è¾“å…¥/è¾“å‡ºçš„æ–‡ä»¶å¹¶æŸ¥æ‰¾åˆ°æ–‡ä»¶å°¾&lt;/li>
&lt;li>ios::app æ‰“å¼€æ–‡ä»¶å¦‚æ²¡æœ‰åˆ™åˆ›å»ºæ–‡ä»¶ï¼Œåœ¨å°¾éƒ¨æ·»åŠ æ•°æ®&lt;/li>
&lt;li>ios::nocreate å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å¼€æ“ä½œå¤±è´¥&lt;/li>
&lt;li>ios::trunc å¦‚æ–‡ä»¶å­˜åœ¨ï¼Œæ¸…æ¥šæ–‡ä»¶åŸæœ‰å†…å®¹&lt;/li>
&lt;li>ios::binary ä»¥äºŒè¿›åˆ¶æ‰“å¼€&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">static&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">bufferLen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2048&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">bool&lt;/span> &lt;span class="nf">CopyFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">dst&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ‰“å¼€æºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// æºæ–‡ä»¶ä»¥äºŒè¿›åˆ¶è¯»çš„æ–¹å¼æ‰“å¼€
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ç›®æ ‡æ–‡ä»¶ä»¥äºŒè¿›åˆ¶å†™çš„æ–¹å¼æ‰“å¼€
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">ifstream&lt;/span> &lt;span class="n">in&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">c_str&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">binary&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ofstream&lt;/span> &lt;span class="n">out&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dst&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">c_str&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">binary&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆ¤æ–­æ–‡ä»¶æ‰“å¼€æ˜¯å¦æˆåŠŸï¼Œå¤±è´¥è¿”å›false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">in&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä»æºæ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œå†™åˆ°ç›®æ ‡æ–‡ä»¶ä¸­
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// é€šè¿‡è¯»å–æºæ–‡ä»¶çš„EOFæ¥åˆ¤æ–­è¯»å†™æ˜¯å¦ç»“æŸ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">char&lt;/span> &lt;span class="n">temp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">bufferLen&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">eof&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">bufferLen&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">streamsize&lt;/span> &lt;span class="n">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">gcount&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">count&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å…³é—­æºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¤´æ–‡ä»¶é‡å®šä¹‰">å¤´æ–‡ä»¶é‡å®šä¹‰&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#ifndef _SOMEFILE_H_ &lt;/span>&lt;span class="c1">// ä»»æ„ä¸“å±åç§°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="cp">#define _SOMEFILE_H_
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="p">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#endif &lt;/span>&lt;span class="c1">//æœ«å°¾
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ä½¿ç”¨å®é˜²æ­¢åŒä¸€ä¸ªæ–‡ä»¶è¢«å¤šæ¬¡åŒ…å«ï¼›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ä¼˜ç‚¹ï¼šå¯ç§»æ¤æ€§å¥½ï¼›ç¼ºç‚¹ï¼šæ— æ³•é˜²æ­¢å®åé‡å¤ï¼Œéš¾ä»¥æ’é”™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="cp">#pragma once
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">// ä½¿ç”¨ç¼–è¯‘å™¨é˜²æ­¢
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ä¼˜ç‚¹ï¼šé˜²æ­¢å®é‡å¤ï¼›ç¼ºç‚¹ï¼šå¯ç§»æ¤æ€§ä¸å¥½
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ·±æ‹·è´-æµ…æ‹·è´-moveæ“ä½œ">æ·±æ‹·è´ æµ…æ‹·è´ moveæ“ä½œ&lt;/h3>
&lt;p>æµ…æ‹·è´ï¼šåªæ‹·è´æŒ‡é’ˆåœ°å€ï¼ŒC++é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ä¸èµ‹å€¼è¿ç®—ç¬¦é‡è½½éƒ½æ˜¯æµ…æ‹·è´ï¼›èŠ‚çœç©ºé—´ï¼Œä½†ä¼šå¼•å‘å¤šæ¬¡é‡Šæ”¾ã€‚
æ·±æ‹·è´ï¼šé‡æ–°åˆ†é…å †å†…å­˜ï¼Œæ‹·è´æŒ‡é’ˆæŒ‡å‘å†…å®¹ã€‚æµªè´¹ç©ºé—´ï¼Œä½†ä¸ä¼šå¤šæ¬¡é‡Šæ”¾ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="n">String&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">other&lt;/span>&lt;span class="p">){&lt;/span> &lt;span class="c1">// æ‹·è´æ„é€ å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">m_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">char&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">strlen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">other&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">m_data&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">m_data&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">strcpy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">other&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">m_data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="k">operator&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">other&lt;/span>&lt;span class="p">){&lt;/span> &lt;span class="c1">// èµ‹å€¼å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">other&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é‡Šæ”¾åŸæœ‰çš„å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">delete&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="n">m_data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é‡æ–°åˆ†é…èµ„æºå¹¶èµ‹å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">m_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">char&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">strlen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">other&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">m_data&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">m_data&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">strcpy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">other&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">m_data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¼æœ‰ä¸¤è€…ä¼˜ç‚¹ï¼š1. è®¡æ•°ï¼Œ2. moveæ“ä½œ
moveï¼šå½“æ—§æŒ‡é’ˆä¸ç”¨æ—¶ï¼Œèµ„æºè®©æ¸¡ç»™æ–°æŒ‡é’ˆï¼Œå³moveæ“ä½œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è°ƒç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="nf">s2A&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">move&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s1&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">String&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">other&lt;/span>&lt;span class="p">){&lt;/span> &lt;span class="c1">// ç§»åŠ¨æ„é€ å‡½æ•° &amp;amp;&amp;amp;å³å€¼å¼•ç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">other&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">m_data&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// èµ„æºè®©æ¸¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">m_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">other&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">m_data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">other&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">m_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è°ƒç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">String&lt;/span> &lt;span class="n">s3A&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">s3A&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">move&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s2A&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="k">operator&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">rhs&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="k">noexcept&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="c1">// ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">rhs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">delete&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">m_data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">m_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">rhs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">m_data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rhs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">m_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç»§æ‰¿">ç»§æ‰¿&lt;/h3>
&lt;p>// é¢å¯¹å˜åŒ–ï¼Œå°½å¯èƒ½å°‘ä¿®æ”¹åŸæœ‰çš„é€»è¾‘ï¼Œè¦æ‰©å……é€»è¾‘&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Shape&lt;/span> &lt;span class="c1">// æŠ½è±¡ç±»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">public&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">virtual&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">Area&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1">// å­ç±»æ–¹æ³•å®ç°ä¸ä¸€è‡´åŠ ä¸Švirtual ä¸åˆ›å»ºå¯¹è±¡ç”¨=0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">virtual&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">Show&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">SetColor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">_color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">Display&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">Area&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">private&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">_color&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Square&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="k">public&lt;/span> &lt;span class="n">Shape&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">public&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Square&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">double&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">:&lt;/span>&lt;span class="n">_len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">len&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">Show&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;Square&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">double&lt;/span> &lt;span class="nf">Area&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="k">const&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">_len&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">_len&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">private&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">double&lt;/span> &lt;span class="n">_len&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090137-3.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
æ‰€ä»¥sizeof(s1) = 16 = 8+4+4&lt;/p>
&lt;h3 id="ä¸‰å¤§ç‰¹æ€§">ä¸‰å¤§ç‰¹æ€§&lt;/h3>
&lt;p>å°è£…ã€ç»§æ‰¿ã€å¤šæ€
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090137-4.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;h2 id="ç¼–ç¨‹æ€æƒ³">ç¼–ç¨‹æ€æƒ³&lt;/h2>
&lt;h3 id="å•ä¾‹æ¨¡å¼">å•ä¾‹æ¨¡å¼&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// .h
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">class&lt;/span> &lt;span class="nc">Singleton&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">public&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">static&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="n">Singleton&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">getInstance&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">static&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">DoSomething&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;Do Something&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å°†æ„é€ å’Œææ„å‡½æ•°ç§æœ‰åŒ–ï¼Œé˜²æ­¢å¤–éƒ¨è®¿é—®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">private&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Singleton&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">~&lt;/span>&lt;span class="n">Singleton&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">static&lt;/span> &lt;span class="n">Singleton&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">This&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä½¿ç”¨é™æ€å˜é‡å¸®åŠ©è§£å†³èµ„æºçš„åˆ†é…å’Œé‡Šæ”¾
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// .cpp
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;#34;Singleton.h&amp;#34;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">// æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å· &amp;#34;private: static class Singleton * Singleton::This&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">Singleton&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">Singleton&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">This&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">nullptr&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// = new Singleton();
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="n">Singleton&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">Singleton&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">getInstance&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">This&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">This&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Singleton&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">This&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Singleton&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">Singleton&lt;/span>&lt;span class="p">(){}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Singleton&lt;/span>&lt;span class="o">::~&lt;/span>&lt;span class="n">Singleton&lt;/span>&lt;span class="p">(){}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a href="https://cloud.tencent.com/developer/article/1670804">æ‡’æ±‰æ¨¡å¼å’Œæ¶æ±‰æ¨¡å¼ null/new&lt;/a>&lt;/p>
&lt;h3 id="è§‚å¯Ÿè€…æ¨¡å¼">è§‚å¯Ÿè€…æ¨¡å¼&lt;/h3>
&lt;p>è§‚å¯Ÿè€…å…³æ³¨è¢«è§‚å¯Ÿè€…åŠ¨æ€ï¼Œå¦‚æœè¢«è§‚å¯Ÿè€…åŠ¨æ€æ›´æ–°ï¼Œåˆ™é€šçŸ¥è§‚å¯Ÿè€…åšå‡ºç›¸åº”å¤„ç†ã€‚&lt;/p>
&lt;h3 id="voidnullptr">void*ã€nullptr&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// C
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="cp">#define NULL((void*)0)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">// C++
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="cp">#define NULL
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span> &lt;span class="cp">#ifdef _cplusplus
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span> &lt;span class="cp">#define NULL 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span> &lt;span class="cp">#else
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span> &lt;span class="cp">#define NULL((void*)0)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span> &lt;span class="cp">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">// vc++å³ä½¿å®šä¹‰æŒ‡é’ˆä¸ºNULLï¼Œä¹Ÿä¼šè½¬æˆnullptrå³void*
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="cçš„ç±»å‹è½¬æ¢">C++çš„ç±»å‹è½¬æ¢&lt;/h3>
&lt;p>const_castï¼šç”¨äºå°†constè½¬æ¢æˆéconst&lt;/p>
&lt;ul>
&lt;li>constå˜é‡ä¼ ç»™å¸¦éconstå‚æ•°çš„å‡½æ•°&lt;/li>
&lt;/ul>
&lt;p>reinterpret_castï¼šé‡æ–°è§£é‡Šç±»å‹ï¼Œä¸¤è€…å†…å­˜ç©ºé—´å¿…é¡»ä¸€è‡´ï¼Œä¸æ£€æŸ¥æŒ‡å‘çš„å†…å®¹å’Œå…¶æŒ‡é’ˆç±»å‹
static_castï¼šåŸºæœ¬ç±»å‹è½¬æ¢ï¼Œæœ‰ç»§æ‰¿å…³ç³»çš„ç±»å¯¹è±¡å’Œç±»æŒ‡é’ˆè½¬æ¢ï¼Œç”±ç¨‹åºå‘˜æ¥æ£€æŸ¥æ˜¯å¦é”™è¯¯ï¼Œæ²¡æœ‰åŠ¨æ€è½¬æ¢çš„ç±»å‹å®‰å…¨æ£€æŸ¥å¼€é”€
dynamic_castï¼šåªç”¨äºåŒ…å«è™šå‡½æ•°çš„ç±»ï¼Œç”¨äºå¤šæ€ä¸­ï¼Œå‘ä¸Šå‘ä¸‹è½¬æ¢æ—¶ï¼Œé”™è¯¯åˆ™ç½®ç©ºï¼Œå¢åŠ æ£€æŸ¥å¼€é”€&lt;/p>
&lt;h3 id="é€‚é…å™¨æ¨¡å¼">é€‚é…å™¨æ¨¡å¼&lt;/h3>
&lt;p>å°†ä¸€ä¸ªç±»çš„æ¥å£æˆ–å®ç°ç±»è½¬åŒ–æˆå®¢æˆ·è¦æ±‚çš„å¦ä¸€ä¸ªæ–°åŠŸèƒ½æ¥å£ï¼Œå®ç°å¤ç”¨ã€‚&lt;/p>
&lt;ul>
&lt;li>é‡‡ç”¨å¤šé‡ç»§æ‰¿çš„æ–¹å¼
&lt;ul>
&lt;li>å®ç°æ–°åŠŸèƒ½æ¥å£&lt;/li>
&lt;li>åˆ›å»ºé€‚é…å™¨ç±»ç»§æ‰¿æ–°åŠŸèƒ½æ¥å£å’Œæ—§åŠŸèƒ½å®ç°ç±»æˆ–æ¥å£&lt;/li>
&lt;li>åœ¨ç±»ä¸­å®ç°æ–°åŠŸèƒ½&lt;/li>
&lt;li>åˆ›å»ºæ¥å£å¯¹è±¡æŒ‡é’ˆ æŒ‡å‘æ–°å®ç°ç±»ï¼Œè°ƒç”¨æ–¹æ³•&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>é‡‡ç”¨ç»„åˆæ–¹å¼
&lt;ul>
&lt;li>å®ç°æ–°åŠŸèƒ½æ¥å£&lt;/li>
&lt;li>åˆ›å»ºé€‚é…å™¨ç»§æ‰¿æ¥å£ï¼Œå¹¶åœ¨ç±»å†…åˆ›å»ºæ—§ç±»å¯¹è±¡&lt;/li>
&lt;li>æ–°åŠŸèƒ½ä¸­ä½¿ç”¨æ—§ç±»å¯¹è±¡è°ƒç”¨æ—§æ–¹æ³•&lt;/li>
&lt;li>åˆ›å»ºæ¥å£å¯¹è±¡æŒ‡é’ˆ æŒ‡å‘æ–°å®ç°ç±»ï¼Œè°ƒç”¨æ–¹æ³•&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">LegacyRectangle&lt;/span> &lt;span class="c1">// æ—§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">public&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LegacyRectangle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">double&lt;/span> &lt;span class="n">x1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_x1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">LegacyDraw&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;LegacyRectangle:: LegacyDraw()&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">_x1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">private&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">double&lt;/span> &lt;span class="n">_x1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Rectangle&lt;/span> &lt;span class="c1">// æ–°æ¥å£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">public&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">virtual&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="n">Draw&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//è™šå‡½æ•°ç”¨äºç»§æ‰¿ç»™å­ç±»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ç¬¬ä¸€ç§é€‚é…çš„æ–¹å¼ï¼šä½¿ç”¨å¤šé‡ç»§æ‰¿
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">class&lt;/span> &lt;span class="nc">RectangleAdapter&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="k">public&lt;/span> &lt;span class="n">Rectangle&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">public&lt;/span> &lt;span class="n">LegacyRectangle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">public&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">RectangleAdapter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">double&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">LegacyRectangle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;RectangleAdapter&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">virtual&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">Draw&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;RectangleAdapter::Draw()&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LegacyDraw&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ç»„åˆæ–¹å¼çš„Adapter
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">class&lt;/span> &lt;span class="nc">RectangleAdapter2&lt;/span> &lt;span class="o">:&lt;/span>&lt;span class="k">public&lt;/span> &lt;span class="n">Rectangle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">public&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">RectangleAdapter2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">double&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">:&lt;/span>&lt;span class="n">_lRect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;RectangleAdapter2&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">virtual&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">Draw&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="n">str&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;RectangleAdapter2::Draw()&amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_lRect&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LegacyDraw&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">private&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LegacyRectangle&lt;/span> &lt;span class="n">_lRect&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// main
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">RectangleAdapter&lt;/span> &lt;span class="nf">ra&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">h&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Rectangle&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">pR&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">ra&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ³›å‹ç¼–ç¨‹">æ³›å‹ç¼–ç¨‹&lt;/h3>
&lt;p>::æ–¹æ³•å() è°ƒç”¨è‡ªå·±çš„å‡½æ•°
æ³›å‹ç¼–ç¨‹æ˜¯ä¸€ç§é™æ€æœŸå¤šæ€ï¼Œé€šè¿‡ç¼–è¯‘å™¨ç”Ÿæˆæœ€ç›´æ¥çš„ä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">template&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Class&lt;/span> &lt;span class="n">T1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">T2&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">T1&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T2&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">static_cast&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nl">a&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="è¿›é˜¶ç¼–ç¨‹">è¿›é˜¶ç¼–ç¨‹&lt;/h2>
&lt;h3 id="stlæ ‡å‡†åº“">STLæ ‡å‡†åº“&lt;/h3>
&lt;h4 id="å®¹å™¨">å®¹å™¨&lt;/h4>
&lt;ul>
&lt;li>åºåˆ—å¼å®¹å™¨
&lt;ul>
&lt;li>å¯æ’åºï¼Œvectorã€listã€dequeï¼Œè€Œstackã€queueã€priority_queueæ˜¯å®¹å™¨é€‚é…å™¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å…³è”å¼å®¹å™¨
&lt;ul>
&lt;li>æ¯ä¸ªæ•°æ®å…ƒç´ ç”±é”®å€¼å¯¹ç»„æˆï¼Œsetï¼Œmultisetï¼Œmapï¼Œmultimap&lt;/li>
&lt;li>noteï¼šè¿­ä»£å™¨åˆ é™¤æ—¶ï¼Œæ³¨æ„åˆ é™¤æ“ä½œä½¿å¾—è¿­ä»£å™¨å¤±æ•ˆï¼Œiter = .erase(iter) or iter++&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="å‡½æ•°æŒ‡é’ˆä»¿å‡½æ•°æ¨¡æ¿">å‡½æ•°æŒ‡é’ˆã€ä»¿å‡½æ•°æ¨¡æ¿&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// C++ä»¿å‡½æ•°æ¨¡æ¿
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">template&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="k">class&lt;/span> &lt;span class="nc">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">SortTF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">inline&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="nf">operator&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">T&lt;/span> &lt;span class="k">const&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T&lt;/span> &lt;span class="k">const&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">const&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">template&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="k">class&lt;/span> &lt;span class="nc">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">DisplayTF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">inline&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">operator&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">T&lt;/span> &lt;span class="k">const&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">const&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// C++ä»¿å‡½æ•°æ¨¡æ¿
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">arr4&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">arr4&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">SortF&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">for_each&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">arr4&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">DisplayF&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è‡ªå®šä¹‰è¿­ä»£å™¨">è‡ªå®šä¹‰è¿­ä»£å™¨&lt;/h3>
&lt;p>å¿…é¡»æä¾›iterator_traitsçš„äº”ç§ç‰¹æ€§ï¼Œæ‰èƒ½å’ŒSTLå…±åŒä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åˆ†åˆ«æ˜¯è¿­ä»£å™¨ç±»å‹ã€å…ƒç´ ç±»å‹ã€è·ç¦»ç±»å‹ã€æŒ‡é’ˆç±»å‹ä¸referenceç±»å‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//template&amp;lt;class Iterator&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//struct iterator_traits
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//{
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// typedef typename Iterator::difference_type difference_type;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// typedef typename Iterator::value_type value_type;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// typedef typename Iterator::pointer pointer;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// typedef typename Iterator::reference reference;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// typedef typename Iterator::iterator_category iterator_category;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//}ï¼›
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å®¹å™¨é€‚é…å™¨">å®¹å™¨é€‚é…å™¨&lt;/h3>
&lt;ul>
&lt;li>stackï¼šå…ˆè¿›åå‡ºï¼Œåº•å±‚æ˜¯deque&lt;/li>
&lt;li>queueï¼šå…ˆè¿›å…ˆå‡ºï¼Œåº•å±‚deque&lt;/li>
&lt;li>priority_queueï¼šè¿›è¡Œå †æ’åºï¼Œåº•å±‚æ˜¯vectoræˆ–deque&lt;/li>
&lt;/ul>
&lt;h3 id="ç©ºé—´é€‚é…å™¨">ç©ºé—´é€‚é…å™¨&lt;/h3>
&lt;h3 id="booståº“">booståº“&lt;/h3>
&lt;h3 id="å¤šçº¿ç¨‹">å¤šçº¿ç¨‹&lt;/h3>
&lt;p>åŠ é”åº”å°½å¯èƒ½ç²’åº¦æœ€å°åŒ–&lt;/p>
&lt;h2 id="linuxç¼–ç¨‹">Linuxç¼–ç¨‹&lt;/h2>
&lt;h3 id="makefile">makefile&lt;/h3>
&lt;p>&lt;a href="https://www.gnu.org/software/make/manual/">https://www.gnu.org/software/make/manual/&lt;/a>
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090137-5.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ul>
&lt;li>&lt;strong>MakefileåŸºæœ¬è§„åˆ™&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ç›®æ ‡ï¼š ä¾èµ–
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å‘½ä»¤ (å‰é¢æœ‰ä¸ªtab)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nl">main&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">o&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">g&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nl">o&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cpp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">g&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cpp&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">o&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nl">o&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cpp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">g&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cpp&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">o&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>Makefileçš„ç®€åŒ–è§„åˆ™&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å˜é‡å®šä¹‰ï¼šå˜é‡ = å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å˜é‡ä½¿ç”¨ï¼š$(å˜é‡å)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">TARGET&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">OBJS&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">o&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">TARGET&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OBJS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">g&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OBJS&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">TARGET&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nl">o&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cpp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nl">o&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cpp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nl">PHONY&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">clean&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nl">clean&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rm&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">TARGET&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="err">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OBJS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ä¸ç”Ÿæˆç›®æ ‡æ–‡ä»¶çš„å‘½ä»¤æœ€å¥½ä½¿ç”¨.PHONY ä½¿å…¶ä¸ºå‡æƒ³ç›®æ ‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ‰©å±•ç”¨æ³• /usr/local/bin/ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼ˆæŸ¥çœ‹echo $pathï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nl">install&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cp&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">main&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mainTest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nl">uninstall&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rm&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mainTest&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090137-6.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ul>
&lt;li>&lt;strong>MakefileåŠ¨æ€åº“&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">TARGET&lt;/span> &lt;span class="o">=&lt;/span> main // main å’Œ .oçš„åŒºåˆ« è¯•è¯•main.o or &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">OBJS&lt;/span> &lt;span class="o">=&lt;/span> test.o
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LIB&lt;/span> &lt;span class="o">=&lt;/span> libtest.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">CXXFLAGS&lt;/span> &lt;span class="o">=&lt;/span> -c -fPIC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">$(TARGET)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nv">LIB&lt;/span>&lt;span class="k">)&lt;/span> &lt;span class="n">main&lt;/span>.&lt;span class="n">o&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">$(&lt;/span>CXX&lt;span class="k">)&lt;/span> main.o -o &lt;span class="k">$(&lt;/span>TARGET&lt;span class="k">)&lt;/span> -L. -ltest -Wl,-rpath ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">$(LIB)&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nv">OBJS&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">$(&lt;/span>CXX&lt;span class="k">)&lt;/span> -shared &lt;span class="k">$(&lt;/span>OBJS&lt;span class="k">)&lt;/span> -o &lt;span class="k">$(&lt;/span>LIB&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">$(OBJS)&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="n">test&lt;/span>.&lt;span class="n">cpp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">$(&lt;/span>CXX&lt;span class="k">)&lt;/span> &lt;span class="k">$(&lt;/span>CXXFLAGS&lt;span class="k">)&lt;/span> test.cpp -o &lt;span class="k">$(&lt;/span>OBJS&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">main.o&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">main&lt;/span>.&lt;span class="n">cpp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">$(&lt;/span>CXX&lt;span class="k">)&lt;/span> &lt;span class="k">$(&lt;/span>CXXFLAGS&lt;span class="k">)&lt;/span> main.cpp -o main.o
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">.PHONY&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">clean&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">clean&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rm &lt;span class="k">$(&lt;/span>TARGET&lt;span class="k">)&lt;/span> &lt;span class="k">$(&lt;/span>OBJS&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>è‡ªåŠ¨å˜é‡å’Œæ¨¡å¼å˜é‡&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090137-7.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">TARGET&lt;/span> &lt;span class="o">=&lt;/span> main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">OBJS&lt;/span> &lt;span class="o">=&lt;/span> test.o
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LIB&lt;/span> &lt;span class="o">=&lt;/span> libtest.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">CXXFLAGS&lt;/span> &lt;span class="o">=&lt;/span> -c -fPIC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LDFLAGS&lt;/span> &lt;span class="o">=&lt;/span> -L. -ltest -Wl,-rpath &lt;span class="k">$(&lt;/span>@D&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">$(TARGET)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">main&lt;/span>.&lt;span class="n">o&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="nv">LIB&lt;/span>&lt;span class="k">)&lt;/span> // ç¬¬ä¸€ä¸ªä¾èµ–&lt;span class="n">main&lt;/span>.&lt;span class="n">o&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">$(&lt;/span>CXX&lt;span class="k">)&lt;/span> $&amp;lt; -o &lt;span class="nv">$@&lt;/span> &lt;span class="k">$(&lt;/span>LDFLAGS&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">$(LIB)&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nv">OBJS&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">$(&lt;/span>CXX&lt;span class="k">)&lt;/span> -shared $^ -o &lt;span class="nv">$@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">%.o&lt;/span>&lt;span class="o">:&lt;/span>%.&lt;span class="n">cpp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">$(&lt;/span>CXX&lt;span class="k">)&lt;/span> &lt;span class="k">$(&lt;/span>CXXFLAGS&lt;span class="k">)&lt;/span> $^ -o &lt;span class="nv">$@&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">.PHONY&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">clean&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nf">clean&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">$(&lt;/span>RM&lt;span class="k">)&lt;/span> &lt;span class="k">$(&lt;/span>TARGET&lt;span class="k">)&lt;/span> &lt;span class="k">$(&lt;/span>OBJS&lt;span class="k">)&lt;/span> &lt;span class="k">$(&lt;/span>LIB&lt;span class="k">)&lt;/span> main.o
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="é¡¹ç›®å®æˆ˜">é¡¹ç›®å®æˆ˜&lt;/h2>
&lt;p>åœ¨qté¡¹ç›®ä¸‹æ–°å»ºbatæ–‡ä»¶ï¼Œè¾“å…¥qmake -tp vc é¡¹ç›®å.pro å³å¯ç”Ÿæˆslnæ–‡ä»¶&lt;/p>
&lt;h2 id="è°ƒè¯•">è°ƒè¯•&lt;/h2>
&lt;h3 id="æ±‡ç¼–è¯­è¨€">æ±‡ç¼–è¯­è¨€&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090137-8.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230326090137-9.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E7%AC%94%E8%AE%B0/">ç¬”è®°</category><category domain="https://keepjolly.com/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</category><category domain="https://keepjolly.com/tags/c-/">C++</category></item><item><title>Pythonç¼–ç¨‹ é‡åˆ°çš„é—®é¢˜</title><link>https://keepjolly.com/archives/python-problem/</link><guid isPermaLink="true">https://keepjolly.com/archives/python-problem/</guid><pubDate>Sat, 11 Mar 2023 20:27:34 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>æŒç»­æ›´æ–°ä¸­&lt;/p>
&lt;h2 id="imshowqtqpaplugin-could-not-find-the-qt-platform-plugin-xcb-in-">imshowï¼šqt.qpa.plugin: could not find the Qt platform plugin &amp;quot;xcb&amp;quot; in &amp;quot;&amp;quot;&lt;/h2>
&lt;p>è¿™ä¸ªé—®é¢˜åœ¨æˆ‘ç”¨pythonåˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒåç¢°åˆ°ï¼Œæ— æ³•æ‰¾åˆ°è§£å†³åŠæ³•ï¼Œåªèƒ½ç”¨condaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œç„¶åopencvå¯ä»¥æ˜¾ç¤ºå›¾ç‰‡äº†&lt;/p>
&lt;blockquote>
&lt;p>pip install -i &lt;a href="https://pypi.doubanio.com/simple/">https://pypi.doubanio.com/simple/&lt;/a> --trusted-host pypi.doubanio.com xxx-package-name&lt;/p>
&lt;/blockquote>
&lt;h2 id="linux-pycharm-opencvä¸æ˜¾ç¤ºä»£ç æç¤º">Linux pycharm opencvä¸æ˜¾ç¤ºä»£ç æç¤º&lt;/h2>
&lt;p>å‚è€ƒï¼š&lt;a href="https://blog.csdn.net/fangzhihuaa/article/details/113903689">é“¾æ¥&lt;/a>
Linuxä¸­anacondaåœ°å€æ˜¯ï¼šanaconda3å®‰è£…è·¯å¾„/envs/è™šæ‹Ÿç¯å¢ƒå/lib/pythonç‰ˆæœ¬å·/site-packages/cv2&lt;/p>
&lt;h2 id="ssizeempty-in-function-resize">!ssize.empty() in function resize&lt;/h2>
&lt;p>é¡¾åæ€ä¹‰ï¼ŒæŸä¸ªåœ°æ–¹è°ƒç”¨opencvåº“çš„resizeæ—¶ï¼Œä¼ å…¥ç©ºå€¼ï¼Œå¯¼è‡´è¯¥é”™è¯¯ï¼Œä»”ç»†æ£€æŸ¥ä¼ å…¥å€¼çš„æ•°æ®æ˜¯å¦ä¸º0æˆ–è€…Noneå³å¯ã€‚
ä½†æ˜¯ç»™çš„é”™è¯¯ä¿¡æ¯æœ‰ç‚¹è¯¯å¯¼æ„æ€ï¼Œå› ä¸ºæˆ‘ç”¨çš„æ˜¯å¦ä¸€ä¸ªç‰ˆæœ¬çš„opencvï¼Œè¿˜ä»¥ä¸ºæ˜¯ç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„é”™è¯¯ã€‚å¦‚ä¸‹ï¼Œæç¤ºçš„æ˜¯OpenCV3.4.15ç‰ˆæœ¬
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202709.jpg?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="da3de5c330013051f9be766648ade55.jpg">&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6/">é—®é¢˜é›†é”¦</category><category domain="https://keepjolly.com/categories/%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6/">é—®é¢˜é›†é”¦</category><category domain="https://keepjolly.com/tags/python/">Python</category></item><item><title>å°ç›®æ ‡æ£€æµ‹ç»¼è¿°-åŠæˆå“</title><link>https://keepjolly.com/archives/small-target-detection/</link><guid isPermaLink="true">https://keepjolly.com/archives/small-target-detection/</guid><pubDate>Sat, 11 Mar 2023 20:25:51 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>å› ä¸ºåç»­è½¬ä¸‰ç»´é‡å»ºäº†ï¼Œæ‰€ä»¥åªèƒ½å†™åˆ°ä¸€åŠäº†ï¼Œå¦‚æœ‰éœ€è¦å¯ä»¥æ‰¾æˆ‘è¦æºæ–‡ä»¶
å‚è€ƒè®ºæ–‡ï¼š
&lt;a href="https://arxiv.org/abs/1905.05055">Object Detection in 20 Years: A Survey&lt;/a>&lt;/p>
&lt;h1 id="æ€»è¨€">æ€»è¨€&lt;/h1>
&lt;p>å› ä¸ºä¸æ˜¯å¤§ç¥ï¼Œæ‰€ä»¥éƒ½æ˜¯æ‘˜è‡ªç½‘ç»œæ–‡ç« ï¼Œå¦‚æœ‰é”™è¯¯æ¬¢è¿è¯„è®º&lt;/p>
&lt;h1 id="ç›®æ ‡æ£€æµ‹">ç›®æ ‡æ£€æµ‹&lt;/h1>
&lt;h2 id="ä¼ ç»Ÿç›®æ ‡æ£€æµ‹">ä¼ ç»Ÿç›®æ ‡æ£€æµ‹&lt;/h2>
&lt;h3 id="viola-jones-detector">Viola Jones Detector&lt;/h3>
&lt;p>è®ºæ–‡ï¼š&lt;a href="https://www.cs.cmu.edu/~efros/courses/LBMV07/Papers/viola-cvpr-01.pdf">Rapid Object Detection using a Boosted Cascade of Simple Features&lt;/a>
2001å¹´æå‡ºï¼ŒåŸºäºæ»‘åŠ¨çª—å£çš„ç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œé€šè¿‡ç§¯åˆ†å›¾åƒæ¥åŠ é€Ÿå¯¹Haar-likeç‰¹å¾çš„è®¡ç®—ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•æ¥åŠ é€Ÿç½‘ç»œè®¡ç®—ä»¥åŠæé«˜å‡†ç¡®ç‡ã€‚&lt;/p>
&lt;h4 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h4>
&lt;ul>
&lt;li>Integral imageï¼š&lt;a href="https://codeantenna.com/a/GBSSZGRWWG">è§£æ&lt;/a>&lt;/li>
&lt;li>Feature selectionï¼šä½¿ç”¨Adaboostå¯¹å€™é€‰ç‰¹å¾ç­›é€‰ï¼Œæ‰¾åˆ°æœ€æœ‰ä»£è¡¨æ€§çš„ä¸€å°ç»„ç‰¹å¾&lt;/li>
&lt;li>Detection cascades
&lt;ul>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202415.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="ä¼˜ç¼ºç‚¹">ä¼˜ç¼ºç‚¹&lt;/h4>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>å…·æœ‰é‡Œç¨‹ç¢‘çš„æ„ä¹‰&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨çš„Harr-likeç‰¹å¾è¾ƒç®€å•ï¼Œç¨³å®šæ€§è¾ƒä½&lt;/li>
&lt;li>å¼±åˆ†ç±»å™¨é‡‡ç”¨ç®€å•çš„å†³ç­–æ ‘ï¼Œå®¹æ˜“è¿‡æ‹Ÿåˆï¼Œå¯¹äººè„¸çš„é®æŒ¡ã€å…‰æš—ç­‰å› ç´ å¤„ç†æ•ˆæœä¸ç†æƒ³&lt;/li>
&lt;li>é²æ£’æ€§è¾ƒå·®&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://blog.csdn.net/qq_16829085/article/details/108680639">ç›®æ ‡æ£€æµ‹ä¹‹ Viola-Jones&lt;/a>ã€&lt;a href="https://segmentfault.com/a/1190000023017586">viola jonesäººè„¸æ£€æµ‹åŸç†&lt;/a>&lt;/p>
&lt;h3 id="hog-detector">HOG Detector&lt;/h3>
&lt;p>è®ºæ–‡ï¼š&lt;a href="https://lear.inrialpes.fr/people/triggs/pubs/Dalal-cvpr05.pdf">Histograms of Oriented Gradients for Human Detection&lt;/a>
HOGï¼ˆHistogram of Oriented Gridientsçš„ç®€å†™ï¼‰ç‰¹å¾æ£€æµ‹ç®—æ³•ï¼Œæœ€æ—©æ˜¯ç”±æ³•å›½ç ”ç©¶å‘˜Dalalç­‰åœ¨CVPR-2005ä¸Šæå‡ºæ¥çš„ï¼Œä¸€ç§è§£å†³äººä½“ç›®æ ‡æ£€æµ‹çš„å›¾åƒæè¿°å­ï¼Œæ˜¯ä¸€ç§ç”¨äºè¡¨å¾å›¾åƒå±€éƒ¨æ¢¯åº¦æ–¹å‘å’Œæ¢¯åº¦å¼ºåº¦åˆ†å¸ƒç‰¹æ€§çš„æè¿°ç¬¦ã€‚å…¶ä¸»è¦æ€æƒ³æ˜¯ï¼šåœ¨è¾¹ç¼˜å…·ä½“ä½ç½®æœªçŸ¥çš„æƒ…å†µä¸‹ï¼Œè¾¹ç¼˜æ–¹å‘çš„åˆ†å¸ƒä¹Ÿå¯ä»¥å¾ˆå¥½çš„è¡¨ç¤ºè¡Œäººç›®æ ‡çš„å¤–å½¢è½®å»“ã€‚&lt;/p>
&lt;h4 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•-1">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h4>
&lt;ol>
&lt;li>ç°åº¦åŒ–ã€é¢œè‰²ç©ºé—´å½’ä¸€åŒ–ï¼šGammaæ ¡æ­£&lt;/li>
&lt;li>è®¡ç®—å›¾åƒä¸­æ¯ä¸ªåƒç´ çš„æ¢¯åº¦å€¼å’Œæ¢¯åº¦æ–¹å‘&lt;/li>
&lt;li>å°†å›¾åƒåˆ’åˆ†æˆå¤šä¸ªpixelÃ—pixel cellsï¼Œå¹¶è®¡ç®—æ¯ä¸ªcellçš„æ¢¯åº¦ç›´æ–¹å›¾ï¼Œå³ä¸ºæè¿°å­(descriptor)
&lt;ol>
&lt;li>æ¢¯åº¦ç›´æ–¹å›¾çš„xä¸ºæ¢¯åº¦æ–¹å‘çš„æ˜ å°„ï¼Œyä¸ºæ¢¯åº¦å€¼çš„ç´¯åŠ &lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>å°†numä¸ªcellså½’ä¸€åŒ–ååˆå¹¶æˆä¸€ä¸ªblockï¼Œæœ€åä¼šå½¢æˆå¤šä¸ªå¸¦é‡å éƒ¨åˆ†çš„blockã€‚æ¯ä¸ªblockå†…ä¸ºcellså†…çš„å‘é‡concat
&lt;ol>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202415-1.gif?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="">&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>æœ€åå°†æ‰€æœ‰blockçš„å‘é‡å†æ¬¡ä¸²è”ï¼Œå³HOGç‰¹å¾&lt;/li>
&lt;/ol>
&lt;p>ç¤ºä¾‹ï¼š
å›¾åƒå¤§å°ä¸ºï¼š64Ã—128, blockå¤§å°ä¸º16Ã—16ï¼Œ block strideä¸º8Ã—8ï¼Œcell sizeä¸º8Ã—8ï¼Œbins=9ï¼ˆç›´æ–¹å›¾ç­‰çº§æ•°ï¼‰ï¼›&lt;/p>
&lt;ul>
&lt;li>å—ä¸ªæ•°ä¸ºï¼š((64-16)/8+1) Ã— ((128-16)/8 +1) = 105
&lt;ul>
&lt;li>å…¶ä¸­é‡å éƒ¨åˆ†å°±æ˜¯å› ä¸º16 &amp;gt; 8&lt;/li>
&lt;li>(64-16)/8 è®¡ç®—é™¤ç¬¬ä¸€ä¸ªblockåè¿˜å¯ä»¥èµ°å¤šå°‘æ­¥ï¼Œç„¶ååŠ ä¸Šç¬¬ä¸€æ¬¡ä¸åŠ¨çš„æ¬¡æ•°+1&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ¯ä¸ªå—å†…cellä¸ªæ•°ï¼› (16Ã—16)/(8Ã—8)=4&lt;/li>
&lt;li>æ¯å¼ å›¾ç‰¹å¾ç»´åº¦ï¼š105Ã—4Ã—9=3780&lt;/li>
&lt;/ul>
&lt;p>è·å–åˆ°æ¯å¼ å›¾çš„ç‰¹å¾ç»´åº¦åï¼Œå†ç”¨çº¿æ€§SVMè®­ç»ƒåˆ†ç±»å™¨å³å¯ã€‚&lt;/p>
&lt;h4 id="ä¼˜ç¼ºç‚¹-1">ä¼˜ç¼ºç‚¹&lt;/h4>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨contrast-normalize the local responseæ¥ä½¿å¾—å±€éƒ¨å‡ ä½•å’Œå…‰å­¦å½¢å˜å…·æœ‰ä¸å˜æ€§&lt;/li>
&lt;li>å®¹è®¸è¡Œäººæœ‰ç»†å¾®è‚¢ä½“åŠ¨ä½œï¼Œé€‚åˆäººä½“æ£€æµ‹&lt;/li>
&lt;li>åˆ†å—åˆ†å•å…ƒçš„æ–¹æ³•ï¼Œä½¿å¾—å›¾åƒå±€éƒ¨åƒç´ ç‚¹ä¹‹é—´çš„å…³ç³»å¾—åˆ°å¾ˆå¥½åœ°è¡¨å¾&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹&lt;/p>
&lt;ul>
&lt;li>ç‰¹å¾ç»´åº¦å¤§ï¼Œå®æ—¶æ€§å·®&lt;/li>
&lt;li>å¾ˆéš¾å¤„ç†é®æŒ¡é—®é¢˜&lt;/li>
&lt;li>å¯¹å™ªç‚¹æ•æ„Ÿ&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://blog.csdn.net/hujingshuang/article/details/47337707">ã€ç‰¹å¾æ£€æµ‹ã€‘HOGç‰¹å¾ç®—æ³•&lt;/a>ã€&lt;a href="https://www.jianshu.com/p/033cfd13e613">ç›®æ ‡æ£€æµ‹HOGç‰¹å¾è§£è¯»&lt;/a>ã€&lt;a href="https://www.cnblogs.com/alexme/p/11361563.html">HOG ç‰¹å¾æå–ç®—æ³•ï¼ˆå®è·µç¯‡ï¼‰&lt;/a>ã€&lt;a href="https://www.jianshu.com/p/ad673c1e601d">HOGç‰¹å¾&lt;/a>&lt;/p>
&lt;h3 id="deformable-part-based-modeldpm">Deformable Part-based Model(DPM)&lt;/h3>
&lt;p>è®ºæ–‡ï¼š&lt;a href="https://www.rossgirshick.info/latent/">Discriminatively trained deformable part models&lt;/a>
ç”±P. Felzenszwalbåœ¨2008æå‡ºï¼Œä½œä¸ºHOGçš„æ‰©å±•ç‰ˆã€‚DPMçš„è®¾è®¡ç†å¿µæ˜¯â€œdivide and conquerâ€ï¼Œè®­ç»ƒæ—¶åˆ†è§£å¯¹è±¡ï¼Œæ¨ç†æ—¶ç»„åˆä¸åŒéƒ¨ä»¶ã€‚DPMçš„æœ¬è´¨å°±æ˜¯&lt;strong>å¼¹ç°§å½¢å˜æ¨¡å‹ã€‚&lt;/strong>
DPMç®—æ³•é‡‡ç”¨äº†æ”¹è¿›åçš„HOGç‰¹å¾ï¼ŒSVMåˆ†ç±»å™¨å’Œæ»‘åŠ¨çª—å£ï¼ˆSliding Windowsï¼‰æ£€æµ‹æ€æƒ³ï¼Œé’ˆå¯¹ç›®æ ‡çš„å¤šè§†è§’é—®é¢˜ï¼Œé‡‡ç”¨äº†å¤šç»„ä»¶ï¼ˆComponentï¼‰çš„ç­–ç•¥ï¼Œé’ˆå¯¹ç›®æ ‡æœ¬èº«çš„å½¢å˜é—®é¢˜ï¼Œé‡‡ç”¨äº†åŸºäºå›¾ç»“æ„ï¼ˆPictorial Structureï¼‰çš„éƒ¨ä»¶æ¨¡å‹ç­–ç•¥ã€‚æ­¤å¤–ï¼Œå°†æ ·æœ¬çš„æ‰€å±çš„æ¨¡å‹ç±»åˆ«ï¼Œéƒ¨ä»¶æ¨¡å‹çš„ä½ç½®ç­‰ä½œä¸ºæ½œå˜é‡ï¼ˆLatent Variableï¼‰ï¼Œé‡‡ç”¨å¤šç¤ºä¾‹å­¦ä¹ ï¼ˆMultiple-instance Learningï¼‰æ¥è‡ªåŠ¨ç¡®å®šã€‚&lt;/p>
&lt;h4 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•-2">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h4>
&lt;ul>
&lt;li>ç»å…¸DPMç”±ä¸€ä¸ªroot-filterå’Œå¤šä¸ªpart-filterç»„æˆã€‚&lt;/li>
&lt;li>LatentSVMï¼šä½¿å¾—ä¸ç”¨æ ‡å‡ºpartæ¡†&lt;/li>
&lt;li>ä½¿ç”¨ç¡¬è´Ÿæ ·æœ¬æŒ–æ˜ï¼šè§£å†³æ ·æœ¬ä¸å¹³è¡¡é—®é¢˜&lt;/li>
&lt;li>è¾¹ç•Œæ¡†å›å½’&lt;/li>
&lt;li>context primingï¼šåˆ©ç”¨å±€éƒ¨ä¿¡æ¯&lt;/li>
&lt;li>æ··åˆæ¨¡å‹ï¼šå­¦ä¹ å¤šä¸ªæ¨¡å‹æ¥é€‚åº”ç‰©ä½“ä¸åŒå½¢å˜&lt;/li>
&lt;li>å›¾åƒé‡‘å­—å¡”ï¼šé€‚åº”å½¢å˜&lt;/li>
&lt;/ul>
&lt;h4 id="ä¼˜ç¼ºç‚¹-2">ä¼˜ç¼ºç‚¹&lt;/h4>
&lt;p>ä¼˜ç‚¹&lt;/p>
&lt;ul>
&lt;li>è¿ç®—é€Ÿåº¦å¿«ï¼Œé€‚åº”ç‰©ä½“å½¢å˜ï¼Œæ–¹æ³•ç›´è§‚ç®€å•&lt;/li>
&lt;li>Although today's object detectors have far surpassed DPM in terms of the detection accuracy, many of them are still deeply influenced by its valuable insights&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹&lt;/p>
&lt;ul>
&lt;li>æ€§èƒ½ä¸€èˆ¬&lt;/li>
&lt;li>æ— æ³•é€‚åº”å¤§å¹…åº¦æ—‹è½¬ä»¥åŠå½“å›¾åƒä¸­ç›®æ ‡åƒç´ è¿œå°äºroot filteræ—¶æ— æ³•æ£€æµ‹&lt;/li>
&lt;/ul>
&lt;h4 id="è§£æƒ‘">è§£æƒ‘&lt;/h4>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202415-2.jpg?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="">
DPMé¦–å…ˆé‡‡ç”¨çš„æ˜¯HOGè¿›è¡Œç‰¹å¾çš„æå–ï¼Œä½†æ˜¯åˆæœ‰åˆ«äºHOGï¼ŒDPMä¸­ï¼Œåªä¿ç•™äº†HOGä¸­çš„Cellã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‡è®¾ï¼Œä¸€ä¸ª8&lt;em>8çš„Cellï¼Œå°†è¯¥ç»†èƒå•å…ƒä¸å…¶å¯¹è§’çº¿ä¸´åŸŸçš„4ä¸ªç»†èƒå•å…ƒåšå½’ä¸€åŒ–æ“ä½œã€‚
æå–æœ‰ç¬¦å·çš„HOGæ¢¯åº¦ï¼Œ0-360åº¦å°†äº§ç”Ÿ18ä¸ªæ¢¯åº¦å‘é‡ï¼Œæå–æ— ç¬¦å·çš„HOGæ¢¯åº¦ï¼Œ0-180åº¦å°†äº§ç”Ÿ9ä¸ªæ¢¯åº¦å‘é‡ã€‚å› æ­¤ï¼Œä¸€ä¸ª8&lt;/em>8çš„ç»†èƒå•å…ƒå°†ä¼šäº§ç”Ÿï¼Œï¼ˆ18+9ï¼‰&lt;em>4=108 ï¼ˆ&lt;strong>å…¶ä¸­çš„4æ˜¯4ä¸ªç›¸å¯¹é‚»åŸŸï¼Œè¿™é‡Œçœ‹çš„æ—¶å€™æ²¡çœ‹æ‡‚&lt;/strong>ï¼‰ï¼Œç»´åº¦æœ‰ç‚¹é«˜ï¼ŒFelzenszwalbå¤§ç¥ç»™å‡ºäº†å…¶ä¼˜åŒ–æ€æƒ³ã€‚
é¦–å…ˆï¼Œåªæå–æ— ç¬¦å·çš„HOGæ¢¯åº¦ï¼Œå°†ä¼šäº§ç”Ÿ4&lt;/em>9=36ç»´ç‰¹å¾ï¼Œå°†å…¶çœ‹æˆä¸€ä¸ª4*9çš„çŸ©é˜µï¼Œåˆ†åˆ«å°†è¡Œå’Œåˆ—åˆ†åˆ«ç›¸åŠ ï¼Œæœ€ç»ˆå°†ç”Ÿæˆ4+9=13ä¸ªç‰¹å¾å‘é‡ï¼Œä¸ºäº†è¿›ä¸€æ­¥æé«˜ç²¾åº¦ï¼Œå°†æå–çš„18ç»´æœ‰ç¬¦å·çš„æ¢¯åº¦ç‰¹å¾ä¹ŸåŠ è¿›æ¥ï¼Œè¿™æ ·ï¼Œä¸€å…±äº§ç”Ÿ13+18=&lt;a href="https://blog.csdn.net/sysu_yuhaibao/article/details/76599926">31ç»´æ¢¯åº¦ç‰¹å¾&lt;/a>ï¼ˆå¦ä¸€ä¸ªè§£é‡Šï¼‰ã€‚å®ç°äº†å¾ˆå¥½çš„ç›®æ ‡æ£€æµ‹ã€‚&lt;/p>
&lt;hr>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://blog.csdn.net/qq_14845119/article/details/52625426">DPMï¼ˆDeformable Part Modelï¼‰åŸç†è¯¦è§£&lt;/a>ã€&lt;a href="https://blog.csdn.net/ttransposition/article/details/12966521">DPM(Deformable Parts Model)--åŸç†(ä¸€)&lt;/a>ã€&lt;a href="https://blog.csdn.net/ttransposition/article/details/41806601">DPMç›®æ ‡æ£€æµ‹ç®—æ³•(æ¯•ä¸šè®ºæ–‡èŠ‚é€‰)&lt;/a>ã€&lt;a href="https://cloud.tencent.com/developer/article/1729851">å¤šä¸ªåšå®¢çš„ç»„åˆä½“&lt;/a>ã€&lt;a href="https://www.zhihu.com/question/27726840">ä»€ä¹ˆæ˜¯latent SVMï¼Ÿ&lt;/a>ã€&lt;a href="https://zhuanlan.zhihu.com/p/41508881">DPMæ¨¡å‹&lt;/a>ã€&lt;a href="https://www.cnblogs.com/henuliulei/p/12109100.html">ä¼ ç»Ÿç›®æ ‡æ£€æµ‹ç®—æ³•ä¹‹DPM&lt;/a>&lt;/p>
&lt;h3 id="æ€»ç»“">æ€»ç»“&lt;/h3>
&lt;p>åŸºäºæ‰‹å·¥æå–ç‰¹å¾çš„ä¼ ç»Ÿç›®æ ‡æ£€æµ‹ç®—æ³•ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªç¼ºç‚¹ï¼š&lt;/p>
&lt;ol>
&lt;li>è¯†åˆ«æ•ˆæœä¸å¤Ÿå¥½ï¼Œå‡†ç¡®ç‡ä¸é«˜&lt;/li>
&lt;li>è®¡ç®—é‡è¾ƒå¤§ï¼Œè¿ç®—é€Ÿåº¦æ…¢&lt;/li>
&lt;li>å¯èƒ½äº§ç”Ÿå¤šä¸ªæ­£ç¡®è¯†åˆ«çš„ç»“æœ&lt;/li>
&lt;/ol>
&lt;h2 id="æ·±åº¦å­¦ä¹ æ£€æµ‹">æ·±åº¦å­¦ä¹ æ£€æµ‹&lt;/h2>
&lt;h3 id="two-stage-detection">two-stage detection&lt;/h3>
&lt;p>æ€»ç»“æ€§åšå®¢ï¼š&lt;a href="https://blog.csdn.net/hust_lmj/article/details/78974348">RCNNç³»åˆ—æ€»ç»“&lt;/a>ã€&lt;a href="https://www.cnblogs.com/yifanrensheng/p/12846798.html">ç›®æ ‡æ£€æµ‹ï¼šR-CNNã€SPP,Fast R-CNNã€Faster R-CNN&lt;/a>ã€&lt;a href="https://zhuanlan.zhihu.com/p/80856944">Faster RCNNç³»åˆ—ç®—æ³•åŸç†&lt;/a>ã€&lt;a href="https://www.citisy.site/posts/18732.html">ç›®æ ‡æ£€æµ‹-RCNNç³»åˆ—&lt;/a>ã€&lt;a href="https://www.yanxishe.com/columnDetail/21514#1--%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B">å°å“²AIä¸“æ æ–‡ç« åˆ†ç±»ç´¢å¼•&lt;/a>
å’±ä¹Ÿä¸çŸ¥é“RCNNå®¶æ—æœ‰å¤šå°‘ï¼Œè¿™é‡Œåªå¥½åˆ—ä¸¾äº†RCNNâ†’SPPnetâ†’Fast RCNNâ†’Faster RCNNâ†’FPNâ†’MaskRCNNâ†’Cascade RCNN
å¦å¤–äºŒé˜¶æ®µæ£€æµ‹æ‰€åŒ…å«çš„è¿™äº›ç½‘ç»œå¦‚æœ‰è¯¯ï¼Œæ¬¢è¿è¯„è®º
äºŒé˜¶æ®µï¼š1ï¼Œå…ˆäº§ç”Ÿé«˜è´¨é‡æ¡†ï¼Œ2. å¯¹æ¡†è¿›è¡Œå¾®è°ƒ coarse to fine
ä¸€é˜¶æ®µï¼šä¸€æ­¥åˆ°ä½&lt;/p>
&lt;h4 id="rcnnæå‡ºæ•°æ®ç¨€å°‘çš„è§£å†³æ–¹æ¡ˆ">RCNNï¼ˆæå‡ºæ•°æ®ç¨€å°‘çš„è§£å†³æ–¹æ¡ˆï¼‰&lt;/h4>
&lt;p>è®ºæ–‡ï¼š&lt;a href="https://arxiv.org/pdf/1311.2524.pdf">Rich feature hierarchies for accurate object detection and semantic segmentation&lt;/a>
æœ€è¿‘å‡ å¹´ï¼Œç‰©ä½“æ£€æµ‹é™·å…¥åœæ»ï¼Œè¡¨ç°æœ€å¥½çš„æ£€æµ‹ç³»ç»Ÿæ˜¯å¤æ‚çš„å°†å¤šä½å±‚çº§çš„å›¾åƒç‰¹å¾ä¸é«˜å±‚çº§çš„ç‰©ä½“æ£€æµ‹å™¨ç¯å¢ƒä¸åœºæ™¯è¯†åˆ«ç›¸ç»“åˆã€‚æˆ‘ä»¬å–å¾—è¿™ä¸ªæ€§èƒ½ä¸»è¦é€šè¿‡ä¸¤ä¸ªæ–¹é¢ï¼šç¬¬ä¸€æ˜¯åº”ç”¨äº†è‡ªåº•å‘ä¸Šçš„å€™é€‰æ¡†è®­ç»ƒçš„é«˜å®¹é‡çš„å·ç§¯ç¥ç»ç½‘ç»œè¿›è¡Œå®šä½å’Œåˆ†å‰²ç‰©ä½“ã€‚å¦å¤–ä¸€ä¸ªæ˜¯ä½¿ç”¨åœ¨æ ‡ç­¾æ•°æ®åŒ®ä¹çš„æƒ…å†µä¸‹è®­ç»ƒå¤§è§„æ¨¡ç¥ç»ç½‘ç»œçš„ä¸€ä¸ªæ–¹æ³•ã€‚&lt;/p>
&lt;h5 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•-3">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h5>
&lt;ol>
&lt;li>ç›®æ ‡æ£€æµ‹ï¼š
&lt;ol>
&lt;li>äº§ç”Ÿå€™é€‰åŒºåŸŸï¼šSelective Search é€‰å‡º2kä¸ªå€™é€‰åŒºåŸŸ&lt;/li>
&lt;li>å¯¹æ¯ä¸ªå€™é€‰åŒºåŸŸè¿›è¡Œç‰¹å¾æå–ï¼šCNN â†’ 2000Ã—4096 dimç‰¹å¾å‘é‡&lt;/li>
&lt;li>å€™é€‰åŒºåŸŸç±»åˆ«åˆ¤æ–­ï¼šSVM 4096Ã—Nï¼ˆ20ç±»åˆ«+1èƒŒæ™¯ï¼‰+NMS&lt;/li>
&lt;li>ä½¿ç”¨å›å½’å¯¹å…¶å€™é€‰æ¡†è°ƒæ•´ï¼šregression&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>Selective Search â†’ CNNâ†’ SVMâ†’ regression&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202415-3.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;/ol>
&lt;p>åˆ†æç½‘ç»œé‡‡ç”¨Hoiemç­‰äººçš„å®šä½åˆ†æå·¥å…·ï¼šDiagnosing error in object detectorsï¼Œçœ‹åˆ°è¿›åŒ–ç‰ˆåˆ†æå·¥å…·ï¼šA General Toolbox for Identifying Object Detection Errors&lt;/p>
&lt;h5 id="ä¼˜ç¼ºç‚¹-3">ä¼˜ç¼ºç‚¹&lt;/h5>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨CNNæ¥æå–ç‰¹å¾ï¼Œå‡å°‘äººå·¥æ“ä½œ&lt;/li>
&lt;li>ä½¿ç”¨è¿ç§»å­¦ä¹ æ¥æé«˜æ€§èƒ½&lt;/li>
&lt;li>å½“å¸¦æ ‡ç­¾çš„è®­ç»ƒæ•°æ®ä¸è¶³æ—¶ï¼Œå…ˆé’ˆå¯¹è¾…åŠ©æ•°æ®é›†è¿›è¡Œæœ‰ç›‘ç£æ–¹å¼çš„é¢„è®­ç»ƒï¼Œå†è¿›è¡Œç‰¹å®šå°æ•°æ®é›†çš„è°ƒä¼˜ï¼Œå°±å¯ä»¥äº§ç”Ÿæ˜æ˜¾çš„æ€§èƒ½æå‡ã€‚ï¼ˆè¿ç§»å­¦ä¹ ï¼‰&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>é€Ÿåº¦æ…¢ï¼Œå­˜åœ¨å¤§é‡é‡å¤è®¡ç®—&lt;/li>
&lt;li>è®­ç»ƒæ­¥éª¤ç¹ç&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://blog.csdn.net/v1_vivian/article/details/78599229">R-CNNè®ºæ–‡è¯¦è§£ï¼ˆè®ºæ–‡ç¿»è¯‘ï¼‰&lt;/a>ã€&lt;a href="https://zhuanlan.zhihu.com/p/42643788">RCNN è®ºæ–‡é˜…è¯»è®°å½• è¿˜ä»‹ç»äº†ä¸€äº›æ–¹æ³•&lt;/a>&lt;/p>
&lt;h4 id="sppnet">SPPnet&lt;/h4>
&lt;p>è®ºæ–‡ï¼š&lt;a href="https://arxiv.org/abs/1406.4729">Spatial Pyramid Pooling in Deep Convolutional Networks for Visual Recognition&lt;/a>
æ™®éçš„CNNéœ€è¦å›ºå®šè¾“å…¥å›¾ç‰‡å¤§å°ï¼ŒåŸå› æ˜¯å·ç§¯å±‚åçš„å…¨è¿æ¥å±‚éœ€è¦å›ºå®šé•¿åº¦çš„è¾“å…¥ã€‚SPPæ˜¯Bag-of-wordsæ¨¡å‹çš„æ‰©å±•ï¼Œæ˜¯è§†è§‰æœ€æˆåŠŸçš„æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒå°†å›¾åƒåˆ’åˆ†ä¸ºä»ç²¾ç»†åˆ°ç²—ç³™ç©ºé—´ï¼Œå¹¶èšåˆå…¶ä¸­çš„å±€éƒ¨ç‰¹å¾ã€‚&lt;/p>
&lt;h5 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•-4">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h5>
&lt;p>ç½‘ç»œæ¶æ„ï¼š
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202415-4.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ol>
&lt;li>ç›®æ ‡æ£€æµ‹
&lt;ol>
&lt;li>æå–2000ä¸ªå€™é€‰æ¡†&lt;/li>
&lt;li>å¯¹æ•´å¼ å›¾ç‰‡é€šè¿‡CNNè¿›è¡Œç‰¹å¾æå–&lt;/li>
&lt;li>å°†å€™é€‰æ¡†æ˜ å°„åˆ°æœ€ç»ˆçš„feature mapsä¸Šï¼Œè¿›è¡Œç©ºé—´é‡‘å­—å¡”æ± åŒ–ï¼Œå¾—åˆ°å›ºå®šé•¿åº¦çš„ç‰¹å¾å‘é‡&lt;/li>
&lt;li>SVMåˆ†ç±»å™¨æ¥æ£€æµ‹&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>&lt;/li>
&lt;/ol>
&lt;h5 id="ä¼˜ç¼ºç‚¹-4">ä¼˜ç¼ºç‚¹&lt;/h5>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>è¾“å…¥ä»»æ„å¤§å°çš„å›¾ç‰‡ï¼Œé˜²æ­¢å‰ªè£ã€æ”¾ç¼©é™ä½ç²¾åº¦ ï¼ˆä¼˜åŒ–RCNNï¼‰&lt;/li>
&lt;li>ä½¿ç”¨CNNå…±äº«å‚æ•°åï¼Œæ˜ å°„å€™é€‰æ¡†åŠ é€Ÿè®¡ç®—ï¼ˆä¼˜åŒ–RCNNï¼‰&lt;/li>
&lt;li>å¯åº”ç”¨åœ¨è®¸å¤šç½‘ç»œä¸Š&lt;/li>
&lt;li>multi-scale feature extraction å¯ä»¥æé«˜ç²¾åº¦&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹ï¼š&lt;/p>
&lt;ol>
&lt;li>åŒR-CNNä¸€æ ·åˆ†å¼€è®­ç»ƒCNNå’ŒSVMã€BBå›å½’å™¨ï¼Œè®­ç»ƒSVMçš„ç‰¹å¾éœ€è¦æå‰ä¿å­˜åœ¨ç£ç›˜éœ€è¦å·¨å¤§çš„å­˜å‚¨ç©ºé—´ï¼›å¤šæ®µè®­ç»ƒå®ç°&lt;strong>è¾ƒå¤æ‚&lt;/strong>&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>CNNå’ŒSVMçš„è®­ç»ƒç‹¬ç«‹å¯¼è‡´SVMçš„è®­ç»ƒLossæ— æ³•æ›´æ–°SPP-Layerä¹‹å‰çš„å·ç§¯å±‚å‚æ•°ï¼Œå› æ­¤å³ä½¿é‡‡ç”¨æ›´æ·±çš„CNNç½‘ç»œè¿›è¡Œç‰¹å¾æå–ï¼Œä¹Ÿæ— æ³•ä¿è¯SVMsåˆ†ç±»å™¨çš„å‡†ç¡®ç‡ä¸€å®šèƒ½å¤Ÿæå‡&lt;/li>
&lt;li>(1)spp layeræœ‰multi-scaleçš„poolingï¼Œæ­£å‘è¿˜å¥½ï¼Œåå‘ä¼ æ’­å¼€é”€å¤§ã€‚
(2)sppnetåï¼Œfast-rcnnçš„roi pooling æœ¬è´¨ä¸Šå°±æ˜¯ä¸€å±‚çš„spp pooling, è¿™ç¯‡paperè¡¨æ˜, è¿ç®—æˆæœ¬æ›´ä½çš„ roi pooling(å³ single-scale spp)å¹¶ä¸æ¯”è¿ç®—å¼€é”€æ›´å¤§çš„multi-scaleçš„spp è¦å·®ã€‚è¿™é‡Œçš„ä¸€å±‚spp æ± åŒ–æŒ‡çš„åº”è¯¥æ˜¯åªæœ‰ä¸€å±‚æ± åŒ–è€Œä¸æ˜¯åƒé‡‘å­—å¡”ä¸€æ ·æœ‰å¤šå±‚æ± åŒ–ã€‚
(3)ç²˜è‡ª &lt;a href="https://zhuanlan.zhihu.com/p/24774302">è¯„è®º&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://blog.csdn.net/hust_lmj/article/details/78974348#t9">SPPä¼˜ç¼ºç‚¹&lt;/a>ã€&lt;a href="https://cloud.tencent.com/developer/article/1441559">ç©ºé—´é‡‘å­—å¡”æ± åŒ–ç½‘ç»œSPPNetè¯¦è§£&lt;/a>ã€&lt;a href="https://blog.csdn.net/u011534057/article/details/51219959">RCNNå­¦ä¹ ç¬”è®°(3)&lt;/a>ã€&lt;a href="https://cloud.tencent.com/developer/article/1829792">ROIè¯¦è§£&lt;/a>ï¼ˆ&lt;a href="https://erdem.pl/2020/02/understanding-region-of-interest-ro-i-pooling">è‹±æ–‡åŸç‰ˆ&lt;/a>ï¼‰&lt;/p>
&lt;h4 id="fast-rcnn">Fast-RCNN&lt;/h4>
&lt;p>è®ºæ–‡ï¼š&lt;a href="https://arxiv.org/pdf/1504.08083.pdf">Fast R-CNN&lt;/a>&lt;/p>
&lt;h5 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•-5">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h5>
&lt;p>ç½‘ç»œç»“æ„ï¼š
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202415-5.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
ç›®æ ‡æ£€æµ‹ï¼š&lt;/p>
&lt;ol>
&lt;li>äº§ç”Ÿå€™é€‰åŒºåŸŸï¼šåŒRCNNä¸€è‡´&lt;/li>
&lt;li>æå–æ•´å¼ å›¾ç‰‡çš„ç‰¹å¾ç”Ÿæˆç‰¹å¾å›¾ï¼Œå¹¶å°†å€™é€‰åŒºåŸŸæ˜ å°„åˆ°ç‰¹å¾å›¾ä¸Šï¼šåŒSPPnetä¸€è‡´&lt;/li>
&lt;li>å€™é€‰åŒºåŸŸåˆ†ç±»+BBoxå›å½’ï¼šå¯¹&lt;strong>æ¯ä¸ªå€™é€‰åŒºåŸŸ&lt;/strong>ä½¿ç”¨ROI Poolingï¼Œç„¶åè¿›è¡Œsoftmaxåˆ†ç±»+å›å½’&lt;/li>
&lt;/ol>
&lt;h5 id="ä¼˜ç¼ºç‚¹-5">ä¼˜ç¼ºç‚¹&lt;/h5>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>åŠ å…¥å¤šä»»åŠ¡æŸå¤±ï¼Œä½¿å¾—æ¨¡å‹ç”±å¤šé˜¶æ®µè½¬ä¸ºå•é˜¶æ®µï¼Œå®ç°ç«¯åˆ°ç«¯ï¼ˆé™¤SS Region Proposalé˜¶æ®µï¼‰ï¼ˆåˆ›æ–°ç‚¹ï¼‰&lt;/li>
&lt;li>åˆ é™¤SVMåï¼Œå¯ä»¥ä¸€æ¬¡æ›´æ–°æ‰€æœ‰å±‚çš„å‚æ•°ï¼Œå¹¶ä¸”ä¸éœ€è¦å­˜å‚¨åˆ°ç¡¬ç›˜ ï¼ˆä¼˜åŒ–SPPnetï¼‰&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨çš„selective searchåªèƒ½åœ¨CPUä¸Šè·‘ï¼Œé€Ÿåº¦æ…¢&lt;/li>
&lt;/ul>
&lt;h5 id="ä¸€äº›ç»“è®º">ä¸€äº›ç»“è®º&lt;/h5>
&lt;ul>
&lt;li>å¤šä»»åŠ¡æ¯”å¤šé˜¶æ®µè®­ç»ƒå¥½&lt;/li>
&lt;li>å‘ç°SPPnetçš„å¤šå°ºåº¦è®­ç»ƒå¹¶ä¸æ¯”å•å°ºåº¦è®­ç»ƒå¥½ï¼Œå› ä¸ºå°ºåº¦ä¸å˜æ€§ï¼Œæ‰€ä»¥ä½¿ç”¨ROI æ± åŒ–&lt;/li>
&lt;li>è®­ç»ƒæ•°æ®å½“ç„¶è¶Šå¤šè¶Šå¥½&lt;/li>
&lt;li>softmaxæ¯”SVMç•¥å¥½&lt;/li>
&lt;li>å€™é€‰æ¡†è¶Šå¤šï¼ŒmAPå‘ˆç°å…ˆå£°åé™çš„è¶‹åŠ¿&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://zhuanlan.zhihu.com/p/42738847">ç‰©ä½“æ£€æµ‹ä¹‹Fast R-CNN&lt;/a>ã€&lt;a href="https://zhuanlan.zhihu.com/p/383167028">RCNN ç³»åˆ—è¯¦è§£&lt;/a>ã€&lt;a href="https://www.cnblogs.com/zyly/p/9246418.html">ç›®æ ‡æ£€æµ‹ç®—æ³•ä¹‹Fast R-CNNç®—æ³•è¯¦è§£&lt;/a>&lt;/p>
&lt;h4 id="faster-rcnn">Faster-RCNN&lt;/h4>
&lt;p>è®ºæ–‡ï¼š&lt;a href="https://arxiv.org/abs/1506.01497">Faster R-CNN: Towards Real-Time Object Detection with Region Proposal Networks&lt;/a>&lt;/p>
&lt;h5 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•-6">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h5>
&lt;p>ç½‘ç»œç»“æ„ï¼š
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202415-6.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ol>
&lt;li>ç‰¹å¾æå–ï¼šå…¨å·ç§¯å±‚&lt;/li>
&lt;li>å€™é€‰æ¡†ç”Ÿæˆ+å€™é€‰æ¡†è°ƒæ•´ï¼šRPNç½‘ç»œ&lt;/li>
&lt;li>ç”Ÿæˆå›ºå®šé•¿åº¦å‘é‡ï¼šRoi æ± åŒ–&lt;/li>
&lt;li>åˆ†ç±»+å¾®è°ƒï¼šsoftamx+å›å½’&lt;/li>
&lt;/ol>
&lt;h5 id="ä¼˜ç¼ºç‚¹-6">ä¼˜ç¼ºç‚¹&lt;/h5>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ç«¯åˆ°ç«¯ç½‘ç»œï¼ˆæ”¹è¿›Fastï¼‰&lt;/li>
&lt;li>ä½¿ç”¨RPNæ›¿ä»£é€‰æ‹©æ€§æœç´¢ï¼Œæé«˜é€Ÿåº¦ï¼ˆæ”¹è¿›Fastï¼‰&lt;/li>
&lt;li>å…±äº«RPNå’ŒFast R-CNNç‰¹å¾ï¼ˆæ”¹è¿›Fastï¼‰&lt;/li>
&lt;li>RCNNé›†å¤§æˆä¹‹ä½œï¼ˆæ”¹è¿›Fastï¼‰&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>æ­¥éª¤ç¹çã€é€Ÿåº¦æ…¢&lt;/li>
&lt;li>é‡å ç‰¹å¾å®¹æ˜“æ¼æ£€ï¼ˆNMSçš„åŸå› ï¼‰&lt;/li>
&lt;li>&lt;a href="https://blog.csdn.net/qq_41214679/article/details/114595001#t2">é‡æ–°å®¡è§†Faster RCNNï¼šä¼˜ç¼ºç‚¹ä¸æ”¹è¿›&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://zhuanlan.zhihu.com/p/31426458">ä¸€æ–‡è¯»æ‡‚Faster RCNNï¼ˆå®Œå–„ï¼‰&lt;/a>ã€&lt;a href="https://www.cnblogs.com/guoyaohua/p/9488119.html">Faster R-CNNï¼šè¯¦è§£ç›®æ ‡æ£€æµ‹çš„å®ç°è¿‡ç¨‹&lt;/a>&lt;/p>
&lt;h4 id="fpnfaster-rcnn">FPN+Faster RCNN&lt;/h4>
&lt;p>è®ºæ–‡ï¼š&lt;a href="https://arxiv.org/abs/1612.03144">Feature Pyramid Networks for Object Detection&lt;/a>
èåˆæ·±æµ…å±‚ç‰¹å¾ï¼Œè§£å†³ä¸åŒå°ºå¯¸ç›®æ ‡é¢„æµ‹&lt;/p>
&lt;h5 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•-7">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h5>
&lt;p>FPNç½‘ç»œæ€æƒ³&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202415-7.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;ol>
&lt;li>å›¾ç‰‡è¾“å…¥resnetï¼Œæ„å»ºè‡ªåº•å‘ä¸Šç½‘ç»œ&lt;/li>
&lt;li>æ„å»ºå¯¹åº”è‡ªé¡¶å‘ä¸‹ç½‘ç»œï¼Œæ¯å±‚è¿›è¡ŒRPNæ“ä½œï¼Œç„¶åè¿›è¡ŒROIæ± åŒ–&lt;/li>
&lt;li>å°†å¾—åˆ°çš„ROIåˆ†åˆ«è¿›è¡Œåˆ†ç±»å’Œå›å½’&lt;/li>
&lt;li>&lt;a href="https://blog.csdn.net/haoji007/article/details/88387635">FPNæ„å»ºFaster R-CNNæ£€æµ‹å™¨&lt;/a>&lt;/li>
&lt;/ol>
&lt;h5 id="ä¼˜ç¼ºç‚¹-7">ä¼˜ç¼ºç‚¹&lt;/h5>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ç»“åˆæ·±æµ…å±‚å’Œå¤šåˆ†è¾¨ç‡ç‰¹å¾è¿›è¡Œèåˆ&lt;/li>
&lt;li>ä¸»å¹²ç½‘ç»œï¼Œå¯ä»¥é€‚é…å¾ˆå¤šæ¨¡å‹&lt;/li>
&lt;/ul>
&lt;h5 id="trick">trickï¼š&lt;/h5>
&lt;ul>
&lt;li>ä½¿ç”¨3Ã—3å·ç§¯é™ä½ä¸Šé‡‡æ ·å½±å“&lt;/li>
&lt;li>ä½¿ç”¨1Ã—1å·ç§¯åŒ¹é…è¾“å…¥çš„ç»´åº¦&lt;/li>
&lt;/ul>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://zhuanlan.zhihu.com/p/78160468">Feature Pyramid Network è¯¦è§£ç‰¹å¾é‡‘å­—å¡”ç½‘ç»œFPNçš„æ¥é¾™å»è„‰&lt;/a>ã€&lt;a href="https://zhuanlan.zhihu.com/p/62604038">ã€ç›®æ ‡æ£€æµ‹ã€‘FPN(Feature Pyramid Network)&lt;/a>&lt;/p>
&lt;h4 id="mask-rcnnroi-align">Mask-RCNNï¼ˆRoI Alignï¼‰&lt;/h4>
&lt;p>è®ºæ–‡ï¼š&lt;a href="https://arxiv.org/pdf/1703.06870.pdf">Mask R-CNN&lt;/a>
åŠ å…¥maskå’ŒRoI Alignä½¿å¾—å¯ä»¥è¿›è¡Œåˆ†å‰²ä»»åŠ¡&lt;/p>
&lt;h5 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•-8">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202415-8.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="">
RoI Align:
&lt;a href="https://blog.csdn.net/weixin_42782150/article/details/110946903">RoIPoolingå’ŒRoIAlignçš„å­¦ä¹ å’Œç†è§£&lt;/a>&lt;/p>
&lt;h5 id="ä¼˜ç¼ºç‚¹-8">ä¼˜ç¼ºç‚¹&lt;/h5>
&lt;ol>
&lt;li>å°†RoIæ± åŒ–ä¿®æ”¹ä¸ºæ›´é€‚åˆåˆ†å‰²ä»»åŠ¡çš„RoI Align&lt;/li>
&lt;/ol>
&lt;hr>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://blog.csdn.net/jiongnima/article/details/79094159">å›¾ç‰‡å‡ºå¤„&lt;/a>ã€&lt;a href="https://blog.csdn.net/qq_37541097/article/details/123754766">Mask R-CNNç½‘ç»œè¯¦è§£&lt;/a>&lt;/p>
&lt;h4 id="cascade-rcnn">Cascade RCNN&lt;/h4>
&lt;p>è®ºæ–‡ï¼š&lt;a href="https://arxiv.org/pdf/1712.00726.pdf">Cascade R-CNN: Delving into High Quality Object Detection&lt;/a>
ä¸»è¦è§£å†³&lt;strong>åœ¨ç›®æ ‡æ£€æµ‹ä¸­ï¼Œæ£€æµ‹æ¡†ä¸æ˜¯ç‰¹åˆ«å‡†ï¼Œå®¹æ˜“å‡ºç°å™ªå£°å¹²æ‰°çš„é—®é¢˜&lt;/strong>ï¼Œ&lt;/p>
&lt;h5 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•-9">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h5>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202415-9.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
é€šè¿‡çº§è”çš„R-CNNç½‘ç»œï¼Œæ¯ä¸ªçº§è”çš„R-CNNè®¾ç½®ä¸åŒçš„IOUé˜ˆå€¼ï¼Œè¿™æ ·æ¯ä¸ªç½‘ç»œè¾“å‡ºçš„å‡†ç¡®åº¦æå‡ä¸€ç‚¹ï¼Œç”¨ä½œä¸‹ä¸€ä¸ªæ›´é«˜ç²¾åº¦çš„ç½‘ç»œçš„è¾“å…¥ï¼Œé€æ­¥å°†ç½‘ç»œè¾“å‡ºçš„å‡†ç¡®åº¦è¿›ä¸€æ­¥æé«˜ã€‚&lt;/p>
&lt;h5 id="ä¼˜ç¼ºç‚¹-9">ä¼˜ç¼ºç‚¹&lt;/h5>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>é¿å…å› IoUå¢å¤§è€Œå¯¼è‡´è®­ç»ƒè¿‡æ‹Ÿåˆ&lt;/li>
&lt;li>ç¼“è§£mismatché—®é¢˜&lt;/li>
&lt;li>é€‚ç”¨ä»»ä½•äºŒé˜¶æ®µç®—æ³•&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ç‰¹å¾æå–éƒ¨åˆ†è€—æ—¶è¾ƒå¤§ï¼Œä¸èƒ½å®æ—¶&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://blog.csdn.net/qq_41375609/article/details/96871118">ã€è®ºæ–‡ç¬”è®°ã€‘&lt;/a>ã€&lt;a href="https://zhuanlan.zhihu.com/p/42553957">Cascade R-CNN è¯¦ç»†è§£è¯»&lt;/a>ï¼ˆä»‹ç»å®éªŒéƒ¨åˆ†ï¼‰ã€&lt;a href="https://zhuanlan.zhihu.com/p/161530664">RCNNç³»åˆ—æ–‡ç« ä¹‹Cascade RCNNè¯¦è§£&lt;/a>ï¼ˆä»‹ç»å®éªŒéƒ¨åˆ†ï¼‰&lt;/p>
&lt;h3 id="one-stage-detection">one-stage detection&lt;/h3>
&lt;h4 id="ç½‘ç»œæ¶æ„ä½¿ç”¨æ–¹æ³•-10">ç½‘ç»œæ¶æ„/ä½¿ç”¨æ–¹æ³•&lt;/h4>
&lt;h4 id="ä¼˜ç¼ºç‚¹-10">ä¼˜ç¼ºç‚¹&lt;/h4>
&lt;p>ä¼˜ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;/li>
&lt;/ul></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E7%A0%94%E7%A9%B6%E7%94%9F%E5%86%85%E5%AE%B9/">ç ”ç©¶ç”Ÿå†…å®¹</category><category domain="https://keepjolly.com/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</category><category domain="https://keepjolly.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">äººå·¥æ™ºèƒ½</category></item><item><title>Java å­¦ä¹  åŠæˆå“</title><link>https://keepjolly.com/archives/java-study/</link><guid isPermaLink="true">https://keepjolly.com/archives/java-study/</guid><pubDate>Sat, 11 Mar 2023 20:23:47 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>åŠè·¯è½¬C++äº†ï¼Œæ‰€ä»¥æ²¡å­¦å®ŒJavaï¼Œç›¸å¯¹æ¥è¯´ï¼ŒéŸ©é¡ºå¹³è¿™ä¸ªJavaè§†é¢‘è®²çš„å¾ˆè¯¦ç»†ï¼Œå¦‚æœæ—¶é—´å……è£•å¯ä»¥çœ‹çœ‹ã€‚&lt;/p>
&lt;h1 id="åˆé˜¶çŸ¥è¯†">åˆé˜¶çŸ¥è¯†&lt;/h1>
&lt;h2 id="å˜é‡">å˜é‡&lt;/h2>
&lt;h3 id="åŠ æ³•è¿ç®—">åŠ æ³•è¿ç®—&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202016.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;h3 id="æµ®ç‚¹æ•°byteå¸ƒå°”å€¼">æµ®ç‚¹æ•°/byte/å¸ƒå°”å€¼&lt;/h3>
&lt;ul>
&lt;li>æµ®ç‚¹æ•° = ç¬¦å·ä½ +æŒ‡æ•°ä½ +å°¾æ•°ä½&lt;/li>
&lt;/ul>
&lt;p>æµ®ç‚¹æ•°é»˜è®¤ä¸ºdoubleç±»å‹ï¼Œfloat n1 = 1.1+anything æŠ¥é”™&lt;/p>
&lt;ul>
&lt;li>booleanå˜é‡åªèƒ½ä¸ºtrue/false&lt;/li>
&lt;li>ç»™byteèµ‹å¸¸æ•°æ—¶ï¼Œ&lt;strong>å…ˆ&lt;/strong>åˆ¤æ–­è¯¥å€¼æ˜¯å¦åœ¨byteèŒƒå›´(-128~127)å†…ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°èµ‹å€¼ä¸ºintç±»å‹&lt;/li>
&lt;/ul>
&lt;h3 id="è‡ªåŠ¨ç±»å‹è½¬æ¢">è‡ªåŠ¨ç±»å‹è½¬æ¢&lt;/h3>
&lt;p>è¿›è¡Œèµ‹å€¼æˆ–è¿ç®—æ—¶ï¼Œå°ç²¾åº¦ç±»å‹è‡ªåŠ¨è½¬åŒ–ä¸ºå¤§ç²¾åº¦ç±»å‹
char/(byte â†’ short) â†’ int â†’ long â†’ float â†’ double
byte/char/short åŒç±»å‹è®¡ç®—æˆ–å®ƒä»¬ä¹‹é—´è®¡ç®—éƒ½ä¼šè‡ªåŠ¨è½¬æˆintç±»å‹
å¼ºåˆ¶è½¬æ¢
(int)(long/floatå€¼)&lt;/p>
&lt;h2 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦&lt;/h2>
&lt;h3 id="ç®—æ•°è¿ç®—ç¬¦è¿ç®—">ç®—æ•°è¿ç®—ç¬¦è¿ç®—&lt;/h3>
&lt;ul>
&lt;li>a % b = a - a / b * b æ‰€ä»¥å½“bä¸º&lt;strong>è´Ÿæ•°&lt;/strong>åè€Œä¸ºæ­£ï¼Œabå…¨ä¸ºè´Ÿæ•°åˆ™ä¸ºè´Ÿ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// temp = i; i = i+1; i = temp;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// i=1
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>å¤åˆèµ‹å€¼è¿ç®—ç¬¦ä¼šè‡ªåŠ¨ç±»å‹è½¬æ¢(åŒ…æ‹¬++ï¼Œ--)
&lt;ul>
&lt;li>b += 2; -&amp;gt; b = (type)b + 2;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="é€»è¾‘è¿ç®—ç¬¦">é€»è¾‘è¿ç®—ç¬¦&lt;/h3>
&lt;p>&amp;amp; å’Œ | ç”¨åœ¨æ£€æŸ¥ç‰¹ç­‰å¥–å’Œä¸€ç­‰å¥–ä¹‹é—´å–æœ€å¥½çš„é‚£ä¸ª&lt;/p>
&lt;h3 id="è¿›åˆ¶">è¿›åˆ¶&lt;/h3>
&lt;p>æ•´æ•°æœ‰å››ç§è¿›åˆ¶ï¼š&lt;/p>
&lt;ol>
&lt;li>äºŒè¿›åˆ¶ï¼šä»¥0bæˆ–0Bå¼€å¤´&lt;/li>
&lt;li>åè¿›åˆ¶&lt;/li>
&lt;li>å…«è¿›åˆ¶ï¼šä»¥0å¼€å¤´&lt;/li>
&lt;li>åå…­è¿›åˆ¶ï¼šä»¥0xæˆ–0Xå¼€å¤´&lt;/li>
&lt;/ol>
&lt;p>äºŒè¿›åˆ¶è½¬å…«è¿›åˆ¶ï¼šä»ä½ä½å¼€å§‹ï¼ŒäºŒè¿›åˆ¶æ•°&lt;strong>æ¯ä¸‰ä½(&lt;/strong>$2^{3}=8$&lt;strong>)&lt;strong>ä¸€ç»„ï¼Œæ¢ç®—æˆå¯¹åº”å…«è¿›åˆ¶æ•°
äºŒè¿›åˆ¶è½¬åå…­è¿›åˆ¶ï¼šä»ä½ä½å¼€å§‹ï¼ŒäºŒè¿›åˆ¶æ•°&lt;/strong>æ¯å››ä½&lt;/strong>ä¸€ç»„ï¼Œæ¢ç®—æˆå¯¹åº”å…«è¿›åˆ¶æ•°
åä¹‹ï¼Œåˆ™å°†å…«(åå…­)è¿›åˆ¶æ•°&lt;strong>æ¯ä½&lt;/strong>è½¬æˆå¯¹åº”**ä¸‰(å››)**ä½äºŒè¿›åˆ¶æ•°å³å¯&lt;/p>
&lt;h3 id="ä½è¿ç®—">ä½è¿ç®—&lt;/h3>
&lt;p>åŸç ï¼Œåç ï¼Œè¡¥ç ï¼š&lt;/p>
&lt;ul>
&lt;li>æ­£æ•°ä¸‰ç åˆä¸€&lt;/li>
&lt;li>è´Ÿæ•°çš„åç  = åŸç ç¬¦å·ä½ä¸å˜ï¼Œå…¶ä»–ä½å–å&lt;/li>
&lt;li>è´Ÿæ•°çš„åç  = è¡¥ç  - 1ï¼›è¡¥ç  = åç  + 1&lt;/li>
&lt;li>0çš„åç ã€è¡¥ç éƒ½æ˜¯0&lt;/li>
&lt;li>è®¡ç®—æœºä»¥è¡¥ç è¿›è¡Œè¿ç®—ï¼ŒJavaçš„æ•°éƒ½æ˜¯æœ‰ç¬¦å·&lt;/li>
&lt;li>è¿ç®—ç»“æœç”¨åŸç &lt;/li>
&lt;li>äºŒè¿›åˆ¶æœ€é«˜ä½ä¸ºç¬¦å·ä½ï¼š0æ­£1è´Ÿï¼Œä½æ•°å–å†³äºintå¤§å°&lt;/li>
&lt;/ul>
&lt;p>ä½è¿ç®—ç¬¦ï¼š&lt;/p>
&lt;ul>
&lt;li>ç®—æ•°å³ç§»&amp;gt;&amp;gt;ï¼šä½ä½æº¢å‡ºï¼Œç¬¦å·ä½ä¸å˜ï¼Œé«˜ä½è¡¥ç¬¦å·ä½ &amp;lt;=&amp;gt; b/2&lt;/li>
&lt;li>ç®—æ•°å·¦ç§»&amp;lt;&amp;lt;ï¼šç¬¦å·ä½ä¸å˜ï¼Œä½ä½è¡¥0 &amp;lt;=&amp;gt; b*2&lt;/li>
&lt;li>é€»è¾‘å³ç§»&amp;gt;&amp;gt;&amp;gt;ï¼šä½ä½æº¢å‡ºï¼Œé«˜ä½è¡¥0&lt;/li>
&lt;li>ä½ä½æº¢å‡ºæŒ‡çš„æ˜¯åˆ é™¤æœ€å³è¾¹ç§»åŠ¨çš„æ•°ä¸ªï¼›é«˜ä½è¡¥æ•°æŒ‡çš„æ˜¯å°†æ•°ä¸ªåŠ åˆ°æœ€å·¦è¾¹ï¼Œæ•´ä½“å³ç§»&lt;/li>
&lt;li>1000 0000 0000 0110 &amp;gt;&amp;gt;&amp;gt;2ï¼š&lt;strong>00&lt;/strong>10 0000 0000 00**01 **&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// -2åŸ 10000000 00000000 00000000 00000010
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// -2å 11111111 11111111 11111111 11111101
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// -2è¡¥ 11111111 11111111 11111111 11111110
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// -2ç§» 00111111 11111111 11111111 11111111
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// -2å 11111111 11111111 11111111 11111011
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// -2åŸ 10000000 00000000 00000000 00000100
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mb">0b00111111111111111111111111111111&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ§åˆ¶ç»“æ„">æ§åˆ¶ç»“æ„&lt;/h2>
&lt;ul>
&lt;li>switchä¸­è¡¨è¾¾å¼çš„è¿”å›å€¼å¿…é¡»æ˜¯ï¼šbyte, short, int, char, enum, String&lt;/li>
&lt;li>break/continue å¯ä»¥é€šè¿‡æ ‡ç­¾æŒ‡æ˜ç»ˆæ­¢/è·³è¿‡å“ªä¸€å±‚è¯­å¥å—ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰
&lt;ul>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202016-1.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&amp;quot;lucky&amp;quot;.equals(type) // é¿å…ç©ºæŒ‡é’ˆ&lt;/li>
&lt;/ul>
&lt;h2 id="æ•°ç»„æ’åºæŸ¥æ‰¾">æ•°ç»„/æ’åº/æŸ¥æ‰¾&lt;/h2>
&lt;h3 id="äºŒç»´æ•°ç»„">äºŒç»´æ•°ç»„&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åŠ¨æ€åˆ›å»ºæ•°ç»„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="o">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="o">[][]&lt;/span> &lt;span class="n">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">][];&lt;/span> &lt;span class="c1">// ç¡®å®šä¸€ç»´æ•°ç»„ä¸ªæ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">arr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">length&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">arr&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">];&lt;/span> &lt;span class="c1">// ç¬¬iæ’ä¸Šå¼€è¾Ÿç©ºé—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åŒä¸‹æ ‡ç»å…¸ç”¨æ³•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">insert_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">arrNew&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">length&lt;/span>&lt;span class="o">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">insert_num&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">arr&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">]){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">++&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">arrNew&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">arr&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="n">arrNew&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">insert_num&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å¯¹è±¡">å¯¹è±¡&lt;/h2>
&lt;h3 id="å¯¹è±¡å†…å­˜å¸ƒå±€">å¯¹è±¡å†…å­˜å¸ƒå±€&lt;/h3>
&lt;p>åŠ è½½catç±»ä¿¡æ¯ä»ç¬¬ä¸€å¥ä»£ç å°±æ‰§è¡Œ
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311202016-2.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;h3 id="javaå†…å­˜çš„ç»“æ„åˆ†æ">Javaå†…å­˜çš„ç»“æ„åˆ†æ&lt;/h3>
&lt;ul>
&lt;li>æ ˆï¼šä¸€èˆ¬å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå±€éƒ¨å˜é‡ï¼‰&lt;/li>
&lt;li>å †ï¼šå­˜æ”¾å¯¹è±¡ã€æ•°ç»„&lt;/li>
&lt;li>æ–¹æ³•åŒºï¼šå¸¸é‡æ± ï¼Œç±»åŠ è½½ä¿¡æ¯&lt;/li>
&lt;/ul>
&lt;p>Javaåˆ›å»ºå¯¹è±¡çš„æµç¨‹&lt;/p>
&lt;ol>
&lt;li>åŠ è½½Personç±»ä¿¡æ¯ï¼ˆå±æ€§å’Œæ–¹æ³•ä¿¡æ¯ï¼ŒåªåŠ è½½ä¸€æ¬¡ï¼‰&lt;/li>
&lt;li>åœ¨å †ä¸­åˆ†é…ç©ºé—´ï¼Œè¿›è¡Œé»˜è®¤åˆå§‹åŒ–&lt;/li>
&lt;li>æŠŠåœ°å€èµ‹ç»™pï¼Œpå°±æŒ‡å‘å¯¹è±¡&lt;/li>
&lt;li>è¿›è¡Œå±æ€§èµ‹å€¼&lt;/li>
&lt;/ol>
&lt;p>å½“æ–¹æ³•å†…å°†å¯¹è±¡ç½®ç©º/åˆ›å»ºæ–°å¯¹è±¡ï¼Œä¸ä¼šæ”¹å˜mainä¸­çš„å¯¹è±¡ï¼Œå‚è€ƒ&lt;a href="https://www.bilibili.com/video/BV1fh411y7R8?p=213">ä¼ å‚æœºåˆ¶&lt;/a>&lt;/p>
&lt;h3 id="é€’å½’-">é€’å½’ â˜†â˜†â˜†&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * ç»ˆæ­¢æ¡ä»¶ï¼šåœ¨[6][6] == 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * é€’å½’æ–¹å¼ï¼šå·¦ä¸‹å³ä¸Š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * é‡åˆ°çš„æƒ…å†µï¼š0ï¼šæœªèµ° 1 å¢™ 2 èµ°è¿‡ 3 ä¸é€š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">boolean&lt;/span> &lt;span class="nf">findWay&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">[][]&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">][&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å½“å‰ç‚¹çš„æƒ…å†µ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">map&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">findWay&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">findWay&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">findWay&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="n">findWay&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">map&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="o">{&lt;/span> &lt;span class="c1">// 1,2,3 éƒ½ä¸èƒ½ä¿®æ”¹èŠ‚ç‚¹å€¼ï¼Œæ— æ³•ç§»åŠ¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="o">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¯å˜å‚æ•°">å¯å˜å‚æ•°&lt;/h3>
&lt;p>è¯­æ³•ï¼šè®¿é—®ä¿®é¥°ç¬¦ è¿”å›ç±»å‹ æ–¹æ³•å(æ•°æ®ç±»å‹... å½¢å‚å)&lt;/p>
&lt;ul>
&lt;li>å¯å˜å‚æ•°æœ¬è´¨æ˜¯æ•°ç»„ï¼Œå› æ­¤å®å‚å¯ä»¥ä¸ºæ•°ç»„æˆ–0-Nä¸ªå€¼&lt;/li>
&lt;li>å¯å˜å‚æ•°å’Œæ™®é€šå‚æ•°æ”¾ä¸€èµ·ï¼Œéœ€ä¿è¯å¯å˜å‚æ•°åœ¨æœ€å&lt;/li>
&lt;li>å½¢å‚åˆ—è¡¨åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å‚æ•°&lt;/li>
&lt;/ul>
&lt;h3 id="ä½œç”¨åŸŸ">ä½œç”¨åŸŸ&lt;/h3>
&lt;p>å…¨å±€å˜é‡ï¼ˆå±æ€§ï¼‰ï¼šä½œç”¨åŸŸä¸ºæ•´ä¸ªç±»ä½“ï¼Œæœ‰é»˜è®¤å€¼
å±€éƒ¨å˜é‡ï¼ˆé™¤å±æ€§å¤–å…¶ä»–å˜é‡ï¼‰ï¼šä½œç”¨åŸŸä¸ºä»£ç å—ï¼Œæ²¡æœ‰é»˜è®¤å€¼&lt;/p>
&lt;h3 id="thisä½¿ç”¨">thisä½¿ç”¨&lt;/h3>
&lt;ul>
&lt;li>è®¿é—®æ„é€ å™¨è¯­æ³•ï¼šthis(å‚æ•°åˆ—è¡¨)ï¼Œåªèƒ½åœ¨æ„é€ å™¨ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”æ”¾åœ¨ç¬¬ä¸€æ¡è¯­å¥ä¸­&lt;/li>
&lt;/ul>
&lt;h1 id="ä¸­é˜¶çŸ¥è¯†">ä¸­é˜¶çŸ¥è¯†&lt;/h1>
&lt;h2 id="ideaå¿«æ·é”®">Ideaå¿«æ·é”®&lt;/h2>
&lt;ul>
&lt;li>ctrl + D ç²˜è´´è‡³ä¸‹ä¸€è¡Œ&lt;/li>
&lt;li>ctrl + Y åˆ é™¤å½“å‰è¡Œ&lt;/li>
&lt;li>alt + / è¡¥å…¨ä»£ç &lt;/li>
&lt;li>alt + insert ç”Ÿæˆæ„é€ å™¨&lt;/li>
&lt;li>ctrl + H æŸ¥çœ‹ç±»çš„å±‚çº§å…³ç³» Hierarchy&lt;/li>
&lt;li>ctrl + B å®šä½æ–¹æ³•&lt;/li>
&lt;li>alt + enter/ .var è‡ªåŠ¨åˆ†é…å˜é‡å&lt;/li>
&lt;/ul>
&lt;h1 id="é¢å¤–çŸ¥è¯†">é¢å¤–çŸ¥è¯†&lt;/h1>
&lt;h3 id="å­—ç¬¦ä¸²">å­—ç¬¦ä¸²&lt;/h3>
&lt;p>&lt;a href="https://blog.csdn.net/langhong8/article/details/50938041">å­—ç¬¦ä¸²å¸¸é‡æ± &lt;/a>&lt;/p>
&lt;h3 id="cannot-make-a-static-reference-to-the-non-static">Cannot make a static reference to the non-static&lt;/h3>
&lt;p>&lt;a href="https://blog.csdn.net/q610376681/article/details/49359819">Cannot make a static reference to the non-static&lt;/a>&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E7%AC%94%E8%AE%B0/">ç¬”è®°</category><category domain="https://keepjolly.com/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</category><category domain="https://keepjolly.com/tags/java/">Java</category></item><item><title>ColMapä½¿ç”¨</title><link>https://keepjolly.com/archives/colmap-use/</link><guid isPermaLink="true">https://keepjolly.com/archives/colmap-use/</guid><pubDate>Sat, 11 Mar 2023 20:17:43 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;h1 id="æ•°æ®é›†ä¸‹è½½">æ•°æ®é›†ä¸‹è½½&lt;/h1>
&lt;p>&lt;a href="https://pan.baidu.com/s/1Wb9E6BWCJu4wZfwxm_t4TQ#list/path=%2Fmvsnet%2Fpreprocessed_inputs">å¯†ç ï¼šs2v2ï¼Œæ–‡ä»¶è·¯å¾„mvsnet-&amp;gt;preprocessed_inputs&lt;/a>&lt;/p>
&lt;h1 id="tutorial">Tutorial&lt;/h1>
&lt;p>COLMAP 3.8-dev&lt;/p>
&lt;h2 id="quickstart">QuickStart&lt;/h2>
&lt;ol>
&lt;li>Reconstruction &amp;gt; Automatic Reconstruction
&lt;ol>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>åˆ†åˆ«å¡«å…¥workspace folderã€Image folder
&lt;ol>
&lt;li>å¦‚æœå›¾ç‰‡åœ¨dtu/scan4/imagesä¸‹ï¼Œåˆ™workspace folderè·¯å¾„å¡«dtu/scan4ï¼›image folderå¡«dtu/scan4/imagesï¼›mask folderä½œç”¨ä¸çŸ¥&lt;/li>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-1.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;li>ç‚¹ä¸¤æ¬¡OKå³å¯ç”Ÿæˆå¦‚ä¸‹3Dæ¨¡å‹ã€æ»šè½®æ”¾å¤§ç¼©å°ï¼Œctrl+æ»šè½®å¢åŠ ç²’å­ã€‘ï¼Œ2080tiè€—æ—¶åŠå°æ—¶å¯èƒ½&lt;/li>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-2.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>ç­‰å¾…é‡å»ºå®Œæˆï¼Œç”Ÿæˆå¤§è‡´è·¯å¾„å¦‚ä¸‹
&lt;ol>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-3.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;li>project/sparse è¡¨ç¤ºæ‰€æœ‰é‡å»ºç»„ä»¶çš„ç¨€ç–æ¨¡å‹ï¼›project/denseè¡¨ç¤ºç›¸å¯¹åº”çš„dense modelï¼›å…¶ä¸­dense point cloud &lt;strong>fused.ply&lt;/strong>èƒ½é€šè¿‡ã€File &amp;gt; Import model from ...ã€‘å¯¼å…¥&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>æ•´ä¸ªå¤§è‡´æµç¨‹ä¸º
&lt;ol>
&lt;li>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-4.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h2 id="the-picture-capture-process">the picture capture process&lt;/h2>
&lt;p>æ³¨æ„äº‹é¡¹ï¼š&lt;/p>
&lt;ul>
&lt;li>æ‹æ‘„çš„å›¾ç‰‡åº”å…·æœ‰ä¸°å¯Œçš„çº¹ç†ã€‚æœ€å¥½é¿å…çº¹ç†ç‰¹åˆ«å°‘çš„å›¾ç‰‡å¦‚ä¸€å¼ ç™½å¢™orç©ºæ¡Œå›¾ç‰‡ã€‚é€šè¿‡åŠ å…¥ä¸€äº›ç‰©å“æ¥ä¸°å¯Œçº¹ç†&lt;/li>
&lt;li>å…·å¤‡ç›¸ä¼¼çš„å…‰ç…§æƒ…å†µã€‚é¿å…high dynamic range scenesï¼ˆå¦‚æœ‰å¤ªé˜³æœ‰å½±å­ï¼Œç©¿è¿‡é—¨æˆ–çª—æ‹æ‘„ï¼‰ã€‚é¿å…é•œé¢åå°„&lt;/li>
&lt;li>å…·æœ‰é«˜åº¦è§†è§‰é‡å çš„å›¾ç‰‡ã€‚ç¡®ä¿ä¸€ä¸ªç‰©ä½“è‡³å°‘æœ‰ä¸‰å¼ å›¾ç‰‡ï¼Œå°½é‡å¤šä¸€ç‚¹&lt;/li>
&lt;li>å¤šè§†å›¾æ‹æ‘„ã€‚ä¸è¦é€šè¿‡å¹³ç§»æ—‹è½¬ç›¸æœºæ¥ä»åŒä¸€ä¸ªæ–¹å‘æ‹æ‘„ã€‚ä½†ç¡®ä¿ç›¸ä¼¼è§†è§’æœ‰å°‘ä¸”ç²¾çš„å›¾ç‰‡ï¼Œå¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€‚å¦‚æœæ˜¯è§†é¢‘ï¼Œè¯·å‡å°‘å¸§ç‡ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="preface">Preface&lt;/h2>
&lt;p>æ–°æ‰‹å‚æ•°ç”¨&lt;strong>é»˜è®¤çš„å°±å¥½&lt;/strong>ã€‚ä¹Ÿå¯ä»¥ç»™ä¸åŒé‡å»ºåœºæ™¯è®¾ç½®â€œoptimalâ€é€‰é¡¹ï¼ŒExtras &amp;gt; Set options for ... dataï¼ˆä¸çŸ¥é“å¹²å˜›ç”¨çš„ï¼Œå¥½åƒèƒ½ä¿®æ”¹å›¾ç‰‡è´¨é‡ï¼Œè€Œä¸æ˜¯ç”Ÿæˆçš„3Dè´¨é‡ï¼‰ã€‚å¦‚éœ€äº†è§£å‚æ•°ï¼ŒæŸ¥çœ‹æºç 
å¦‚æœé‡åˆ°éæ­£å¸¸é€€å‡ºï¼Œä»‹æ„ç”¨å‘½ä»¤è¡Œè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»¥è·å–ä¸åŒçº§åˆ«çš„æ—¥å¿—è®°å½•è¯¦ç»†ç¨‹åº¦ã€‚ï¼ˆå‘½ä»¤ä¸çŸ¥ï¼‰&lt;/p>
&lt;h2 id="data-structure">Data Structure&lt;/h2>
&lt;p>COLMAP å‡å®šæ‰€æœ‰è¾“å…¥å›¾åƒéƒ½åœ¨ä¸€ä¸ªè¾“å…¥ç›®å½•ä¸­ï¼Œè¯¥ç›®å½•å…·æœ‰å¯èƒ½åµŒå¥—çš„å­ç›®å½•ã€‚å®ƒå°†è¯»å–å­˜å‚¨åœ¨è¯¥ç›®å½•ä¸­çš„æ‰€æœ‰å›¾åƒï¼Œå¹¶ä¸”å®ƒæ”¯æŒå„ç§ä¸åŒçš„å›¾åƒæ ¼å¼ï¼ˆè¯·å‚é˜… &lt;a href="http://freeimage.sourceforge.net/documentation.html">FreeImage&lt;/a>ï¼‰ã€‚å…¶ä»–æ–‡ä»¶å°†è¢«è‡ªåŠ¨å¿½ç•¥ã€‚å¦‚æœéœ€è¦é«˜æ€§èƒ½ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥åˆ†ç¦»æ‰€æœ‰éå›¾åƒæ–‡æ¡£ã€‚å›¾åƒç”±å®ƒä»¬çš„ç›¸å¯¹æ–‡æ¡£è·¯å¾„å”¯ä¸€æ ‡è¯†ã€‚å¯¹äºåæœŸå¤„ç†ï¼Œä¾‹å¦‚å›¾åƒå»å¤±çœŸæˆ–å¯†é›†é‡å»ºï¼Œ&lt;strong>åº”ä¿ç•™ç›¸å…³æ–‡æ¡£å¤¹ç»“æ„&lt;/strong>ã€‚ COLMAP ä¸ä¿®æ”¹è¾“å…¥å›¾åƒæˆ–ç›®å½•ï¼Œæ‰€æœ‰æå–çš„æ•°æ®éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ SQLite æ•°æ®åº“æ–‡æ¡£ä¸­ï¼ˆè¯·å‚é˜…&lt;a href="https://colmap.github.io/database.html">æ•°æ®åº“æ ¼å¼&lt;/a>ï¼‰ã€‚
ç¬¬ä¸€æ­¥æ˜¯é€šè¿‡è¿è¡Œé¢„æ„å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆWindowsï¼šCOLMAP.batï¼ŒMacï¼šCOLMAP.appï¼‰æˆ–é€šè¿‡ä» CMake build æ–‡æ¡£å¤¹æ‰§è¡Œ ./src/exe/colmap gui æ¥å¯åŠ¨ COLMAP çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ã€‚æ¥ä¸‹æ¥ï¼Œé€šè¿‡&lt;strong>File &amp;gt; New project&lt;/strong>ã€‚åœ¨æ­¤å¯¹è¯æ¡†ä¸­ï¼Œæ‚¨&lt;strong>å¿…é¡»é€‰æ‹©å­˜å‚¨æ•°æ®åº“çš„ä½ç½®ä»¥åŠåŒ…å«è¾“å…¥å›¾åƒçš„æ–‡æ¡£å¤¹&lt;/strong>ã€‚ä¸ºæ–¹ä¾¿èµ·è§ï¼Œæ‚¨å¯ä»¥é€šè¿‡é€‰æ‹©&lt;strong>File &amp;gt; Save project&lt;/strong>å°†æ•´ä¸ªé¡¹ç›®è®¾ç½®ä¿å­˜åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚é™¤äº†ä»»ä½•å…¶ä»–å‚æ•°è®¾ç½®å¤–ï¼Œé¡¹ç›®é…ç½®è¿˜å­˜å‚¨æ•°æ®åº“å’Œå›¾åƒæ–‡æ¡£å¤¹çš„ç»å¯¹è·¯å¾„ä¿¡æ¯ã€‚å¦‚æœæ‚¨å†³å®šç§»åŠ¨æ•°æ®åº“æˆ–å›¾åƒæ–‡æ¡£å¤¹ï¼Œåˆ™å¿…é¡»é€šè¿‡&lt;strong>åˆ›å»ºæ–°é¡¹ç›®ç›¸åº”åœ°æ›´æ”¹è·¯å¾„&lt;/strong>ã€‚æˆ–è€…ï¼Œå¯ä»¥åœ¨æ‚¨é€‰æ‹©çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ç›´æ¥ä¿®æ”¹ç”Ÿæˆçš„ .ini é…ç½®æ–‡æ¡£ã€‚è¦é‡æ–°æ‰“å¼€ç°æœ‰é¡¹ç›®ï¼Œåªéœ€é€‰æ‹©&lt;strong>File &amp;gt; Open project&lt;/strong>å³å¯æ‰“å¼€é…ç½®æ–‡æ¡£ç„¶åæ¢å¤æ‰€æœ‰å‚æ•°è®¾ç½®ã€‚è¯·æ³¨æ„ï¼Œæ‰€æœ‰ COLMAP å¯æ‰§è¡Œæ–‡ä»¶éƒ½å¯ä»¥é€šè¿‡å°†å„ä¸ªè®¾ç½®æŒ‡å®šä¸ºå‘½ä»¤è¡Œå‚æ•°æˆ–é€šè¿‡æä¾›é¡¹ç›®é…ç½®æ–‡æ¡£çš„è·¯å¾„ï¼ˆsee &lt;a href="https://colmap.github.io/tutorial.html#interface">Interface&lt;/a>ï¼‰ä»å‘½ä»¤è¡Œå¯åŠ¨ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-5.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;h2 id="feature-detection-and-extraction">Feature Detection and Extraction&lt;/h2>
&lt;p>é€‰æ‹©Processing &amp;gt; feature extraction
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-6.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
åœ¨æ­¤å¯¹è¯æ¡†ä¸­ï¼Œæ‚¨å¿…é¡»é¦–å…ˆå†³å®šä½¿ç”¨çš„å›ºæœ‰ç›¸æœºæ¨¡å‹ã€‚æ‚¨å¯ä»¥ä»åµŒå…¥çš„ EXIF ä¿¡æ¯ä¸­è‡ªåŠ¨æå–ç„¦è·ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šå†…éƒ¨å‚æ•°ï¼Œä¾‹å¦‚åœ¨å®éªŒå®¤æ ¡å‡†ä¸­è·å¾—çš„å‚æ•°ï¼ˆåœ¨custom parametersé‡Œï¼Ÿï¼‰ã€‚å¦‚æœå›¾åƒåŒ…å«éƒ¨åˆ† EXIF ä¿¡æ¯ï¼ŒCOLMAP ä¼šå°è¯•åœ¨å¤§å‹ç›¸æœºå‹å·æ•°æ®åº“ä¸­è‡ªåŠ¨æŸ¥æ‰¾ç¼ºå¤±çš„ç›¸æœºè§„æ ¼ã€‚å¦‚æœæ‚¨çš„æ‰€æœ‰å›¾åƒéƒ½æ˜¯ç”±å…·æœ‰ç›¸åŒç¼©æ”¾ç³»æ•°çš„åŒä¸€å°ç‰©ç†ç›¸æœºæ‹æ‘„çš„ï¼Œå»ºè®®&lt;strong>åœ¨æ‰€æœ‰å›¾åƒä¹‹é—´å…±äº«å†…åœ¨å‡½æ•°&lt;/strong>ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœæ‰€æœ‰å›¾åƒå…±äº«ç›¸åŒçš„ç›¸æœºå‹å·ä½†å¹¶éæ‰€æœ‰å›¾åƒéƒ½å…·æœ‰ç›¸åŒçš„å°ºå¯¸æˆ– EXIF ç„¦è·ï¼Œè¿›ç¨‹å°†&lt;strong>ä¸æ­£å¸¸åœ°é€€å‡º&lt;/strong>ã€‚å¦‚æœæ‚¨æœ‰å‡ ç»„å›¾åƒå…±äº«ç›¸åŒçš„å†…åœ¨ç›¸æœºå‚æ•°ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨ä»¥åè½»æ¾ä¿®æ”¹ç›¸æœºæ¨¡å‹ï¼ˆsee &lt;a href="https://colmap.github.io/tutorial.html#database-management">Database Management&lt;/a>ï¼‰ã€‚å¦‚æœä¸ç¡®å®šåœ¨æ­¤æ­¥éª¤ä¸­é€‰æ‹©ä»€å¹ºï¼Œåªéœ€&lt;strong>åšæŒä½¿ç”¨é»˜è®¤å‚æ•°&lt;/strong>å³å¯ã€‚
æ‚¨å¯ä»¥ä»å›¾åƒä¸­æ£€æµ‹å’Œæå–æ–°ç‰¹å¾ï¼Œä¹Ÿå¯ä»¥ä»æ–‡æœ¬ä¸­å¯¼å…¥ç°æœ‰ç‰¹å¾ã€‚ COLMAP åœ¨ GPU æˆ– CPU ä¸Šæå– SIFT ç‰¹å¾ã€‚ GPU ç‰ˆæœ¬éœ€è¦è¿æ¥æ˜¾ç¤ºå™¨ï¼Œè€Œ CPU ç‰ˆæœ¬å»ºè®®åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒGPU ç‰ˆæœ¬æ˜¯æœ‰åˆ©çš„ï¼Œå› ä¸ºå®ƒå…·æœ‰å®šåˆ¶çš„ç‰¹å¾æ£€æµ‹æ¨¡å¼ï¼Œé€šå¸¸åœ¨é«˜å¯¹æ¯”åº¦å›¾åƒçš„æƒ…å†µä¸‹äº§ç”Ÿæ›´é«˜è´¨é‡çš„ç‰¹å¾ã€‚å¦‚æœ&lt;strong>å¯¼å…¥ç°æœ‰ç‰¹å¾&lt;/strong>ï¼Œåˆ™æ¯ä¸ªå›¾åƒæ—è¾¹éƒ½å¿…é¡»æœ‰ä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼ˆä¾‹å¦‚ /path/to/image1.jpg å’Œ /path/to/image1.jpg.txtï¼‰ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;blockquote>
&lt;p>NUM_FEATURES 128
X Y SCALE ORIENTATION D_1 D_2 D_3 ... D_128
...
X Y SCALE ORIENTATION D_1 D_2 D_3 ... D_128&lt;/p>
&lt;/blockquote>
&lt;p>å…¶ä¸­ Xã€Yã€SCALEã€ORIENTATION æ˜¯æµ®ç‚¹æ•°ï¼ŒD_1â€¦D_128 å€¼åœ¨ 0â€¦255 èŒƒå›´å†…ã€‚è¯¥æ–‡æ¡£åº”åŒ…å« NUM_FEATURES è¡Œï¼Œæ¯ä¸ªåŠŸèƒ½ä¸€è¡Œã€‚ä¾‹å¦‚ï¼Œå¦‚æœå›¾åƒæœ‰ 4 ä¸ªç‰¹å¾ï¼Œåˆ™æ–‡æœ¬æ–‡æ¡£åº”å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;blockquote>
&lt;p>4 128
1.2 2.3 0.1 0.3 1 2 3 4 ... 21
2.2 3.3 1.1 0.3 3 2 3 2 ... 32
0.2 1.3 1.1 0.3 3 2 3 2 ... 2
1.2 2.3 1.1 0.3 3 2 3 2 ... 3&lt;/p>
&lt;/blockquote>
&lt;p>è¯·æ³¨æ„ï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œå›¾åƒçš„å·¦ä¸Šè§’åæ ‡ä¸º (0, 0)ï¼Œæœ€å·¦ä¸Šè§’åƒç´ çš„ä¸­å¿ƒåæ ‡ä¸º (0.5, 0.5)ã€‚å¦‚æœæ‚¨å¿…é¡»ä¸ºå¤§å‹å›¾åƒé›†åˆå¯¼å…¥ç‰¹å¾ï¼Œä½¿ç”¨æ‚¨å–œæ¬¢çš„è„šæœ¬è¯­è¨€ç›´æ¥è®¿é—®æ•°æ®åº“ä¼šæ›´æœ‰æ•ˆ(see &lt;a href="https://colmap.github.io/database.html#database-format">Database Format&lt;/a>)
å¦‚æœæ‚¨å®Œæˆäº†æ‰€æœ‰é€‰é¡¹çš„è®¾ç½®ï¼Œè¯·é€‰æ‹©â€œExtractâ€å¹¶ç­‰å¾…æå–å®Œæˆæˆ–å–æ¶ˆã€‚å¦‚æœæ‚¨åœ¨æå–è¿‡ç¨‹ä¸­å–æ¶ˆï¼Œä¸‹æ¬¡æ‚¨å¼€å§‹ä¸ºåŒä¸€é¡¹ç›®æå–å›¾åƒæ—¶ï¼ŒCOLMAP ä¼š&lt;strong>è‡ªåŠ¨ä»ä¸­æ–­å¤„ç»§ç»­&lt;/strong>ã€‚è¿™ä¹Ÿå…è®¸æ‚¨å°†å›¾åƒæ·»åŠ åˆ°ç°æœ‰é¡¹ç›®/é‡å»ºä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·åŠ¡å¿…åœ¨ä½¿ç”¨å…±äº«å†…åœ¨å‡½æ•°æ—¶&lt;strong>éªŒè¯ç›¸æœºå‚æ•°&lt;/strong>ã€‚
æ‰€æœ‰æå–çš„æ•°æ®å°†å­˜å‚¨åœ¨æ•°æ®åº“æ–‡æ¡£ä¸­ï¼Œå¯ä»¥åœ¨æ•°æ®åº“ç®¡ç†å·¥å…·ä¸­æŸ¥çœ‹/ç®¡ç†(see &lt;a href="https://colmap.github.io/tutorial.html#database-management">Database Management&lt;/a>) æˆ–ä½¿ç”¨SQLite(see &lt;a href="https://colmap.github.io/database.html#database-format">Database Format&lt;/a>).&lt;/p>
&lt;h2 id="feature-matching-and-geometric-verification">Feature Matching and Geometric Verification&lt;/h2>
&lt;p>ç‰¹å¾åŒ¹é…å’Œå‡ ä½•éªŒè¯ä¼šæ‰¾åˆ°ä¸åŒå›¾åƒä¸­ç‰¹å¾ç‚¹ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚
é€‰æ‹©Processing &amp;gt; feature matching å¹¶é€‰æ‹©ä¸€ç§æä¾›çš„åŒ¹é…æ¨¡å¼ï¼Œç”¨äºä¸åŒçš„è¾“å…¥åœºæ™¯ï¼š
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-7.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;strong>Exhaustive Matching&lt;/strong>ï¼šå¦‚æœä½ çš„æ•°æ®é›†ä¸­çš„&lt;strong>å›¾ç‰‡æ•°é‡æ¯”è¾ƒå°‘&lt;/strong>ï¼ˆæœ€å¤šå‡ ç™¾å¼ ï¼‰ï¼Œè¿™ç§åŒ¹é…æ¨¡å¼åº”è¯¥è¶³å¤Ÿå¿«ï¼Œé‡å»ºç»“æœæœ€å¥½ã€‚åœ¨è¿™é‡Œï¼Œæ¯ä¸ªå›¾åƒéƒ½ä¸å…¶ä»–å›¾åƒåŒ¹é…ï¼Œè€Œå‚æ•°block_sizeå†³å®šäº†åŒæ—¶ä»ç£ç›˜åŠ è½½åˆ°å†…å­˜ä¸­çš„å›¾åƒæ•°é‡ã€‚
&lt;strong>Sequential Matching&lt;/strong>: å¦‚æœå›¾åƒæ˜¯&lt;strong>æŒ‰é¡ºåºè·å–&lt;/strong>çš„ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡æ‘„åƒæœºï¼‰ï¼Œåˆ™æ­¤æ¨¡å¼å¾ˆæœ‰ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿ç»­çš„å¸§æœ‰è§†è§‰é‡å ï¼Œæ²¡æœ‰å¿…è¦ç©·å°½åœ°åŒ¹é…æ‰€æœ‰å›¾åƒå¯¹ã€‚ç›¸åï¼Œè¿ç»­æ•è·çš„å›¾åƒç›¸äº’åŒ¹é…ã€‚è¿™ç§åŒ¹é…æ¨¡å¼å…·æœ‰åŸºäºvocabulary treeçš„å†…ç½®å¾ªç¯æ£€æµ‹ï¼Œå…¶ä¸­æ¯ç¬¬ N ä¸ªå›¾åƒ (loop_detection_period) ä¸å…¶è§†è§‰ä¸Šæœ€ç›¸ä¼¼çš„å›¾åƒ (loop_detection_num_images) è¿›è¡ŒåŒ¹é…ã€‚è¯·æ³¨æ„ï¼Œå›¾åƒæ–‡ä»¶åå¿…é¡»æŒ‰é¡ºåºæ’åˆ—ï¼ˆä¾‹å¦‚ï¼Œimage0001.jpgã€image0002.jpg ç­‰ï¼‰ã€‚æ•°æ®åº“ä¸­çš„é¡ºåºæ— å…³ç´§è¦ï¼Œå› ä¸ºå›¾åƒæ˜¯æ ¹æ®å…¶æ–‡ä»¶åæ˜ç¡®æ’åºçš„ã€‚è¯·æ³¨æ„ï¼Œé¡ºåºæ£€æµ‹éœ€è¦ä¸€ä¸ªé¢„è®­ç»ƒçš„vocabulary treeï¼Œå¯ä»¥ä» &lt;a href="https://demuc.de/colmap/">https://demuc.de/colmap/&lt;/a> ä¸‹è½½ã€‚
&lt;strong>Vocabulary Tree Matching&lt;/strong>ï¼šåœ¨è¿™ç§åŒ¹é…æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªå›¾åƒéƒ½ä½¿ç”¨a vocabulary tree with spatial re-rankingä¸å…¶è§†è§‰ä¸Šæœ€è¿‘çš„é‚»å±…è¿›è¡ŒåŒ¹é…ã€‚è¿™æ˜¯æ¨èçš„&lt;strong>å¤§å‹å›¾åƒé›†åˆ&lt;/strong>ï¼ˆæ•°åƒä¸ªï¼‰çš„åŒ¹é…æ¨¡å¼ã€‚è¿™éœ€è¦ä¸€ä¸ªé¢„è®­ç»ƒçš„è¯æ±‡æ ‘ï¼Œå¯ä»¥ä» &lt;a href="https://demuc.de/colmap/">https://demuc.de/colmap/&lt;/a> ä¸‹è½½ã€‚
&lt;strong>Spatial Matching&lt;/strong>ï¼šè¿™ç§åŒ¹é…æ¨¡å¼å°†æ¯ä¸ªå›¾åƒä¸å…¶ç©ºé—´ä¸Šæœ€è¿‘çš„é‚»å±…è¿›è¡ŒåŒ¹é…ã€‚ç©ºé—´ä½ç½®å¯ä»¥åœ¨database managementä¸­æ‰‹åŠ¨è®¾ç½®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒCOLMAP è¿˜ä» EXIF ä¸­æå– GPS ä¿¡æ¯å¹¶å°†å…¶ç”¨äºç©ºé—´æœ€è¿‘é‚»æœç´¢ã€‚å¦‚æœæœ‰&lt;strong>å‡†ç¡®çš„å…ˆéªŒä½ç½®ä¿¡æ¯&lt;/strong>ï¼Œè¿™æ˜¯æ¨èçš„åŒ¹é…æ–¹å¼ã€‚
&lt;strong>Transitive Matching&lt;/strong>ï¼šè¿™ç§åŒ¹é…æ¨¡å¼ä½¿ç”¨å·²ç»å­˜åœ¨çš„ç‰¹å¾åŒ¹é…çš„ä¼ é€’å…³ç³»æ¥äº§ç”Ÿæ›´å®Œæ•´çš„åŒ¹é…å›¾ã€‚å¦‚æœå›¾åƒ A ä¸å›¾åƒ B åŒ¹é…å¹¶ä¸” B ä¸ C åŒ¹é…ï¼Œåˆ™æ­¤åŒ¹é…å™¨ä¼šå°è¯•ç›´æ¥å°† A ä¸ C åŒ¹é…ã€‚
&lt;strong>Custom Matching&lt;/strong>ï¼šæ­¤æ¨¡å¼å…è®¸æŒ‡å®šå•ä¸ªå›¾åƒå¯¹è¿›è¡ŒåŒ¹é…æˆ–å¯¼å…¥å•ä¸ªç‰¹å¾åŒ¹é…ã€‚è¦æŒ‡å®šå›¾åƒå¯¹ï¼Œæ‚¨å¿…é¡»æä¾›ä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªå›¾åƒå¯¹ï¼š&lt;/p>
&lt;blockquote>
&lt;p>image1.jpg image2.jpg
image1.jpg image3.jpg
...&lt;/p>
&lt;/blockquote>
&lt;p>å…¶ä¸­ image1.jpg æ˜¯å›¾åƒæ–‡æ¡£å¤¹ä¸­çš„&lt;strong>ç›¸å¯¹è·¯å¾„&lt;/strong>ã€‚æ‚¨æœ‰ä¸¤ä¸ªé€‰é¡¹æ¥å¯¼å…¥å•ä¸ªç‰¹å¾åŒ¹é…é¡¹ï¼šæœªç»geometrically verifiedçš„åŸå§‹ç‰¹å¾åŒ¹é…æˆ–å·²ç»geometrically verifiedçš„ç‰¹å¾åŒ¹é…ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œé¢„æœŸæ ¼å¼ä¸ºï¼š
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-8.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
å…¶ä¸­ image1.jpg æ˜¯å›¾åƒæ–‡æ¡£å¤¹ä¸­çš„ç›¸å¯¹è·¯å¾„ï¼Œæ•°å­—å¯¹æ˜¯å„ä¸ªå›¾åƒä¸­ä»é›¶å¼€å§‹çš„ç‰¹å¾ç´¢å¼•ã€‚å¦‚æœæ‚¨å¿…é¡»ä¸ºå¤§å‹å›¾åƒé›†å¯¼å…¥è®¸å¤šåŒ¹é…é¡¹ï¼Œä½¿ç”¨æ‚¨é€‰æ‹©çš„è„šæœ¬è¯­è¨€ç›´æ¥è®¿é—®æ•°æ®åº“ä¼šæ›´æœ‰æ•ˆã€‚
å¦‚æœæ‚¨å®Œæˆäº†æ‰€æœ‰é€‰é¡¹çš„è®¾ç½®ï¼Œè¯·é€‰æ‹©&amp;quot;Match&amp;quot;/&amp;quot;Run&amp;quot;å¹¶ç­‰å¾…åŒ¹é…å®Œæˆæˆ–åœ¨æœŸé—´å–æ¶ˆã€‚è¯·æ³¨æ„ï¼Œæ­¤æ­¥éª¤å¯èƒ½ä¼šèŠ±è´¹å¤§é‡æ—¶é—´ï¼Œå…·ä½“å–å†³äºå›¾åƒæ•°é‡ã€æ¯å¼ å›¾åƒçš„ç‰¹å¾æ•°é‡ä»¥åŠæ‰€é€‰çš„åŒ¹é…æ¨¡å¼ã€‚exhaustive matchingçš„é¢„æœŸæ—¶é—´ä»å‡ åå¼ å›¾åƒçš„å‡ åˆ†é’Ÿåˆ°æ•°ç™¾å¼ å›¾åƒçš„å‡ å°æ—¶åˆ°æ•°åƒå¼ å›¾åƒçš„å‡ å¤©æˆ–å‡ å‘¨ä¸ç­‰ã€‚å¦‚æœåœ¨åŒ¹é…åå–æ¶ˆåŒ¹é…è¿‡ç¨‹æˆ–å¯¼å…¥æ–°å›¾åƒï¼ŒCOLMAP åªä¼šåŒ¹é…ä»¥å‰æ²¡æœ‰åŒ¹é…è¿‡çš„å›¾åƒå¯¹ã€‚è·³è¿‡å·²ç»åŒ¹é…çš„å›¾åƒå¯¹çš„å¼€é”€å¾ˆä½ã€‚è¿™è¿˜å¯ä»¥åŒ¹é…åˆå§‹åŒ¹é…åå¯¼å…¥çš„å…¶ä»–å›¾åƒï¼Œå¹¶ä¸”å¯ä»¥ä¸ºåŒä¸€æ•°æ®é›†ç»„åˆä¸åŒçš„åŒ¹é…æ¨¡å¼ã€‚
æ‰€æœ‰æå–çš„æ•°æ®å°†å­˜å‚¨åœ¨æ•°æ®åº“æ–‡æ¡£ä¸­ï¼Œå¯ä»¥åœ¨æ•°æ®åº“ç®¡ç†å·¥å…·ä¸­æŸ¥çœ‹/ç®¡ç†(see &lt;a href="https://colmap.github.io/tutorial.html#database-management">Database Management&lt;/a>) æˆ–ä½¿ç”¨SQLite(see &lt;a href="https://colmap.github.io/database.html#database-format">Database Format&lt;/a>).
æ³¨æ„ï¼Œç‰¹å¾åŒ¹é…&lt;strong>éœ€è¦ GPU&lt;/strong>ï¼Œå¹¶ä¸”åœ¨åŒ¹é…è¿‡ç¨‹ä¸­æ‚¨çš„è®¡ç®—æœºçš„æ˜¾ç¤ºæ€§èƒ½å¯èƒ½ä¼šæ˜¾è‘—ä¸‹é™ã€‚å¦‚æœæ‚¨çš„ç³»ç»Ÿæœ‰å¤šä¸ªæ”¯æŒ CUDA çš„ GPUï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ **gpu_index **é€‰é¡¹é€‰æ‹©ç‰¹å®šçš„ GPUã€‚&lt;/p>
&lt;h2 id="sparse-reconstruction">Sparse Reconstruction&lt;/h2>
&lt;p>Reconstruction &amp;gt; start/resume reconstructionè¿›è¡Œ incremental reconstruction
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-9.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
COLMAP é¦–å…ˆå°†æ‰€æœ‰æ•°æ®åº“ä¸­æå–çš„æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä»åˆå§‹çš„image pairå¼€å§‹é‡å»ºã€‚ç„¶åï¼Œé€šè¿‡è®°å½•æ–°å›¾åƒå’Œtriangulating new pointsæ¥é€æ­¥æ‰©å±•åœºæ™¯ã€‚åœ¨æ­¤é‡å»ºè¿‡ç¨‹ä¸­ï¼Œç»“æœå®æ—¶å¯è§†åŒ–ã€‚æœ‰å…³å¯ç”¨æ§ä»¶çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…&lt;a href="https://colmap.github.io/gui.html#gui">Graphical User Interface&lt;/a>ã€‚å¦‚æœä¸æ˜¯æ‰€æœ‰å›¾åƒéƒ½è®°å½•åˆ°åŒä¸€æ¨¡å‹ä¸­ï¼ŒCOLMAP ä¼šå°è¯•é‡å»ºå¤šä¸ªæ¨¡å‹ã€‚å¯ä»¥ä»å·¥å…·æ çš„ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ä¸åŒçš„æ¨¡å‹ï¼ˆåº”è¯¥å¦‚å›¾æ‰€ç¤ºçš„ä¸‹æ‹‰æ ï¼‰ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-10.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
å¦‚æœä¸åŒçš„æ¨¡å‹æœ‰å…±åŒçš„è®°å½•è¿‡å›¾åƒï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ model_converter executableå°†å®ƒä»¬åˆå¹¶åˆ°ä¸€ä¸ªé‡å»ºä¸­ï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œsee &lt;a href="https://colmap.github.io/faq.html#faq-merge-models">FAQ&lt;/a>ï¼‰ã€‚å¦‚æœæ‚¨çš„æ‰€æœ‰å›¾åƒéƒ½ä½¿ç”¨æ²¡æœ‰å…±äº«å†…åœ¨å‡½æ•°çš„ SIMPLE_RADIAL ç›¸æœºæ¨¡å‹ï¼ˆé»˜è®¤ï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ PBAè€Œä¸æ˜¯ Ceres Solverè¿›è¡Œå¿«é€Ÿbundleè°ƒæ•´ï¼Œå®ƒå¯ä»¥åœ¨â€œreconstruction optionsâ€ä¸‹çš„&amp;quot;Bundle&amp;quot;ä¸­æ¿€æ´»ï¼ˆuse_pba = trueï¼‰ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-11.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
ç†æƒ³æƒ…å†µä¸‹ï¼Œé‡å»ºå·¥ä½œæ­£å¸¸å¹¶ä¸”æ‰€æœ‰å›¾åƒéƒ½å·²è®°å½•ã€‚å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µï¼Œå»ºè®®ï¼š&lt;/p>
&lt;ul>
&lt;li>æ‰§è¡Œé¢å¤–çš„åŒ¹é…ã€‚ä¸ºè·å¾—æœ€ä½³ç»“æœï¼Œè¯·ä½¿ç”¨exhaustive matchingã€enable guided matchingã€å¢åŠ è¯æ±‡æ ‘åŒ¹é…ä¸­çš„æœ€è¿‘é‚»æ•°é‡æˆ–å¢åŠ sequential matchingä¸­çš„é‡å ç­‰ã€‚&lt;/li>
&lt;li>å¦‚æœ COLMAP åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©åˆå§‹å›¾åƒå¯¹ã€‚é€‰æ‹©Reconstruction &amp;gt; Reconstruction options &amp;gt; Initå¹¶ä»æ•°æ®åº“ç®¡ç†å·¥å…·ä¸­è®¾ç½®ä»ä¸åŒè§†ç‚¹å…·æœ‰è¶³å¤ŸåŒ¹é…åº¦çš„å›¾åƒã€‚&lt;/li>
&lt;/ul>
&lt;p>å¹¶ä»æ•°æ®åº“ç®¡ç†å·¥å…·ä¸­è®¾ç½®ä»ä¸åŒè§†ç‚¹å…·æœ‰è¶³å¤ŸåŒ¹é…åº¦çš„å›¾åƒã€‚&lt;/p>
&lt;h2 id="importing-and-exporting">Importing and Exporting&lt;/h2>
&lt;p>COLMAP ä¸ºè¿›ä¸€æ­¥å¤„ç†æä¾›äº†å‡ ä¸ªå¯¼å‡ºé€‰é¡¹ã€‚ä¸ºäº†å……åˆ†çš„çµæ´»æ€§ï¼Œå»ºè®®å¯¼å‡ºä»¥ COLMAP çš„æ•°æ®æ ¼å¼çš„reconstructionã€‚é€šè¿‡é€‰æ‹© File &amp;gt; Export å¯¼å‡ºå½“å‰æŸ¥çœ‹çš„æ¨¡å‹æˆ– File &amp;gt; Export all å¯¼å‡ºæ‰€æœ‰é‡å»ºçš„æ¨¡å‹ã€‚ä½¿ç”¨ç”¨äºé‡å»ºç›¸æœºã€å›¾åƒå’Œç‚¹çš„å•ç‹¬æ–‡æœ¬æ–‡ä»¶å°†æ¨¡å‹å¯¼å‡ºåˆ°æ‰€é€‰æ–‡ä»¶å¤¹ä¸­ã€‚å½“ä»¥ COLMAP çš„æ•°æ®æ ¼å¼å¯¼å‡ºæ—¶ï¼Œæ‚¨å¯ä»¥é‡æ–°å¯¼å…¥é‡å»ºä»¥ç”¨äºä»¥åçš„å¯è§†åŒ–ã€å›¾åƒå»å¤±çœŸï¼Œæˆ–ä»ä¸­æ–­çš„åœ°æ–¹ç»§ç»­ç°æœ‰çš„é‡å»ºï¼ˆä¾‹å¦‚ï¼Œåœ¨å¯¼å…¥å’ŒåŒ¹é…æ–°å›¾åƒä¹‹åï¼‰ã€‚è¦å¯¼å…¥æ¨¡å‹ï¼Œè¯·é€‰æ‹© File &amp;gt; Import å¹¶é€‰æ‹©å¯¼å‡ºæ–‡ä»¶å¤¹è·¯å¾„ã€‚æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ File &amp;gt; Export as... é€‰æ‹©ä»¥å„ç§å…¶ä»–æ ¼å¼å¯¼å‡ºæ¨¡å‹ï¼Œä¾‹å¦‚ Bundlerã€VisualSfM ã€PLY æˆ– VRMLã€‚COLMAP å¯ä»¥é€šè¿‡ File &amp;gt; Import From... å¯è§†åŒ–å…·æœ‰ RGB ä¿¡æ¯çš„plain PLY ç‚¹äº‘æ–‡ä»¶ã€‚æœ‰å…³å¯¼å‡ºæ¨¡å‹æ ¼å¼çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§&lt;a href="https://colmap.github.io/format.html#output-format">æ­¤å¤„&lt;/a>ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-12.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">&lt;/p>
&lt;h2 id="dense-reconstruction">Dense Reconstruction&lt;/h2>
&lt;p>åœ¨é‡å»ºåœºæ™¯çš„ç¨€ç–è¡¨ç¤ºå’Œè¾“å…¥å›¾åƒçš„ç›¸æœºå§¿åŠ¿åï¼ŒMVS ç°åœ¨å¯ä»¥æ¢å¤æ›´å¯†é›†çš„åœºæ™¯å‡ ä½•ã€‚ COLMAP å…·æœ‰é›†æˆçš„å¯†é›†é‡å»ºæµç¨‹ï¼Œå¯ä»¥ä¸ºæ‰€æœ‰é…å‡†å›¾åƒç”Ÿæˆæ·±åº¦å›¾å’Œæ³•çº¿å›¾ï¼Œå°†æ·±åº¦å›¾å’Œæ³•çº¿å›¾èåˆæˆå…·æœ‰æ³•çº¿ä¿¡æ¯çš„å¯†é›†ç‚¹äº‘ï¼Œå¹¶æœ€ç»ˆä½¿ç”¨Poissonæˆ–Delaunayé‡å»ºä»èåˆç‚¹äº‘ä¼°è®¡å¯†é›†è¡¨é¢ã€‚
é¦–å…ˆï¼Œå¯¼å…¥ä½ çš„ç¨€ç– 3Dæ¨¡å‹ï¼ˆæˆ–é€‰æ‹©å·²é‡å»ºçš„æ¨¡å‹ï¼‰ã€‚ç„¶åé€‰æ‹©Reconstruction &amp;gt; Multi-view stereoå¹¶é€‰æ‹©ä¸€ä¸ªç©ºçš„å·¥ä½œè·¯å¾„ï¼Œç”¨æ¥å­˜å‚¨æ‰€æœ‰ç¨ å¯†é‡å»ºç»“æœã€‚ç„¶å 1. undistort å›¾ç‰‡ï¼Œ2. ä½¿ç”¨stereoè®¡ç®—æ·±åº¦å›¾å’Œæ³•çº¿å›¾ï¼Œ3. fuse æ·±åº¦å›¾å’Œæ³•çº¿å›¾å½¢æˆç‚¹äº‘ï¼Œ 4. meshing ç‚¹äº‘ï¼ˆå¯é€‰é€‰é¡¹ï¼‰ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-13.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
åœ¨stereoé‡å»ºè¿‡ç¨‹ä¸­ï¼Œç”±äºè®¡ç®—è´Ÿè½½è¿‡é‡ï¼Œæ˜¾ç¤ºå™¨å¯èƒ½ä¼šå†»ç»“ï¼Œå¦‚æœæ‚¨çš„ GPU æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œé‡å»ºè¿‡ç¨‹å¯èƒ½ä¼šæ„å¤–å´©æºƒã€‚å‚è€ƒ the FAQ (&lt;a href="https://colmap.github.io/faq.html#faq-dense-timeout">freeze&lt;/a> and &lt;a href="https://colmap.github.io/faq.html#faq-dense-memory">memory&lt;/a>)çš„è§£å†³æ–¹æ¡ˆã€‚è¯·æ³¨æ„ï¼Œç‚¹äº‘çš„é‡å»ºæ³•çº¿æ— æ³•åœ¨ COLMAP ä¸­ç›´æ¥å¯è§†åŒ–ï¼Œä½†åœ¨ Meshlab ä¸­å¯ä»¥é€šè¿‡å¯ç”¨Render &amp;gt; Show Normal/Curvatureã€‚åŒæ ·ï¼Œé‡å»ºçš„å¯†é›†è¡¨é¢ç½‘æ ¼æ¨¡å‹å¿…é¡»ä½¿ç”¨å¤–éƒ¨è½¯ä»¶è¿›è¡Œå¯è§†åŒ–ã€‚
é™¤äº†å†…éƒ¨å¯†é›†é‡å»ºåŠŸèƒ½å¤–ï¼ŒCOLMAP è¿˜å¯¼å‡ºåˆ°å…¶ä»–å‡ ä¸ªå¯†é›†é‡å»ºåº“ï¼Œä¾‹å¦‚ CMVS/PMVSæˆ–CMP-MVSã€‚è¯·é€‰æ‹©Extras &amp;gt; Undistort imageså¹¶é€‰æ‹©åˆé€‚çš„è½¬æ¢ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-14.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
è¾“å‡ºæ–‡ä»¶å¤¹åŒ…å«é‡å»ºå’Œæœªå¤±çœŸçš„å›¾åƒã€‚æ­¤å¤–ï¼Œè¿™äº›æ–‡æ¡£å¤¹è¿˜åŒ…å«ç”¨äºæ‰§è¡Œå¯†é›†é‡å»ºçš„ shell ç¤ºä¾‹è„šæœ¬ã€‚è¦è¿è¡Œ PMVS2ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š./path/to/pmvs2 /path/to/undistortion/folder/pmvs/ option-all
å…¶ä¸­ /path/to/undistortion/folder æ˜¯åœ¨undistortion å¯¹è¯æ¡†ä¸­é€‰æ‹©çš„æ–‡ä»¶å¤¹ã€‚ç¡®ä¿ä¸è¦å¿˜è®°ä¸Šè¿°å‘½ä»¤è¡Œå‚æ•°ä¸­ /path/to/undistortion/folder/pmvs/ ä¸­çš„&lt;strong>å°¾éƒ¨æ–œæ &lt;/strong>ã€‚
å¯¹äºå¤§å‹æ•°æ®é›†ï¼Œæ‚¨å¯èƒ½å¸Œæœ›é¦–å…ˆè¿è¡Œ CMVS å°†åœºæ™¯èšç±»ä¸ºæ›´æ˜“äºç®¡ç†çš„éƒ¨åˆ†ï¼Œç„¶åè¿è¡Œ COLMAP æˆ– PMVS2ã€‚è¯·å‚é˜… undistortion è¾“å‡ºæ–‡ä»¶å¤¹ä¸­çš„ shell ç¤ºä¾‹è„šæœ¬ï¼Œäº†è§£å¦‚ä½•ç»“åˆ COLMAP æˆ– PMVS2 è¿è¡Œ CMVSã€‚æ­¤å¤–ï¼Œè¿˜æœ‰è®¸å¤šæ”¯æŒ COLMAP è¾“å‡ºçš„å¤–éƒ¨åº“ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://www.di.ens.fr/pmvs/">CMVS/PMVS&lt;/a> &lt;a href="https://colmap.github.io/bibliography.html#furukawa10">[furukawa10]&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://ptak.felk.cvut.cz/sfmservice/websfm.pl">CMP-MVS&lt;/a> &lt;a href="https://colmap.github.io/bibliography.html#jancosek11">[jancosek11]&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/manhofer/Line3Dpp">Line3D++&lt;/a> &lt;a href="https://colmap.github.io/bibliography.html#hofer16">[hofer16]&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="database-management">Database Management&lt;/h2>
&lt;p>æ‚¨å¯ä»¥åœ¨æ•°æ®åº“ç®¡ç†å·¥å…·ä¸­æŸ¥çœ‹å’Œç®¡ç†å¯¼å…¥çš„æ‘„åƒæœºã€å›¾åƒå’Œç‰¹å¾åŒ¹é…ï¼Œé€‰æ‹©Processing &amp;gt; Manage databaseã€‚åœ¨æ‰“å¼€çš„å¯¹è¯æ¡†ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å¯¼å…¥çš„å›¾åƒå’Œç›¸æœºåˆ—è¡¨ã€‚æ‚¨å¯ä»¥é€šè¿‡å•å‡»Show image å’Œ Overlapping imagesæŸ¥çœ‹æ¯ä¸ªå›¾åƒçš„ç‰¹å¾å’ŒåŒ¹é…é¡¹ã€‚å¯ä»¥é€šè¿‡åŒå‡»ç‰¹å®šå•å…ƒæ ¼æ¥ä¿®æ”¹æ•°æ®åº“è¡¨ä¸­çš„å„ä¸ªæ¡ç›®ã€‚è¯·æ³¨æ„ï¼Œå¯¹æ•°æ®åº“çš„ä»»ä½•æ›´æ”¹åªæœ‰åœ¨å•å‡»Saveåæ‰æœ‰æ•ˆï¼ˆç°åœ¨å…³é—­å¯¹è¯æ¡†å°±èƒ½ç›´æ¥ç”Ÿæ•ˆï¼‰ã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2023/03/20230311201518-15.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
è¦åœ¨ä»»æ„å›¾åƒç»„ä¹‹é—´å…±äº«ç›¸æœºå†…åœ¨å‚æ•°ï¼Œè¯·é€‰æ‹©å•ä¸ªæˆ–å¤šä¸ªå›¾åƒï¼Œç„¶åé€‰æ‹© Set camera å¹¶è®¾ç½® camera_idï¼Œå®ƒå¯¹åº”äº cameras è¡¨ä¸­å”¯ä¸€çš„ camera_id åˆ—ã€‚æ‚¨è¿˜å¯ä»¥æ·»åŠ å…·æœ‰ç‰¹å®šå‚æ•°çš„æ–°ç›¸æœºã€‚é€šè¿‡å°† prior_focal_length flagè®¾ç½®ä¸º 0 æˆ– 1ï¼Œå¯ä»¥æç¤ºé‡å»ºç®—æ³•æ˜¯å¦åº”è¯¥ä¿¡ä»»è¯¥ç„¦è·å€¼ã€‚å¦‚æœæ˜¯å…ˆå‰çš„å®éªŒå®¤æ ¡å‡†ï¼Œæ‚¨å¸Œæœ›å°†æ­¤å€¼è®¾ç½®ä¸º 1ã€‚åœ¨äº‹å…ˆä¸äº†è§£ç„¦è·çš„æƒ…å†µä¸‹ï¼Œå»ºè®®å°†æ­¤å€¼è®¾ç½®ä¸º 1.25 * max(width_in_px, height_in_px)ã€‚
æ•°æ®åº“ç®¡ç†å·¥å…·åªæœ‰æœ‰é™çš„åŠŸèƒ½ï¼Œè¦å®Œå…¨æ§åˆ¶æ•°æ®ï¼Œæ‚¨å¿…é¡»ç›´æ¥ä¿®æ”¹ SQLite æ•°æ®åº“ï¼ˆsee &lt;a href="https://colmap.github.io/database.html#database-format">Database Format&lt;/a>ï¼‰ã€‚é€šè¿‡ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œæ‚¨å¯ä»¥ä»…ä½¿ç”¨ COLMAP è¿›è¡Œç‰¹å¾æå–å’ŒåŒ¹é…ï¼Œä¹Ÿå¯ä»¥å¯¼å…¥è‡ªå·±çš„ç‰¹å¾å’ŒåŒ¹é…ä»¥ä»…ä½¿ç”¨ COLMAP çš„å¢é‡é‡å»ºç®—æ³•ã€‚&lt;/p>
&lt;h2 id="graphical-and-command-line-interface">Graphical and Command-line Interface&lt;/h2>
&lt;p>COLMAP çš„å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½å¯ä»¥ä»å›¾å½¢ç•Œé¢å’Œå‘½ä»¤è¡Œç•Œé¢è®¿é—®ï¼Œå®ƒä»¬éƒ½åµŒå…¥åœ¨åŒä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚æ‚¨å¯ä»¥ç›´æ¥å°†é€‰é¡¹ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°æä¾›ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ --project_path path/to/project.ini å‚æ•°æä¾›åŒ…å«é€‰é¡¹çš„ .ini é¡¹ç›®é…ç½®æ–‡ä»¶ã€‚å¯åŠ¨GUIç•Œé¢å¯ä»¥åœ¨å½“å‰æ–‡ä»¶å¤¹è·¯å¾„çš„cmdä¸­è¾“å…¥colmap gui æˆ–ç›´æ¥æ˜ç¡®é¡¹ç›®é…ç½® colmap gui --project_pathã€‚ä½¿ç”¨colmap helpæ¥åˆ—ä¸¾ä¸åŒå‘½ä»¤å‚æ•°ã€‚&lt;a href="https://colmap.github.io/gui.html#gui">graphical user interface&lt;/a> å’Œ &lt;a href="https://colmap.github.io/cli.html#cli">command-line Interface&lt;/a>æä¾›äº†æœ‰å…³å¯ç”¨å‘½ä»¤çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/">è½¯ä»¶å®‰è£…</category><category domain="https://keepjolly.com/categories/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/">è½¯ä»¶å®‰è£…</category><category domain="https://keepjolly.com/tags/%E4%B8%89%E7%BB%B4%E9%87%8D%E5%BB%BA/">ä¸‰ç»´é‡å»º</category></item><item><title>python ä¸pythoné€šä¿¡ã€pythonè°ƒç”¨c++ åŠ¨æ€åº“è¿”å›æ£€æµ‹ç»“æœ</title><link>https://keepjolly.com/archives/python-and-ctypes/</link><guid isPermaLink="true">https://keepjolly.com/archives/python-and-ctypes/</guid><pubDate>Sun, 08 Jan 2023 11:17:34 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;h2 id="é¡¹ç›®éœ€æ±‚">é¡¹ç›®éœ€æ±‚&lt;/h2>
&lt;p>python å®¢æˆ·ç«¯å°†opencvè¯»å–åˆ°çš„å›¾ç‰‡å‘é€ç»™pythonæœåŠ¡ç«¯ï¼Œç„¶åpythonæœåŠ¡ç«¯å°†opencvå›¾å‘é€ç»™Linuxè®¾å¤‡ï¼Œå°†å¤„ç†ç»“æœé€šè¿‡C++ ä¼ ç»™æœåŠ¡ç«¯ï¼Œç„¶åæœåŠ¡ç«¯å†ä¼ ç»™å®¢æˆ·ç«¯ã€‚
è¿™é‡ŒæœåŠ¡ç«¯å¯ä»¥æ”¹æˆC++ å†™çš„ï¼Œå°±ä¸ç”¨è¿™ä¹ˆéº»çƒ¦äº†ï¼Œä½†æ˜¯éœ€è¦å°†pythonçš„pickleåŒ…è§£ç æˆC++ çš„pickleåŒ…ï¼Œè¿˜æœªå°è¯•ã€‚
ä»¥ä¸‹æ‰€ç»™ä»£ç ï¼Œå¹¶ä¸ä¸€å®šèƒ½è·‘é€šï¼Œæ€è·¯åœ¨å“ªé‡Œï¼Œç»“åˆè‡ªå·±çš„ä»£ç &lt;/p>
&lt;h2 id="ç¬¬ä¸€æ­¥pythoné—´é€šä¿¡">ç¬¬ä¸€æ­¥ï¼Œpythoné—´é€šä¿¡&lt;/h2>
&lt;p>è¿™ç§æ–¹å¼èƒ½ä¸€æ¬¡æ€§å…¨éƒ¨å‘é€ï¼Œä¸€æ¬¡æ€§å…¨éƒ¨æ¥å—ï¼ˆå¦‚å‘ä¸€å¼ å›¾ç‰‡ï¼Œæ¥å—ä¸€å¼ ï¼Œå‘ä¸¤å¼ ï¼Œæ¥å—ä¸¤å¼ ï¼‰&lt;/p>
&lt;h3 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€&lt;/h3>
&lt;h4 id="python-client">Python Client&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">datetime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pickle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">cv2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">multiprocessing.connection&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Client&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">host&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">9006&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">frame_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">connect_and_send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mode&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;file&amp;#39;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">global&lt;/span> &lt;span class="n">frame_num&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Client&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_dict_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ä»æ–‡ä»¶å¤¹è¯»å–å›¾ç‰‡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">mode&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;file&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;./data&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">filename&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">listdir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">read_img&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">imread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_path&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">filename&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">read_img&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># å­˜å…¥dict&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_list&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;frame_num&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;image&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">img_list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;%Y%m&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1">%H%M%S&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">localtime&lt;/span>&lt;span class="p">())}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_dict_list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_obj&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">read_img&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">imread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;frame_num&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">frame_num&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;image&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">read_img&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;%M%S.&lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">)}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_dict_list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_obj&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">frame_num&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1. obj to pickle ç”¨jsonçš„è¯ä¼šæ…¢ï¼Œå› ä¸ºread_imgéœ€è¦to_list()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_bytes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pickle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dumps&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_dict_list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2. å‘é€æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;client send: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;%M%S.&lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data_bytes&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">det_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">recv&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;client receive: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;%M%S.&lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">det_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pickle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">det_result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">det_result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;__main__&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">connect_and_send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;data/ship.jpg&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mode&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="python-serverç«¯">Python Serverç«¯&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">datetime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pickle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">cv2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">numpy&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">np&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">multiprocessing.connection&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Listener&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">host&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;192.168.0.2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">9006&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">server_sock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Listener&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Connecting... ...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">server_sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">accept&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">received_bytes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">recv&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;server receive: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;%M%S.&lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="ne">Exception&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">received_bytes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">received_bytes&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># å½“å®¢æˆ·ç«¯ä¸‹çº¿ï¼Œä¸è®©æœåŠ¡ç«¯ä¸‹çº¿&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server_sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Client&amp;#39;s data is empty !!!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server_sock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Listener&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Reset Sever&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">server_sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">accept&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># bytes to list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_dict_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pickle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">received_bytes&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># detect&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">det_dict_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_dict_list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">img_dict_list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;image&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># img send to server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">det_obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;frame_num&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;det_output&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">getCResult&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">det&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">img&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">img_num&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1"># getCResultè·å–æ£€æµ‹ç»“æœ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;time&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;%Y%m&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1">%H%M%S.&lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">)}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">det_dict_list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">det_obj&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># send result to client&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pickle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dumps&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">det_dict_list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;server send: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">datetime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;%M%S.&lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚è€ƒé“¾æ¥ï¼š&lt;a href="https://zhuanlan.zhihu.com/p/64534116">Pythonï¼Œç”¨ç®€å•ä»£ç ä¸Šä¼ å†…å­˜ä¸­çš„å›¾ç‰‡åˆ°è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œå¤„ç†&lt;/a>ã€&lt;a href="https://blog.csdn.net/a19990412/article/details/80919703">Pythonä¼ è¾“å›¾ç‰‡ï¼ˆåŒä¸€å±€åŸŸç½‘ä¸‹ç‰ˆæœ¬ï¼‰&lt;/a>&lt;/p>
&lt;h2 id="ç¬¬äºŒæ­¥pythonè°ƒç”¨c-åŠ¨æ€åº“opencvè¿”å›æ£€æµ‹ç»“æœ">ç¬¬äºŒæ­¥ï¼Œpythonè°ƒç”¨C++ åŠ¨æ€åº“ï¼ˆopencvï¼‰è¿”å›æ£€æµ‹ç»“æœ&lt;/h2>
&lt;p>ä¸€å…±æœ‰&lt;a href="https://bushyang.medium.com/python-c-c-%E6%95%B4%E5%90%88-adbfbf6051fd">cythonã€pybind11ã€ctypesç­‰åŒ…&lt;/a>ï¼Œè¿™é‡Œç”¨çš„æ˜¯ctypes
é¦–å…ˆä½ éœ€è¦æœ‰ä¸ª.soæ–‡ä»¶ï¼Œå¯ä»¥ç”¨cmakeç”Ÿæˆï¼Œæ³¨æ„pythonä¸­ä½ è¦è°ƒçš„åŒ…çš„ä½ç½®ï¼Œç”¨camkeä¸æ”¹.soæ–‡ä»¶çš„è·¯å¾„çš„è¯è‡ªåŠ¨åœ¨å½“å‰æ–‡ä»¶å¤¹ç”Ÿæˆï¼Œæ‰€ä»¥ä¼šæŠ¥ **undefined symbol: strTestï¼Œ**LinuxæŒ‡ä»¤ï¼šcp å¤åˆ¶æ–‡ä»¶
cmakeè‡ªè¡ŒæŸ¥é˜…å§ï¼Œè¿™é‡Œåšä¸ªç¤ºèŒƒ&lt;/p>
&lt;pre tabindex="0">&lt;code>project(xxx)
add_library(xxx SHARED xxx.cpp) //è¿™é‡Œä¼šå°†.cppä¸­çš„éç±»æ–¹æ³•åŠ å…¥åˆ°.soæ–‡ä»¶ä¸­
add_executable(yyy yyy.cpp)
target_link_libraries(yyy xxx)
linkï¼šhttps://www.cnblogs.com/blog-3123958139/p/5575360.html
&lt;/code>&lt;/pre>&lt;h3 id="éš¾ç‚¹ä¸€ä¼ è¾“å­—ç¬¦ä¸²-string-to-stdstring">éš¾ç‚¹ä¸€ï¼šä¼ è¾“å­—ç¬¦ä¸² string to std::string&lt;/h3>
&lt;p>C++ ç«¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="k">extern&lt;/span> &lt;span class="s">&amp;#34;C&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// åŠ äº†æ‰èƒ½è¯†åˆ«åˆ°æ‹¬å·å†…çš„æ–¹æ³•ï¼Œå¿…é¡»ï¼ç”¨Cæ ¼å¼å†™ä»£ç 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="nf">Detect_Init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Detect&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">det&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">config_path&lt;/span>&lt;span class="p">){&lt;/span> &lt;span class="c1">// detç”¨äºè°ƒç”¨ç±»æ–¹æ³•ï¼Œåç»­ä¼šè®²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nl">std&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">string&lt;/span> &lt;span class="nf">config_path1&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">config_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">config_path&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// å°†char*è½¬ä¸ºstringç±»å‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">det&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="nf">Init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">config_path1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>pythonç«¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">ctypes&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">ctypes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ll&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cdll&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LoadLibrary&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ll&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;../lib/libDetect.so&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è®¾ç½®ä¼ é€’å‚æ•°ç±»å‹argtypeså’Œè¿”å›ç±»å‹restype&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Detect_new&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">argtypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Detect_new&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">restype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_void_p&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Detect_Init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">argtypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_void_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_char_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_int&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Detect_Init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">restype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆ›å»ºä¸€ä¸ªDetectå¯¹è±¡ï¼Œåç»­ä¼šè®²&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">det&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Detect_new&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># init&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ³¨æ„å°†string.encode()ä¸è¡Œï¼Œç¼–ç åˆ°.å°±ç»“æŸäº†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">config&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">bytes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;../../weights/DetectConfig.yaml&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;utf-8&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># å­—ç¬¦ä¸²ä»»æ„ï¼Œæ³¨æ„è·¯å¾„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¦‚æœéœ€è¦ä¼ é€’å¯ä¿®æ”¹å­—ç¬¦ä¸²ï¼Œå‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/215790047&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä½¿ç”¨create_string_buffer(&amp;#34;test&amp;#34;.encode(&amp;#39;utf-8&amp;#39;)) &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Detect_Init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">det&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">config&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚è€ƒé“¾æ¥ï¼š&lt;a href="https://blog.csdn.net/qq_31342997/article/details/88374804#t8">Pythonè°ƒç”¨Cçš„åŸºç¡€å­¦ä¹ ï¼ˆä¼ é€’æ•°å­—ã€å­—ç¬¦ä¸²ã€æ•°ç»„ï¼ˆä¸€ç»´ã€äºŒç»´ï¼‰ã€ç»“æ„ä½“ï¼‰&lt;/a>&lt;/p>
&lt;h3 id="éš¾ç‚¹äºŒè°ƒç”¨c-ç±»æ–¹æ³•">éš¾ç‚¹äºŒï¼šè°ƒç”¨C++ ç±»æ–¹æ³•&lt;/h3>
&lt;p>C++ ç«¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Foo&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="c1">//æ­¤å¤„ä¸è´´è‡ªå·±çš„ä»£ç äº†ï¼Œç²˜è´´å‚è€ƒé“¾æ¥çš„ä»£ç 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">public&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Foo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">bar&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="nf">foobar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">private&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Foo&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">Foo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nl&lt;/span>&lt;span class="p">;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="n">Foo&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34;Value is &amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">val&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">Foo&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">foobar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="n">val&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">extern&lt;/span> &lt;span class="s">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="c1">//ç”¨äºpythonè°ƒç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">Foo&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="nf">Foo_new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Foo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">);}&lt;/span> &lt;span class="c1">//æ ¸å¿ƒç‚¹ï¼Œåˆ›å»ºä¸€ä¸ªè°ƒç”¨ç±»æ–¹æ³•çš„å¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="nf">Foo_bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Foo&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">foo&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">foo&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">();}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="nf">Foo_foobar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Foo&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">foo&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="n">foo&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">foobar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">);}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>pythonç«¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">ctypes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cdll&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LoadLibrary&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;./libfoo.so&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># æ³¨æ„è·¯å¾„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Foo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">object&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># ä¹Ÿå¯ä»¥ä¸å†™ç±»ï¼Œç›´æ¥æ”¾åœ¨ä¸€ä¸ªdefé‡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="fm">__init__&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Foo_new&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">argtypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_int&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Foo_new&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">restype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_void_p&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Foo_bar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">argtypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_void_p&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Foo_bar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">restype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_void_p&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Foo_foobar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">argtypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_void_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_int&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Foo_foobar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">restype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c_int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Foo_new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Foo_bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">obj&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">foobar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">lib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Foo_foobar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">obj&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Foo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Calling f.bar() will print a message including the value...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Now we&amp;#39;ll use foobar to add a value to that stored in our Foo object, f&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">foobar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Now we&amp;#39;ll do the same thing - but this time demonstrate that it&amp;#39;s a normal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Python integer...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">foobar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚è€ƒé“¾æ¥ï¼š&lt;a href="https://www.auctoris.co.uk/2017/04/29/calling-c-classes-from-python-with-ctypes/">Calling C++ Classes from Python, with ctypesâ€¦&lt;/a>ã€&lt;a href="https://www.jianshu.com/p/0306a9898d68">python è°ƒç”¨ C++ dll, åŒ…å«ç±»ä»¥åŠopencv Mat&lt;/a>ã€&lt;/p>
&lt;h3 id="éš¾ç‚¹ä¸‰ä¼ è¾“ç»“æ„ä½“å¹¶å¸¦matå›¾ç‰‡">éš¾ç‚¹ä¸‰ï¼šä¼ è¾“ç»“æ„ä½“å¹¶å¸¦Matå›¾ç‰‡&lt;/h3>
&lt;p>æ­¤å¤„ä¸€ä¸ªå‘ç‚¹æ˜¯C++ ç»“æ„ä½“çš„&lt;strong>å˜é‡é¡ºåº&lt;/strong>å’Œ&lt;strong>å˜é‡ç±»å‹&lt;/strong>å¿…é¡»ä¸pythonçš„ç±»ä¸€è‡´ï¼ï¼ï¼ï¼ä¸€å®šè¦ä»”ç»†æ ¡å¯¹
C++ ç±»å‹å’ŒPythonç±»å‹å¯¹ç…§&lt;a href="https://docs.python.org/zh-cn/3/library/ctypes.html#fundamental-data-types">ç½‘å€&lt;/a>
äºŒç»´æ•°æ®åœ¨pythoné‡Œéœ€è¦å€’ç€å†™ C++ [20][5],python [5][20]
C++ ç«¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">extern&lt;/span> &lt;span class="s">&amp;#34;C&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">image_num&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">width&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">height&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">frame&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// æ³¨æ„æ˜¯char* ç½‘ä¸Šä¸æ˜¯uchar*å°±æ˜¯POINTER(ubyte) å®é™…ä¸Šchar*ä¹Ÿå¯ï¼Œä¸ºäº†ä¸pythonå¯¹åº”
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="n">PythonImage&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">getInfo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">PythonImage&lt;/span> &lt;span class="n">input&lt;/span>&lt;span class="p">){&lt;/span> &lt;span class="c1">//éªŒè¯æ˜¯å¦ä¼ è¾“æˆåŠŸ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;-----Information------&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;width: %d, height: %d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">height&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DetectOutput&lt;/span> &lt;span class="nf">Detect_Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Detect&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">det&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">PythonImage&lt;/span> &lt;span class="n">img&lt;/span>&lt;span class="p">){&lt;/span> &lt;span class="c1">// DetectOutputæ˜¯åµŒå¥—ç»“æ„ä½“ï¼Œåªè¦ç»†å¿ƒä¸€èˆ¬éƒ½èƒ½è¿”å›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">cv&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">Mat&lt;/span> &lt;span class="n">frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">height&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">img&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">CV_8UC3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">img&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">frame&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]);&lt;/span> &lt;span class="c1">// å°†char* è½¬ä¸º Matæ ¼å¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">det&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">frame&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">//å°†å›¾ç‰‡å‘ç»™æ£€æµ‹ç®—æ³•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>pythonç«¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="n">from&lt;/span> &lt;span class="n">ctypes&lt;/span> &lt;span class="n">import&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="n">ctypes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">PythonImage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Structure&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_fields_&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="n">image_num&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_int&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="err">æ³¨æ„&lt;/span> &lt;span class="n">_fields_&lt;/span> &lt;span class="err">æ˜¯åŒä¸‹åˆ’çº¿&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_int&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="n">height&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_int&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="n">frame&lt;/span>&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_char_p&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">)]&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="err">ä¸&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="err">ä¿æŒä¸€è‡´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ll&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ctypes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cdll&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LoadLibrary&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ll&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;../lib/libDetect.so&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Detect_Run&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">argtypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ctypes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">c_void_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">PythonImage&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="err">æ³¨æ„æ­¤å¤„å¡«&lt;/span>&lt;span class="n">class&lt;/span>&lt;span class="err">åè€Œä¸æ˜¯&lt;/span>&lt;span class="n">Structure&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Detect_Run&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">restype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DetectOutput&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">det&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lib&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Detect_new&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pi&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PythonImage&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PARAM&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">c_int&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">height&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PARAM&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">height&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">frame&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">height&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">height&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">width&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PARAM&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">width&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">frame&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">width&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">width&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp"># å¯¹cv2å›¾ç‰‡è¿›è¡Œå¤„ç†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="n">frame_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">asarray&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">frame&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dtype&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">uint8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">frame_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">frame_data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ctypes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">data_as&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c_char_p&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">frame&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">frame_data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">image_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">image_num&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="err">ä¼ è¾“å›¾ç‰‡çš„æ•°é‡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">getInfo&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">argtypes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">PythonImage&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">getInfo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pi&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Detect_Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">det&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pi&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="err">#&lt;/span> &lt;span class="err">æ£€æµ‹ç»“æœ&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚è€ƒé“¾æ¥ï¼š&lt;a href="https://www.cnblogs.com/pyse/p/8590829.html">pythonè°ƒç”¨c/C++ æ—¶ä¼ é€’ç»“æ„ä½“å‚æ•°&lt;/a>&lt;/p>
&lt;h3 id="å°éš¾ç‚¹1åµŒå¥—ç»“æ„ä½“ä¼ è¾“è¯»å–æŒ‡é’ˆå€¼ctypes-bug">å°éš¾ç‚¹1ï¼šåµŒå¥—ç»“æ„ä½“ä¼ è¾“/è¯»å–æŒ‡é’ˆå€¼/ctypes BUGï¼Ÿ&lt;/h3>
&lt;p>æ³¨æ„C++ ç»“æ„ä½“çš„&lt;strong>å˜é‡é¡ºåº&lt;/strong>å’Œ&lt;strong>å˜é‡ç±»å‹&lt;/strong>å¿…é¡»ä¸pythonçš„ç±»ä¸€è‡´ï¼ï¼ï¼ï¼ä¸€å®šè¦ä»”ç»†æ ¡å¯¹ï¼Œå…¶ä»–åº”è¯¥æ²¡æœ‰ä»€ä¹ˆé—®é¢˜
C++ ç«¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">typedef&lt;/span> &lt;span class="k">enum&lt;/span> &lt;span class="nc">AttributeType&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PERSON_HEAD&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PERSON_NECK&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">AttributeType&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="nc">cv_box&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">float&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">float&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">float&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">float&lt;/span> &lt;span class="n">h&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">cv_box&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="nc">cv_object&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cv_box&lt;/span> &lt;span class="n">bbox&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">classes&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">float&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">prob&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">AttributeType&lt;/span> &lt;span class="n">attribute&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">cv_object&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">typedef&lt;/span> &lt;span class="k">struct&lt;/span> &lt;span class="nc">cv_object_list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cv_object&lt;/span> &lt;span class="n">object&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">128&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">object_num&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ³¨æ„è¿™é‡Œçš„é¡ºåº å¿…é¡»object_num åœ¨object[128] ä¸Šé¢ï¼Œ ï¼ï¼ï¼bug
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// å³ä¸¤è¡Œäº’æ¢ä½ç½®ï¼Œå¦åˆ™æ— æ³•è¯»å–object_numçš„å€¼ï¼Œå…·ä½“ä¸ºä»€ä¹ˆä¸æ¸…æ¥š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="n">cv_object_list&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>pythonç«¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">cv_box&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Structure&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_fields_&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="s1">&amp;#39;x&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_float&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;y&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_float&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_float&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;h&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_float&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">cv_object&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Structure&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_fields_&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="s1">&amp;#39;bbox&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cv_box&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;classes&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_int&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;prob&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">POINTER&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c_float&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;attribute&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_int&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="c1"># æšä¸¾ç±»å‹æ˜¯c_int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_int&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">cv_object_list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Structure&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_fields_&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cv_object&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">128&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;object_num&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_int&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;test&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c_int&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è¾“å‡ºæŒ‡é’ˆå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">prob&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">POINTER&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c_float&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="nb">object&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">prob&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># å³float* prob&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">prob&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">contents&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># è·å–åˆ°c_float()ä¸­æ‹¬å·å†…çš„å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">å‚è€ƒé“¾æ¥&lt;/span>&lt;span class="err">ï¼š&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">blog&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">csdn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Kelvin_Yan&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">article&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">details&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">86546784&lt;/span>&lt;span class="c1">#t2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å°éš¾ç‚¹2pythonè·å–c--hæ–‡ä»¶å†…å®¹">å°éš¾ç‚¹2ï¼špythonè·å–C++ .hæ–‡ä»¶å†…å®¹&lt;/h3>
&lt;p>å‚è€ƒé“¾æ¥ï¼š&lt;a href="https://blog.csdn.net/whahu1989/article/details/111652840">Pythonè§£æC++ å¤´æ–‡ä»¶&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">CppHeaderParser&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cppHeader&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">CppHeaderParser&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CppHeader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;../include/type.h&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">OBJECT_NUM&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">128&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">h&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">cppHeader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">defines&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="s1">&amp;#39;BATCH_SIZE&amp;#39;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">h&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39; &amp;#39;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="s1">&amp;#39;OBJECT_NUM&amp;#39;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">h&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">OBJECT_NUM&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39; &amp;#39;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ç¬¬ä¸‰æ­¥-ä¼ è¾“è§†é¢‘">ç¬¬ä¸‰æ­¥ ä¼ è¾“è§†é¢‘&lt;/h2>
&lt;p>å‚è€ƒåšå®¢ï¼š&lt;a href="https://blog.csdn.net/weixin_43211480/article/details/100925410">opencv cv2.imshowæ˜¾ç¤ºå›¾ç‰‡ä¸€ç‰‡é»‘è‰²&lt;/a>ã€&lt;a href="https://blog.csdn.net/w5688414/article/details/78426153"> python:è¯»å–è§†é¢‘ï¼Œå¤„ç†åï¼Œå®æ—¶è®¡ç®—å¸§æ•°fps&lt;/a>ã€&lt;a href="https://blog.csdn.net/a19990412/article/details/80940310">opencv imencodeè·Ÿimdecodeå‡½æ•°jpgï¼ˆpythonï¼‰&lt;/a>
é¦–å…ˆå¦‚æœè½¬æ¢m4sæ ¼å¼åˆ°mp4æ ¼å¼ï¼Œä½¿ç”¨å‘½ä»¤ï¼šffmpeg -i all.m4s -c copy video.mp4
è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œæ€»ä½“æ€è·¯å°±æ˜¯opencvè¯»å–è§†é¢‘ï¼ŒæŒ‰å¸§å‘é€ï¼Œç„¶åæ¥å—å›ä¼ ç»“æœå¹¶ç»˜åˆ¶
å®¢æˆ·ç«¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">send_data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_dict&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">start&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">start_time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;%Y-%m-&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2"> %H:%M:%S&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">localtime&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1. send data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_bytes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pickle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dumps&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_dict&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data_bytes&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># è²Œä¼¼clientæ˜¯å…¨å±€å˜é‡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2. receive data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">det_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">recv&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">det_result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pickle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">det_result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(det_result)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># cal time cost&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end_time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;%Y-%m-&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2"> %H:%M:%S&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">localtime&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">time_cost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">end&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;client total time cost: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">time_cost&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3. draw boxes è‡ªå·±å†™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">draw_box&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">det_result&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">img_dict&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 4. save logs è‡ªå·±å†™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">det_frame_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">det_result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;frame_num&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">save_logs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">time_cost&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">start_time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">end_time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">det_frame_num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">image_send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">global&lt;/span> &lt;span class="n">frame_num&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_param&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">IMWRITE_JPEG_QUALITY&lt;/span>&lt;span class="err">ï¼Œ&lt;/span> &lt;span class="mi">95&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># å‹ç¼©ç‡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">img&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">imencode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.jpg&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">img&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">img_param&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ä¸ºäº†ç»Ÿä¸€å›¾ç‰‡ï¼Œå¦‚æœå•è¦è§†é¢‘ï¼Œå¯ä»¥ç›´æ¥ä¼ è¾“å›¾ç‰‡img&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;frame_num&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">frame_num&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;image&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">img&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">frame_num&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">send_data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_obj&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">read_video_send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">global&lt;/span> &lt;span class="n">frame_num&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">frame_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># é‡ç½®frame_num ä½¿å…¶é€‚é…è§†é¢‘ç¬¬ä¸€å¸§&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">video&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">VideoCapture&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">img&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">video&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">imshow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;client&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">img&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">waitKey&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># ä¸åŠ å°±é»‘å±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">start&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image_send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># send img&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">seconds&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">end&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">seconds&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Estimated FPS: &lt;/span>&lt;span class="si">{0}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fps&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;__main__&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_file&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;./data&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_pa&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;./data/1.jpg&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Client&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;video&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">mode&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;image&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">read_img&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">imread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_pa&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image_send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">read_img&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">mode&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;images&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">read_images_send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">mode&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;video&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">read_video_send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;./video/1.mp4&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœåŠ¡ç«¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">connect_send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lib&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">det&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server_sock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Listener&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Connecting... ...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">server_sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">accept&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">received_bytes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">recv&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="ne">Exception&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">received_bytes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">received_bytes&lt;/span> &lt;span class="ow">is&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># ä¸èƒ½æ˜¯not receivedï¼Œå¦åˆ™ä¼ è§†é¢‘æœ‰é—®é¢˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server_sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Client&amp;#39;s data is empty !!!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server_sock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Listener&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Reset Sever&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">server_sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">accept&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># bytes to list to cv&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_dict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pickle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">received_bytes&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">img_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;image&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">imdecode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;image&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">IMREAD_COLOR&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># detect one image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">det_dict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">detect_img&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img_dict&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lib&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">det&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># send result to client&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pickle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dumps&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">det_dict&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E5%BA%94%E7%94%A8/">åº”ç”¨</category><category domain="https://keepjolly.com/categories/%E5%BA%94%E7%94%A8/">åº”ç”¨</category><category domain="https://keepjolly.com/tags/python/">Python</category></item><item><title>Linux ä¸¤å°è®¾å¤‡ç”¨ç½‘çº¿é€šä¿¡</title><link>https://keepjolly.com/archives/linux-two-device-directly-communicate/</link><guid isPermaLink="true">https://keepjolly.com/archives/linux-two-device-directly-communicate/</guid><pubDate>Thu, 15 Dec 2022 19:50:58 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;h2 id="é—®é¢˜æ¥æº">é—®é¢˜æ¥æº&lt;/h2>
&lt;p>é¡¹ç›®éœ€æ±‚ç”¨Ubuntuå’ŒDebianäº’ç›¸é€šä¿¡ï¼Œä¼ è¾“æ•°æ®
å‚è€ƒé“¾æ¥ï¼š&lt;a href="https://blog.51cto.com/u_15315240/3202599">Ubuntué€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶è¿›è¡Œç½‘ç»œé…ç½®&lt;/a>ã€&lt;a href="https://blog.51cto.com/yhd2011/732156">linux åŒæœºç›´è¿è®¾ç½®&lt;/a>&lt;/p>
&lt;h2 id="ç‰©ç†è¿æ¥">ç‰©ç†è¿æ¥&lt;/h2>
&lt;p>é¦–å…ˆå½“ç„¶æ˜¯ç”¨ç½‘çº¿å°†ä¸¤å°è®¾å¤‡è¿æ¥èµ·æ¥ï¼Œç”¨çš„æ˜¯æœ¬åœ°æ¥å£&lt;/p>
&lt;h2 id="ä¿®æ”¹ubuntuçš„ipåœ°å€">ä¿®æ”¹Ubuntuçš„ipåœ°å€&lt;/h2>
&lt;ol>
&lt;li>æ­¤å¤„å…ˆåœ¨ç»ˆç«¯ï¼ˆUbuntuå¿«æ·é”®ctrl+alt+tï¼‰&lt;strong>ifconfig&lt;/strong>æŸ¥çœ‹å½“å‰ipåœ°å€
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/12/20221215194637.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="2022-12-01 10-05-31 çš„å±å¹•æˆªå›¾.png">&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>æ­¤å¤„å¦‚æœæ²¡æœ‰é…ç½®enp4s0çš„è¯ å°±ä¸ä¼šå‡ºç°inet 192.168.0.1è¿™äº›ä¸œè¥¿ï¼Œå¦‚æœé…ç½®è¿‡ï¼Œåˆ™ä¼šæ˜¾ç¤ºï¼Œé‚£ä¹ˆåªéœ€è¦é…ç½®å¦ä¸€å°Linuxè®¾å¤‡å¤„åœ¨ç»Ÿä¸€ç½‘æ®µä¸‹å³å¯ã€‚&lt;/li>
&lt;li>æ­¤å¤–æœ‰äº›è®¾å¤‡å¯èƒ½ä¸å«enp4s0,åªè¦çœ‹åˆ°eå¼€å¤´çš„å°±æ˜¯æœ¬åœ°ç½‘ç»œï¼Œå³æ’ç½‘çº¿çš„åœ°æ–¹ï¼Œæˆ–è€…Googleå†’å·å‰çš„æ„æ€ã€‚&lt;/li>
&lt;/ul>
&lt;ol start="2">
&lt;li>ç„¶åç»ˆç«¯è¾“å…¥&lt;strong>sudo vim /etc/network/interfaces&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>æ‘iè¿›å…¥insertæ¨¡å¼ï¼Œæ–°åŠ å†…å®¹ï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>auto enp4s0
iface enp4s0 inet static
address 192.168.0.1
netmask 255.255.255.0
gateway 192.168.0.1
&lt;/code>&lt;/pre>&lt;p>å…¶ä¸­enp4s0 æ¢æˆä½ çš„è®¾å¤‡åå­—ï¼Œå¦‚eth0ï¼›å…¶ä»–éƒ¨åˆ†æ‡‚ç½‘ç»œçš„ä»»æ„è®¾ç½®ï¼Œè·Ÿæˆ‘ä¸€æ ·å°ç™½çš„ç›´æ¥å¤åˆ¶ç²˜è´´
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/12/20221215194637-1.jpg?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="1.jpg">
æ‘escé€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œè¾“å…¥:wq è¿›è¡Œå†™å…¥é€€å‡º&lt;/p>
&lt;h2 id="ä¿®æ”¹debiançš„ipåœ°å€">ä¿®æ”¹Debiançš„ipåœ°å€&lt;/h2>
&lt;p>&lt;a href="https://blog.csdn.net/weixin_45784720/article/details/109441084">debian 10 é™æ€ipé…ç½®&lt;/a>
æ³¨æ„å…¶ä¸­çš„addréœ€è¦è®¾ç½®ä¸º192.168.0.2&lt;/p>
&lt;pre tabindex="0">&lt;code>auto eth0
iface eth0 inet static
address 192.168.0.2
netmask 255.255.255.0
gateway 192.168.0.1 # è¿™ä¸ªå¥½åƒæ²¡ä»€ä¹ˆå…³ç³» ç½‘å…³æˆ‘ä¹Ÿå¿˜äº†ä»€ä¹ˆæ„æ€äº†
&lt;/code>&lt;/pre>&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/12/20221215194637-2.jpg?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="1.jpg">&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E5%BA%94%E7%94%A8/">åº”ç”¨</category><category domain="https://keepjolly.com/categories/%E5%BA%94%E7%94%A8/">åº”ç”¨</category><category domain="https://keepjolly.com/tags/linux/">Linux</category></item><item><title>opencvæé«˜æ‘„åƒå¤´åˆ†è¾¨ç‡æ—¶ï¼Œæ— æ³•æ‰“å¼€æ‘„åƒå¤´</title><link>https://keepjolly.com/archives/opencv-set-high-resolution-cant-open-camera/</link><guid isPermaLink="true">https://keepjolly.com/archives/opencv-set-high-resolution-cant-open-camera/</guid><pubDate>Wed, 16 Nov 2022 16:40:52 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>å‰è¨€
æœ¬æ–‡ç¯å¢ƒæ˜¯win7ï¼Œopencv-pythonï¼Œæœ‰ä¸¤ä¸ªæ‘„åƒå¤´è®¾å¤‡
å‚è€ƒé“¾æ¥ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://stackoverflow.com/questions/19448078/python-opencv-access-webcam-maximum-resolution">ä¸‡èƒ½çš„StackOverflow-1&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://stackoverflow.com/questions/29664399/capturing-video-from-two-cameras-in-opencv-at-once">ä¸‡èƒ½çš„StackOverflow-2&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜&lt;/h2>
&lt;p>win7è®¾å¤‡ä¸Šéœ€è¦è°ƒé«˜æ‘„åƒå¤´åˆ†è¾¨ç‡ï¼Œæœ‰ä¸¤ä¸ªæ‘„åƒå¤´ï¼Œä¸€ä¸ªå›ºå®šä¸€ä¸ªusbï¼Œä½†æ˜¯åªèƒ½æ§åˆ¶åœ¨640 x 480ï¼Œæ‰èƒ½ä¸¤ä¸ªéƒ½èƒ½ä½¿ç”¨ï¼Œå¦åˆ™è°ƒæ•´éšæœºè°ƒæ•´æ‘„åƒå¤´åˆ†è¾¨ç‡ä¸¤ä¸ªéƒ½æ— æ³•ç‚¹äº®ã€‚å¹¶ä¸”åœ¨win10ä½¿ç”¨å•ä¸ªæ‘„åƒå¤´ï¼Œä¿®æ”¹ä¸º3000 x 2000 è¾“å‡ºçš„å›¾ç‰‡åˆ†è¾¨ç‡å¯ä»¥ç›´æ¥è‡ªé€‚åº”ä¸º2048 x 1536ï¼Œå¯ä»¥ç‚¹äº®æ‘„åƒå¤´ã€‚&lt;/p>
&lt;h2 id="è§£å†³åŠæ³•ä¸€">è§£å†³åŠæ³•ä¸€&lt;/h2>
&lt;p>å› ä¸ºè¦å¯¹ç¨‹åºåšè¿ç§»ï¼Œä½†æ˜¯åœ¨win10ä¸Šå¯ä»¥ç›´æ¥ä»»æ„è®¾ç½®åˆ†è¾¨ç‡æ¥æ—¶opencvè‡ªé€‚åº”æ‘„åƒå¤´æœ€å¤§åˆ†è¾¨ç‡ï¼Œä½†æ˜¯åœ¨win7æ— æ³•å®ç°ï¼Œæ‰€ä»¥è®¾å®šåˆ†è¾¨ç‡ä¸ºå›ºå®šå€¼&lt;/p>
&lt;ul>
&lt;li>640 x 480&lt;/li>
&lt;li>800 x 600&lt;/li>
&lt;li>1024 x 768&lt;/li>
&lt;li>1280 x 960&lt;/li>
&lt;li>1920 x 1080&lt;/li>
&lt;li>2048 x 1536&lt;/li>
&lt;li>.....&lt;/li>
&lt;li>æ³¨æ„è¶Šå¤§åˆ†è¾¨ç‡éœ€æ±‚çš„ç®—åŠ›è¶Šå¤§ï¼Œä»¥åŠæœ‰äº›åˆ†è¾¨ç‡å¯èƒ½ä¸æ˜¯é€šç”¨ï¼Œå¯ä»¥å¤šè¯•è¯•&lt;/li>
&lt;li>æˆ–è€…åœ¨ä»£ç ä¸Šå¤šè®¾ç½®å‡ ä¸ªå¤§æ•´æ•°ï¼Œç„¶åget CV_CAP_PROP_FRAME_WIDTHï¼Œè¾“å‡ºçœ‹ä¸€ä¸‹ï¼Œæ‘„åƒå¤´çš„åˆ†è¾¨ç‡æ˜¯å¤šå°‘&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">cap&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">VideoCapture&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Frame default resolution: (&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CV_CAP_PROP_FRAME_WIDTH&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;; &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CV_CAP_PROP_FRAME_HEIGHT&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;)&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CV_CAP_PROP_FRAME_WIDTH&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">800&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CV_CAP_PROP_FRAME_HEIGHT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">600&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="è§£å†³åŠæ³•äºŒ">è§£å†³åŠæ³•äºŒ&lt;/h2>
&lt;p>æœªç»æµ‹è¯•ï¼Œå°±æ˜¯æœ‰å¤šä¸ªæ‘„åƒå¤´è®¾å¤‡çš„æ—¶å€™ï¼Œå ç”¨ä¸€ä¸ªæ€»çº¿ï¼Œæ‰€ä»¥å¯¼è‡´å†²çªäº†ï¼Œå¤šæ·»åŠ ä¸€ä¸ªusb cardï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯å•¥ï¼Œå¯èƒ½æ˜¯usbæ¥å£ï¼‰
&lt;a href="https://stackoverflow.com/a/29702444">https://stackoverflow.com/a/29702444&lt;/a>&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6/">é—®é¢˜é›†é”¦</category><category domain="https://keepjolly.com/categories/%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6/">é—®é¢˜é›†é”¦</category><category domain="https://keepjolly.com/tags/python/">Python</category><category domain="https://keepjolly.com/tags/opencv/">opencv</category></item><item><title>æ•°å­¦å»ºæ¨¡-æ•°æ®åˆ†æé¢˜</title><link>https://keepjolly.com/archives/data-analysis/</link><guid isPermaLink="true">https://keepjolly.com/archives/data-analysis/</guid><pubDate>Sun, 16 Oct 2022 20:58:19 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>ä»…åšå‚è€ƒç”¨ï¼Œä»Šå¹´å»ºæ¨¡èµ›å‰åšå®Œè¿™ä¸ªä»£ç åï¼Œè‡ªè§‰ä¿¡å¿ƒæ»¡æ»¡ï¼Œæ¯”å®Œèµ›åç›´æ¥è£‚å¼€ï¼Œå¸Œæœ›èƒ½æ‹¿ä¸ªå›½ä¸‰å§!o(â•¥ï¹â•¥)oã€‚
11/26 ä¸ºä»€ä¹ˆè¿˜æ²¡å…¬å¸ƒæˆç»©ï¼Œå“­æ­»ï¼Œè²Œä¼¼è¿˜æœ‰å¥½å‡ ä¸ªæ˜ŸæœŸ
&lt;a href="https://github.com/Z-timer/MathModel">github&lt;/a>&lt;/p>
&lt;h2 id="æ•°æ®æŸ¥çœ‹">æ•°æ®æŸ¥çœ‹&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">pandas_profiling&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">ProfileReport&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">pd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è¶…æ…¢ å…ˆè¿è¡Œè¿™ä¸ª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">chdir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;C:\Users\Desktop\math&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">file_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Molecular_Descriptor.xlsx&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sheet_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;training&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">table&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sheet_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">header&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># å¦‚æœæœ‰å¤šä¸ªåˆ—å æ–¹ä¾¿èµ·è§åªå–ä¸€ä¸ª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">profile&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">table&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">profile_report&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;data_profile&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">profile&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">output_file&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;analysis.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ•°æ®é¢„å¤„ç†">æ•°æ®é¢„å¤„ç†&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¯¼åŒ…ç•¥è¿‡ï¼Œè‡ªè¡Œgithubçœ‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">describeData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dtypes&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># å¦‚æœæ˜¯objectéœ€è¦è½¬æ¢&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for col in data: # object to numeric if is numeric&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if isinstance(data[col][0], int) or isinstance(data[col][0], float):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data[col] = pd.to_numeric(data[col], errors=&amp;#39;coerce&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(&amp;#39;æ•°æ®ç±»å‹ï¼š&amp;#39;, data.dtypes)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å‰ä¸‰è¡Œæ•°æ®ï¼š&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># çœ‹çœ‹æ˜¯å¦å¯¼å…¥æ­£ç¡®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;æ ·æœ¬æƒ…å†µ&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">describe&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1"># æŸ¥çœ‹æ ·æœ¬åˆ†å¸ƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">displot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;åœŸå£¤è’¸å‘é‡(mm)&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">kde&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># ç›´æ–¹å›¾æŠ˜çº¿å›¾å¯è§† !! æ³¨æ„ä¿®æ”¹æˆæŸä¸ªåˆ—å&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">savefig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;picture/describe.jpg&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">concat&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;10cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;åœŸå£¤è’¸å‘é‡(mm)&amp;#39;&lt;/span>&lt;span class="p">]],&lt;/span> &lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 1 !! æ³¨æ„ä¿®æ”¹æˆæŸä¸ªåˆ—å&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">scatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;10cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;åœŸå£¤è’¸å‘é‡(mm)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ylim&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1666&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cmap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;coolwarm&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data = pd.concat([data[&amp;#39;ALogp2&amp;#39;], data[&amp;#39;AMR&amp;#39;]], axis=1) # 1 !! å¯é€‰ç¬¬äºŒç»„å¯¹æ¯” çœ‹å®ƒä»¬ä¹‹é—´çš„ç›¸å…³æ€§ çº¿æ€§éçº¿æ€§&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data.plot.scatter(x=&amp;#39;ALogp2&amp;#39;, y=&amp;#39;AMR&amp;#39;, ylim=(0, 1666), c=&amp;#39;c&amp;#39;, cmap=&amp;#39;coolwarm&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">processNull&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://blog.51cto.com/liguodong/3702149&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1. è¾“å‡ºç¼ºå¤±ç‡è¡¨æ ¼ å»ºè®®ç»“æœæ”¾åˆ°excelï¼Œå›¾å¥½çœ‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">missing&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isnull&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reset_index&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rename&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;missNum&amp;#39;&lt;/span>&lt;span class="p">})[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">missing&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;missRate&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">missing&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;missNum&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># è®¡ç®—ç¼ºå¤±æ¯”ä¾‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">miss_analogy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">missing&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sort_values&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">by&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;missRate&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ascending&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># å‡åº&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">miss_analogy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">miss_analogy&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># æ’åºåé‡æ–°ä¿®æ”¹index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å‰å…«å˜é‡çš„ç¼ºå¤±ç‡&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">miss_analogy&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># è¾“å‡ºå‰8ä¸ª ï¼ï¼ è§£é™¤æ³¨é‡Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2. è¾“å‡ºç¼ºå¤±ç‡å›¾ å–å‰8ä¸ªéå†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">miss_analogy&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;missRate&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">)[:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;red&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;steelblue&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;yellow&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å˜é‡ç¼ºå¤±ç‡ç›´æ–¹å›¾&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xlabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å˜é‡å&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ylabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ç¼ºå¤±ç‡&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xticks&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">miss_analogy&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;index&amp;#39;&lt;/span>&lt;span class="p">][:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># plt.xticks(rotation=90)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">miss_analogy&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;missRate&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">])):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mf">0.02&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">{:.2%}&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">ha&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;center&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">#å›¾ç‰‡åŠ text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ylim&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3. å¤„ç†ç¼ºå¤±å€¼ åˆ é™¤ç¼ºå¤±é‡å¤§äºé˜ˆå€¼0.8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">orig_col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span> &lt;span class="c1"># è®¾è®¡åˆ é™¤åˆ—çš„æ“ä½œæ—¶å¯ä»¥å‘ç°åˆ é™¤äº†ä»€ä¹ˆåˆ—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">del_col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dropna&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">how&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;any&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">thresh&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">0.8&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># åˆ é™¤åˆ— ï¼ï¼ è§£é™¤æ³¨é‡Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data = data.dropna(axis=0, how=&amp;#39;any&amp;#39;, thresh=data.shape[1]*0.8) # åˆ é™¤è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reset_index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">drop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">after_col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">del_col&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">orig_col&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">difference&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">after_col&lt;/span>&lt;span class="p">))))&lt;/span> &lt;span class="c1"># https://cloud.tencent.com/developer/article/1705131&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;åˆ é™¤ç¼ºå¤±é‡å¤§äºé˜ˆå€¼0.8çš„å˜é‡ï¼š&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">del_col&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">savefig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;picture/nullV.jpg&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">interpolateData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># å¡«å……ç¼ºå¤±å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fig&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">axes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">subplots&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">figsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">sharex&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;all&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">axes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;ç§¯é›ªæ·±åº¦(mm)&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Original Data&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">marker&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;*&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">markerfacecolor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;blue&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1 ç›´æ¥å¡«å……&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> å‡å€¼é€‚ç”¨äºå®šé‡æ•°æ® èº«é«˜ å¹´é¾„ mean()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> ä¸­ä½æ•° æ­£æ€åˆ†å¸ƒ median()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> ä¼—æ•°é€‚ç”¨äºå®šæ€§æ•°æ® æ€§åˆ« æ–‡åŒ–ç¨‹åº¦ data[&amp;#39;S-ZORB.CAL_H2.PV&amp;#39;].mode()[0]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> method=&amp;#39;pad/bfill&amp;#39; å–å‰/åæ•°æ®å¡«å……
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data.fillna({&amp;#39;S-ZORB.CAL_H2.PV&amp;#39;: data[&amp;#39;S-ZORB.CAL_H2.PV&amp;#39;].mean()}, inplace=True) # åªä¿®æ”¹ä¸€åˆ—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data.fillna(data.mean(), inplace=True) # ï¼ï¼ é€‰ ç›´æ¥å¡«å…… è§£é™¤æ³¨é‡Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2 æ’å€¼æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> â€˜nearestâ€™, â€˜zeroâ€™, â€˜slinearâ€™, â€˜quadraticâ€™, â€˜cubicâ€™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 1.å¦‚æœä½ çš„æ•°æ®å¢é•¿é€Ÿç‡è¶Šæ¥è¶Šå¿«ï¼Œå¯ä»¥é€‰æ‹© method=&amp;#39;quadratic&amp;#39;äºŒæ¬¡æ’å€¼ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 2.å¦‚æœæ•°æ®é›†å‘ˆç°å‡ºç´¯è®¡åˆ†å¸ƒçš„æ ·å­ï¼Œæ¨èé€‰æ‹© method=&amp;#39;pchip&amp;#39;ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 3.å¦‚æœéœ€è¦å¡«è¡¥ç¼ºçœå€¼ï¼Œä»¥å¹³æ»‘ç»˜å›¾ä¸ºç›®æ ‡ï¼Œæ¨èé€‰æ‹© method=&amp;#39;akima&amp;#39;ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">interpolate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;quadratic&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># ................ï¼ï¼ è§£é™¤æ³¨é‡Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">axes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;ç§¯é›ªæ·±åº¦(mm)&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s1">&amp;#39;r--&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Filled Data&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">marker&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;h&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">markerfacecolor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;red&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">axes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;åˆå§‹å€¼&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;æ‹Ÿåˆå€¼&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">loc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;upper right&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1"># ........................ï¼ï¼ è§£é™¤æ³¨é‡Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">processZero&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># åˆ é™¤0å€¼å¤§äº80%çš„åˆ—/è¡Œ Bijlsma æå‡ºçš„ 80%å‡†åˆ™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zeros&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_numpy&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cnt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">flat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cnt&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mf">0.2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]:&lt;/span> &lt;span class="c1"># è·å–0å€¼è¿‡å¤šçš„ åˆ—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zeros&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;zeros error(&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s1">): &amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">zeros&lt;/span>&lt;span class="p">)),&lt;/span> &lt;span class="n">zeros&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">error&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">zeros&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">zeros&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">zeros&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">zeros&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fig&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ax2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">subplots&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">figsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">scatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data_c&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data_c&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;g&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">alpha&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;æ­£å¸¸å€¼&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">scatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">error&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">alpha&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;0å€¼&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ax2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_xlabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ä¸‹æ ‡&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ax2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_ylabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å€¼&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ax2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">drop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zeros&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">savefig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;picture/zeroV.jpg&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">process3sigma&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># åˆ é™¤å¼‚å¸¸å€¼ 3sigmaæ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> éœ€æ»¡è¶³é«˜æ–¯åˆ†å¸ƒï¼Œå¯å‡è®¾ä¸ºé«˜æ–¯åˆ†å¸ƒå¼ºè¡Œç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 1. å¯ä»¥åˆ é™¤æ¯åˆ—å¼‚å¸¸å€¼å¤§äºé˜ˆå€¼å¹¶ä¸”è¶…è¿‡3sigmaèŒƒå›´ï¼Œå¯¹å°‘äºé˜ˆå€¼ä½†è¶…è¿‡èŒƒå›´çš„è¿›è¡Œèµ‹å€¼ æ²¡å®ç°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 2. å¯ä»¥ç›´æ¥åˆ é™¤è¶…è¿‡3sigmaèŒƒå›´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sigma&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sigma_cnt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delrow_thres&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># è¡Œå¼‚å¸¸å€¼é˜ˆå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delcol_thres&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="c1"># åˆ—å¼‚å¸¸å€¼é˜ˆå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sig&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_numpy&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mean&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">flat&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">flat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ddof&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="ne">TypeError&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]):&lt;/span> &lt;span class="c1"># æ£€æŸ¥å½“å‰åˆ—çš„3sigma&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">flat&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">mean&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sigma_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flag&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">flag&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">delrow_thres&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sig&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sigma&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(&amp;#39;del 3sigma({0}) column({1}): &amp;#39;.format(round(sig, 3), len(sigma)), sigma)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if len(sigma) &amp;gt; 0:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># draw_3sigma(data[sigma[0]])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># draw_3sigma(data[&amp;#39;å¹²é‡&amp;#39;])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data.drop(columns=sigma, inplace=True)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data.reset_index(drop=True)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åˆ é™¤è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sigma_cntnp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sigma_cnt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">where&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sigma_cntnp&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># necessaryï¼Ÿ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;del 3sigma row: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">drop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reset_index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">drop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">idx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">processMaxMin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scope&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;é™„ä»¶å››ï¼š354ä¸ªæ“ä½œå˜é‡ä¿¡æ¯.xlsx&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">usecols&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># æ³¨æ„ä¿®æ”¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scope&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scope&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_numpy&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scope&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]:&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;-&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">scope&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">scope&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">items&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;ï¼ˆ&amp;#39;&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;(&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">flag&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="ne">ValueError&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;\d+\.?\d*&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># æ‰¾æµ®ç‚¹æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">flag&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">mm&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">mm&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;æ•°æ®error&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scope&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">col&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">scope&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">scope&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">scope&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]:&lt;/span> &lt;span class="c1"># åˆ é™¤æœ€å¤§æœ€å°ä¸å¯¹çš„ è¡Œ/æ ·æœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;minmax error&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">scope&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">col&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">drop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reset_index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">drop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;__main__&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1. è¯»å–æ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># file_name = r&amp;#39;C:\Users\Desktop\2022å¹´Eé¢˜\æ•°æ®é›†\ç›‘æµ‹ç‚¹æ•°æ®\é™„ä»¶15ï¼šè‰åŸè½®ç‰§æ”¾ç‰§æ ·åœ°ç¾¤è½ç»“æ„ç›‘æµ‹æ•°æ®é›†ï¼ˆ2016å¹´6æœˆ-2020å¹´9&amp;#39; \&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># r&amp;#39;æœˆï¼‰ã€‚/å†…è’™å¤è‡ªæ²»åŒºé”¡æ—éƒ­å‹’ç›Ÿå…¸å‹è‰åŸè½®ç‰§æ”¾ç‰§æ ·åœ°ç¾¤è½ç»“æ„ç›‘æµ‹æ•°æ®é›†ï¼ˆ201.xlsx &amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;data/result.xlsx&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sheet_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Sheet1&amp;#39;&lt;/span> &lt;span class="c1"># æ³¨æ„ä¿®æ”¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">table&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sheet_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">header&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># å¦‚æœæœ‰å¤šä¸ªåˆ—å æ–¹ä¾¿èµ·è§åªå–ä¸€ä¸ª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2. åˆ’åˆ†æ•°æ® if need&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ³¨æ„ç´¢å¼•è¿˜æ˜¯åŸæ•°æ®çš„ç´¢å¼• https://stackoverflow.com/questions/71679582/0-is-not-in-range-in-pandas&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sample285&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">41&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sample285&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reset_index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">drop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sample285&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sample285&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">copy&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1"># é˜²æ­¢SettingWithCopyWarning&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sample310&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">table&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">42&lt;/span>&lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sample310&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reset_index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">drop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">inplace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">table&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">:]&lt;/span> &lt;span class="c1"># æ’é™¤å¹´æœˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3. æŸ¥çœ‹æ•°æ®æƒ…å†µ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># describeData(data)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 4. å¤„ç†ç¼ºå¤±å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">processNull&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">processZero&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">process3sigma&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># table = table.iloc[idx, 0]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data = processMaxMin(data)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">interpolateData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(&amp;#39;åˆ é™¤å‰å˜é‡ä¸ªæ•°&amp;#39;, len(table.columns))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data.index = table.iloc[:, 0] # å°†stringåˆ—é‡æ–°æ”¾å›&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(&amp;#39;åˆ é™¤åå˜é‡ä¸ªæ•°&amp;#39;, len(data.columns))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Preprocess/pre_data.xlsx&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ç‰¹å¾é€‰æ‹©">ç‰¹å¾é€‰æ‹©&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;span class="lnt">269
&lt;/span>&lt;span class="lnt">270
&lt;/span>&lt;span class="lnt">271
&lt;/span>&lt;span class="lnt">272
&lt;/span>&lt;span class="lnt">273
&lt;/span>&lt;span class="lnt">274
&lt;/span>&lt;span class="lnt">275
&lt;/span>&lt;span class="lnt">276
&lt;/span>&lt;span class="lnt">277
&lt;/span>&lt;span class="lnt">278
&lt;/span>&lt;span class="lnt">279
&lt;/span>&lt;span class="lnt">280
&lt;/span>&lt;span class="lnt">281
&lt;/span>&lt;span class="lnt">282
&lt;/span>&lt;span class="lnt">283
&lt;/span>&lt;span class="lnt">284
&lt;/span>&lt;span class="lnt">285
&lt;/span>&lt;span class="lnt">286
&lt;/span>&lt;span class="lnt">287
&lt;/span>&lt;span class="lnt">288
&lt;/span>&lt;span class="lnt">289
&lt;/span>&lt;span class="lnt">290
&lt;/span>&lt;span class="lnt">291
&lt;/span>&lt;span class="lnt">292
&lt;/span>&lt;span class="lnt">293
&lt;/span>&lt;span class="lnt">294
&lt;/span>&lt;span class="lnt">295
&lt;/span>&lt;span class="lnt">296
&lt;/span>&lt;span class="lnt">297
&lt;/span>&lt;span class="lnt">298
&lt;/span>&lt;span class="lnt">299
&lt;/span>&lt;span class="lnt">300
&lt;/span>&lt;span class="lnt">301
&lt;/span>&lt;span class="lnt">302
&lt;/span>&lt;span class="lnt">303
&lt;/span>&lt;span class="lnt">304
&lt;/span>&lt;span class="lnt">305
&lt;/span>&lt;span class="lnt">306
&lt;/span>&lt;span class="lnt">307
&lt;/span>&lt;span class="lnt">308
&lt;/span>&lt;span class="lnt">309
&lt;/span>&lt;span class="lnt">310
&lt;/span>&lt;span class="lnt">311
&lt;/span>&lt;span class="lnt">312
&lt;/span>&lt;span class="lnt">313
&lt;/span>&lt;span class="lnt">314
&lt;/span>&lt;span class="lnt">315
&lt;/span>&lt;span class="lnt">316
&lt;/span>&lt;span class="lnt">317
&lt;/span>&lt;span class="lnt">318
&lt;/span>&lt;span class="lnt">319
&lt;/span>&lt;span class="lnt">320
&lt;/span>&lt;span class="lnt">321
&lt;/span>&lt;span class="lnt">322
&lt;/span>&lt;span class="lnt">323
&lt;/span>&lt;span class="lnt">324
&lt;/span>&lt;span class="lnt">325
&lt;/span>&lt;span class="lnt">326
&lt;/span>&lt;span class="lnt">327
&lt;/span>&lt;span class="lnt">328
&lt;/span>&lt;span class="lnt">329
&lt;/span>&lt;span class="lnt">330
&lt;/span>&lt;span class="lnt">331
&lt;/span>&lt;span class="lnt">332
&lt;/span>&lt;span class="lnt">333
&lt;/span>&lt;span class="lnt">334
&lt;/span>&lt;span class="lnt">335
&lt;/span>&lt;span class="lnt">336
&lt;/span>&lt;span class="lnt">337
&lt;/span>&lt;span class="lnt">338
&lt;/span>&lt;span class="lnt">339
&lt;/span>&lt;span class="lnt">340
&lt;/span>&lt;span class="lnt">341
&lt;/span>&lt;span class="lnt">342
&lt;/span>&lt;span class="lnt">343
&lt;/span>&lt;span class="lnt">344
&lt;/span>&lt;span class="lnt">345
&lt;/span>&lt;span class="lnt">346
&lt;/span>&lt;span class="lnt">347
&lt;/span>&lt;span class="lnt">348
&lt;/span>&lt;span class="lnt">349
&lt;/span>&lt;span class="lnt">350
&lt;/span>&lt;span class="lnt">351
&lt;/span>&lt;span class="lnt">352
&lt;/span>&lt;span class="lnt">353
&lt;/span>&lt;span class="lnt">354
&lt;/span>&lt;span class="lnt">355
&lt;/span>&lt;span class="lnt">356
&lt;/span>&lt;span class="lnt">357
&lt;/span>&lt;span class="lnt">358
&lt;/span>&lt;span class="lnt">359
&lt;/span>&lt;span class="lnt">360
&lt;/span>&lt;span class="lnt">361
&lt;/span>&lt;span class="lnt">362
&lt;/span>&lt;span class="lnt">363
&lt;/span>&lt;span class="lnt">364
&lt;/span>&lt;span class="lnt">365
&lt;/span>&lt;span class="lnt">366
&lt;/span>&lt;span class="lnt">367
&lt;/span>&lt;span class="lnt">368
&lt;/span>&lt;span class="lnt">369
&lt;/span>&lt;span class="lnt">370
&lt;/span>&lt;span class="lnt">371
&lt;/span>&lt;span class="lnt">372
&lt;/span>&lt;span class="lnt">373
&lt;/span>&lt;span class="lnt">374
&lt;/span>&lt;span class="lnt">375
&lt;/span>&lt;span class="lnt">376
&lt;/span>&lt;span class="lnt">377
&lt;/span>&lt;span class="lnt">378
&lt;/span>&lt;span class="lnt">379
&lt;/span>&lt;span class="lnt">380
&lt;/span>&lt;span class="lnt">381
&lt;/span>&lt;span class="lnt">382
&lt;/span>&lt;span class="lnt">383
&lt;/span>&lt;span class="lnt">384
&lt;/span>&lt;span class="lnt">385
&lt;/span>&lt;span class="lnt">386
&lt;/span>&lt;span class="lnt">387
&lt;/span>&lt;span class="lnt">388
&lt;/span>&lt;span class="lnt">389
&lt;/span>&lt;span class="lnt">390
&lt;/span>&lt;span class="lnt">391
&lt;/span>&lt;span class="lnt">392
&lt;/span>&lt;span class="lnt">393
&lt;/span>&lt;span class="lnt">394
&lt;/span>&lt;span class="lnt">395
&lt;/span>&lt;span class="lnt">396
&lt;/span>&lt;span class="lnt">397
&lt;/span>&lt;span class="lnt">398
&lt;/span>&lt;span class="lnt">399
&lt;/span>&lt;span class="lnt">400
&lt;/span>&lt;span class="lnt">401
&lt;/span>&lt;span class="lnt">402
&lt;/span>&lt;span class="lnt">403
&lt;/span>&lt;span class="lnt">404
&lt;/span>&lt;span class="lnt">405
&lt;/span>&lt;span class="lnt">406
&lt;/span>&lt;span class="lnt">407
&lt;/span>&lt;span class="lnt">408
&lt;/span>&lt;span class="lnt">409
&lt;/span>&lt;span class="lnt">410
&lt;/span>&lt;span class="lnt">411
&lt;/span>&lt;span class="lnt">412
&lt;/span>&lt;span class="lnt">413
&lt;/span>&lt;span class="lnt">414
&lt;/span>&lt;span class="lnt">415
&lt;/span>&lt;span class="lnt">416
&lt;/span>&lt;span class="lnt">417
&lt;/span>&lt;span class="lnt">418
&lt;/span>&lt;span class="lnt">419
&lt;/span>&lt;span class="lnt">420
&lt;/span>&lt;span class="lnt">421
&lt;/span>&lt;span class="lnt">422
&lt;/span>&lt;span class="lnt">423
&lt;/span>&lt;span class="lnt">424
&lt;/span>&lt;span class="lnt">425
&lt;/span>&lt;span class="lnt">426
&lt;/span>&lt;span class="lnt">427
&lt;/span>&lt;span class="lnt">428
&lt;/span>&lt;span class="lnt">429
&lt;/span>&lt;span class="lnt">430
&lt;/span>&lt;span class="lnt">431
&lt;/span>&lt;span class="lnt">432
&lt;/span>&lt;span class="lnt">433
&lt;/span>&lt;span class="lnt">434
&lt;/span>&lt;span class="lnt">435
&lt;/span>&lt;span class="lnt">436
&lt;/span>&lt;span class="lnt">437
&lt;/span>&lt;span class="lnt">438
&lt;/span>&lt;span class="lnt">439
&lt;/span>&lt;span class="lnt">440
&lt;/span>&lt;span class="lnt">441
&lt;/span>&lt;span class="lnt">442
&lt;/span>&lt;span class="lnt">443
&lt;/span>&lt;span class="lnt">444
&lt;/span>&lt;span class="lnt">445
&lt;/span>&lt;span class="lnt">446
&lt;/span>&lt;span class="lnt">447
&lt;/span>&lt;span class="lnt">448
&lt;/span>&lt;span class="lnt">449
&lt;/span>&lt;span class="lnt">450
&lt;/span>&lt;span class="lnt">451
&lt;/span>&lt;span class="lnt">452
&lt;/span>&lt;span class="lnt">453
&lt;/span>&lt;span class="lnt">454
&lt;/span>&lt;span class="lnt">455
&lt;/span>&lt;span class="lnt">456
&lt;/span>&lt;span class="lnt">457
&lt;/span>&lt;span class="lnt">458
&lt;/span>&lt;span class="lnt">459
&lt;/span>&lt;span class="lnt">460
&lt;/span>&lt;span class="lnt">461
&lt;/span>&lt;span class="lnt">462
&lt;/span>&lt;span class="lnt">463
&lt;/span>&lt;span class="lnt">464
&lt;/span>&lt;span class="lnt">465
&lt;/span>&lt;span class="lnt">466
&lt;/span>&lt;span class="lnt">467
&lt;/span>&lt;span class="lnt">468
&lt;/span>&lt;span class="lnt">469
&lt;/span>&lt;span class="lnt">470
&lt;/span>&lt;span class="lnt">471
&lt;/span>&lt;span class="lnt">472
&lt;/span>&lt;span class="lnt">473
&lt;/span>&lt;span class="lnt">474
&lt;/span>&lt;span class="lnt">475
&lt;/span>&lt;span class="lnt">476
&lt;/span>&lt;span class="lnt">477
&lt;/span>&lt;span class="lnt">478
&lt;/span>&lt;span class="lnt">479
&lt;/span>&lt;span class="lnt">480
&lt;/span>&lt;span class="lnt">481
&lt;/span>&lt;span class="lnt">482
&lt;/span>&lt;span class="lnt">483
&lt;/span>&lt;span class="lnt">484
&lt;/span>&lt;span class="lnt">485
&lt;/span>&lt;span class="lnt">486
&lt;/span>&lt;span class="lnt">487
&lt;/span>&lt;span class="lnt">488
&lt;/span>&lt;span class="lnt">489
&lt;/span>&lt;span class="lnt">490
&lt;/span>&lt;span class="lnt">491
&lt;/span>&lt;span class="lnt">492
&lt;/span>&lt;span class="lnt">493
&lt;/span>&lt;span class="lnt">494
&lt;/span>&lt;span class="lnt">495
&lt;/span>&lt;span class="lnt">496
&lt;/span>&lt;span class="lnt">497
&lt;/span>&lt;span class="lnt">498
&lt;/span>&lt;span class="lnt">499
&lt;/span>&lt;span class="lnt">500
&lt;/span>&lt;span class="lnt">501
&lt;/span>&lt;span class="lnt">502
&lt;/span>&lt;span class="lnt">503
&lt;/span>&lt;span class="lnt">504
&lt;/span>&lt;span class="lnt">505
&lt;/span>&lt;span class="lnt">506
&lt;/span>&lt;span class="lnt">507
&lt;/span>&lt;span class="lnt">508
&lt;/span>&lt;span class="lnt">509
&lt;/span>&lt;span class="lnt">510
&lt;/span>&lt;span class="lnt">511
&lt;/span>&lt;span class="lnt">512
&lt;/span>&lt;span class="lnt">513
&lt;/span>&lt;span class="lnt">514
&lt;/span>&lt;span class="lnt">515
&lt;/span>&lt;span class="lnt">516
&lt;/span>&lt;span class="lnt">517
&lt;/span>&lt;span class="lnt">518
&lt;/span>&lt;span class="lnt">519
&lt;/span>&lt;span class="lnt">520
&lt;/span>&lt;span class="lnt">521
&lt;/span>&lt;span class="lnt">522
&lt;/span>&lt;span class="lnt">523
&lt;/span>&lt;span class="lnt">524
&lt;/span>&lt;span class="lnt">525
&lt;/span>&lt;span class="lnt">526
&lt;/span>&lt;span class="lnt">527
&lt;/span>&lt;span class="lnt">528
&lt;/span>&lt;span class="lnt">529
&lt;/span>&lt;span class="lnt">530
&lt;/span>&lt;span class="lnt">531
&lt;/span>&lt;span class="lnt">532
&lt;/span>&lt;span class="lnt">533
&lt;/span>&lt;span class="lnt">534
&lt;/span>&lt;span class="lnt">535
&lt;/span>&lt;span class="lnt">536
&lt;/span>&lt;span class="lnt">537
&lt;/span>&lt;span class="lnt">538
&lt;/span>&lt;span class="lnt">539
&lt;/span>&lt;span class="lnt">540
&lt;/span>&lt;span class="lnt">541
&lt;/span>&lt;span class="lnt">542
&lt;/span>&lt;span class="lnt">543
&lt;/span>&lt;span class="lnt">544
&lt;/span>&lt;span class="lnt">545
&lt;/span>&lt;span class="lnt">546
&lt;/span>&lt;span class="lnt">547
&lt;/span>&lt;span class="lnt">548
&lt;/span>&lt;span class="lnt">549
&lt;/span>&lt;span class="lnt">550
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">low_var_filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># ä½æ–¹å·®æ»¤æ³¢&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># äººå·¥ç‰ˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># var = data.var()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># col = var.index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># variable = []&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for i in range(len(var)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if var[col[i]] &amp;lt; 1:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># variable.append(col[[i]].format()[0])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(list(variable), var[variable[0]])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data.drop(columns=variable, axis=1, inplace=True)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:]&lt;/span> &lt;span class="c1"># æ’é™¤timeåˆ—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">names&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ™ºèƒ½ç‰ˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">orig_col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">selector&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">VarianceThreshold&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">threshold&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># é˜ˆå€¼ä¸º&amp;lt;1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">selector&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">after_col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">())[&lt;/span>&lt;span class="n">selector&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_support&lt;/span>&lt;span class="p">()]&lt;/span> &lt;span class="c1"># è·å¾—åˆ é™¤ååˆ—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">del_col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">orig_col&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">difference&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">after_col&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="c1"># è·å¾—åˆ é™¤åˆ—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">selector&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ä½æ–¹å·®æ»¤æ³¢åˆ é™¤åˆ—ï¼š&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">del_col&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ä½æ–¹å·®åˆ é™¤åçš„çŸ©é˜µshapeï¼š&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data = pd.DataFrame(data, columns=after_col)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(data[:5])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">after_col&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data.to_excel(&amp;#39;new_data.xlsx&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">MICSelect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">feature_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">mic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">m&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MINE&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">m&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compute_score&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mic&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="mf">0.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># n = data.shape[1] # ä¸¤ä¸¤æ¯”è¾ƒ https://zhuanlan.zhihu.com/p/53092905&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># result = np.zeros([n, n])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># mine = MINE(alpha=0.6, c=15)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for i in range(n):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># mine.compute_score(data[:, i], target)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># result[i, 0] = round(mine.mic(), 2)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># result[0, i] = round(mine.mic(), 2)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># mic = pd.DataFrame(result)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SKB&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SelectKBest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">tuple&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">tuple&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">)))&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">k&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># é€‰æ‹©å‰kä¸ªæœ€å¥½æ¯”éœ€è¦çš„å¤š20ä¸ª https://www.cnblogs.com/nxf-rabbit75/p/11122415.html#auto-id-15&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SKB&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">feature_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SKB&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_support&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mic_scores&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SKB&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">scores_&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mic_results&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="n">feature_name&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">mic_scores&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">feature_index&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sorted_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">sorted&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mic_results&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">itemgetter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">reverse&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sorted_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;å˜é‡å&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;é‡è¦æ€§åº¦&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;MICDataframe: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;FeatureSelect/MICData.xlsx&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">pd_data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">dcorSelect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">feature_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">Dcor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">dcor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">distance_correlation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mf">0.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SKB&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SelectKBest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">tuple&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">tuple&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Dcor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">)))&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">k&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># å‰kä¸ª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SKB&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">feature_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SKB&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_support&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mic_scores&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SKB&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">scores_&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mic_results&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="n">feature_name&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">mic_scores&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">feature_index&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sorted_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">sorted&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mic_results&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">itemgetter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">reverse&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sorted_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;å˜é‡å&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;é‡è¦æ€§åº¦&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;DcorDataframe: &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;FeatureSelect/DcorData.xlsx&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">pd_data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">LassoSelect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">feature_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> å­˜åœ¨ä¸€ç»„é«˜åº¦ç›¸å…³çš„ç‰¹å¾æ—¶ï¼ŒLassoå›å½’æ–¹æ³•å€¾å‘äºé€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªç‰¹å¾
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> å…·æœ‰é«˜ç»å¯¹å€¼çš„æ•°æœ€é‡è¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> https://blog.csdn.net/Kyrie_Irving/article/details/101197360
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> https://blog.51cto.com/u_14467853/5438127
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> http://scikit-learn.org.cn/view/199.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> https://ask.hellobi.com/blog/lsxxx2011/10581
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">feature_name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">alpha_lasso&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="o">**&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linspace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ä½¿ç”¨lassoCVæ‰¾å‡ºæœ€ä½³lambdaå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">make_pipeline&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">StandardScaler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">with_mean&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">LassoCV&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alphas&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">alpha_lasso&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cv&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">max_iter&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10000&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lasso_best_alpha&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;lassocv&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">alpha_&lt;/span> &lt;span class="c1"># å–å‡ºæœ€ä½³çš„lambdaå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;lassoå›å½’æœ€ä½³alphaå€¼&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lasso_best_alpha&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ ¹æ®ä¸åŒçš„lambdaç”»å‡ºå˜é‡æƒ…å†µ å¯ä»¥é¦–å…ˆå¯»æ‰¾æœ€ä¼˜å˜é‡ æ”¾è¯¥å›¾ ç„¶åæ”¾ä¸‹é¢çš„æœ€é‡è¦å˜é‡å›¾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># lasso = Lasso()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># coefs_lasso = []&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for i in alpha_lasso:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># lasso.set_params(alpha=i)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># lasso.fit(data, target)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># coefs_lasso.append(lasso.coef_)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawPlot(alpha_lasso, coefs_lasso, title=&amp;#39;Lassoå›å½’ç³»æ•°å’Œalphaç³»æ•°çš„å…³ç³»&amp;#39;, xlabel=&amp;#39;Î±å€¼&amp;#39;, ylabel=&amp;#39;å„å˜é‡æ¯”ä¾‹ç³»æ•°&amp;#39;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># columns=feature_name)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ç›´æ¥ä»£å…¥æœ€ä½³å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lasso&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Lasso&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alpha&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">lasso_best_alpha&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model_lasso&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">lasso&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">coef&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">model_lasso&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">coef_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(coef[coef != 0].abs().sort_values(ascending=False)[:10])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Lasso picked &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coef&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; variables and eliminated the other &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coef&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; variables&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sorted_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">sorted&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">zip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">feature_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">coef&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">reverse&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">itemgetter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))[:&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sorted_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;å˜é‡å&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;é‡è¦æ€§åº¦&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;LassoDataframe: &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;FeatureSelect/LassoData.xlsx&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">pd_data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># useless L2æ­£åˆ™åŒ–ï¼ˆå²­å›å½’ï¼‰å¯ä»¥ç”¨æ¥åšç‰¹å¾é€‰æ‹©å—ï¼Ÿ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://www.zhihu.com/question/288362034/answer/463287541&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">RidgeSelect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">feature_name&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:]&lt;/span> &lt;span class="c1"># æ’é™¤timeåˆ—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">feature_name&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">alpha_ridge&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="o">**&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linspace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ ¹æ®ä¸åŒçš„lambdaç”»å‡ºå˜é‡æƒ…å†µ å¯ä»¥é¦–å…ˆå¯»æ‰¾æœ€ä¼˜å˜é‡ æ”¾è¯¥å›¾ ç„¶åæ”¾ä¸‹é¢çš„æœ€é‡è¦å˜é‡å›¾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ridge&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Ridge&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">coefs_ridge&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">alpha_ridge&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ridge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_params&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alpha&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ridge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">coefs_ridge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ridge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">coef_&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://stackoverflow.com/questions/58393378/why-does-ridge-model-fitting-show-warning-when-power-of-the-denominator-in-the-a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">drawPlot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alpha_ridge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">coefs_ridge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Ridgeå›å½’ç³»æ•°å’Œalphaç³»æ•°çš„å…³ç³»&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">xlabel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Î±å€¼&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ylabel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;å„å˜é‡æ¯”ä¾‹ç³»æ•°&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">feature_name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ä½¿ç”¨lassoCVæ‰¾å‡ºæœ€ä½³lambdaå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ ·æœ¬æ•°æ¯”ç‰¹å¾æ•°å°‘ä¼šæŠ¥Singular matrix in solving dual problem. Using least-squares solution instead.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">make_pipeline&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">StandardScaler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">with_mean&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">RidgeCV&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alphas&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">alpha_ridge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cv&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">scoring&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;neg_mean_squared_error&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ridge_best_alpha&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;ridgecv&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">alpha_&lt;/span> &lt;span class="c1"># å–å‡ºæœ€ä½³çš„lambdaå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ridgeå›å½’æœ€ä½³alphaå€¼&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ridge_best_alpha&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ç›´æ¥ä»£å…¥æœ€ä½³å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ridge&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Ridge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alpha&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ridge_best_alpha&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model_ridge&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ridge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">coef&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Series&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">model_ridge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">coef_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(coef[coef != 0].abs().sort_values(ascending=False)[:10])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Ridge picked &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coef&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; variables and eliminated the other &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coef&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; variables&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;feature&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">feature_name&lt;/span>&lt;span class="p">[:]&lt;/span> &lt;span class="c1"># feature_name[:45]ä½¿ç›´æ–¹å›¾å¯ä»¥æœ‰è´Ÿå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;importance&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">coef&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span> &lt;span class="c1"># coef.values[:45]ä½¿ç›´æ–¹å›¾å¯ä»¥æœ‰è´Ÿå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sort_values&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;importance&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ascending&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># åªæ˜¾ç¤ºå‰40ä¸ªé‡è¦å˜é‡ æˆ–è€…æ³¨é‡Šæ‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">drawBar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">typ&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;barh&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Ridgeæ¨¡å‹ç­›é€‰åé‡è¦å˜é‡&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># å–å‰40ä¸ªå˜é‡ title=&amp;#39;Lassoæ¨¡å‹å…³è”åº¦æƒ…å†µ&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">RFSelect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">feature_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> https://www.cnblogs.com/Ann21/p/11722339.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :param data:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :param target:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :param feature_name:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :return:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># py = Pinyin() # é˜²æ­¢lgbmæŠ¥é”™ ä»¥ä¸‹ä¸‰è¡Œä»…åšè®°å½•ç”¨ æ— å…³RF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data = data.rename(columns=lambda x: py.get_pinyin(x))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data = data.rename(columns=lambda x: re.sub(&amp;#39;[^A-Za-z0-9_]+&amp;#39;, &amp;#39;&amp;#39;, x))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># rf = RandomForestRegressor(n_estimators=20, max_depth=4, n_jobs=7) # ç”¨7ä¸ªæ ¸æ¥è·‘ åŠ é€Ÿ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scores = []&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for i in range(data.shape[1]): # å•å˜é‡é€‰æ‹© å¹³å‡ç²¾ç¡®ç‡å‡å°‘ è®¡ç®—å¾ˆæ…¢ å¤ªæ…¢äº† æ¢å°ç”µè„‘ä¸€èµ·è·‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># score = cross_val_score(rf, data[:, i:i + 1], target, scoring=&amp;#34;r2&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># cv=ShuffleSplit(len(data)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scores.append((np.round(np.mean(score), 3), feature_name[i]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># keep_fea = sorted(scores, reverse=True)[:40]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(keep_fea)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(keep_fea, typ=&amp;#39;bar&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">RandomForestRegressor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n_estimators&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n_jobs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">max_depth&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sorted_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">sorted&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">zip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">feature_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">rf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">feature_importances_&lt;/span>&lt;span class="p">)),&lt;/span> &lt;span class="n">reverse&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">itemgetter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))[:&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sorted_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;å˜é‡å&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;é‡è¦æ€§åº¦&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;RFDataframe: &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;FeatureSelect/RFData.xlsx&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">pd_data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">RFESelect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://cloud.tencent.com/developer/article/1081618&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://blog.csdn.net/LuohenYJ/article/details/107239001&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://machinelearningmastery.com/rfe-feature-selection-in-python/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://www.scikit-yb.org/en/latest/api/model_selection/rfecv.html å¯è§†åŒ– æ²¡ç”¨åˆ°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">rank_to_dict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ranks&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">order&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">minmax&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MinMaxScaler&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ranks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">minmax&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">order&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">ranks&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ranks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">ranks&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">zip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ranks&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># model = SVC(kernel=&amp;#39;linear&amp;#39;) å¥½åƒç”¨ä¸äº†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># model = Ridge(alpha=100000, fit_intercept=True, copy_X=True, max_iter=1500, tol=1e-4, solver=&amp;#39;auto&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># model = LinearRegression() # Lasso(max_iter=15000, alpha=100, scoring=&amp;#39;r2&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">DecisionTreeRegressor&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1"># æ•ˆæœæ„å¤–çš„å¥½&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># model = Lasso(max_iter=15000, alpha=0.001)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># do a regress task, use the metric R-squared (coefficient of determination)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># accuracy score is used for classification problems.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://stackoverflow.com/questions/32664717/got-continuous-is-not-supported-error-in-randomforestregressor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># min_features_to_select æœ€å°‘ä¿ç•™ç‰¹å¾æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rfe&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">RFECV&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">estimator&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">model&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">step&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cv&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">min_features_to_select&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rfe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ranks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">rank_to_dict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rfe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ranking_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">order&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sorted_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">sorted&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ranks&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">reverse&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">itemgetter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))[:&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sorted_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;å˜é‡å&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;é‡è¦æ€§åº¦&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;RFEDataframe: &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;FeatureSelect/RFEData.xlsx&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">pd_data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">PCAReduction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> https://stackoverflow.com/questions/50796024/feature-variable-importance-after-a-pca-analysis
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> https://cloud.tencent.com/developer/article/1794827
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scaler&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">StandardScaler&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># pca = PCA(n_components=&amp;#39;mle&amp;#39;, svd_solver=&amp;#39;full&amp;#39;) # pca guess the dimension&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pca&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PCA&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n_components&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># ! çœ‹æƒ…å†µä¿®æ”¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x_new&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pca&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n_pcs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pca&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">components_&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">most_important&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pca&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">components_&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">argmax&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n_pcs&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">most_important_names&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">names&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">most_important&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n_pcs&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ç”»å›¾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBiplot(x_new[:, :], np.transpose(pca.components_[:, most_important]), y, labels=most_important_names)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;PC&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">most_important_names&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n_pcs&lt;/span>&lt;span class="p">)}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dic&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">items&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">df&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;evr&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">pca&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">explained_variance_ratio_&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n_pcs&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;ä¸»æˆåˆ†&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;è¯¥ä¸»æˆåˆ†ä¸‹æœ€é‡è¦çš„å˜é‡&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ä¸»æˆåˆ†è§£é‡Šç‡&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ¯ä¸ªä¸»æˆåˆ†æœ€ä¼˜å˜é‡å’Œè¯¥ä¸»æˆåˆ†çš„ä»·å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è¾“å‡ºæ¯ä¸ªä¸»æˆåˆ†æŒ‰kæ¯”ä¾‹ä¸ªå˜é‡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n_pcs_best&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="c1"># éœ€è¦æ ¹æ®dfæ¥åˆ¤æ–­&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sel&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">k&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">k&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">K_important&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n_pcs_best&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># å–ç¬¬iä¸ªä¸»æˆåˆ†çš„æ’åºåcomponentçš„ä¸‹æ ‡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">comp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pca&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">components_&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">argsort&lt;/span>&lt;span class="p">()[::&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][:&lt;/span>&lt;span class="n">sel&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">K_important&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">comp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">K_important_names&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n_pcs_best&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># æœ€å¥½çš„å‡ ä¸ªä¸»æˆåˆ†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">component&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pca&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">components_&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">K_important&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]:&lt;/span> &lt;span class="c1"># æ¯ä¸ªä¸»æˆåˆ†æŒ‰è´¡çŒ®ç‡å–å‰jä¸ªå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">names&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">component&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">K_important_names&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">extend&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å‰2ä¸ªä¸»æˆåˆ†ä¹‹å‰Kä¸ªå˜é‡é‡è¦æ€§&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">K_important_names&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">K_important_names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;å˜é‡å&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;é‡è¦æ€§åº¦&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;PCADataframe: &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iloc&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pd_data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;FeatureSelect/PCAData.xlsx&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># è¦np.absæ‰ ä¿å­˜å—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">pd_data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">voteFeature&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">voteSum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">new_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">top&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="c1"># é€‰å®šçš„å˜é‡æ•°k&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;å˜é‡å&amp;#39;&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">new_data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">top&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">top&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">top&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">top&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">k&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">new_data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file_dic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;FeatureSelect/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">MIC_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;MICData.xlsx&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index_col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dcor_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;DcorData.xlsx&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index_col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lasso_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;LassoData.xlsx&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index_col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">RF_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;RFData.xlsx&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index_col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">RFE_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;RFEData.xlsx&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index_col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pca_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;PCAData.xlsx&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index_col&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">all_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">concat&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">MIC_list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dcor_list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lasso_list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">RF_list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">RFE_list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pca_list&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">all_list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;all.xlsx&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">new_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">defaultdict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">new_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">voteSum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">all_list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">new_list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sorted_dic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">dict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">sorted&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">new_list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">items&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">reverse&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sorted_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">sorted_dic&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="p">()]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;æœ€ç»ˆçš„å‰&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s1">ä¸ªå˜é‡ï¼š&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">sorted_list&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sorted_dic&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">sorted_list&lt;/span>&lt;span class="p">[:&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">corrSelect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> https://www.cnblogs.com/always-fight/p/10209213.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> çš®å°”é€Šç³»æ•°åªèƒ½è¡¡é‡çº¿æ€§ç›¸å…³æ€§ï¼Œå…ˆè¦è®¡ç®—å„ä¸ªç‰¹å¾å¯¹ç›®æ ‡å€¼çš„ç›¸å…³ç³»æ•°ä»¥åŠç›¸å…³ç³»æ•°çš„På€¼ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">names&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cal_c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n_clusters&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">threshold&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># åœ¨utilsæ–‡ä»¶ä¸­&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">corr_heat_map&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">del_col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">drop_hight_corr&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">get_col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">names&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">difference&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">del_col&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">get_col&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ­¤å¤„æ‰‹åŠ¨ç‰ˆè·å¾—på€¼ å¹¶æ ¹æ®é˜ˆå€¼0.8 0.001ç­›é€‰ç‰¹å¾ æ²¡ç”¨åˆ°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># sav = []&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for i in range(data.shape[1]): # éå†ç‰¹å¾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># temp = []&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for j in range(i, data.shape[1]):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if j == i:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ret = pearsonr(data[:, i], data[:, j])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if abs(ret[0]) &amp;lt; 0.8 and ret[1] &amp;lt; 0.001:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># temp.append(j)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if len(temp) &amp;gt; int(data.shape[1] * 0.5):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># sav.append(i)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># # results.append(&amp;#39; &amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># p_result = list(set(sav))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(p_result, len(p_result))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># return p_result&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># def multivariate_pearsonr(X, y):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scores, p_values = [], []&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for ret in map(lambda x: pearsonr(x, y), X.T):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if abs(ret[0]) &amp;lt;= 0.6:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scores.append(abs(ret[0]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># p_values.append(ret[1])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># else:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scores.append(0)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># return np.array(scores), 0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># def multivariate_spearmanr(X, y):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scores, p_values = [], []&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for ret in map(lambda x: spearmanr(x, y), X.T):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># if abs(ret[0]) &amp;lt;= 0.6:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scores.append(abs(ret[0]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># p_values.append(ret[1])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># else:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scores.append(0)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># return np.array(scores), 0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># transformer = SelectKBest(score_func=multivariate_pearsonr, k=k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># transformer.fit_transform(data, target)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># feature_index = transformer.get_support(True)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># p_results = [names[i] for i in feature_index]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># # return p_results&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ­¤å¤„è‡ªåŠ¨ç‰ˆè·å–å‰kä¸ª æ ¹æ®på€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># transformer = SelectKBest(score_func=multivariate_spearmanr, k=k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># transformer.fit_transform(data, target)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># feature_index = transformer.get_support(True)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># s_results = [names[i] for i in feature_index]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># return s_results&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">high_corr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">kendall_pval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">kendalltau&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">pearsonr_pval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pearsonr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">spearmanr_pval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">spearmanr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://zhuanlan.zhihu.com/p/34717666&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data = data.drop(&amp;#39;å› å˜é‡&amp;#39;, 1) load_dataå·²ç»æ’é™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">names&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># åˆ©ç”¨é«˜ç›¸å…³åˆ é™¤ç‰¹å¾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://blog.csdn.net/sunmingyang1987/article/details/105459104&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">float&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è¿ç»­ã€æ­£æ€åˆ†å¸ƒã€çº¿æ€§ è¡¡é‡ä¸¤ä¸ªæ•°æ®æ˜¯å¦åœ¨ä¸€æ¡çº¿ä¸Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">p_cor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">corr&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">draw_heatmap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p_cor&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;çš®å°”æ£®ç›¸å…³ç³»æ•°&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># p_value = data.corr(method=pearsonr_pval)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># p_value = p_value[p_value &amp;lt; 0.001]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># p_value = p_value.iloc[:15, :15]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># draw_heatmap(p_value, method=&amp;#39;çš®å°”æ£®ç›¸å…³ç³»æ•°På€¼&amp;#39;, center=0.001) # æ²¡ç”¨åˆ°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data_store(p_cor, &amp;#39;pearson&amp;#39;) # ä¿å­˜æ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># # é’ˆå¯¹æ— åºåºåˆ—çš„ç›¸å…³ç³»æ•°ï¼Œéæ­£å¤ªåˆ†å¸ƒçš„æ•°æ® ç”¨åœ¨åˆ†ç±»ä¸Šã€æ— åº&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># k_cor = data.corr(method=&amp;#39;kendall&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># draw_cor = k_cor.iloc[:15, :15]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># draw_heatmap(draw_cor, method=&amp;#39;è‚¯å¾·å°”ç›¸å…³ç³»æ•°&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># k_value = data.corr(method=kendall_pval)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># k_value = k_value[k_value &amp;lt; 0.001]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># k_value = k_value.iloc[:15, :15]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># draw_heatmap(k_value, method=&amp;#39;è‚¯å¾·å°”ç›¸å…³ç³»æ•°På€¼&amp;#39;, center=0.001)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data_store(p_cor, &amp;#39;kendall&amp;#39;) # ä¿å­˜æ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># éçº¿æ€§çš„ã€éæ­£æ€ å¯¹åŸå§‹å˜é‡çš„åˆ†å¸ƒä¸åšè¦æ±‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s_cor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">corr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;spearman&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">draw_heatmap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s_cor&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;æ–¯çš®å°”æ›¼ç›¸å…³ç³»æ•°&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># s_value = data.corr(method=spearmanr_pval)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># s_value = s_value[s_value &amp;lt; 0.001]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># s_value = s_value.iloc[:15, :15]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># draw_heatmap(s_value, method=&amp;#39;æ–¯çš®å°”æ›¼ç›¸å…³ç³»æ•°På€¼&amp;#39;, center=0.001)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data_store(p_cor, &amp;#39;spearman&amp;#39;) # ä¿å­˜æ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">featureSelect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># çœ‹åˆ°è¿™é‡Œå‘ç°æ²¡æœ‰ä¿å­˜æœ€ç»ˆç‰ˆ åªèƒ½å°†å°±æ”¹äº†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">SelIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">list1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">list1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tolist&lt;/span>&lt;span class="p">()[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ ‡å‡†åŒ–å¯èƒ½ä¼šå¯¼è‡´å€¼å˜0 å»ºè®®ä¸æ ‡å‡†åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scaler = StandardScaler()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data = scaler.fit_transform(data)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data_ = scaler.inverse_transform(data)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data_new = data_[:, target_new] # å°†æ ‡å‡†åŒ–æ•°æ®è¿˜åŸ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># target = scaler.fit_transform(target)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">target&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è¿‡æ»¤æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æœ€å¤§ä¿¡æ¯ç³»æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># MIC_list = MICSelect(data, target, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(MIC_list, &amp;#39;æœ€å¤§ä¿¡æ¯ç³»æ•°&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è·ç¦»ç›¸å…³ç³»æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># dcor_list = dcorSelect(data, target, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(dcor_list, &amp;#39;è·ç¦»ç›¸å…³ç³»æ•°&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åµŒå…¥æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Lassoå›å½’&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># lasso_list = LassoSelect(data, target, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ä¸æ’åºç›´æ¥å–å‰kä¸ªå˜é‡ title=&amp;#39;Lassoæ¨¡å‹å…³è”åº¦æƒ…å†µ&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(lasso_list, typ=&amp;#39;bar&amp;#39;, title=&amp;#39;Lassoæ¨¡å‹å˜é‡é‡è¦æ€§&amp;#39;, xlabel=&amp;#39;å˜é‡å&amp;#39;, ylabel=&amp;#39;é‡è¦æ€§&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># éšæœºæ£®æ—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># RF_list = RFSelect(data, target, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(RF_list, title=&amp;#39;éšæœºæ£®æ—æ¨¡å‹å˜é‡é‡è¦æ€§&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åŒ…è£…æ³• RFE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># RFE_list = RFESelect(data, target, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(RFE_list, title=&amp;#39;RFEæ¨¡å‹å˜é‡é‡è¦æ€§&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ•°æ®é™ç»´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># pca_list = PCAReduction(data, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(pca_list, title=&amp;#39;PCAæ¨¡å‹å˜é‡é‡è¦æ€§&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">after_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">voteFeature&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">after_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SelIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">after_list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ç»è¿‡å…­ç§ç‰¹å¾é€‰æ‹©åçš„å˜é‡ä¸‹æ ‡: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">after_index&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># high_corr(data[:, after_index], target, names[after_index])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">final_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">corrSelect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="n">after_index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">after_index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">final_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">final_list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ç»è¿‡ç›¸å…³æ€§å¤„ç†åçš„å˜é‡ä¸‹æ ‡: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">final_index&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">high_corr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="n">final_index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">final_index&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è¯„ä»·æ˜¯ä¸¤ä¸ªäº‹ä»¶æ˜¯å¦ç‹¬ç«‹ https://www.cnblogs.com/always-fight/p/10209213.html ä»¥ä¸‹ä¸‰è¡Œä»…åšè®°å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># X_new = SelectKBest(chi2, k=k).fit_transform(X, y) ç±»åˆ«å‹å˜é‡å¯¹ç±»åˆ«å‹å˜é‡çš„ç›¸å…³æ€§&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://scikit-learn.org/stable/modules/model_evaluation.html#scoring-parameter&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scores = cross_val_score(RFC, X, Y, cv=5, scoring=&amp;#39;accuracy&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">featureSelect2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">SelIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">list1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">list1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tolist&lt;/span>&lt;span class="p">()[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">after_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">corrSelect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;spearman&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># è®°å¾—ä¿®æ”¹é˜ˆå€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">after_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SelIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">after_list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ç»è¿‡ç›¸å…³æ€§å¤„ç†åçš„å˜é‡ä¸‹æ ‡(&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s1">): &amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">after_index&lt;/span>&lt;span class="p">)),&lt;/span> &lt;span class="n">after_index&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># high_corr(data[:, after_index], names[after_index])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="n">after_index&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">names&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">names&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">after_index&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è¿‡æ»¤æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æœ€å¤§ä¿¡æ¯ç³»æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># MIC_list = MICSelect(data, target, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(MIC_list, &amp;#39;æœ€å¤§ä¿¡æ¯ç³»æ•°&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è·ç¦»ç›¸å…³ç³»æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># dcor_list = dcorSelect(data, target, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(dcor_list, &amp;#39;è·ç¦»ç›¸å…³ç³»æ•°&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åµŒå…¥æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Lassoå›å½’ ä¸æ’åºç›´æ¥å–å‰kä¸ªå˜é‡ title=&amp;#39;Lassoæ¨¡å‹å…³è”åº¦æƒ…å†µ&amp;#39; ä¼šå‡ºç°è´Ÿå€¼ æ˜¾å¾—è·Ÿå…¶ä»–å›¾ç‰‡ä¸ä¸€æ · æœ‰åŒºåˆ«æ€§&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># lasso_list = LassoSelect(data, target, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(lasso_list, title=&amp;#39;Lassoæ¨¡å‹å˜é‡é‡è¦æ€§&amp;#39;, xlabel=&amp;#39;å˜é‡å&amp;#39;, ylabel=&amp;#39;é‡è¦æ€§&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># éšæœºæ£®æ—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># RF_list = RFSelect(data, target, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(RF_list, title=&amp;#39;éšæœºæ£®æ—æ¨¡å‹å˜é‡é‡è¦æ€§&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åŒ…è£…æ³• RFE ç”¨æ ‡å‡†åŒ–æ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ ‡å‡†åŒ–å¯èƒ½ä¼šå¯¼è‡´å€¼å˜0 å»ºè®®ä¸æ ‡å‡†åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># target = target.reshape(1, -1)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># scaler = StandardScaler()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data = scaler.fit_transform(data)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data_ = scaler.inverse_transform(data) # å°†æ ‡å‡†åŒ–æ•°æ®è¿˜åŸ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># target = scaler.fit_transform(target)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># target = target[0, :]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># RFE_list = RFESelect(data, target, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(RFE_list, title=&amp;#39;RFEæ¨¡å‹å˜é‡é‡è¦æ€§&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data = data_&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ•°æ®é™ç»´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># éœ€è¦æ³¨æ„çš„æ˜¯è™½ç„¶æœ‰è´Ÿå€¼ ä½†æ˜¯é‡è¦æ€§çœ‹çš„æ˜¯ç»å¯¹å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># pca_list = PCAReduction(data, names, k)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># drawBar(pca_list, title=&amp;#39;PCAæ¨¡å‹å˜é‡é‡è¦æ€§&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">final_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">voteFeature&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">final_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SelIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">final_list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ç»è¿‡å…­ç§ç‰¹å¾é€‰æ‹©åçš„å˜é‡ä¸‹æ ‡(&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s1">): &amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">final_index&lt;/span>&lt;span class="p">)),&lt;/span> &lt;span class="n">final_index&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># high_corr(data[:, final_index], names[final_index])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="n">final_index&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">names&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">final_index&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;FeatureSelect/results.xlsx&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">result&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;__main__&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;C:/Users/Desktop/æ•°æ¨¡é¢˜/é™„ä»¶ä¸€ï¼š325ä¸ªæ ·æœ¬æ•°æ®.xlsx&amp;#39;&lt;/span> &lt;span class="c1"># åˆ—åå–ä¸­æ–‡å&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sheet_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Sheet1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># table = pd.read_excel(file_name, sheet_name, header=[2]) # å¦‚æœæœ‰å¤šä¸ªåˆ—å æ–¹ä¾¿èµ·è§åªå–ä¸€ä¸ª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># table = table.iloc[:, 2:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># table.rename(columns={&amp;#39;æ—¶é—´&amp;#39;: &amp;#39;time&amp;#39;}, inplace=True)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(table.head())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://zhuanlan.zhihu.com/p/98729226 D21116460003&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># plt.style.use(&amp;#39;fivethirtyeight&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># seaborn.pairplot(table, vars=table.columns[:8], diag_kind=&amp;#39;kde&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># plt.show()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">loadData2&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">low_var_filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># ä½æ–¹å·®æ»¤æ³¢ æºå¸¦ä¿¡æ¯å°‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">high_corr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">results&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">([])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t_names&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;10cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;40cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;100cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;200cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Y&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Y&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># # result = featureSelect(X, temp, name, k=10) # åå»ç›¸å…³&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">featureSelect2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">temp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># å…ˆå»ç›¸å…³&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># results = pd.concat([results, result], axis=1)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(results.iloc[1, :])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># results.to_excel(&amp;#39;data/results.xlsx&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ¨¡å‹å †å ">æ¨¡å‹å †å &lt;/h2>
&lt;p>è¿™é‡Œå°±ä¸ç»™äº† å› ä¸ºæˆ‘æ²¡å†™è¿™é‡Œçš„ä»£ç ï¼Œå®é™…ä¸Šå°±æ˜¯sklearnè°ƒç”¨å¾ˆå¤šæ–¹æ³•ï¼Œæ³¨æ„è°ƒå‚ï¼Œå¯èƒ½ç»“æœä¸å¥½çš„åŸå› æ˜¯ç‰¹å¾é€‰æ‹©ä¸å¥½æˆ–è€…æ¨¡å‹ä¸å¯¹ï¼Œå»ºè®®å¤šå‡†å¤‡ä¸€äº›ï¼Œæ¯”å¦‚åˆ†ç±»æ¨¡å‹ã€å›å½’æ¨¡å‹ã€è‡ªå›å½’æ¨¡å‹ã€æ—¶é—´åºåˆ—ã€æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚&lt;/p>
&lt;h2 id="ä¸€äº›ä¿å­˜ä¸‹æ¥çš„è§£é¢˜ä»£ç ">ä¸€äº›ä¿å­˜ä¸‹æ¥çš„è§£é¢˜ä»£ç &lt;/h2>
&lt;h3 id="q2-ä½¿ç”¨lstmé¢„æµ‹">Q2 ä½¿ç”¨LSTMé¢„æµ‹&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">math&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">numpy&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">np&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">matplotlib.pyplot&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">plt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">pd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">keras.losses&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">mean_squared_error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rcParams&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;font.sans-serif&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;SimHei&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rcParams&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;axes.unicode_minus&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">file_dic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;C:\Users\Desktop\2022å¹´Eé¢˜\æ•°æ®é›†\åŸºæœ¬æ•°æ®/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">file_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;é™„ä»¶3ã€åœŸå£¤æ¹¿åº¦2022â€”2012å¹´.xlsx&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># dataset_train = pd.read_excel(file_dic + file_name, usecols=[&amp;#39;10cmæ¹¿åº¦(kg/m2)&amp;#39;], sheet_name=&amp;#39;sheet1&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dataset_train&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">file_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">usecols&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;10cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">sheet_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;sheet1&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># dataset_train = dataset_train.sort_values(by=&amp;#39;Date&amp;#39;).reset_index(drop=True)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">training_set&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">sklearn.preprocessing&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">MinMaxScaler&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MinMaxScaler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">feature_range&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">training_set_scaled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">training_set&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ¯æ¡æ ·æœ¬å«60ä¸ªæ—¶é—´æ­¥ï¼Œå¯¹åº”ä¸‹ä¸€æ—¶é—´æ­¥çš„æ ‡ç­¾å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">X_train&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">y_train&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">93&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">training_set_scaled&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">y_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">training_set_scaled&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">X_train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_train&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_train&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y_train&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Reshaping&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">X_train&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">X_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">X_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">keras.models&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Sequential&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">keras.layers&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Dense&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">keras.layers&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">SimpleRNN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">LSTM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">keras.layers&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Dropout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(X_train.shape[1])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆå§‹åŒ–é¡ºåºæ¨¡å‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">regressor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sequential&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®šä¹‰è¾“å…¥å±‚åŠå¸¦5ä¸ªç¥ç»å…ƒçš„éšè—å±‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">regressor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SimpleRNN&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">units&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">input_shape&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®šä¹‰çº¿æ€§çš„è¾“å‡ºå±‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">regressor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Dense&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">units&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">activation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;relu&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ¨¡å‹ç¼–è¯‘ï¼šå®šä¹‰ä¼˜åŒ–ç®—æ³•adamï¼Œ ç›®æ ‡å‡½æ•°å‡æ–¹æ ¹MSE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">regressor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">optimizer&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;sgd&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">loss&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;mean_squared_error&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ¨¡å‹è®­ç»ƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">history&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">regressor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">epochs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">batch_size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">validation_split&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">regressor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">summary&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">121&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;loss&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;blue&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;è®­ç»ƒé›†æŸå¤±&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># è“è‰²çº¿è®­ç»ƒé›†æŸå¤±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;val_loss&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;red&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;éªŒè¯é›†æŸå¤±&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># çº¢è‰²çº¿éªŒè¯é›†æŸå¤±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ylabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å€¼&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xlabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;è¿­ä»£æ¬¡æ•°&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æµ‹è¯•æ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># dataset_test = pd.read_csv(&amp;#39;./data/tatatest.csv&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># dataset_test = pd.read_excel(file_dic + r&amp;#39;é™„ä»¶3ã€åœŸå£¤æ¹¿åº¦2022â€”2012å¹´test.xlsx&amp;#39;, usecols=[&amp;#39;10cmæ¹¿åº¦(kg/m2)&amp;#39;], sheet_name=&amp;#39;sheet1&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dataset_test&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;é™„ä»¶3ã€åœŸå£¤æ¹¿åº¦2022â€”2012å¹´test.xlsx&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">usecols&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;10cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">sheet_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;sheet1&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">real_value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset_test&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;10cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dataset_total&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">concat&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">dataset_train&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;10cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">dataset_test&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;10cmæ¹¿åº¦(kg/m2)&amp;#39;&lt;/span>&lt;span class="p">]),&lt;/span> &lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">inputs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset_total&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset_total&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset_test&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">60&lt;/span>&lt;span class="p">:]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">inputs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">inputs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">inputs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">inputs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æå–æµ‹è¯•é›†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">X_test&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X_test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">inputs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">X_test&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_test&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">X_test&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_test&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">X_test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">X_test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ¨¡å‹é¢„æµ‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">predicted_value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">regressor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_test&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># é€†å½’ä¸€åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">predicted_value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">predicted_value&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ¨¡å‹è¯„ä¼°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># trainScore = math.sqrt(mean_squared_error(predicted_value[0], trainPredict[:, 0]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;é¢„æµ‹ä¸å®é™…å·®å¼‚MSE&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">pow&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">predicted_value&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">real_value&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">predicted_value&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;é¢„æµ‹ä¸å®é™…å·®å¼‚MAE&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">predicted_value&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">real_value&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">predicted_value&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">regressor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">([[[&lt;/span>&lt;span class="n">X_test&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">:]]]])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">blo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;04&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;05&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;06&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;07&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;08&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;09&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;10&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;11&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;12&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;01&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;02&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;03&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;04&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;05&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;06&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;07&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;08&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;09&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">valu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">blo&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resl&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">blo&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(val.shape)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">regressor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">:]])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">valu&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># é¢„æµ‹ä¸å®é™…å·®å¼‚çš„å¯è§†åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">122&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">real_value&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;red&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;çœŸå®å€¼&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">valu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">valu&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">predicted_value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">concatenate&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">predicted_value&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">valu&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">predicted_value&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;blue&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;é¢„æµ‹å€¼&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># plt.title(&amp;#39;TATA Stock Price Prediction&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xlabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;è¿­ä»£æ¬¡æ•°&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">savefig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Q3/&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;q63.jpg&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dpi&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="q3">Q3&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#å¯¼åŒ…ç•¥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">smooth_xy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ly&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;æ•°æ®å¹³æ»‘å¤„ç†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :param lx: xè½´æ•°æ®ï¼Œæ•°ç»„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :param ly: yè½´æ•°æ®ï¼Œæ•°ç»„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> :return: å¹³æ»‘åçš„xã€yè½´æ•°æ®ï¼Œæ•°ç»„ [slx, sly]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ly&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x_smooth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linspace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="mi">300&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">y_smooth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">make_interp_spline&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="n">x_smooth&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">x_smooth&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_smooth&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rcParams&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;font.sans-serif&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;SimHei&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rcParams&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;axes.unicode_minus&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">file_dic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;C:\Users\CYH\Desktop\2022å¹´Eé¢˜\æ•°æ®é›†\ç›‘æµ‹ç‚¹æ•°æ®\é™„ä»¶14ï¼šä¸åŒæ”¾ç‰§å¼ºåº¦åœŸå£¤ç¢³æ°®ç›‘æµ‹æ•°æ®é›†/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">file_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;ä¸åŒæ”¾ç‰§å¼ºåº¦åœŸå£¤ç¢³æ°®ç›‘æµ‹æ•°æ®é›†.xlsx&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cols&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;æ”¾ç‰§å¼ºåº¦ï¼ˆintensityï¼‰&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;SOCåœŸå£¤æœ‰æœºç¢³&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;SICåœŸå£¤æ— æœºç¢³&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;å…¨æ°®N&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">file_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">usecols&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cols&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sheet_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Sheet1&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">box1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">box2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">box3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">box4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cho&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;NG&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;LGI&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;MGI&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;HGI&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;SOCåœŸå£¤æœ‰æœºç¢³&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;SICåœŸå£¤æ— æœºç¢³&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;å…¨æ°®N&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">figsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">gs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gridspec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">GridSpec&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">gs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wspace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">)):&lt;/span> &lt;span class="c1"># è·å–å¯¹åº”æ”¾ç‰§å¼ºåº¦ä¸‹çš„åŒ–å­¦æ€§è´¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">box1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">box2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">box3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">box4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cols&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">cho&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">box1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cols&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">cho&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">box2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cols&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">cho&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">box3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cols&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">cho&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">box4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">median&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">box1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">median&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">box2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">median&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">box3&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">median&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">box4&lt;/span>&lt;span class="p">)])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">subplots_adjust&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">left&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">bottom&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">right&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">top&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wspace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hspace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.45&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">z1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">polyfit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># ç”¨3æ¬¡å¤šé¡¹å¼æ‹Ÿåˆï¼Œè¾“å‡ºç³»æ•°ä»é«˜åˆ°0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">p1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">poly1d&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">z1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># ä½¿ç”¨æ¬¡æ•°åˆæˆå¤šé¡¹å¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">y_pre&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">p1&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">stats&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pearsonr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_pre&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">p&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mf">0.047&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.029&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mf">0.24&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;ç›¸å…³ç³»æ•°rä¸º = &lt;/span>&lt;span class="si">%6.3f&lt;/span>&lt;span class="s1">ï¼Œpå€¼ä¸º = &lt;/span>&lt;span class="si">%6.3f&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_pre&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">smooth_xy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_pre&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;y=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">zs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;x$^2$&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">zs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;x+&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">zs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">r$^2$=&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;, p=&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_pre&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;#cd534c&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">labels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># plt.ylabel(labels)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ylim&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">25&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># plt.title(col[i] + &amp;#39;çš„ç®±å‹å›¾&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cols&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">boxplot&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">box1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">box2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">box3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">box4&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">labels&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cho&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">widths&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">boxprops&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;color&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;#999&amp;#39;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">medianprops&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;linestyle&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;--&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;color&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;#999&amp;#39;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">capprops&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;color&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;#999&amp;#39;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">whiskerprops&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;color&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;#999&amp;#39;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ylim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ylim&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">savefig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Q3/&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;q3.jpg&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dpi&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆ†ä¸æ¸…äº† è¿™é‡Œåº”è¯¥ä¹Ÿæ˜¯å§&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://blog.csdn.net/zyxhangiian123456789/article/details/87458140&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://blog.csdn.net/LaoChengZier/article/details/90511968&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://deephub.blog.csdn.net/article/details/122425490&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://blog.csdn.net/weixin_52855810/article/details/112982229&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆ›å»ºæ•°æ®é›†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">create_dataset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dataY&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">look_back&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">:(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># ç”¨look_backä¸ªæ ·æœ¬æ¥é¢„æµ‹ä¸€ä¸ªæ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataY&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">numpy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataX&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">numpy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataY&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">iq&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">getValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># å°†æ•´å‹å˜ä¸ºfloat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;float32&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ•°æ®å¤„ç†ï¼Œå½’ä¸€åŒ–è‡³0~1ä¹‹é—´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scaler&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MinMaxScaler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">feature_range&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">train_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">27&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">test_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">train_size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">test&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">train_size&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">:],&lt;/span> &lt;span class="n">dataset&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">train_size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># train, test = dataset[:30, :], dataset[:30, :]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åˆ›å»ºæµ‹è¯•é›†å’Œè®­ç»ƒé›†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">look_back&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trainX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trainY&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">create_dataset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># å•æ­¥é¢„æµ‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">testX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">testY&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">create_dataset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è°ƒæ•´è¾“å…¥æ•°æ®çš„æ ¼å¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trainX&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">numpy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trainX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trainX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]))&lt;/span> &lt;span class="c1"># ï¼ˆæ ·æœ¬ä¸ªæ•°ï¼Œ1ï¼Œè¾“å…¥çš„ç»´åº¦ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">testX&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">numpy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">testX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åˆ›å»ºLSTMç¥ç»ç½‘ç»œæ¨¡å‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sequential&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">LSTM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">120&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">unit_forget_bias&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">return_sequences&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">input_shape&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">trainX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">])))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">LSTM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># model.add(Dropout(0.2))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Dense&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># model.add(LSTM(120, input_shape=(trainX.shape[1], trainX.shape[2]))) # è¾“å…¥ç»´åº¦ä¸º1ï¼Œæ—¶é—´çª—çš„é•¿åº¦ä¸º1ï¼Œéšå«å±‚ç¥ç»å…ƒèŠ‚ç‚¹ä¸ªæ•°ä¸º120&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># model.add(Dense(1))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">loss&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;mean_squared_error&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">optimizer&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;sgd&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">summary&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ç»˜åˆ¶ç½‘ç»œç»“æ„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># plot_model(model, to_file=&amp;#39;model.png&amp;#39;, show_shapes=True)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">history&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trainY&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">epochs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">batch_size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">verbose&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">validation_data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">testY&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># é¢„æµ‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trainPredict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainX&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">testPredict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(trainPredict.shape, testPredict.shape)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åå½’ä¸€åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trainPredict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainPredict&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trainY&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">trainY&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">testPredict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testPredict&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">testY&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">testY&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è®¡ç®—å¾—åˆ†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trainScore&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sqrt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mean_squared_error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainY&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">trainPredict&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Train Score: &lt;/span>&lt;span class="si">%.2f&lt;/span>&lt;span class="s1"> RMSE&amp;#39;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">trainScore&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">testScore&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sqrt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mean_squared_error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testY&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">testPredict&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Test Score: &lt;/span>&lt;span class="si">%.2f&lt;/span>&lt;span class="s1"> RMSE&amp;#39;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">testScore&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;loss&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;val_loss&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;model train vs validation loss&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ylabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;loss&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xlabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;epoch&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;train&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;validation&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">loc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;upper right&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">([[[&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]]]])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">blo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;C&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">blo&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resl&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">blo&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">([[[&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">]]])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ç»˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trainPredictPlot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">numpy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">empty_like&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trainPredictPlot&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="p">:]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">numpy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nan&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trainPredictPlot&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">look_back&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainPredict&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">:]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">trainPredict&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">testPredictPlot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">numpy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">empty_like&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">testPredictPlot&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="p">:]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">numpy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nan&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">testPredictPlot&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainPredict&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">look_back&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">:]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">testPredict&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;çœŸå®å€¼&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainPredictPlot&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;è®­ç»ƒå€¼&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;black&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testPredictPlot&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;é¢„æµ‹å€¼&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># plt.title(name + &amp;#39;æ‹Ÿåˆæ›²çº¿&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ylabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å€¼&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">savefig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;picture/lstm/&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iq&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">bbox_inches&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;tight&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pad_inches&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dpi&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># plt.show()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">resl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">resl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">load_data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cho&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;NG&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;LGI&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;MGI&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;HGI&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">col&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;SOCåœŸå£¤æœ‰æœºç¢³&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;SICåœŸå£¤æ— æœºç¢³&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;å…¨æ°®N&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">results&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">cho&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;æ”¾ç‰§å¼ºåº¦ï¼ˆintensityï¼‰&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">results&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">results&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">results&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">results&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;__main__&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åŠ è½½æ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file_dic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;C:\Users\Desktop\2022å¹´Eé¢˜\æ•°æ®é›†\ç›‘æµ‹ç‚¹æ•°æ®\é™„ä»¶14ï¼šä¸åŒæ”¾ç‰§å¼ºåº¦åœŸå£¤ç¢³æ°®ç›‘æµ‹æ•°æ®é›†/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;ä¸åŒæ”¾ç‰§å¼ºåº¦åœŸå£¤ç¢³æ°®ç›‘æµ‹æ•°æ®é›†.xlsx&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cols&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;æ”¾ç‰§å¼ºåº¦ï¼ˆintensityï¼‰&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;SOCåœŸå£¤æœ‰æœºç¢³&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;SICåœŸå£¤æ— æœºç¢³&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;å…¨æ°®N&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataframe&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">file_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">usecols&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cols&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataframe&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">load_data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataframe&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">values&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataframe&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DataFrame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataframe&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">columns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cols&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cols&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:])):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">iq&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cols&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cols&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">val&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">values&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="q5-æ²¡åšå‡ºæ¥-å¥½åƒç›´æ¥è¯­æ–‡å»ºæ¨¡äº†">Q5 æ²¡åšå‡ºæ¥ å¥½åƒç›´æ¥è¯­æ–‡å»ºæ¨¡äº†&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">load_data&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file14_dic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;C:\Users\Desktop\2022å¹´Eé¢˜\æ•°æ®é›†\ç›‘æµ‹ç‚¹æ•°æ®\é™„ä»¶14ï¼šä¸åŒæ”¾ç‰§å¼ºåº¦åœŸå£¤ç¢³æ°®ç›‘æµ‹æ•°æ®é›†/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file14_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;ä¸åŒæ”¾ç‰§å¼ºåº¦åœŸå£¤ç¢³æ°®ç›‘æµ‹æ•°æ®é›†.csv&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file15_dic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;C:\Users\Desktop\2022å¹´Eé¢˜\æ•°æ®é›†\ç›‘æµ‹ç‚¹æ•°æ®\é™„ä»¶15ï¼šè‰åŸè½®ç‰§æ”¾ç‰§æ ·åœ°ç¾¤è½ç»“æ„ç›‘æµ‹æ•°æ®é›†ï¼ˆ2016å¹´6æœˆ-2020å¹´9æœˆï¼‰ã€‚/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file15_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;å†…è’™å¤è‡ªæ²»åŒºé”¡æ—éƒ­å‹’ç›Ÿå…¸å‹è‰åŸè½®ç‰§æ”¾ç‰§æ ·åœ°ç¾¤è½ç»“æ„ç›‘æµ‹æ•°æ®é›†ï¼ˆ201.xlsx&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data15&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file15_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">file15_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sheet_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Sheet1&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data14&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file14_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">file14_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;unicode_escape&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data15&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data14&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">columns&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data14&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="s1">&amp;#39;SOC&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;SIC&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;N&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;jyl&amp;#39;&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data14&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;intensity&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">X_train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">X_test&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y_train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y_test&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">train_test_split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">test_size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">RandomForestRegressor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">max_depth&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n_estimators&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y_train&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y_train&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">y_pred&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_test&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">score&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">X_test&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y_test&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39; å¾—åˆ†:&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">arange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Y_test&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;#E0A97C&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;TRUE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_pred&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;#889BB7&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;PREDICT&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mean_squared_error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Y_test&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_pred&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mae&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mean_absolute_error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Y_test&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_pred&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rmse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sqrt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mean_squared_error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Y_test&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_pred&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># RMSEå°±æ˜¯å¯¹MSEå¼€æ–¹å³å¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">r2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">r2_score&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Y_test&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y_pred&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;mse: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mse&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;mae: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mae&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;rmse: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rmse&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;r2: &amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">([])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;__main__&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">load_data&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="q6-ç”¨æ¥lstmå’Œrnn">Q6 ç”¨æ¥LSTMå’ŒRNN&lt;/h3>
&lt;p>ä½†æ˜¯rnnä»£ç ä¸¢äº†&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">matplotlib.pyplot&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">plt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">numpy&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">np&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">pd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">pandas&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">read_excel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">math&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">keras.models&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Sequential&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">keras.layers&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Dense&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Dropout&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">keras.layers&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">LSTM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">scipy&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">stats&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">sklearn.preprocessing&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">MinMaxScaler&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">sklearn.metrics&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">mean_squared_error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">keras.utils.vis_utils&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">plot_model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è§£å†³ä¸­æ–‡æ˜¾ç¤ºé—®é¢˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rcParams&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;font.sans-serif&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;SimHei&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rcParams&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;axes.unicode_minus&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆ›å»ºæ•°æ®é›†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">create_dataset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dataY&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">look_back&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">:(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># ç”¨look_backä¸ªæ ·æœ¬æ¥é¢„æµ‹ä¸€ä¸ªæ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataY&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataX&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataY&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">file_dic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;C:\Users\Desktop\2022å¹´Eé¢˜\æ•°æ®é›†\åŸºæœ¬æ•°æ®/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">file_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;é™„ä»¶6ã€æ¤è¢«æŒ‡æ•°-NDVI2012-2022å¹´.xls&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_dic&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">file_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sheet_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;sheet1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">usecols&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;æ¤è¢«æŒ‡æ•°(NDVI)&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mf">165.92&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">165.92&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">165.92&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">165.92&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">165.91&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">165.71&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">165.46&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">165.15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">164.85&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">164.59&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">164.49&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">164.48&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">12.86&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">12.26&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">13.48&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">12.53&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">10.96&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">16.88&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">head&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dataset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å°†æ•´å‹å˜ä¸ºfloat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dataset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">astype&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;float32&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dataset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ•°æ®å¤„ç†ï¼Œå½’ä¸€åŒ–è‡³0~1ä¹‹é—´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">scaler&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MinMaxScaler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">feature_range&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dataset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">train_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">test_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">train_size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">test&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dataset&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">train_size&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">:],&lt;/span> &lt;span class="n">dataset&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">train_size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># train, test = dataset[:30, :], dataset[:30, :]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆ›å»ºæµ‹è¯•é›†å’Œè®­ç»ƒé›†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">look_back&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">trainX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trainY&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">create_dataset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># å•æ­¥é¢„æµ‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">testX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">testY&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">create_dataset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è°ƒæ•´è¾“å…¥æ•°æ®çš„æ ¼å¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">trainX&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trainX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trainX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]))&lt;/span> &lt;span class="c1"># ï¼ˆæ ·æœ¬ä¸ªæ•°ï¼Œ1ï¼Œè¾“å…¥çš„ç»´åº¦ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">testX&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">testX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆ›å»ºLSTMç¥ç»ç½‘ç»œæ¨¡å‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">model&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sequential&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># model.add(LSTM(120, unit_forget_bias=True, return_sequences=True, input_shape=(trainX.shape[1], trainX.shape[2])))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># model.add(Dropout(0.2))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># model.add(Dense(1))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">LSTM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">input_shape&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">trainX&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">shape&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">])))&lt;/span> &lt;span class="c1"># è¾“å…¥ç»´åº¦ä¸º1ï¼Œæ—¶é—´çª—çš„é•¿åº¦ä¸º1ï¼Œéšå«å±‚ç¥ç»å…ƒèŠ‚ç‚¹ä¸ªæ•°ä¸º120&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Dense&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">activation&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;relu&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">loss&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;mean_squared_error&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">optimizer&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;adam&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">summary&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç»˜åˆ¶ç½‘ç»œç»“æ„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># plot_model(model, to_file=&amp;#39;model.png&amp;#39;, show_shapes=True)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">history&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trainY&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">epochs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">batch_size&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">verbose&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">validation_data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">testY&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># é¢„æµ‹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">trainPredict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainX&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">testPredict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(trainPredict.shape, testPredict.shape)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åå½’ä¸€åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">trainPredict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainPredict&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mf">0.6&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">trainY&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">trainY&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">testPredict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testPredict&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mf">0.6&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">testY&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">testY&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è®¡ç®—å¾—åˆ†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">trainScore&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sqrt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mean_squared_error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainY&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">trainPredict&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Train Score: &lt;/span>&lt;span class="si">%.2f&lt;/span>&lt;span class="s1"> RMSE&amp;#39;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">trainScore&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">testScore&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">math&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sqrt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mean_squared_error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testY&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">testPredict&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Test Score: &lt;/span>&lt;span class="si">%.2f&lt;/span>&lt;span class="s1"> RMSE&amp;#39;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">testScore&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">121&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;loss&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;è®­ç»ƒæŸå¤±&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">history&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;val_loss&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;éªŒè¯æŸå¤±&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ylabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;æŸå¤±&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xlabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;è½®æ¬¡&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;è®­ç»ƒé›†æŸå¤±&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;éªŒè¯é›†æŸå¤±&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">loc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;upper right&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(testX[-6:].shape)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">([[[&lt;/span>&lt;span class="n">testX&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="p">:]]]])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">blo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;04&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;05&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;06&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;07&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;08&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;09&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;10&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;11&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;12&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;01&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;02&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;03&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;04&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;05&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;06&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;07&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;08&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;09&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">valu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">blo&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resl&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">blo&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fit_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(val.shape)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">predict&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="p">:]])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">valu&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mf">0.2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç»˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">trainPredictPlot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">empty_like&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">trainPredictPlot&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="p">:]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nan&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">trainPredictPlot&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">look_back&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainPredict&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">look_back&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">:]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">trainPredict&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">testPredictPlot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">empty_like&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">testPredictPlot&lt;/span>&lt;span class="p">[:,&lt;/span> &lt;span class="p">:]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nan&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">testPredictPlot&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainPredict&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">look_back&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">:]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">testPredict&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># fig, ax = plt.figure()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">subplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">122&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scaler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inverse_transform&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataset&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;çœŸå®å€¼&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trainPredictPlot&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;è®­ç»ƒå€¼&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;green&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">valu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="n">valu&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">reshape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">testPredictPlot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">concatenate&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">testPredictPlot&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">valu&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">axis&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(testPredictPlot.shape)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ax2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">testPredictPlot&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;é¢„æµ‹å€¼&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># plt.title(name + &amp;#39;æ‹Ÿåˆæ›²çº¿&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ylabel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;å€¼&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">legend&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">savefig&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;picture/lstm/&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;Q61&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">bbox_inches&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;tight&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pad_inches&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dpi&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># plt.savefig(&amp;#39;Q3/&amp;#39; + &amp;#39;q62.jpg&amp;#39;, dpi=300)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">resl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>è¿™é‡Œä»£ç æœ‰äº›æ®‹ç¼ºï¼Œå»ºè®®è°¨æ…å‚è€ƒï¼Œä¸€äº›åœ°æ–¹çš„ä»£ç å·²é™„æ¥æºã€‚è€å¤©ä¿ä½‘æˆ‘æ‹¿ä¸ªå›½ä¸‰ï¼Œæˆ‘æ”¶å›ä¹‹å‰è§‰å¾—å»ºæ¨¡ç®€å• å“­æ­»&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E5%BA%94%E7%94%A8/">åº”ç”¨</category><category domain="https://keepjolly.com/categories/%E5%BA%94%E7%94%A8/">åº”ç”¨</category><category domain="https://keepjolly.com/tags/python/">Python</category><category domain="https://keepjolly.com/tags/%E5%8D%9A%E5%AE%A2/">åšå®¢</category></item><item><title>ã€Šå¤ªç©ºå ¡å’å¡æ‹‰ç‹„åŠ ã€‹ç»ˆææ— å‰§é€è§‚å½±é¡ºåºæŒ‡å—+ä¸‹è½½é“¾æ¥</title><link>https://keepjolly.com/archives/the-ultimate-battlestar-galactica-spoiler-free-viewing-order/</link><guid isPermaLink="true">https://keepjolly.com/archives/the-ultimate-battlestar-galactica-spoiler-free-viewing-order/</guid><pubDate>Thu, 25 Aug 2022 14:00:18 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>&lt;a href="https://kknews.cc/entertainment/jjnora6.html">åŸæ–‡ç½‘å€&lt;/a>
ã€
&lt;a href="https://thunderpeel2001.blogspot.com/2010/02/battlestar-galactica-viewing-order.html">è‹±æ–‡ç‰ˆ&lt;/a>&lt;/p>
&lt;p>ç£é“¾åŸºæœ¬éƒ½æ˜¯é«˜æ¸…æˆ–4kç‰ˆæœ¬ï¼Œå¦‚æœ‰æ›´æ¸…æ™°çš„ç‰ˆæœ¬ï¼ŒåŠ¡å¿…ç•™è¨€ã€
å¦‚éœ€è¦ç£åŠ›é“¾å¯ä»¥é¼ æ ‡ç§»åˆ°é“¾æ¥ä¸Šï¼Œå³é”®&lt;strong>å¤åˆ¶é“¾æ¥åœ°å€&lt;/strong>&lt;/p>
&lt;h2 id="1978è€ç‰ˆæœ¬">1978è€ç‰ˆæœ¬&lt;/h2>
&lt;p>æ³¨: æœ¬æŒ‡å—å¯¹åº”ä»2003å¹´å¼€å§‹ä¸Šæ˜ çš„æ–°ç‰ˆå¤ªç©ºå ¡å’å¡æ‹‰ç‹„åŠ ç³»åˆ—ï¼Œ ä¸ºç³»åˆ—çš„é‡åˆ¶ç‰ˆï¼Œæœ‰å§‹æœ‰ç»ˆï¼Œä¸éœ€è¦ä»1978å¹´åŸç‰ˆå¼€å§‹çœ‹èµ·ã€‚&lt;/p>
&lt;h2 id="the-miniseries-è¿·ä½ å‰§">The Miniseries (è¿·ä½ å‰§)&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="magnet:?xt=urn:btih:ca22675d30c1011bc3b5b86971c4c1a5bc608a56&amp;amp;dn=Battlestar.Galactica.Miniseries.Part1.1080p.BluRay.x264.DTS-FraMeSToR%5Brartv%5D&amp;amp;tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2F9.rarbg.me%3A2770&amp;amp;tr=udp%3A%2F%2F9.rarbg.to%3A2750">Battlestar.Galactica.Miniseries.Part1&lt;/a>&lt;/li>
&lt;li>&lt;a href="magnet:?xt=urn:btih:611c799d221b7aaa1318a717d4bc353644917303&amp;amp;dn=Battlestar.Galactica.Miniseries.Part2.1080p.BluRay.x264.DTS-FraMeSToR%5Brartv%5D&amp;amp;tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2F9.rarbg.me%3A2820&amp;amp;tr=udp%3A%2F%2F9.rarbg.to%3A2760">Battlestar.Galactica.Miniseries.Part2&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="season-1-ç¬¬ä¸€å­£">Season 1 (ç¬¬ä¸€å­£)&lt;/h2>
&lt;p>&lt;a href="magnet:?xt=urn:btih:55007f35b979fb60792ab95bf5ba5ade5e300e6e&amp;amp;dn=Battlestar.Galactica.2003.S01.1080p.BluRay.REMUX.VC-1.DTS-HD.MA.5.1-NOGRP%5Brartv%5D&amp;amp;tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2F9.rarbg.me%3A2850&amp;amp;tr=udp%3A%2F%2F9.rarbg.to%3A2860&amp;amp;tr=udp%3A%2F%2Ftracker.fatkhoala.org%3A13800&amp;amp;tr=udp%3A%2F%2Ftracker.slowcheetah.org%3A14740">Battlestar Galactica Season 1&lt;/a>&lt;/p>
&lt;h2 id="season-2-ç¬¬äºŒå­£">Season 2 (ç¬¬äºŒå­£)&lt;/h2>
&lt;p>&lt;a href="magnet:?xt=urn:btih:1efc0f019de1a5f9033e683d941e16fdf775bac4&amp;amp;dn=Battlestar.Galactica.2003.S02.1080p.BluRay.REMUX.AVC.DTS-HD.MA.5.1-NOGRP%5Brartv%5D&amp;amp;tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2F9.rarbg.me%3A2790&amp;amp;tr=udp%3A%2F%2F9.rarbg.to%3A2830&amp;amp;tr=udp%3A%2F%2Ftracker.fatkhoala.org%3A13790&amp;amp;tr=udp%3A%2F%2Ftracker.tallpenguin.org%3A15710">Battlestar Galactica Season 2&lt;/a>
å…¶ä¸­åœ¨ç¬¬17é›†åçœ‹&lt;a href="magnet:?xt=urn:btih:e825b657ac962660604e496191a77f810909c4ba&amp;amp;dn=Battlestar.Galactica.Razor.2007.EXTENDED.1080p.BluRay.x264-LEVERAGE&amp;amp;tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2F9.rarbg.me%3A2710%2Fannounce&amp;amp;tr=udp%3A%2F%2F11.rarbg.me%3A80%2Fannounce">Battlestar Galactica Razor(Extended Version)&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>è¿™éƒ¨ç”µå½±çš„æœ€å10åˆ†é’Ÿæœ‰å‡ å¥å°è¯æ˜¯ä¸ºç¬¬å››å­£åšçš„å‡†å¤‡ï¼Œå¦‚æœåœ¨è¿™é‡Œå¬åˆ°äº†é‚£å‡ å¥å°è¯, è™½ç„¶ç®—ä¸ä¸Šå‰§é€ï¼Œä½†æ˜¯ä¼šå½±å“è¿™ä¹‹åçš„æ„Ÿå—ï¼Œç‰¹åˆ«æ˜¯ç¬¬ä¸‰å­£ã€‚
æ–¹æ³•ï¼š
åœ¨é‚£å‡ å¥å°è¯å‡ºç°ä¹‹å‰å…³é—­å£°éŸ³å’Œå­—å¹•ï¼Œä½ åªä¼šçœ‹è§ç”»é¢ä¸Šçš„äººç‰©åœ¨è¯´è¯ï¼Œä½†æ˜¯ä½ ä¸ä¼šçŸ¥é“ä»–ä»¬è¯´çš„æ˜¯ä»€ä¹ˆã€‚è¿™å‡ å¥å°è¯è¿‡äº†ä¹‹åå†æŠŠå£°éŸ³å’Œå­—å¹•æ‰“å¼€å³å¯ã€‚
è¿™æ ·ä½ ä¼šå®Œæ•´çš„äº«å—å®Œæ•´ä¸ªç”µå½±çš„æ•…äº‹ï¼Œç›´åˆ°çœ‹å®Œç¬¬ä¸‰å­£åå†å›æ¥å¬è¿™å‡ å¥å°è¯å³å¯ï¼Œè¿™å‡ å¥å°è¯å‘ç”Ÿåœ¨æœ€åçš„10åˆ†é’Ÿé‡Œé¢ï¼ˆä¸ç®—åˆ¶ä½œäººå‘˜åå•ï¼‰ï¼Œæ‰€ä»¥ä½ å¯ä»¥å®‰å¿ƒæ”¾å¿ƒçš„çœ‹å‰90åˆ†é’Ÿã€‚æ€»å…±åªæœ‰ä¸¤å¤„éœ€è¦å…³é—­å£°éŸ³å’Œå­—å¹•ï¼Œä¼šåœ¨ä¸å‰§é€çš„å‰æä¸‹ç»™äºˆæç¤ºã€‚
ç¬¬ä¸€å¤„ï¼šå½“Hybridç”¨æ‰‹æŠ“ä½Shawçš„æ—¶å€™ç«‹å³å…³é—­å£°éŸ³å’Œå­—å¹•ï¼ˆHybridå¯èƒ½ç¿»è¯‘ä¸ºæ··åˆä½“, Shawå¯èƒ½ç¿»è¯‘ä¸ºè‚–ï¼‰ï¼Œå½“Hybridæ”¾æ‰‹åå³å¯æ‰“å¼€å£°éŸ³å’Œå­—å¹•ã€‚
ç¬¬äºŒå¤„: åœ¨ç¬¬ä¸€å¤„åä¸ä¹…, å½“Red Oneå¼€å§‹ä¸æ€»éƒ¨è”ç³»çš„æ—¶å€™(Red Oneå¯èƒ½ç¿»è¯‘ä¸ºçº¢ä¸€å·), ä½ ä¼šå¬è§Red Oneè¯´&amp;quot;Actual, This is Red One, Come in&amp;quot;, åœ¨è¿™é‡Œå³å¯å…³é—­å£°éŸ³å’Œå­—å¹•. åœ¨çº¢ä¸€å·å†æ¬¡å‡ºç°åœ¨ç”»é¢ä¸Šæ—¶å³å¯æ‰“å¼€å£°éŸ³å’Œå­—å¹•. (å…¶å®åœ¨è¿™ä¹‹å‰å°±å¯ä»¥äº†, ä¸è¿‡å®åœ¨æ˜¯æ²¡æœ‰å…¶ä»–çš„çº¿ç´¢å¯æä¾›)&lt;/p>
&lt;/blockquote>
&lt;p>å¯é€‰é¡¹ï¼š&lt;a href="magnet:?xt=urn:btih:D06F404C8F2F9F0C416B32303F0AA39FBABD0081&amp;amp;dn=Battlestar+Galactica+Razor+Flashbacks+%5BH264+Eng+Ac3+Sub+Ita%5D%5BTNTVillage%5D&amp;amp;tr=http%3A%2F%2Ftracker.tntvillage.scambioetico.org%3A2710%2Fannounce&amp;amp;tr=udp%3A%2F%2Ftracker.tntvillage.scambioetico.org%3A2710%2Fannounce&amp;amp;tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969%2Fannounce&amp;amp;tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&amp;amp;tr=udp%3A%2F%2Ftracker.istole.it%3A80&amp;amp;tr=udp%3A%2F%2Fopen.demonii.com%3A1337%2Fannounce&amp;amp;tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337%2Fannounce&amp;amp;tr=http%3A%2F%2Ftracker.openbittorrent.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2Fopentracker.i2p.rocks%3A6969%2Fannounce&amp;amp;tr=udp%3A%2F%2Ftracker.internetwarriors.net%3A1337%2Fannounce&amp;amp;tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969%2Fannounce&amp;amp;tr=udp%3A%2F%2Fcoppersurfer.tk%3A6969%2Fannounce&amp;amp;tr=udp%3A%2F%2Ftracker.zer0day.to%3A1337%2Fannounce">Battlestar Galactica Razor Flashbacks&lt;/a>(åˆ©åˆƒ é—ªå›, ç½‘ç»œå‰§, å…±7é›†, 7é›†æ€»æ—¶é•¿18åˆ†é’Ÿå·¦å³)
ä¹‹æ‰€ä»¥æ˜¯å¯é€‰é¡¹æ˜¯å› ä¸ºè¿™éƒ¨æ‰€è°“ç½‘ç»œå‰§å…¶å®å°±æ˜¯Razorç”µå½±çš„åˆ å‡ç‰‡æ®µï¼Œæœ‰1åˆ°7çš„åˆé›†ç‰ˆã€‚å…¶ä¸­4ä¸ªéƒ¨åˆ†å·²ç»æ·»åŠ åˆ°åŠ é•¿ç‰ˆä¸­ï¼Œå‰©ä¸‹çš„3ä¸ªæœªåŠ å…¥ç”µå½±çš„ç‰‡æ®µä¸º1ã€2ã€7ï¼Œè¿™7é›†è¿èµ·æ¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ•…äº‹ï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥å®Œæ•´çœ‹ä¸€éã€‚&lt;/p>
&lt;p>ç„¶åç»§ç»­çœ‹å®Œç¬¬äºŒå­£ã€‚&lt;/p>
&lt;p>&lt;strong>The Resistance (æŠµæŠ—, ç½‘ç»œå‰§, å…±10é›†, 10é›†æ€»æ—¶é•¿25åˆ†é’Ÿå·¦å³)&lt;/strong>
&lt;a href="https://dy.town/uploads/download/file/50046/Battlestar.Galactica.The.Resistance.Webisodes.SD.RUS.torrent">Battlestar Galactica: The Resistance&lt;/a> or &lt;a href="https://www.youtube.com/watch?v=A1uXKLr3dyc">youtobe&lt;/a>
è¿™éƒ¨ç½‘ç»œå‰§çš„ä½œç”¨æ˜¯&lt;strong>è¿æ¥ç¬¬äºŒå­£å’Œç¬¬ä¸‰å­£&lt;/strong>ï¼Œæœ‰1åˆ°10çš„åˆé›†ç‰ˆï¼Œååˆ†æ¨èã€‚&lt;/p>
&lt;h2 id="season-3-ç¬¬ä¸‰å­£">Season 3 (ç¬¬ä¸‰å­£)&lt;/h2>
&lt;p>&lt;a href="magnet:?xt=urn:btih:978de315c5674d1ef31ba967f74dfaa9fb2e3771&amp;amp;dn=Battlestar.Galactica.2003.S03.1080p.BluRay.REMUX.VC-1.DTS-HD.MA.5.1-NOGRP%5Brartv%5D&amp;amp;tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2F9.rarbg.me%3A2990&amp;amp;tr=udp%3A%2F%2F9.rarbg.to%3A2910&amp;amp;tr=udp%3A%2F%2Ftracker.slowcheetah.org%3A14790&amp;amp;tr=udp%3A%2F%2Ftracker.tallpenguin.org%3A15760">Battlestar Galactica Season 3&lt;/a>
&lt;strong>ä¸Šä¸€å­£çš„Razorï¼ˆé™éŸ³éƒ¨åˆ†ï¼‰&lt;/strong>
æ˜¯çš„ï¼Œä½ ç°åœ¨å¯ä»¥å»çœ‹é‚£æœ€åååˆ†é’Ÿé‡Œé¢é™éŸ³æ‰çš„å°è¯äº†ã€‚è¿™é‡Œä¹Ÿæ˜¯æœ¬æ¥è¿™éƒ¨ç”µå½±ä¸Šæ˜ çš„æ—¶æœŸï¼Œå¦‚æœå¯ä»¥çš„è¯å¯ä»¥çœ‹çœ‹è¿™ååˆ†é’Ÿä¹‹å‰çš„ä¸€äº›å†…å®¹ï¼Œé‡æ–°å¬å¬Hybridä¹‹å‰è¯´çš„é‚£äº›è¯ï¼Œä½ ä¼šååˆ†æƒŠè®¶ä½ ç°åœ¨å±…ç„¶èƒ½å¤Ÿæ˜ç™½è¿™äº›è¯çš„æ„æ€äº†ã€‚&lt;/p>
&lt;h2 id="season-4-ç¬¬å››å­£">Season 4 (ç¬¬å››å­£)&lt;/h2>
&lt;p>&lt;a href="magnet:?xt=urn:btih:7a04f2e3f070fabed8b0d83a5d423ed00ec3c2c3&amp;amp;dn=Battlestar.Galactica.2003.S04.1080p.BluRay.REMUX.VC-1.DTS-HD.MA.5.1-NOGRP%5Brartv%5D&amp;amp;tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2F9.rarbg.me%3A2990&amp;amp;tr=udp%3A%2F%2F9.rarbg.to%3A2770&amp;amp;tr=udp%3A%2F%2Ftracker.thinelephant.org%3A12740&amp;amp;tr=udp%3A%2F%2Ftracker.fatkhoala.org%3A13730">Battlestar Galactica Season 4&lt;/a>&lt;/p>
&lt;ol>
&lt;li>He That Believeth In Me&lt;/li>
&lt;li>Six of One&lt;/li>
&lt;li>The Ties That Bind&lt;/li>
&lt;li>Escape Velocity&lt;/li>
&lt;li>The Road Less Traveled&lt;/li>
&lt;li>Faith&lt;/li>
&lt;li>Guess What's Coming to Dinner&lt;/li>
&lt;li>Sine Qua Non&lt;/li>
&lt;li>The Hub&lt;/li>
&lt;li>Revelations&lt;/li>
&lt;li>Sometimes a Great Notion
11b. &lt;a href="https://dy.town/uploads/download/file/50041/Battlestar.Galactica.Face.Of.The.Enemy.Single.File.Fanedit.HQ.torrent">The Face of the Enemy&lt;/a>ã€&lt;a href="https://www.youtube.com/watch?v=dvhsSxyzvyk">åœ¨çº¿&lt;/a> è¿™éƒ¨ç½‘ç»œå‰§ååˆ†æ¨èï¼Œ ä¸ºä¹‹åå‘ç”Ÿçš„äº‹æƒ…åšäº†ååˆ†è¯¦ç»†çš„é“ºå«ï¼Œæœ‰1-10é›†çš„åˆé›†ç‰ˆã€‚&lt;/li>
&lt;li>A Disquite Follows My Soul (Extended Version) 53åˆ†é’Ÿå·¦å³åŠ é•¿ç‰ˆ&lt;/li>
&lt;li>The Oath&lt;/li>
&lt;li>Blood on the Scales&lt;/li>
&lt;li>No Exit
15b. &lt;a href="magnet:?xt=urn:btih:b9bff0bf6f13504ff530687426f88cc3d2b13f76&amp;amp;dn=Battlestar.Galactica.The.Plan.2009.1080p.BluRay.x264.DTS-EbP&amp;amp;tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2F9.rarbg.me%3A2780&amp;amp;tr=udp%3A%2F%2F9.rarbg.to%3A2970">The Plan&lt;/a> (è®¡åˆ’, ç”µå½±)
è¿™éƒ¨ç”µå½±æœ¬æ¥æ˜¯åœ¨å…¨å‰§ç»ˆåä¸Šæ˜ çš„ï¼Œä¸è¿‡æ”¾åœ¨è¿™é‡Œçœ‹æ•ˆæœæœ€å¥½ã€‚å®ƒå°†å‰ä¸¤å­£ç”¨Cylonäººçš„è§†è§’æ¼”ç»äº†ä¸€éï¼Œè§£ç­”äº†å¾ˆå¤šé—®é¢˜(æ¯”å¦‚é‚£ä¸ªè®¡åˆ’åˆ°åº•æ˜¯ä»€ä¹ˆ!)ï¼Œè®©ä½ å®‰å¿ƒçš„é€šå‘ç»“å±€ã€‚&lt;/li>
&lt;/ol>
&lt;p>16-19. ä¸€ç›´çœ‹åˆ°æœ€åä¸€é›†å³å¯&lt;/p>
&lt;h2 id="bsgä¹‹åçš„è¡ç”Ÿä½œå“">BSGä¹‹åçš„è¡ç”Ÿä½œå“&lt;/h2>
&lt;p>&lt;a href="magnet:?xt=urn:btih:cea3f71d201c44284c1b7a2871f0616d8b5072fd&amp;amp;dn=Caprica.S01.1080i.BluRay.REMUX.AVC.DTS-HD.MA.5.1-NOGRP%5Brartv%5D&amp;amp;tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2F9.rarbg.me%3A2890&amp;amp;tr=udp%3A%2F%2F9.rarbg.to%3A2800&amp;amp;tr=udp%3A%2F%2Ftracker.fatkhoala.org%3A13750&amp;amp;tr=udp%3A%2F%2Ftracker.tallpenguin.org%3A15790">Caprica&lt;/a> (å…¨ä¸€å­£å…±18é›†)
è¿™éƒ¨å‰§çš„æ—¶é—´çº¿æ˜¯åœ¨BSGçš„å‰58å¹´ï¼Œå¾ˆå¤šäººæŠŠè¿™ä¸ªå‰§å½“åšå‰ä¼ æ”¾åœ¨BSGä¹‹å‰çœ‹ï¼Œä¸è¿‡ä¸ªäººä¸æ¨èè¿™ä¹ˆåšï¼šå¹¶ä¸æ˜¯è¿™éƒ¨å‰§ä¸å¥½ï¼Œå…¶åŸå› æ˜¯Capricaè·ŸBSGå¤ªä¸ä¸€æ ·äº†ï¼Œå¯¼è‡´å¾ˆå¤šäººå¯¹BSGçš„å†…å®¹äº§ç”Ÿäº†è¯¯è§£ã€‚æ‰“ä¸ªæ¯”æ–¹çš„è¯ï¼Œå¦‚æœè¯´BSGæ˜¯æ”¿æ²»å‰§çš„è¯é‚£ä¹ˆCapricaå°±æ˜¯å®¶åº­å‰§ã€‚æœ‰å…´è¶£å¯ä»¥åœ¨BSGä¹‹åçœ‹ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯è¿™éƒ¨å‰§åœ¨ç¬¬ä¸€å­£ä¹‹åå°±è¢«ç äº†ï¼Œæ‰€ä»¥å‰§æƒ…æ–¹é¢æ˜¯è‚¯å®šæœ‰é—®é¢˜çš„ã€‚&lt;/p>
&lt;p>Blood and Chrome (ç”µå½±)
è¿™æœ¬æ¥æ˜¯æƒ³è¦ä½œä¸ºä¸€éƒ¨æ–°å‰§æ’­å‡ºçš„ï¼Œ ä½†å„ç§åŸå› å¯¼è‡´å…¶æœ€ç»ˆå˜ä¸ºäº†ä¸€éƒ¨ç”µå½±ã€‚æ—¶é—´çº¿åœ¨Capricaä¹‹åBSGä¹‹å‰ï¼Œè¿™éƒ¨ç”µå½±é‡Œé¢æ²¡æœ‰ä»»ä½•BSGæ­£å‰§çš„å‰§é€ï¼Œæ‰€ä»¥ä»»ä½•æ—¶å€™çœ‹éƒ½æ²¡æœ‰é—®é¢˜ã€‚ ç›®å‰è¿™éƒ¨ç”µå½±æœ‰3ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯åˆ†ä¸º10é›†çš„ç”µè§†ç‰ˆ(è¿èµ·æ¥çœ‹å°±æ˜¯è¿™éƒ¨ç”µå½±ï¼Œ&lt;a href="magnet:?xt=urn:btih:012500751652a4d8616adaceeed3b51d803d29bb&amp;amp;dn=Battlestar.Galactica.Blood.and.Chrome.2012.1080p.BluRay.x264-GECKOS&amp;amp;tr=http%3A%2F%2Ftracker.trackerfix.com%3A80%2Fannounce&amp;amp;tr=udp%3A%2F%2F9.rarbg.me%3A2930&amp;amp;tr=udp%3A%2F%2F9.rarbg.to%3A2890">åˆé›†ç‰ˆ&lt;/a>)ï¼Œå¦å¤–ä¸¤ä¸ªåˆ†åˆ«æ˜¯åˆ†çº§ç‰ˆå’Œæœªåˆ†çº§ç‰ˆã€‚&lt;/p>
&lt;h2 id="æç¤º">æç¤º&lt;/h2>
&lt;p>è‡³æ­¤å·²æ–½å·¥å®Œæ¯•ï¼Œå»ºè®®å…ˆçœ‹å‚è€ƒç½‘å€çš„è‹±æ–‡ç‰ˆï¼Œæ²¡æ—¶é—´çœ‹ä¸­æ–‡ç‰ˆï¼Œç„¶åå†çœ‹æˆ‘è¿™éƒ¨åˆ†ï¼Œå¦‚æœ‰é—æ¼æ¬¢è¿ç•™è¨€ã€‚&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E7%90%90%E8%A8%80/">çè¨€</category><category domain="https://keepjolly.com/categories/%E7%90%90%E8%A8%80/">çè¨€</category><category domain="https://keepjolly.com/tags/movie/">Movie</category></item><item><title>Delving into Deep Imbalanced Regressionç¬”è®°</title><link>https://keepjolly.com/archives/dir-note/</link><guid isPermaLink="true">https://keepjolly.com/archives/dir-note/</guid><pubDate>Wed, 17 Aug 2022 21:59:05 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>DIR&lt;/p>
&lt;h2 id="éš¾ç‚¹">éš¾ç‚¹ï¼š&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>ç°å®ä¸­ï¼Œæ•°æ®ä¸å¹³è¡¡éšå¤„å¯è§ï¼Œé€šå¸¸æ˜¯å¸¦é•¿å°¾çš„åæ€åˆ†å¸ƒï¼Œå…¶ä¸­æŸäº›æ ‡ç­¾çš„å€¼å¾ˆå°‘ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è§£å†³ä¸å¹³è¡¡çš„åˆ†ç±»ä»»åŠ¡çš„æ–¹æ³•å…·æœ‰å±€é™æ€§ï¼Œå®ƒä»¬åªé€‚åˆåˆ†ç±»ä»»åŠ¡ï¼Œä¸»è¦å…³æ³¨äºç±»åˆ«çš„ä¸å¹³è¡¡ï¼Œç›´æ¥ç”¨äºè¿ç»­æ•°æ®ä¼šäº§ç”Ÿæ­§ä¹‰ä»¥åŠå¿½ç•¥äº†è¿ç»­æ•°æ®ä¸­æ¯ä¸ªæ•°æ®å‘¨å›´çš„ä¿¡æ¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è§£å†³ä¸å¹³è¡¡çš„å›å½’ä»»åŠ¡æ²¡æœ‰å¾ˆå¥½çš„æ¢ç´¢è¿‡ï¼Œæ²¡æœ‰è€ƒè™‘ç›®æ ‡é—´çš„ä¿¡æ¯ï¼ŒåŒæ—¶å¯¹äºæé«˜ç»´åº¦çš„æ•°æ®æ¥è¯´ï¼Œçº¿æ€§æ’å€¼ä¸ä¼šäº§ç”Ÿæœ‰æ„ä¹‰çš„æ ·æœ¬&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•ï¼š&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>æå‡ºäº†LDS&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ç”±â€œFigure 2.â€ [Yang ç­‰ã€‚, 2021, p. 3] å¯ä»¥çœ‹å‡ºåˆ†ç±»å’Œè¿ç»­çš„åŒºåˆ«&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åŸå› æ˜¯æ‰€æœ‰ä¸å¹³è¡¡å­¦ä¹ æ–¹æ³•æ˜¯é€šè¿‡æ”¹å–„ç»éªŒæ ‡ç­¾å¯†åº¦åˆ†å¸ƒçš„ä¸å¹³è¡¡æ¥è¿›è¡Œçš„ï¼Œæ²¡æœ‰å­¦ä¹ åˆ°ä¸´è¿‘æ ‡ç­¾çš„æ•°æ®æ ·æœ¬é—´çš„ä¾èµ–æ€§&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å› æ­¤æå‡ºLDSï¼Œå®ƒæå€¡ä½¿ç”¨æ ¸å¯†åº¦ä¼°è®¡æ¥å­¦ä¹ è¿ç»­æ ‡ç­¾çš„ä¸å¹³è¡¡åŒºåŸŸ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç”±â€œFigure 3.â€ [Yang ç­‰ã€‚, 2021, p. 3] å¯ä»¥çœ‹å‡ºè¿ç»­é—®é¢˜å¯èƒ½è½¬åŒ–æˆåˆ†ç±»é—®é¢˜ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸å¹³è¡¡çš„åˆ†ç±»æ–¹æ³•ï¼Œå¦‚é‡åŠ æƒã€é‡é‡‡æ ·&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>æå‡ºäº†FDS&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ä½œè€…è®¤ä¸ºæœ‰ç›®æ ‡ç©ºé—´çš„è¿ç»­æ€§ï¼Œåº”è¯¥ä¹Ÿæœ‰ç‰¹å¾ç©ºé—´çš„è¿ç»­æ€§&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é¦–å…ˆä»â€œFigure 4.â€ [Yang ç­‰ã€‚, 2021, p. 4] å¯ä»¥çœ‹å‡ºåœ¨æ ·æœ¬å¾ˆå¤šçš„åŒºåŸŸï¼Œå®ƒä»¬çš„å‡å€¼å’Œæ–¹å·®çš„ä½™å¼¦ç›¸ä¼¼åº¦ç›¸ä¼¼ä¸”é«˜ï¼Œä½†æ˜¯åœ¨å°‘æ ·æœ¬åŒºåŸŸä¹Ÿè¡¨ç°å¾—å¾ˆé«˜ï¼ˆå› ä¸ºæ•°æ®ä¸å¹³è¡¡ï¼Œå®ƒä»¬ä»æ•°æ®é‡å¤§çš„åŒºåŸŸå­¦ä¹ å®ƒä»¬å­¦ä¹ åˆ°çš„å€¼ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å› æ­¤æå‡ºFDSï¼Œå®ƒé€šè¿‡å¯¹ç§°æ ¸æ¥å¹³è¡¡ç›®æ ‡çš„å‡å€¼å’Œ&lt;strong>å&lt;/strong>æ–¹å·®ï¼Œè¿›è¡Œç‰¹å¾ç©ºé—´åˆ†å¸ƒå¹³æ»‘&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®ƒå¯ä»¥æ•´åˆåˆ°ä»»ä½•ç¥ç»ç½‘ç»œå’Œæ”¹å–„æ ‡ç­¾ä¸å¹³è¡¡çš„å·¥ä½œä¸­æ¥æå‡æ€§èƒ½ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>æ•´ç†å‡ºäº”ä¸ªDIRåŸºå‡†æ•°æ®é›†ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="å®éªŒåŠç»“æœ">å®éªŒåŠç»“æœ&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>åº”ç”¨ä¸å¹³è¡¡å›å½’ä»»åŠ¡çš„æ–¹æ³•åœ¨é«˜ç»´æ•°æ®ä¸Šæ—¶æ€§èƒ½ä¸å¥½ï¼Œvanillaæ¨¡å‹åœ¨manyshotåŒºåŸŸæ˜“è¿‡æ‹Ÿåˆ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ·»åŠ äº†LDS+FDSå–å¾—æœ€å¥½ç»“æœï¼Œå¹¶ä¸”æé«˜äº†all-, many-, medium-, few-shotåŒºåŸŸçš„æ€§èƒ½&lt;/p>
&lt;/li>
&lt;li>
&lt;p>LDSå’ŒFDSåœ¨æœ‰æ•°æ®åŒºåŸŸå’Œæ— æ•°æ®åŒºåŸŸéƒ½å–å¾—æ”¶ç›Šï¼Œå…·ä½“æ¥è¯´ï¼Œå†…æ’å’Œå¤–æ’éƒ½æœ‰æå‡ï¼Œå†…æ’æœ€å¤šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>â€œFigure 8â€ [Yang ç­‰ã€‚, 2021, p. 8] è¡¨æ˜äº†FDSå¯ä»¥å¾ˆå¥½çš„æ ¡å‡†ç»Ÿè®¡æ•°æ®ï¼Œä½¿å¾—å°½åœ¨å…¶å‘¨å›´å…·æœ‰é«˜ç›¸ä¼¼åº¦ï¼Œå¹¶éšç€ç›®æ ‡å€¼å˜å¤§ï¼Œç›¸ä¼¼åº¦ä¸‹é™ã€‚æ­¤å¤–è¿è¡Œç»Ÿè®¡æ•°æ®å’Œå¹³æ»‘ç»Ÿè®¡æ•°æ®çš„L1è·ç¦»éšè®­ç»ƒè¿›è¡Œè€Œå‡å°‘ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Gaussianæ ¸å¸¦æ¥æœ€ä¼˜ç»“æœ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>LDSå’ŒFDSå¯¹ä¸åŒçš„æŸå¤±å‡½æ•°å…·æœ‰é²æ£’æ€§&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ ¸å¤§å°æœ€å¥½ä¸º5ï¼Œæ ‡å‡†å·®æœ€å¥½ä¸º2ï¼Œä¸”éƒ½ä¸åŒçš„è¶…å‚æ•°å¤§å°éƒ½æœ‰é²æ£’æ€§&lt;/p>
&lt;/li>
&lt;li>
&lt;p>LDSå’ŒFDSå¯¹ä¸åŒåæ€æ ‡ç­¾å¯†åº¦çš„é²æ£’æ€§å¥½&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦å¤–å‘ç°äº†ä¸å¹³è¡¡çš„åˆ†ç±»æ–¹æ³•åœ¨å›å½’ä¸Šåº”ç”¨ä¸å¥½çš„åŸå› ï¼šé¦–å…ˆï¼Œå¿½ç•¥äº†è¿ç»­ç›®æ ‡å‘¨å›´æ•°æ®çš„ç›¸ä¼¼æ€§ï¼›å…¶æ¬¡ï¼Œåˆ†ç±»æ— æ³•åœ¨è¿ç»­ç©ºé—´å†…è¿›è¡Œå¤–æ’å’Œå†…æ’ï¼Œå› æ­¤æ— æ³•å¤„ç†ç¼ºå¤±æ•°æ®&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å…¶ä»–åšå®¢ä»‹ç»&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://blog.csdn.net/qq_43310834/article/details/119969513">https://blog.csdn.net/qq_43310834/article/details/119969513&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://blog.csdn.net/qq_43349542/article/details/120370049">https://blog.csdn.net/qq_43349542/article/details/120370049&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E7%A0%94%E7%A9%B6%E7%94%9F%E5%86%85%E5%AE%B9/">ç ”ç©¶ç”Ÿå†…å®¹</category><category domain="https://keepjolly.com/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</category><category domain="https://keepjolly.com/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">æ·±åº¦å­¦ä¹ </category></item><item><title>Delving into Deep Imbalanced Regressionç¿»è¯‘</title><link>https://keepjolly.com/archives/delving-into-dir-translation/</link><guid isPermaLink="true">https://keepjolly.com/archives/delving-into-dir-translation/</guid><pubDate>Tue, 16 Aug 2022 20:19:04 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>éå¯¹ç…§ç¿»è¯‘ï¼Œæœ‰æ‰€ç®€ç•¥ã€‚ç¿»è¯‘ä¸å¯¹ï¼Œå°½æƒ…è°…è§£ï¼Œå¯ç•™è¨€
å› ä¸ºhaloæ¸²æŸ“çš„åŸå› ï¼Œæœ‰äº›åœ°æ–¹å¯èƒ½ä¸å¯¹ï¼Œè¯·ç•™è¨€
&lt;a href="https://zhuanlan.zhihu.com/p/369627086">ä½œè€…è§£é‡Š&lt;/a> and &lt;a href="https://arxiv.org/abs/2102.09554">paper&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.keepjolly.com/archives/dir-note">è‡ªå·±åšçš„ç¬”è®°&lt;/a>
&lt;a name="U6BAc">&lt;/a>&lt;/p>
&lt;h2 id="abstract">Abstract&lt;/h2>
&lt;p>â€ƒâ€ƒReal-world data often exhibit imbalanced distributions, where certain target values have significantly fewer observations. Existing techniques for dealing with imbalanced data focus on targets with categorical indices, i.e., different classes. However, many tasks involve continuous targets, where hard boundaries between classes do not exist. We define Deep Imbalanced Regression (DIR) as learning from such imbalanced data with continuous targets, dealing with potential missing data for certain target values, and generalizing to the entire target range. Motivated by the intrinsic difference between categorical and continuous label space, we propose distribution smoothing for both labels and features, which explicitly acknowledges the effects of nearby targets, and calibrates both label and learned feature distributions. We curate and benchmark large-scale DIR datasets from common real-world tasks in computer vision, natural language processing, and healthcare domains. Extensive experiments verify the superior performance of our strategies. Our work fills the gap in benchmarks and techniques for practical imbalanced regression problems. Code and data are available at: &lt;a href="https://github.com/YyzHarry/imbalanced-regression">https://github.com/YyzHarry/imbalanced-regression&lt;/a>.&lt;br>
â€ƒâ€ƒç°å®ä¸–ç•Œçš„æ•°æ®å¾€å¾€æ˜¯ä¸å¹³è¡¡åˆ†å¸ƒï¼Œå…¶ä¸­æŸäº›targetå€¼çš„è§‚æµ‹æ•°æ®å¾ˆå°‘ã€‚å¤„ç†ä¸å¹³è¡¡æ•°æ®çš„ç°å­˜æ–¹æ³•éƒ½ä¾§é‡äºå…·æœ‰åˆ†ç±»ç´¢å¼•çš„targetï¼ˆå·²ç»æ ‡å¥½æ•°æ®çš„æ•°æ®é›†ï¼Ÿæ•°æ®éƒ½æ ‡å‡ºäº†ç±»åˆ«ï¼‰ï¼Œå¦‚ä¸åŒçš„ç±»åˆ«ã€‚ç„¶è€Œï¼Œå¾ˆå¤šä»»åŠ¡æ¶‰åŠåˆ°è¿ç»­ç›®æ ‡ï¼Œå…¶ä¸­ç±»ä¹‹é—´ä¸å­˜åœ¨æ¸…æ™°è¾¹ç•Œã€‚æˆ‘ä»¬ç§°æ·±åº¦ä¸å¹³è¡¡å›å½’ï¼ˆDIRï¼‰ä¸ºä»æ­¤ç±»å«è¿ç»­ç›®æ ‡çš„ä¸å¹³è¡¡æ•°æ®ä¸­å­¦ä¹ ï¼Œå¤„ç†æŸäº›targetå€¼çš„æ½œåœ¨ç¼ºå¤±å€¼ï¼Œå¹¶æ³›åŒ–åˆ°æ•´ä¸ªtargetèŒƒå›´ã€‚å—åˆ†ç±»å’Œè¿ç»­æ ‡ç­¾ç©ºé—´ä¹‹é—´å›ºæœ‰å·®å¼‚çš„æ¿€å‘ï¼Œæˆ‘ä»¬å»ºè®®å¯¹æ ‡ç­¾å’Œç‰¹å¾çš„è¿›è¡Œå¹³æ»‘åˆ†å¸ƒï¼Œè¿™æ‰¿è®¤äº†ä¸´è¿‘ç›®æ ‡çš„å½±å“ï¼Œå¹¶æ ¡å‡†æ ‡ç­¾å’Œå­¦ä¹ åˆ°çš„ç‰¹å¾åˆ†å¸ƒã€‚æˆ‘ä»¬ä»è®¡ç®—æœºè§†è§‰ã€è‡ªç„¶è¯­è¨€å¤„ç†å’ŒåŒ»ç–—é¢†åŸŸçš„å¸¸è§ç°å®ä¸–ç•Œä»»åŠ¡ä¸­è¯„ä¼°è¯¥å¤§å‹ DIR æ•°æ®é›†ã€‚å¤§é‡å®éªŒéªŒè¯äº†æˆ‘ä»¬ç­–ç•¥çš„å“è¶Šæ€§èƒ½ã€‚æˆ‘ä»¬çš„å·¥ä½œå¡«è¡¥äº†å®é™…ä¸­çš„ä¸å¹³è¡¡å›å½’é—®é¢˜çš„åŸºå‡†æ•°æ®é›†å’ŒæŠ€æœ¯æ–¹é¢çš„ç©ºç™½ã€‚&lt;/p>
&lt;p>&lt;a name="cH3xw">&lt;/a>&lt;/p>
&lt;h2 id="1-introduction">1. Introduction&lt;/h2>
&lt;p>â€ƒâ€ƒData imbalance is ubiquitous and inherent in the real world. Rather than preserving an ideal uniform distribution over each category, the data often exhibit &lt;a href="https://www.statisticshowto.com/probability-and-statistics/skewed-distribution/">skewed distributions&lt;/a> with a long tail (&lt;a href="https://arxiv.org/abs/1710.05381?context=cs.AI">Buda et al., 2018&lt;/a>; &lt;a href="https://arxiv.org/abs/1904.05160">Liu et al., 2019&lt;/a>), where certain target values have significantly fewer observations. This phenomenon poses great challenges for deep recognition models, and has motivated many prior techniques for addressing data imbalance (&lt;a href="https://arxiv.org/abs/1906.07413">Cao et al., 2019&lt;/a>; &lt;a href="https://arxiv.org/abs/1901.05555">Cui et al., 2019&lt;/a>; &lt;a href="https://arxiv.org/abs/1806.00194">Huang et al., 2019&lt;/a>; &lt;a href="https://arxiv.org/abs/1904.05160">Liu et al., 2019&lt;/a>; &lt;a href="https://arxiv.org/abs/2009.12991">Tang et al., 2020&lt;/a>).&lt;br>
â€ƒâ€ƒåœ¨ç°å®ä¸­ï¼Œæ•°æ®çš„ä¸å¹³è¡¡æ˜¯å¸¸è§ä¸”å›ºæœ‰çš„ã€‚ä¸åœ¨æ¯ä¸ªç±»åˆ«ä¸Šä¿æŒç†æƒ³çš„å‡åŒ€åˆ†å¸ƒä¸åŒï¼Œæ•°æ®ç»å¸¸è¡¨ç°å‡ºå¸¦æœ‰é•¿å°¾çš„åæ€åˆ†å¸ƒï¼Œå…¶ä¸­æŸäº›ç›®æ ‡å€¼çš„è§‚æµ‹å€¼ååˆ†å°‘ã€‚è¯¥ç°è±¡å¯¹æ·±åº¦è¯†åˆ«æ¨¡å‹æå‡ºäº†å·¨å¤§çš„æŒ‘æˆ˜ï¼Œå¹¶æ¿€å‘è®¸å¤šç°æœ‰æŠ€æœ¯å»å¤„ç†æ•°æ®ä¸å¹³è¡¡ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒExisting solutions for learning from imbalanced data, however, focus on targets with categorical indices, i.e., the targets are different classes. However, many real-world tasks involve continuous and even infinite target values. For example, in vision applications, one needs to infer the age of different people based on their visual appearances, where age is a continuous target and can be highly imbalanced. Treating different ages as distinct classes is unlikely to yield the best results because it does not take advantage of the similarity between people with nearby ages. Similar issues happen in medical applications since many health metrics including heart rate, blood pressure, and oxygen saturation, are continuous and often have skewed distributions across patient populations.&lt;br>
â€ƒâ€ƒç„¶è€Œï¼Œç°æœ‰ä»ä¸å¹³è¡¡æ•°æ®ä¸­å­¦ä¹ çš„æ–¹æ¡ˆä¾§é‡äºå¸¦åˆ†ç±»ç´¢å¼•çš„ç›®æ ‡ï¼Œå¦‚ç›®æ ‡æ˜¯ä¸åŒçš„ç±»åˆ«ï¼ˆæœ‰å¤šä¸ªç›®æ ‡è¿˜æ˜¯ç›®æ ‡æœ‰å¤šä¸ªlabelå€¼ï¼Ÿåº”è¯¥æ˜¯æ¯ä¸ªç›®æ ‡éƒ½æ ‡å‡ºäº†ç‹¬ç«‹ç±»åˆ«ï¼‰ã€‚ä½†ï¼Œè®¸å¤šç°å®ä»»åŠ¡æ¶‰åŠè¿ç»­ä¸”æ— é™çš„ç›®æ ‡å€¼ã€‚å¦‚ï¼Œåœ¨è§†è§‰åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®ä»–ä»¬çš„å¤–è²Œæ¥æ¨æ–­ä»–ä»¬çš„å¹´é¾„ï¼Œå…¶ä¸­å¹´é¾„æ˜¯è¿ç»­å€¼å¹¶ä¸”å¯èƒ½é«˜åº¦ä¸å¹³è¡¡ã€‚æŠŠä¸åŒå¹´é¾„è§†ä¸ºç‹¬ç«‹ç±»åˆ«ä¸å¤ªå¯èƒ½äº§ç”Ÿæœ€ä½³ç»“æœï¼Œå› ä¸ºå®ƒæ²¡æœ‰åˆ©ç”¨å¹´é¾„ç›¸è¿‘çš„äººçš„ç›¸ä¼¼æ€§ã€‚ç±»ä¼¼çš„é—®é¢˜ä¹Ÿå‘ç”Ÿåœ¨åŒ»ç–—åº”ç”¨ä¸­ï¼Œå› ä¸ºåŒ…æ‹¬å¿ƒç‡ã€è¡€å‹å’Œè¡€æ°§é¥±å’Œåº¦åœ¨å†…çš„è®¸å¤šå¥åº·æŒ‡æ ‡æ˜¯è¿ç»­çš„ï¼Œå¹¶ä¸”åœ¨æ‚£è€…ç¾¤ä½“ä¸­é€šå¸¸æ˜¯åæ€åˆ†å¸ƒã€‚&lt;/p>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758.png" alt="alt" title="Figure 1. Deep Imbalanced Regression (DIR) aims to learn from imbalanced data with continuous targets, tackle potential missing data for certain regions, and generalize to the entire target range.å›¾ä¸€Â  Â DIRæ—¨åœ¨ä»å¸¦è¿ç»­ç›®æ ‡çš„ä¸å¹³è¡¡æ•°æ®ä¸­å­¦ä¹ ï¼Œè§£å†³æŸäº›åŒºåŸŸçš„æ½œåœ¨ç¼ºå¤±æ•°æ®å¹¶æ³›åŒ–åˆ°æ•´ä¸ªç›®æ ‡èŒƒå›´">&lt;/p>
&lt;style type="text/css" rel="stylesheet">
figure {
font-size: 13px;
font-weight: normal;
color: #8c8c8c;
text-align: center;
}
&lt;/style>
&lt;figure >Figure 1. Deep Imbalanced Regression (DIR) aims to learn from imbalanced data with continuous targets, tackle potential missing data for certain regions, and generalize to the entire target range.
&lt;p>å›¾ä¸€Â  Â DIRæ—¨åœ¨ä»å¸¦è¿ç»­ç›®æ ‡çš„ä¸å¹³è¡¡æ•°æ®ä¸­å­¦ä¹ ï¼Œè§£å†³æŸäº›åŒºåŸŸçš„æ½œåœ¨ç¼ºå¤±æ•°æ®å¹¶æ³›åŒ–åˆ°æ•´ä¸ªç›®æ ‡èŒƒå›´&lt;/figure>&lt;/p>
&lt;p>â€ƒâ€ƒIn this work, we systematically investigate Deep Imbalanced Regression (DIR) arising in real-world settings (see Fig. 1). We define DIR as learning continuous targets from natural imbalanced data, dealing with potentially missing data for certain target values, and generalizing to a test set that is balanced over the entire range of continuous target values. This definition is analogous to the class imbalance problem (&lt;a href="https://arxiv.org/abs/1904.05160">Liu et al., 2019&lt;/a>), but focuses on the continuous setting.&lt;br>
â€ƒâ€ƒåœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç³»ç»Ÿåœ°ç ”ç©¶äº†åœ¨ç°å®ä¸­å‡ºç°çš„DIRã€‚æˆ‘ä»¬æŠŠDIRå®šä¹‰ä¸ºä»è‡ªç„¶çš„ä¸å¹³è¡¡æ•°æ®ä¸­å­¦ä¹ åˆ°è¿ç»­çš„ç›®æ ‡ï¼Œç„¶åå¤„ç†æŸäº›ç›®æ ‡å€¼æ½œåœ¨ç¼ºå¤±æ•°æ®ï¼Œå¹¶æ³›åŒ–åˆ°æ•´ä¸ªè¿ç»­ç›®æ ‡å€¼èŒƒå›´å†…æ˜¯å¹³è¡¡çš„æµ‹è¯•é›†ã€‚è¿™ä¸ªå®šä¹‰ç±»ä¼¼äºç±»ä¸å¹³è¡¡é—®é¢˜ï¼Œä½†ä¾§é‡äºè¿ç»­ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒDIR brings new challenges distinct from its classification counterpart. First, given continuous (potentially infinite) target values, the hard boundaries between classes no longer exist, causing ambiguity when directly applying traditional imbalanced classification methods such as re-sampling and re-weighting. Moreover, continuous labels inherently possess a meaningful distance between targets, which has implication for how we should interpret data imbalance. For example, say two target labels $t1$ and $t2$ have a small number of observations in training data. However, $t1$ is in a highly represented neighborhood (i.e., there are many samples in the range $\left [ t1- \bigtriangleup , t1+ \bigtriangleup \right ]$), while $t2$ is in a weakly represented neighborhood. In this case,$t1$ does not suffer from the same level of imbalance as $t2$. Finally, unlike classification, certain target values may have no data at all, which motivates the need for target extrapolation &amp;amp; interpolation.
â€ƒâ€ƒDIRå¸¦æ¥äº†ä¸åŒäºå…¶å®ƒåˆ†ç±»ä»»åŠ¡çš„æ–°æŒ‘æˆ˜ã€‚é¦–å…ˆï¼Œç»™å®šäº†è¿ç»­ï¼ˆå¯èƒ½æ— é™çš„ï¼‰ç›®æ ‡å€¼ï¼Œç±»é—´çš„è¾¹ç•Œä¸å†å­˜åœ¨ï¼Œä»è€Œç›´æ¥ä½¿ç”¨ä¼ ç»Ÿçš„ä¸å¹³è¡¡åˆ†ç±»æ–¹æ³•ï¼ˆå¦‚é‡é‡‡æ ·å’Œé‡åŠ æƒï¼‰æ—¶ä¼šå¯¼è‡´æ­§ä¹‰ã€‚æ­¤å¤–ï¼Œè¿ç»­æ ‡ç­¾åœ¨ç›®æ ‡ä¹‹é—´æœ¬èº«å…·æœ‰æœ‰æ„ä¹‰çš„distanceï¼Œè¿™å¯¹æˆ‘ä»¬å¦‚ä½•è§£é‡Šæ•°æ®ä¸å¹³è¡¡æœ‰å½±å“ã€‚å¦‚ï¼Œå‡è®¾ä¸¤ä¸ªç›®æ ‡æ ‡ç­¾$t1$å’Œ$t2$åœ¨è®­ç»ƒé›†ä¸­åªæœ‰å°éƒ¨åˆ†çš„è§‚æµ‹å€¼ã€‚ç„¶è€Œ$t1$åœ¨ä¸€ä¸ªç›¸å½“é«˜çš„è¡¨ç¤ºåŸŸå†…ï¼ˆå³ï¼Œåœ¨$\left [ t1- \bigtriangleup , t1+ \bigtriangleup \right ]$ å†…æœ‰è®¸å¤šæ ·æœ¬ï¼Œè€Œ$t2$åœ¨ä¸€ä¸ªä½çš„è¡¨ç¤ºåŸŸå†…ï¼‰åœ¨è¿™ç§ä¾‹å­ä¸‹ï¼Œ$t1$ä¸ä¼šé­å—ä¸$t2$ç›¸åŒç¨‹åº¦çš„ä¸å¹³è¡¡ã€‚æœ€åï¼Œä¸åŒäºåˆ†ç±»ä»»åŠ¡ï¼ŒæŸäº›ç›®æ ‡å€¼å¯èƒ½æ ¹æœ¬æ²¡æœ‰æ•°æ®ï¼Œè¿™æ¿€å‘äº†å¯¹ç›®æ ‡extrapolation å’Œ interpolationçš„éœ€æ±‚ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒIn this paper, we propose two simple yet effective methods for addressing DIR: label distribution smoothing (LDS) and feature distribution smoothing (FDS). A key idea underlying both approaches is to leverage the similarity between nearby targets by employing a kernel distribution to perform explicit distribution smoothing in the label and feature spaces. Both techniques can be easily embedded into existing deep networks and allow optimization in an end-to-end fashion. We verify that our techniques not only successfully calibrate for the intrinsic underlying imbalance, but also provide large and consistent gains when combined with other methods. To support practical evaluation of imbalanced regression, we curate and benchmark large-scale DIR datasets for common real-world tasks in computer vision, natural language processing, and healthcare. They range from single-value prediction such as age, text similarity score, health condition score, to dense-value prediction such as depth. We further set up benchmarks for proper DIR performance evaluation.&lt;br>
â€ƒâ€ƒåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºä¸¤ä¸ªç®€å•é«˜æ•ˆçš„æ–¹æ³•æ¥è§£å†³DIRï¼šæ ‡ç­¾åˆ†å¸ƒå¹³æ»‘å’Œç‰¹å¾åˆ†å¸ƒå¹³æ»‘ã€‚ä¸¤ä¸ªæ–¹æ³•çš„å…³é”®æ€æƒ³æ˜¯é€šè¿‡ä½¿ç”¨æ ¸åˆ†å¸ƒåœ¨æ ‡ç­¾å’Œç‰¹å¾ç©ºé—´ä¸­æ‰§è¡Œæ˜¾å¼çš„åˆ†å¸ƒå¹³æ»‘æ¥åˆ©ç”¨ä¸´è¿‘ç›®æ ‡é—´çš„ç›¸ä¼¼æ€§ã€‚æ¯ä¸ªæ–¹æ³•éƒ½èƒ½è½»æ˜“åµŒå…¥åˆ°ç°åœ¨çš„æ·±åº¦ç½‘ç»œä¸­å¹¶å…è®¸ä»¥ç«¯åˆ°ç«¯çš„æ–¹å¼è¿›è¡Œä¼˜åŒ–ã€‚æˆ‘ä»¬éªŒè¯äº†æˆ‘ä»¬çš„æ–¹æ³•ä¸ä»…æˆåŠŸåœ°æ ¡å‡†äº†å›ºæœ‰çš„æ½œåœ¨ä¸å¹³è¡¡ï¼Œè€Œä¸”ä¸å…¶ä»–æ–¹æ³•ç»“åˆæ—¶æä¾›äº†å·¨å¤§è€Œä¸€è‡´çš„æ”¶ç›Šã€‚ä¸ºäº†æ”¯æŒä¸å¹³è¡¡å›å½’çš„å®é™…è¯„ä¼°ï¼Œæˆ‘ä»¬ä¸ºè®¡ç®—æœºè§†è§‰ã€è‡ªç„¶è¯­è¨€å¤„ç†å’ŒåŒ»ç–—ä¸­çš„å¸¸è§ç°å®ä»»åŠ¡ä¸­æ•´ç†äº†å’ŒåŸºå‡†æµ‹è¯•äº†å¤§è§„æ¨¡ DIR æ•°æ®é›†ã€‚è¿™äº›æ•°æ®é›†ä»å•å€¼é¢„æµ‹ï¼ˆå¦‚å¹´é¾„ï¼Œæ–‡æœ¬ç›¸ä¼¼åº¦å¾—åˆ†å’Œå¥åº·çŠ¶å†µå¾—åˆ†ï¼‰åˆ°å¯†é›†å€¼çš„é¢„æµ‹ï¼ˆå¦‚æ·±åº¦ï¼‰ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥ä¸ºåˆé€‚çš„DIRæ€§èƒ½è¯„ä¼°å»ºç«‹äº†åŸºå‡†ã€‚&lt;/p>
&lt;p>Our contributions are as follows:&lt;/p>
&lt;ul>
&lt;li>We formally define the DIR task as learning from imbalanced data with continuous targets, and generalizing to the entire target range. DIR provides thorough and unbiased evaluation of learning algorithms in practical settings.&lt;/li>
&lt;li>We develop two simple, effective, and interpretable algorithms for DIR, LDS and FDS, which exploit the similarity between nearby targets in both label and feature space.&lt;/li>
&lt;li>We curate benchmark DIR datasets in different domains: computer vision, natural language processing, and healthcare. We set up strong baselines as well as benchmarks for proper DIR performance evaluation.&lt;/li>
&lt;li>Extensive experiments on large-scale DIR datasets verify the consistent and superior performance of our strategies.&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬çš„è´¡çŒ®å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>æˆ‘ä»¬å°†DIRä»»åŠ¡å®šä¹‰ä¸ºä»å¸¦è¿ç»­ç›®æ ‡çš„ä¸å¹³è¡¡æ•°æ®ä¸­å­¦ä¹ ï¼Œå¹¶æ³›åŒ–åˆ°æ•´ä¸ªç›®æ ‡èŒƒå›´å†…ã€‚DIRåœ¨å®é™…ç¯å¢ƒä¸­å¯¹å­¦ä¹ ç®—æ³•è¿›è¡Œå®Œå…¨çš„å…¬æ­£çš„è¯„ä¼°ã€‚&lt;/li>
&lt;li>æˆ‘ä»¬ä¸ºDIRã€LDSå’ŒFDSè®¾è®¡äº†ä¸¤ä¸ªç®€å•é«˜æ•ˆä¸”å¯è§£é‡Šçš„ç®—æ³•ï¼Œç®—æ³•åˆ©ç”¨äº†æ ‡ç­¾å’Œç‰¹å¾ç©ºé—´ä¸­ä¸´è¿‘ç›®æ ‡çš„ç›¸ä¼¼æ€§&lt;/li>
&lt;li>æˆ‘ä»¬åœ¨ä¸åŒé¢†åŸŸç®¡ç†DIRåŸºå‡†æ•°æ®é›†ã€‚æˆ‘ä»¬ä¸ºDIRæ€§èƒ½è¯„ä¼°å»ºç«‹äº†å¼ºå¤§çš„åŸºçº¿å’ŒåŸºå‡†ã€‚&lt;/li>
&lt;li>åœ¨å¤§è§„æ¨¡DIRæ•°æ®é›†ä¸Šè¿›è¡Œçš„å¤§é‡å®éªŒéªŒè¯äº†æˆ‘ä»¬æ–¹æ³•çš„ä¸€è‡´æ€§å’Œå“è¶Šçš„æ€§èƒ½ã€‚
&lt;a name="iAF2C">&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="2-related-work">2. Related Work&lt;/h2>
&lt;p>â€ƒâ€ƒ&lt;strong>Imbalanced Classification.&lt;/strong> Much prior work has focused on the imbalanced classification problem (also referred to as long-tailed recognition (&lt;a href="https://arxiv.org/abs/1904.05160">Liu et al., 2019&lt;/a>)). Past solutions can be divided into data-based and model-based solutions: Data-based solutions either over-sample the minority class or under-sample the majority (&lt;a href="https://www.jair.org/index.php/jair/article/view/10302">Chawla et al., 2002&lt;/a>; &lt;a href="https://ieeexplore.ieee.org/document/6793456">GarcÂ´Ä±a &amp;amp; Herrera, 2009&lt;/a>; &lt;a href="https://ieeexplore.ieee.org/document/4633969">He et al., 2008&lt;/a>). For example, SMOTE generates synthetic samples for minority classes by linearly interpolating samples in the same class (&lt;a href="https://www.jair.org/index.php/jair/article/view/10302">Chawla et al., 2002&lt;/a>). Model-based solutions include re-weighting or adjusting the loss function to compensate for class imbalance (&lt;a href="https://arxiv.org/abs/1906.07413">Cao et al., 2019&lt;/a>; &lt;a href="https://arxiv.org/abs/1901.05555">Cui et al., 2019&lt;/a>; &lt;a href="https://arxiv.org/abs/1804.10851">Dong et al., 2019&lt;/a>; &lt;a href="https://ieeexplore.ieee.org/document/7780949">Huang et al., 2016&lt;/a>; &lt;a href="https://arxiv.org/abs/1806.00194">2019&lt;/a>), and leveraging relevant learning paradigms, including transfer learning (&lt;a href="https://arxiv.org/abs/1803.09014">Yin et al., 2019&lt;/a>), metric learning (&lt;a href="https://arxiv.org/abs/1611.08976">Zhang et al., 2017&lt;/a>), meta-learning (&lt;a href="https://arxiv.org/abs/1902.07379">Shu et al., 2019&lt;/a>), and two-stage training (&lt;a href="https://arxiv.org/abs/1910.09217">Kang et al., 2020&lt;/a>). Recent studies have also discovered that semi-supervised learning and selfsupervised learning lead to better imbalanced classification results (&lt;a href="https://arxiv.org/abs/2006.07529?amp=1">Yang &amp;amp; Xu, 2020&lt;/a>). In contrast to these past work, we identify the limitations of applying class imbalance methods to regression problems, and introduce new techniques particularly suitable for learning continuous target values.
â€ƒâ€ƒä¸å¹³è¡¡åˆ†ç±»ã€‚å¤§é‡çš„å…ˆå‰å·¥ä½œéƒ½é›†ä¸­äºä¸å¹³è¡¡åˆ†ç±»é—®é¢˜ï¼ˆä¹Ÿç§°ä¸ºé•¿å°¾è¯†åˆ«é—®é¢˜ï¼‰ä¸Šã€‚è¿‡å»çš„è§£å†³æ–¹æ¡ˆå¯ä»¥åˆ†ä¸ºåŸºäºæ•°æ®å’ŒåŸºäºæ¨¡å‹ï¼šåŸºäºæ•°æ®çš„æ–¹æ¡ˆè¦ä¹ˆåœ¨å°‘æ•°ç±»ä¸Šè¿‡é‡‡æ ·æˆ–åœ¨å¤§å¤šæ•°ä¸Šç¼ºé‡‡æ ·ã€‚å¦‚ï¼ŒSMOTEä¸ºå°‘æ•°ç±»åˆ«ç”Ÿæˆäººé€ æ ·æœ¬é€šè¿‡åœ¨ç›¸åŒç±»åˆ«çš„æ ·æœ¬ä¸­çº¿æ€§æ’å€¼ã€‚åŸºäºæ¨¡å‹çš„æ–¹æ¡ˆåŒ…æ‹¬é‡åŠ æƒæˆ–è°ƒæ•´æŸå¤±å‡½æ•°æ¥å¼¥è¡¥ç±»åˆ«ä¸å¹³è¡¡ï¼ˆyoloçš„å¤§å°ç›®æ ‡çš„è¶…å‚æ•°ï¼‰ï¼Œå¹¶åˆ©ç”¨ç›¸å…³çš„å­¦ä¹ èŒƒå¼ï¼ŒåŒ…æ‹¬è¿ç§»å­¦ä¹ ã€åº¦é‡å­¦ä¹ ã€å…ƒå­¦ä¹ å’ŒäºŒé˜¶æ®µè®­ç»ƒã€‚æœ€è¿‘ç ”ç©¶ä¹Ÿå‘ç°åŠç›‘ç£å­¦ä¹ å’Œè‡ªç›‘ç£å­¦ä¹ ä¼šäº§ç”Ÿä¸å¹³è¡¡åˆ†ç±»é—®é¢˜çš„å¥½ç»“æœã€‚ä¸è¿‡å»å·¥ä½œç›¸æ¯”ï¼Œæˆ‘ä»¬å‘ç°åœ¨å›å½’é—®é¢˜ä¸Šåº”ç”¨ç±»åˆ«ä¸å¹³è¡¡æ–¹æ³•çš„å±€é™æ€§ï¼Œå¹¶å¼•å…¥ç‰¹åˆ«é€‚åˆå­¦ä¹ è¿ç»­ç›®æ ‡å€¼çš„æ–°æ–¹æ³•ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒ&lt;strong>Imbalanced Regression.&lt;/strong> Regression over imbalanced data is not as well explored. Most of the work on this topic is a direct adaptation of the SMOTE algorithm to regression scenarios (Branco et al., 2017; 2018; Torgo et al., 2013). Synthetic samples are created for pre-defined rare target regions by either directly interpolating both inputs and targets (Torgo et al., 2013), or using Gaussian noise augmentation (Branco et al., 2017). A bagging-based ensemble method that incorporates multiple data pre-processing steps has also been introduced (Branco et al., 2018). However, there exist several intrinsic drawbacks for these methods. First, they fail to take the distance between targets into account, and rather heuristically divide the dataset into rare and frequent sets, then plug in classification-based methods. Moreover, modern data is of extremely high dimension (e.g., images and physiological signals); linear interpolation of two samples of such data does not lead to meaningful new synthetic samples. Our methods are intrinsically different from past work in their approach. They can be combined with existing methods to improve their performance, as we show in Sec. 4. Further, our approaches are tested on large-scale real-world datasets in computer vision, NLP, and healthcare.&lt;br>
â€ƒâ€ƒä¸å¹³è¡¡å›å½’ã€‚åœ¨ä¸å¹³è¡¡æ•°æ®ä¸Šå›å½’ä¹Ÿæ²¡æœ‰å¾ˆå¥½çš„æ¢ç´¢è¿‡ã€‚å¤§å¤šæ•°çš„å·¥ä½œæ˜¯SMOTEç®—æ³•çš„ç›´æ¥è°ƒæ•´åˆ°å›å½’åœºæ™¯ã€‚é€šè¿‡ç›´æ¥åœ¨è¾“å…¥å’Œç›®æ ‡ä¸Šæ’å€¼æˆ–ä½¿ç”¨é«˜æ–¯å™ªå£°å¢å¼ºæŠ€æœ¯ï¼Œæ¥ä¸ºé¢„å®šä¹‰çš„ç¨€å°‘ç›®æ ‡åŒºåŸŸï¼ˆæ ·æœ¬å¾ˆå°‘çš„åœ°æ–¹ï¼‰åˆ›é€ äººé€ æ ·æœ¬ã€‚è¿˜å¼•å…¥ä¸€ä¸ªåŸºäºbaggingçš„é›†æˆæ–¹æ³•ï¼Œå®ƒåŒ…å«å¤šä¸ªæ•°æ®é¢„å¤„ç†æ­¥éª¤ã€‚ä½†æ˜¯ï¼Œè¿™äº›æ–¹æ³•å­˜åœ¨å‡ ä¸ªå›ºæœ‰çš„ç¼ºé™·ã€‚é¦–å…ˆï¼Œå®ƒä»¬æ²¡æœ‰è€ƒè™‘ç›®æ ‡é—´çš„distanceï¼Œè€Œæ˜¯å¯å‘å¼åœ°æŠŠæ•°æ®é›†åˆ†æˆrareé›†å’Œfrequenté›†ï¼Œç„¶åæ’å…¥åŸºäºåˆ†ç±»çš„æ–¹æ³•ã€‚æ­¤å¤–ï¼Œæé«˜ç»´åº¦çš„ç°ä»£æ•°æ®ï¼ˆå¦‚ï¼Œå›¾ç‰‡å’Œç”Ÿç†ä¿¡å·ï¼‰å¯¹æ­¤ç±»æ•°æ®çš„ä¸¤ä¸ªæ ·æœ¬è¿›è¡Œçº¿æ€§æ’å€¼ä¸ä¼šäº§ç”Ÿæœ‰æ„ä¹‰çš„æ–°åˆæˆæ ·æœ¬ã€‚æˆ‘ä»¬çš„æ–¹æ³•æœ¬è´¨ä¸ŠåŒå…ˆå‰æ–¹æ³•ä¸åŒã€‚å®ƒä»¬å¯ä»¥ç»“åˆç°æœ‰æ–¹æ³•æ¥æé«˜æ€§èƒ½ï¼Œå¦‚Sec.4æ‰€ç¤ºã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨è§†è§‰ã€NLPå’ŒåŒ»ç–—çš„å¤§è§„æ¨¡æ•°æ®é›†ä¸Šæµ‹è¯•è¿‡ã€‚
&lt;a name="pchzD">&lt;/a>&lt;/p>
&lt;h2 id="3-methods">3. Methods&lt;/h2>
&lt;p>â€ƒâ€ƒ&lt;strong>Problem Setting.&lt;/strong> $&lt;code> \left\{\left(x_i,y_i\right)\right\}_{i=1}^N&lt;/code>$ be a training set, where$&lt;code>x_i\in \mathbb{R} ^d &lt;/code>$ denotes the input and$y_i\in \mathbb{R}$ is the label, which is a continuous target. We introduce an additional structure for the label space $\mathcal{Y}$ , where we divide $\mathcal{Y}$ into $B$ &lt;a href="https://datavizguru.com/tableau/groups-vs-sets-vs-bins-vs-parameters/">groups (bins)&lt;/a> with equal intervals, i.e., $\left [ y_0, y_1\right ), \left [ y_1, y_2\right ), \cdots , \left [ y_{B-1}, y_B\right )$. Throughout the paper, we use $b \in \mathcal{B}$ to denote the group index of the target value, where $\mathcal{B} = \left { 1, \dots , B\right } \subset \mathbb{Z}^+$ is the index space. In practice, the defined bins reflect a minimum resolution we care for grouping data in a regression task. For instance, in age estimation, we could define $\delta y \triangleq y_{b+1}-y_{b}=1$, showing a minimum age difference of 1 is of interest. Finally, we denote $\mathrm {z} =f\left ( x;\theta \right )$as the feature for $\mathrm {x}$, where $f\left ( x;\theta \right )$ is parameterized by a deep neural network model with parameter $\theta$. The final prediction $\hat{y}$ is given by a regression function $g(\cdot)$ that operates over $\mathbf{ \mathrm {z}}$.&lt;br>
â€ƒâ€ƒé—®é¢˜è®¾ç½®ã€‚è®© $\left { \left ( x_i, y_i \right ) \right }^N_{i=1}$ä½œä¸ºè®­ç»ƒé›†ï¼Œå…¶ä¸­$x_i\in \mathbb{R} ^d$è¡¨ç¤ºè¾“å…¥ï¼Œ$y_i\in \mathbb{R}$è¡¨ç¤ºæ ‡ç­¾ï¼Œæ˜¯è¿ç»­ç›®æ ‡å€¼ã€‚æˆ‘ä»¬ä¸ºæ ‡ç­¾ç©ºé—´$\mathcal{Y}$å¼•å…¥é¢å¤–çš„ç»“æ„ï¼Œå…¶ä¸­æˆ‘ä»¬æŠŠ$\mathcal{Y}$åˆ†æˆç­‰é—´éš”çš„Bç»„ï¼ˆç®±ï¼‰ï¼Œå³$\left [ y_0, y_1\right ), \left [ y_1, y_2\right ), \cdots , \left [ y_{B-1}, y_B\right )$ã€‚åœ¨æ•´ä¸ªæ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨$b \in \mathcal{B}$è¡¨ç¤ºç›®æ ‡å€¼çš„ç»„ç´¢å¼•ï¼Œå…¶ä¸­ $\mathcal{B} = \left { 1, \dots , B\right } \subset \mathbb{Z}^+$æ˜¯ç´¢å¼•ç©ºé—´ã€‚å®é™…ä¸Šï¼Œå®šä¹‰çš„binsååº”äº†æˆ‘ä»¬åœ¨å›å½’ä»»åŠ¡ä¸­å¯¹æ•°æ®åˆ†ç»„æ—¶å…³å¿ƒçš„æœ€å°åˆ†è¾¨ç‡ã€‚ä¾‹å¦‚ï¼Œåœ¨å¹´é¾„è¯„ä¼°ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰$\delta y \triangleq y_{b+1}-y_{b}=1$ï¼Œè¡¨æ˜æœ€å°å¹´é¾„å·®ä¸º1æ˜¯æœ‰ç”¨çš„ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬æŠŠ $\mathrm {z} =f\left ( x;\theta \right )$è¡¨ç¤ºxçš„ç‰¹å¾ï¼Œå…¶ä¸­$f\left ( x;\theta \right )$æ˜¯é€šè¿‡å…·æœ‰å‚æ•°$\theta$çš„æ·±åº¦ç¥ç»ç½‘ç»œå‚æ•°åŒ–çš„ã€‚æœ€ç»ˆçš„é¢„æµ‹ $\hat{y}$æ˜¯é€šè¿‡ ä¸€ä¸ªåœ¨$\mathbf{ \mathrm {z}}$ä¸Šè¿è¡Œçš„å›å½’å‡½æ•°$g(\cdot)$ç»™å‡ºã€‚
&lt;a name="jWbVx">&lt;/a>&lt;/p>
&lt;h3 id="31-label-distribution-smoothing">3.1. Label Distribution Smoothing&lt;/h3>
&lt;p>â€ƒâ€ƒWe start by showing an example to demonstrate the difference between classification and regression when imbalance comes into the picture.&lt;br>
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-1.png" alt="image.png" title="Figure 2. Comparison on the test error distribution (bottom) using same training label distribution (top) on two different datasets: (a) CIFAR-100, a classification task with categorical label space. (b) IMDB-WIKI, a regression task with continuous label space.å›¾äºŒã€‚åœ¨ä¸¤ä¸ªä¸åŒçš„æ•°æ®é›†ä¸Šä½¿ç”¨ç›¸åŒçš„è®­ç»ƒæ ‡ç­¾åˆ†å¸ƒæ¥æ¯”è¾ƒæµ‹è¯•erroråˆ†å¸ƒ(bottom)ï¼š(a)CIFAR-100ï¼Œå…·æœ‰åˆ†ç±»çš„æ ‡ç­¾ç©ºé—´çš„åˆ†ç±»ä»»åŠ¡ã€‚(b)IMDB-WIKIï¼Œå…·æœ‰è¿ç»­æ ‡ç­¾ç©ºé—´çš„å›å½’ä»»åŠ¡">&lt;/p>
&lt;figure>Figure 2. Comparison on the test error distribution (bottom) using same training label distribution (top) on two different datasets: (a) CIFAR-100, a classification task with categorical label space. (b) IMDB-WIKI, a regression task with continuous label space.
&lt;p>å›¾äºŒã€‚åœ¨ä¸¤ä¸ªä¸åŒçš„æ•°æ®é›†ä¸Šä½¿ç”¨ç›¸åŒçš„è®­ç»ƒæ ‡ç­¾åˆ†å¸ƒæ¥æ¯”è¾ƒæµ‹è¯•erroråˆ†å¸ƒ(bottom)ï¼š(a)CIFAR-100ï¼Œå…·æœ‰åˆ†ç±»çš„æ ‡ç­¾ç©ºé—´çš„åˆ†ç±»ä»»åŠ¡ã€‚(b)IMDB-WIKIï¼Œå…·æœ‰è¿ç»­æ ‡ç­¾ç©ºé—´çš„å›å½’ä»»åŠ¡&lt;/figure>&lt;/p>
&lt;p>â€ƒâ€ƒ&lt;strong>Motivating Example.&lt;/strong> We employ two datasets: (1) CIFAR100 (Krizhevsky et al., 2009), which is a 100-class classification dataset, and (2) the IMDB-WIKI dataset (Rothe et al., 2018), which is a large-scale image dataset for age estimation from visual appearance. The two datasets have intrinsically different label space: CIFAR-100 exhibits categorical label space where the target is class index, while IMDB-WIKI has a continuous label space where the target is age. We limit the age range to $0 \sim 99$ so that the two datasets have the same label range, and subsample them to simulate data imbalance, while ensuring they have exactly the same label density distribution (Fig. 2). We make both test sets balanced. We then train a plain ResNet-50 model on the two datasets, and plot their test error distributions.&lt;br>
â€ƒâ€ƒæˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªæ•°æ®é›†ï¼šCIFAR100ï¼Œå®ƒæ˜¯ä¸€ä¸ª100ç±»çš„åˆ†ç±»æ•°æ®é›†ï¼›IMDB-WIKIï¼Œå®ƒæ˜¯ä»å¤–è²Œæ¥ä¼°è®¡å¹´é¾„çš„å¤§è§„æ¨¡å›¾ç‰‡æ•°æ®é›†ã€‚è¿™ä¸¤ä¸ªæ•°æ®é›†å…·æœ‰å®Œå…¨ä¸åŒçš„æ ‡ç­¾ç©ºé—´ï¼šCIFAR100çš„ç±»åˆ«æ ‡ç­¾ç©ºé—´ä¸­ç›®æ ‡å€¼æ˜¯ç±»åˆ«ç´¢å¼•ï¼Œè€ŒIMDB-WIKIæ˜¯ç›®æ ‡å€¼æ˜¯å¹´é¾„çš„è¿ç»­æ ·æœ¬ç©ºé—´æˆ‘ä»¬é™åˆ¶å¹´é¾„åˆ°0~99ä½¿å¾—ä¸¤ä¸ªæ•°æ®é›†æœ‰ç›¸åŒçš„æ ‡ç­¾èŒƒå›´ï¼Œå¹¶ä¸”ä¸‹é‡‡æ ·æ¥æ¨¡æ‹Ÿæ•°æ®ä¸å¹³è¡¡ï¼ŒåŒæ—¶ä¿æŒå®ƒä»¬å…·æœ‰ç›¸åŒçš„æ ‡ç­¾å¯†åº¦åˆ†å¸ƒï¼ˆå›¾2ï¼‰ã€‚æˆ‘ä»¬ä¿æŒä¸¤ä¸ªæµ‹è¯•é›†å¹³æ»‘ã€‚ç„¶ååœ¨ä¸¤ä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒplain ResNet-50ï¼Œå¹¶ç»˜åˆ¶å‡ºå®ƒä»¬çš„æµ‹è¯•è¯¯å·®åˆ†å¸ƒã€‚&lt;/p>
&lt;p>â€ƒâ€ƒWe observe from Fig. 2(a) that the error distribution correlates with label density distribution. Specifically, the test error as a function of class index has a high negative Pearson correlation with the label density distribution (i.e., -0.76) in the categorical label space. The phenomenon is expected, as majority classes with more samples are better learned than minority classes. Interestingly however, as Fig. 2(b) shows, the error distribution is very different for IMDB-WIKI with continuous label space, even when the label density distribution is the same as CIFAR-100. In particular, the error distribution is much smoother and no longer correlates well with the label density distribution (-0.47).
â€ƒâ€ƒåœ¨å›¾2ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°è¯¯å·®åˆ†å¸ƒä¸æ ‡ç­¾å¯†åº¦åˆ†å¸ƒç›¸å…³ã€‚ç‰¹åˆ«çš„ï¼Œä½œä¸ºä¸€ä¸ªç±»åˆ«ç´¢å¼•çš„å‡½æ•°ï¼Œæµ‹è¯•è¯¯å·®ä¸åˆ†ç±»æ ‡ç­¾ç©ºé—´çš„æ ‡ç­¾å¯†åº¦åˆ†å¸ƒä¸­æœ‰ç‰¹åˆ«é«˜çš„è´ŸPearsonç›¸å…³æ€§ï¼ˆå³-0.76ï¼‰ã€‚è¿™ç§ç°è±¡æ˜¯é¢„æœŸçš„ï¼Œå› ä¸ºå¤šæ•°ç±»æœ‰æ›´å¤šçš„æ ·æœ¬æ¯”å°‘æ•°ç±»æ›´æ˜“è®­ç»ƒã€‚ä½†æœ‰è¶£çš„æ˜¯ï¼Œå¦‚å›¾2(b)æ‰€ç¤ºï¼Œè¯¯å·®åˆ†å¸ƒåœ¨IMDB-WIKIååˆ†ä¸åŒï¼Œå³ä½¿å½“æ ‡ç­¾å¯†åº¦ç©ºé—´ä¸CIFAR-100ç›¸åŒã€‚ç‰¹åˆ«æ˜¯è¯¯å·®åˆ†å¸ƒæ›´å¹³æ»‘å¹¶ä¸”ä¸å†è·Ÿæ ‡ç­¾å¯†åº¦åˆ†å¸ƒç›¸å…³ï¼ˆ-0.47ï¼‰ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒThe reason why this example is interesting is that all imbalanced learning methods, directly or indirectly, operate by compensating for the imbalance in the empirical label density distribution. This works well for class imbalance, but for continuous labels the empirical density does not accurately reflect the imbalance as seen by the neural network. Hence, compensating for data imbalance based on empirical label density is inaccurate for the continuous label space.
è¿™ä¸ªä¾‹å­çš„åŸå› æ˜¯æ‰€æœ‰ä¸å¹³è¡¡å­¦ä¹ æ–¹æ³•éƒ½ç›´æ¥æˆ–é—´æ¥çš„é€šè¿‡æ”¹å–„ç»éªŒæ ‡ç­¾å¯†åº¦åˆ†å¸ƒçš„ä¸å¹³è¡¡æ¥æ“ä½œã€‚è¿™å¯¹äºç±»ä¸å¹³è¡¡æœ‰æ•ˆï¼Œä½†å¯¹äºè¿ç»­æ ‡ç­¾ï¼Œç»éªŒå¯†åº¦ä¸èƒ½å‡†ç¡®ååº”é€šè¿‡ç¥ç»ç½‘ç»œçœ‹åˆ°çš„ä¸å¹³è¡¡ã€‚å› æ­¤ï¼Œå¯¹äºè¿ç»­æ ‡ç­¾ç©ºé—´ï¼ŒåŸºäºç»éªŒæ ‡ç­¾å¯†åº¦æ¥æ”¹å–„æ•°æ®ä¸å¹³è¡¡æ˜¯ä¸æ­£ç¡®çš„&lt;/p>
&lt;blockquote>
&lt;p>â€ƒâ€ƒAn empirical distribution is &lt;strong>one for which each possible event is assigned a probability derived from experimental observation&lt;/strong>. It is assumed that the events are independent and the sum of the probabilities is 1.ä¹Ÿå°±æ˜¯ç›´æ¥è§‚æµ‹åˆ°çš„æ ‡ç­¾å¯†åº¦ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>â€ƒâ€ƒ&lt;strong>LDS for Imbalanced Data Density Estimation.&lt;/strong> The above example shows that, in the continuous case, the empirical label distribution does not reflect the real label density distribution. This is because of the dependence between data samples at nearby labels (e.g., images of close ages). In fact, there is a significant literature in statistics on how to estimate the expected density in such cases (Parzen, 1962). Thus, Label Distribution Smoothing (LDS) advocates the use of kernel density estimation to learn the effective imbalance in datasets that corresponds to continuous targets.
&lt;a href="https://www.cnblogs.com/ljwgis/p/15471550.html">ç”¨äºä¸å¹³è¡¡æ•°æ®å¯†åº¦ä¼°è®¡çš„LDS&lt;/a>ã€‚ä¸Šè¿°ä¾‹å­è¡¨æ˜ï¼Œåœ¨è¿ç»­æƒ…å†µä¸‹ï¼Œç»éªŒæ ‡ç­¾å¯†åº¦ä¸èƒ½åæ˜ çœŸå®æ ‡ç­¾å¯†åº¦åˆ†å¸ƒã€‚è¿™æ˜¯å› ä¸ºç›¸è¿‘æ ‡ç­¾çš„æ•°æ®æ ·æœ¬ä¹‹é—´å­˜åœ¨ä¾èµ–æ€§ï¼ˆå¦‚å¹´é¾„ç›¸è¿‘çš„å›¾ç‰‡ï¼‰ã€‚äº‹å®ä¸Šï¼Œå…³äºå¦‚ä½•ä¼°è®¡åœ¨è¿™ç§æƒ…å†µä¸‹çš„é¢„æœŸå¯†åº¦ï¼Œç»Ÿè®¡å­¦æœ‰å¤§é‡çš„ç»Ÿè®¡æ–‡çŒ®ã€‚å› æ­¤ï¼ŒLDSæå€¡ä½¿ç”¨æ ¸å¯†åº¦ä¼°è®¡æ¥å­¦ä¹ æ•°æ®é›†å¯¹åº”è¿ç»­æ ‡ç­¾å€¼çš„æœ‰æ•ˆåŒºåŸŸçš„ä¸å¹³è¡¡ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒLDS convolves a symmetric kernel with the empirical density distribution to extract a kernel-smoothed version that accounts for the overlap in information of data samples of nearby labels. A symmetric kernel is any kernel that satisfies: $\mathrm{k}\left(y, y^{\prime}\right)=\mathrm{k}\left(y^{\prime}, y\right)$and$\nabla_{y} \mathrm{k}\left(y, y^{\prime}\right)+\nabla_{y^{\prime}} \mathrm{k}\left(y^{\prime}, y\right)=0 , \forall y, y^{\prime} \in \mathcal{Y}$. Note that a Gaussian or a Laplacian kernel is a symmetric kernel, while $\mathrm{k}\left(y, y^{\prime}\right) = yy^{\prime}$ is not. The symmetric kernel characterizes the similarity between target values $y^{\prime}$ and any $y$ w.r.t. their distance in the target space. Thus, LDS computes the effective label density distribution as:&lt;br>
â€ƒâ€ƒLDSå°†å¯¹ç§°æ ¸ä¸ç»éªŒå¯†åº¦åˆ†å¸ƒå·ç§¯æ¥æå–æ ¸å¹³æ»‘ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬è´Ÿè´£ç›¸é‚»æ ‡ç­¾çš„æ•°æ®æ ·æœ¬çš„ä¿¡æ¯é‡å ã€‚ä¸€ä¸ªå¯¹ç§°æ ¸åªè¦æ»¡è¶³$\mathrm{k}\left(y, y^{\prime}\right)=\mathrm{k}\left(y^{\prime}, y\right)$å’Œ$\nabla_{y} \mathrm{k}\left(y, y^{\prime}\right)+\nabla_{y^{\prime}} \mathrm{k}\left(y^{\prime}, y\right)=0 , \forall y, y^{\prime} \in \mathcal{Y}$å°±è¡Œã€‚æ³¨æ„Gaussianæˆ–Laplaianæ ¸æ˜¯å¯¹ç§°æ ¸ï¼Œä½†å½“$\mathrm{k}\left(y, y^{\prime}\right) = yy^{\prime}$æ—¶å°±ä¸æ˜¯ã€‚å¯¹ç§°æ ¸è¡¨ç¤ºç›®æ ‡å€¼y'å’Œä»»ä½•yå…³äº(w.r.t=with respect to)ç›®æ ‡ç©ºé—´çš„è·ç¦»ã€‚å› æ­¤ï¼ŒLDSè®¡ç®—æœ‰æ•ˆçš„æ ‡ç­¾å¯†åº¦åˆ†å¸ƒå…¬å¼ä¸ºï¼š&lt;/p>
&lt;p>$$\tilde{p}\left(y^{\prime}\right) \triangleq \int_{\mathcal{Y}} \mathrm{k}\left(y, y^{\prime}\right) p(y) d y \qquad(1) $$
where $p(y)$ is the number of appearances of label of y in the training data, and $\tilde{p}(y^{\prime} )$ is the effective density of label$y^{\prime}$.
å…¶ä¸­p(y)æ˜¯åœ¨è®­ç»ƒæ•°æ®ä¸­yæ ‡ç­¾çš„å‡ºç°æ¬¡æ•°ï¼Œå¹¶ä¸” $\tilde{p}(y^{\prime} )$ æ˜¯æ ‡ç­¾y'çš„æœ‰æ•ˆå¯†åº¦
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-2.png" alt="image.png" title="Figure 3.Â  Label distribution smoothing (LDS) convolves a symmetric kernel with the empirical label density to estimate the effective label density distribution that accounts for the continuity of labels.Â  Â  Â  Â  Â  Â  Â  Â  å›¾3.æ ‡ç­¾åˆ†å¸ƒå¹³æ»‘LDSï¼Œå°†å¯¹ç§°æ ¸ä¸ç»éªŒæ ‡ç­¾å¯†åº¦è¿›è¡Œå·ç§¯ï¼Œä»¥ä¼°è®¡è¯´æ˜æ ‡ç­¾è¿ç»­æ€§çš„æœ‰æ•ˆçš„æ ‡ç­¾å¯†åº¦åˆ†å¸ƒã€‚">&lt;/p>
&lt;figure>Figure 3.Â  Label distribution smoothing (LDS) convolves a symmetric kernel with the empirical label density to estimate the effective label density distribution that accounts for the continuity of labels.Â  Â  Â  Â  Â  Â  Â  Â 
å›¾3.æ ‡ç­¾åˆ†å¸ƒå¹³æ»‘LDSï¼Œå°†å¯¹ç§°æ ¸ä¸ç»éªŒæ ‡ç­¾å¯†åº¦è¿›è¡Œå·ç§¯ï¼Œä»¥ä¼°è®¡è¯´æ˜æ ‡ç­¾è¿ç»­æ€§çš„æœ‰æ•ˆçš„æ ‡ç­¾å¯†åº¦åˆ†å¸ƒã€‚&lt;/figure>
&lt;p>â€ƒâ€ƒFig. 3 illustrates LDS and how it smooths the label density distribution. Further, it shows that the resulting label density computed by LDS correlates well with the error distribution (-0.83). This demonstrates that LDS captures the real imbalance that affects regression problems.
â€ƒâ€ƒå›¾3è§£é‡Šäº†LDSå’Œå®ƒå¦‚ä½•å¹³æ»‘æ ‡ç­¾å¯†åº¦åˆ†å¸ƒã€‚æ­¤å¤–ï¼Œå®ƒè¡¨æ˜ç”±LDSè®¡ç®—å¾—åˆ°çš„æ ‡ç­¾å¯†åº¦ä¸è¯¯å·®åˆ†å¸ƒæœ‰å¾ˆå¥½çš„ç›¸å…³æ€§(-0.83)ã€‚è¿™è¯´æ˜äº†LDSæ•è·åˆ°äº†å½±å“å›å½’ä»»åŠ¡çš„çœŸæ­£ä¸å¹³è¡¡ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒNow that the effective label density is available, techniques for addressing class imbalance problems can be directly adapted to the DIR context. For example, a straightforward adaptation can be the cost-sensitive re-weighting method, where we re-weight the loss function by multiplying it by the inverse of the LDS estimated label density for each target. We show in Sec. 4 that LDS can be seamlessly incorporated with a wide range of techniques to boost DIR performance.&lt;br>
â€ƒâ€ƒæ—¢ç„¶æœ‰æ•ˆçš„æ ‡ç­¾å¯†åº¦æ˜¯å¯ç”¨çš„ï¼Œä¸ºäº†è§£å†³ç±»ä¸å¹³è¡¡é—®é¢˜çš„æŠ€æœ¯å¯ä»¥ç›´æ¥ç”¨äºDIRç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„è°ƒæ•´æ˜¯å…³äºæˆæœ¬æ•æ„Ÿçš„æ–¹æ³•ï¼Œå…¶ä¸­æˆ‘ä»¬é€šè¿‡å°†æŸå¤±å‡½æ•°ä¹˜ä¸Šæ¯ä¸ªç›®æ ‡çš„LDSä¼°è®¡æ ‡ç­¾å¯†åº¦çš„å€’æ•°æ¥é‡æ–°åŠ æƒæŸå¤±å‡½æ•°ã€‚æˆ‘ä»¬åœ¨Sec.4å±•ç¤ºäº†LDSå¯ä»¥æ— ç¼ç»“åˆå¤§é‡çš„æ–¹æ³•æ¥æé«˜DIRçš„æ€§èƒ½ã€‚
&lt;a name="yzgyN">&lt;/a>&lt;/p>
&lt;h3 id="32-feature-distribution-smoothing">3.2. Feature Distribution Smoothing&lt;/h3>
&lt;p>â€ƒâ€ƒWe are motivated by the intuition that continuity in the target space should create a corresponding continuity in the feature space. That is, if the model works properly and the data is balanced, one expects the feature statistics corresponding to nearby targets to be close to each other.&lt;br>
â€ƒâ€ƒæˆ‘ä»¬è®¤ä¸ºç›®æ ‡ç©ºé—´çš„è¿ç»­æ€§åº”è¯¥åˆ›é€ ä¸€ä¸ªåœ¨ç‰¹å¾ç©ºé—´ç›¸å¯¹åº”çš„çš„è¿ç»­æ€§ã€‚å³ï¼Œå¦‚æœæ¨¡å‹å·¥ä½œæ­£å¸¸ï¼Œæ•°æ®å¹³è¡¡ï¼Œåˆ™ä¸ä¸´è¿‘ç›®æ ‡å¯¹åº”çš„ç‰¹å¾æ•°æ®å½¼æ­¤æ¥è¿‘ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒ&lt;strong>Motivating Example.&lt;/strong> We use an illustrative example to highlight the impact of data imbalance on feature statistics in DIR. Again, we use a plain model trained on the images in the IMDB-WIKI dataset to infer a person's age from visual appearance. We focus on the learned feature space, i.e., $\mathbf{z}$. We use a minimum bin size of 1, i.e., $y_b+1 âˆ’ y_b = 1$, and group features with the same target value in the same bin. We then compute the feature statistics (i.e., mean and variance) with respect to the data in each bin, which we denote as $\left{\boldsymbol{\mu}&lt;em>{b}, \boldsymbol{\sigma}&lt;/em>{b}\right}&lt;em>{b=1}^{B}$. To visualize the similarity between feature statistics, we select an anchor bin $b_0$, and calculate the cosine similarity of the feature statistics between $b_0$ and all other bins. The results are summarized in Fig. 4 for $b_0 = 30$. The figure also shows the regions with different data densities using the colors purple, yellow, and pink.
â€ƒâ€ƒæ¿€åŠ±çš„ä¾‹å­ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªè¯´æ˜æ€§çš„ä¾‹å­æ¥å¼ºè°ƒæ•°æ®ä¸å¹³è¡¡åœ¨DIRä¸­çš„ç‰¹å¾statisticsçš„å½±å“ã€‚å†ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåœ¨IMDB-WIKIæ•°æ®é›†å†…çš„å›¾ç‰‡è®­ç»ƒçš„ç©ºç™½æ¨¡å‹æ¥ä»å¤–è²Œæ¨æ–­å¹´é¾„ã€‚æˆ‘ä»¬ä¾§é‡å­¦ä¹ åˆ°çš„ç‰¹å¾ç©ºé—´ï¼Œå³zã€‚æˆ‘ä»¬ä½¿ç”¨æœ€å°binçš„å¤§å°ä¸º1ï¼Œå³$y_b+1 âˆ’ y_b = 1$ï¼Œå¹¶å°†å…·æœ‰ç›¸åŒç›®æ ‡å€¼çš„ç‰¹å¾ç»„æ”¾åœ¨ç›¸åŒbinä¸­ã€‚ç„¶åè®¡ç®—æ¯ä¸ªbinä¸­çš„æ•°æ®çš„ç‰¹å¾ç»Ÿè®¡æ•°æ®ï¼ˆå³å‡å€¼å’Œæ–¹å·®ï¼‰ï¼Œå°†å…¶è¡¨ç¤ºä¸º$\left{\boldsymbol{\mu}&lt;/em>{b}, \boldsymbol{\sigma}&lt;em>{b}\right}&lt;/em>{b=1}^{B}$ã€‚ä¸ºäº†å¯è§†åŒ–ç‰¹å¾ç»Ÿè®¡æ•°æ®ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªanchor bin $b_0$ï¼Œå¹¶è®¡ç®—$b_0$ä¸æ‰€æœ‰å…¶ä»–binsçš„ç‰¹å¾ç»Ÿè®¡çš„ä½™å¼¦ç›¸ä¼¼åº¦ã€‚åœ¨å›¾4æ€»ç»“äº†ç»“æœã€‚è¯¥å›¾è¿˜ä½¿ç”¨ç´«è‰²ã€é»„è‰²å’Œç²‰çº¢è‰²æ˜¾ç¤ºäº†å…·æœ‰ä¸åŒæ•°æ®å¯†åº¦çš„åŒºåŸŸã€‚&lt;/p>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-3.png" alt="image.png" title="Figure 4. Feature statistics similarity for age 30. Top: Cosine similarity of the feature mean at a particular age w.r.t. its value at the anchor age. Bottom: Cosine similarity of the feature variance at a particular age w.r.t. its value at the anchor age. The color of the background refers to the data density in a particular target range. The figure shows that nearby ages have close similarities; However, it also shows that there is unjustified similarity between images at ages 0 to 6 and age 30, due to data imbalance.å›¾4. 30å²çš„ç‰¹å¾ç»Ÿè®¡å€¼çš„ç›¸ä¼¼åº¦ã€‚ä¸Šå›¾ï¼šåœ¨ç‰¹å®šå¹´é¾„çš„ç‰¹å¾å‡å€¼ç›¸å¯¹äºanchorå¹´é¾„å€¼çš„ä½™å¼¦ç›¸ä¼¼åº¦ã€‚ä¸‹å›¾ï¼šç‰¹å®šå¹´é¾„çš„ç‰¹å¾æ–¹å·®ç›¸å¯¹äºanchorå¹´é¾„çš„ä½™å¼¦ç›¸ä¼¼åº¦ã€‚èƒŒæ™¯é¢œè‰²æ˜¯æŒ‡ç‰¹å®šç›®æ ‡èŒƒå›´çš„æ•°æ®å¯†åº¦ã€‚å›¾ç‰‡è¡¨æ˜ä¸´è¿‘å¹´é¾„æœ‰è¿‘ä¼¼çš„ç›¸ä¼¼åº¦ï¼›ä½†ï¼Œå®ƒä¹Ÿè¡¨æ˜åœ¨0-6å²/30å²çš„å›¾ç‰‡é—´æœ‰ä¸åˆç†çš„ç›¸ä¼¼åº¦ï¼Œå› ä¸ºæ•°æ®ä¸å¹³è¡¡">&lt;/p>
&lt;figure>Figure 4. Feature statistics similarity for age 30. Top: Cosine similarity of the feature mean at a particular age w.r.t. its value at the anchor age. Bottom: Cosine similarity of the feature variance at a particular age w.r.t. its value at the anchor age. The color of the background refers to the data density in a particular target range. The figure shows that nearby ages have close similarities; However, it also shows that there is unjustified similarity between images at ages 0 to 6 and age 30, due to data imbalance.
&lt;p>å›¾4. 30å²çš„ç‰¹å¾ç»Ÿè®¡å€¼çš„ç›¸ä¼¼åº¦ã€‚ä¸Šå›¾ï¼šåœ¨ç‰¹å®šå¹´é¾„çš„ç‰¹å¾å‡å€¼ç›¸å¯¹äºanchorå¹´é¾„å€¼çš„ä½™å¼¦ç›¸ä¼¼åº¦ã€‚ä¸‹å›¾ï¼šç‰¹å®šå¹´é¾„çš„ç‰¹å¾æ–¹å·®ç›¸å¯¹äºanchorå¹´é¾„çš„ä½™å¼¦ç›¸ä¼¼åº¦ã€‚èƒŒæ™¯é¢œè‰²æ˜¯æŒ‡ç‰¹å®šç›®æ ‡èŒƒå›´çš„æ•°æ®å¯†åº¦ã€‚å›¾ç‰‡è¡¨æ˜ä¸´è¿‘å¹´é¾„æœ‰è¿‘ä¼¼çš„ç›¸ä¼¼åº¦ï¼›ä½†ï¼Œå®ƒä¹Ÿè¡¨æ˜åœ¨0-6å²/30å²çš„å›¾ç‰‡é—´æœ‰ä¸åˆç†çš„ç›¸ä¼¼åº¦ï¼Œå› ä¸ºæ•°æ®ä¸å¹³è¡¡&lt;/figure>&lt;/p>
&lt;p>â€ƒâ€ƒFig. 4 shows that the feature statistics around $b_0 = 30$ are highly similar to their values at$b_0 = 30$. Specifically, the cosine similarity of the feature mean and feature variance for all bins between age 25 and 35 are within a few percent from their values at age 30 (the anchor age). Further, the similarity gets higher for tighter ranges around the anchor. Note that bin 30 falls in the high shot region. In fact, it is among the few bins that have the most samples. So, the figure confirms the intuition that when there is enough data, and for continuous targets, the feature statistics are similar to nearby bins. Interestingly, the figure also shows the problem with regions that have very few data samples, like the age range 0 to 6 years (shown in pink). Note that the mean and variance in this range show unexpectedly high similarity to age 30. In fact, it is shocking that the feature statistics at age 30 are more similar to age 1 than age 17. This unjustified similarity is due to data imbalance. Specifically, since there are not enough images for ages 0 to 6, this range thus inherits its priors from the range with the maximum amount of data, which is the range around age 30.
â€ƒâ€ƒå›¾4è¡¨æ˜$b_0=30$å‘¨å›´çš„ç‰¹å¾å€¼ä¸å®ƒä»¬åœ¨$b_0$å¤„çš„å€¼é«˜åº¦ç›¸ä¼¼ã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨25åˆ°35ä¹‹é—´çš„æ‰€æœ‰binsçš„ç‰¹å¾å‡å€¼å’Œæ–¹å·®çš„ä½™å¼¦ç›¸ä¼¼åº¦ä¸å®ƒä»¬åœ¨30å²(anchor age)ç›¸å·®å‡ ä¸ªç™¾åˆ†ç‚¹ã€‚æ­¤å¤–ï¼Œåœ¨anchoré™„è¿‘æ›´çª„çš„èŒƒå›´æœ‰æ›´é«˜çš„ç›¸ä¼¼åº¦ã€‚æ³¨æ„bin30è½åœ¨é«˜shot rigion(æ ·æœ¬å¾ˆå¤šçš„åŒºåŸŸ)ã€‚äº‹å®ä¸Šï¼Œå®ƒæ˜¯å°‘æ•°å‡ ä¸ªæœ‰æœ€å¤šçš„æ ·æœ¬çš„binsä¹‹ä¸€ã€‚æ‰€ä»¥ï¼Œå›¾ç‰‡è¯æ˜äº†å½“æœ‰è¶³å¤Ÿçš„æ•°æ®ï¼Œå¯¹äºè¿ç»­ç›®æ ‡å€¼ï¼Œåœ¨ç›¸è¿‘çš„binsæœ‰ç›¸ä¼¼çš„ç‰¹å¾å€¼ã€‚æœ‰è¶£çš„æ˜¯ï¼Œè¯¥å›¾ä¹Ÿè¡¨æ˜åªæœ‰å¾ˆå°‘æ•°æ®æ ·æœ¬çš„åŒºåŸŸçš„é—®é¢˜ï¼Œå¦‚1-6å²(ç²‰çº¢è‰²æ˜¾ç¤º)ã€‚æ³¨æ„åœ¨è¿™ä¸ªåŒºåŸŸçš„å‡å€¼å’Œæ–¹å·®ä¸30å²çš„ç›¸ä¼¼åº¦å‡ºä¹æ„æ–™çš„é«˜ã€‚äº‹å®ä¸Šï¼Œ30å²çš„ç‰¹å¾æ•°æ®å±…ç„¶è·Ÿ1å²çš„ç›¸ä¼¼åº¦æ¯”17å²è¦é«˜ã€‚è¿™ç§ä¸åˆç†çš„ç›¸ä¼¼åº¦æ˜¯å› ä¸ºæ•°æ®ä¸å¹³è¡¡ã€‚å…·ä½“æ¥è¯´ï¼Œç”±äº1-6å²æ²¡æœ‰è¶³å¤Ÿçš„å›¾ç‰‡ï¼Œå› æ­¤è¯¥èŒƒå›´ä»æ•°æ®é‡æœ€å¤§çš„èŒƒå›´(å³30å²é™„è¿‘)ç»§æ‰¿å…¶å…ˆéªŒå€¼&lt;/p>
&lt;blockquote>
&lt;p>â€ƒâ€ƒmany-shot region (bins with over 100 training samples), medium-shot region (bins with 20âˆ¼100 training samples), and few-shot region (bins with under 20 training samples)&lt;/p>
&lt;/blockquote>
&lt;p>â€ƒâ€ƒ&lt;strong>FDS Algorithm.&lt;/strong> Inspired by these observations, we propose feature distribution smoothing (FDS), which performs distribution smoothing on the feature space, i.e., transfers the feature statistics between nearby target bins. This procedure aims to calibrate the potentially biased estimates of feature distribution, especially for underrepresented target values (e.g., medium- and few-shot groups) in training data. FDS is performed by first estimating the statistics of each bin. Without loss of generality, we substitute variance with covariance to reflect also the relationship between the various feature elements within z:&lt;br>
â€ƒâ€ƒFDSç®—æ³•ã€‚å—è¿™äº›è§‚æµ‹å¯å‘ï¼Œæˆ‘ä»¬æå‡ºç‰¹å¾åˆ†å¸ƒå¹³æ»‘(FDS)ï¼Œå®ƒåœ¨ç‰¹å¾ç©ºé—´è¿›è¡Œåˆ†å¸ƒå¹³æ»‘ï¼Œå³åœ¨ç›¸è¿‘ç‰¹å¾binsä¼ è¾“ç‰¹å¾ç»Ÿè®¡æ•°æ®ã€‚æ­¤è¿‡ç¨‹æ—¨åœ¨æ ¡å‡†ç‰¹å¾åˆ†å¸ƒæ½œåœ¨çš„åå·®ä¼°è®¡ï¼Œç‰¹åˆ«æ˜¯å¯¹äºè®­ç»ƒæ•°æ®ä¸­ä½ä»£è¡¨æ€§çš„ç›®æ ‡å€¼(å¦‚ä¸­æ ·æœ¬ç»„å’Œå°‘æ ·æœ¬ç»„)ã€‚é€šè¿‡é¦–æ¬¡ä¼°è®¡æ¯ä¸ªbinçš„ç»Ÿè®¡æ•°æ®æ¥è¿è¡ŒFDSã€‚ä¸å¤±ä¸€èˆ¬æ€§ï¼Œæˆ‘ä»¬ç”¨åæ–¹å·®ä»£æ›¿æ–¹å·®ï¼Œä»¥ååº”zå†…çš„å„ç§ç‰¹å¾å…ƒç´ çš„å…³ç³»ï¼š
$$\boldsymbol{\mu}&lt;em>{b}=\frac{1}{N&lt;/em>{b}} \sum_{i=1}^{N_{b}} \mathbf{z}&lt;em>{i} \qquad(2)$$
$$\boldsymbol{\Sigma}&lt;/em>{b}=\frac{1}{N_{b}-1} \sum_{i=1}^{N_{b}}\left(\mathbf{z}&lt;em>{i}-\boldsymbol{\mu}&lt;/em>{b}\right)\left(\mathbf{z}&lt;em>{i}-\boldsymbol{\mu}&lt;/em>{b}\right)^{\top} \qquad(3)$$
where $N_b$ is the total number of samples in b-th bin. Given the feature statistics, we employ again a symmetric kernel $k\left(y_{b}, y_{b^{\prime}}\right)$ to smooth the distribution of the feature mean and covariance over the target bins $\mathcal{B}$. This results in a smoothed version of the statistics:&lt;br>
å…¶ä¸­$N_b$æ˜¯åœ¨ç¬¬bä¸ªbinçš„æ€»æ ·æœ¬æ•°ã€‚æ ¹æ®ç‰¹å¾ç»Ÿè®¡æ•°æ®ï¼Œæˆ‘ä»¬å†æ¬¡ä½¿ç”¨å¯¹ç§°æ ¸$k\left(y_{b}, y_{b^{\prime}}\right)$æ¥å¹³è¡¡ç›®æ ‡binsçš„ç‰¹å¾å‡å€¼å’Œåæ–¹å·®åˆ†å¸ƒã€‚ç”±æ­¤äº§ç”Ÿç»Ÿè®¡æ•°æ®çš„å¹³æ»‘ç‰ˆæœ¬ï¼š
$$\tilde{\boldsymbol{\mu}}&lt;em>{b}=\sum&lt;/em>{b^{\prime} \in \mathcal{B}} \mathrm{k}\left(y_{b}, y_{b^{\prime}}\right) \boldsymbol{\mu}&lt;em>{b^{\prime}} \qquad(4)$$
$$\tilde{\Sigma}&lt;/em>{b}=\sum_{b^{\prime} \in \mathcal{B}} \mathrm{k}\left(y_{b}, y_{b^{\prime}}\right) \Sigma_{b^{\prime}} \qquad(5) $$&lt;/p>
&lt;p>â€ƒâ€ƒWith both$\left{\boldsymbol{\mu}&lt;em>{b}, \boldsymbol{\Sigma}&lt;/em>{b}\right}$and$\left{\tilde{\boldsymbol{\mu}}&lt;em>{b}, \widetilde{\boldsymbol{\Sigma}}&lt;/em>{b}\right}$, we then follow the standard whitening and re-coloring procedure (Sun et al., 2016) to calibrate the feature representation for each input sample:&lt;br>
â€ƒâ€ƒä½¿ç”¨$\left{\boldsymbol{\mu}&lt;em>{b}, \boldsymbol{\Sigma}&lt;/em>{b}\right}$and$\left{\tilde{\boldsymbol{\mu}}&lt;em>{b}, \widetilde{\boldsymbol{\Sigma}}&lt;/em>{b}\right}$ï¼Œç„¶åæˆ‘ä»¬éµå¾ªæ ‡å‡†çš„ç™½åŒ–å’Œé‡ç€è‰²ç¨‹åºæ¥æ ¡å‡†æ¯ä¸ªè¾“å…¥æ ·æœ¬çš„ç‰¹å¾è¡¨ç¤ºï¼ˆå›¾ç‰‡çš„filtersï¼Ÿï¼‰ï¼š
$$\tilde{\mathbf{z}}=\tilde{\boldsymbol{\Sigma}}&lt;em>{b}^{\frac{1}{2}} \boldsymbol{\Sigma}&lt;/em>{b}^{-\frac{1}{2}}\left(\mathbf{z}-\boldsymbol{\mu}&lt;em>{b}\right)+\tilde{\boldsymbol{\mu}}&lt;/em>{b} \qquad(6)$$&lt;/p>
&lt;p>â€ƒâ€ƒWe integrate FDS into deep networks by inserting a feature calibration layer after the final feature map. To train the model, we employ a momentum update of the running statistics$\left{\boldsymbol{\mu}&lt;em>{b}, \boldsymbol{\Sigma}&lt;/em>{b}\right}$across each epoch. Correspondingly, the smoothed statistics$\left{\tilde{\boldsymbol{\mu}}&lt;em>{b}, \widetilde{\boldsymbol{\Sigma}}&lt;/em>{b}\right}$are updated across different epochs but fixed within each training epoch. The momentum update, which performs an exponential moving average (EMA) of running statistics, results in more stable and accurate estimations of the feature statistics during training. The calibrated features $\tilde{\mathbf{z}}$ are then passed to the final regression function and used to compute the loss.
â€ƒâ€ƒæˆ‘ä»¬æŠŠFDSæ•´åˆå…¥æ·±åº¦ç½‘ç»œé€šè¿‡åœ¨æœ€åçš„ç‰¹å¾å›¾åæ’å…¥ä¸€ä¸ªç‰¹å¾æ ¡å‡†å±‚ã€‚ä¸ºäº†è®­ç»ƒæ¨¡å‹ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªepochè¿è¡Œä¸­çš„ç»Ÿè®¡æ•°æ®$\left{\boldsymbol{\mu}&lt;em>{b}, \boldsymbol{\Sigma}&lt;/em>{b}\right}$è¿›è¡ŒåŠ¨é‡æ›´æ–°ã€‚å¯¹åº”çš„ï¼Œå¹³æ»‘ç»Ÿè®¡$\left{\tilde{\boldsymbol{\mu}}&lt;em>{b}, \widetilde{\boldsymbol{\Sigma}}&lt;/em>{b}\right}$åœ¨ä¸åŒepochæ›´æ–°ï¼Œä½†åœ¨æ¯ä¸ªè®­ç»ƒepochæ—¶å›ºå®šã€‚åŠ¨é‡æ›´æ–°æ‰§è¡Œè¿è¡Œç»Ÿè®¡å€¼çš„æŒ‡æ•°ç§»åŠ¨å¹³å‡(EMA)ï¼Œä½¿å¾—è®­ç»ƒæœŸé—´å¯¹ç‰¹å¾ç»Ÿè®¡å€¼è¿›è¡Œæ›´ç¨³å®šå’Œå‡†ç¡®çš„ä¼°è®¡ã€‚ç„¶åå°†æ ¡å‡†å€¼ $\tilde{\mathbf{z}}$ä¼ é€’ç»™æœ€åçš„å›å½’å‡½æ•°å¹¶ç”¨äºè®¡ç®—lossã€‚&lt;/p>
&lt;p>â€ƒâ€ƒWe note that FDS can be integrated with any neural network model, as well as any past work on improving label imbalance. In Sec. 4, we integrate FDS with a variety of prior techniques for addressing data imbalance, and demonstrate that it consistently improves performance.
â€ƒâ€ƒæˆ‘ä»¬æ³¨æ„åˆ°FDSå¯ä»¥æ•´åˆåˆ°ä»»ä½•ç¥ç»ç½‘ç»œæ¨¡å‹å†…ï¼Œä»¥åŠä»»ä½•è¿‡å»æ”¹å–„æ ‡ç­¾ä¸å¹³è¡¡çš„å·¥ä½œã€‚åœ¨Sec.4ï¼Œæˆ‘ä»¬å°†FDSä¸ä¸€ç³»åˆ—è§£å†³æ•°æ®ä¸å¹³è¡¡çš„ç°æœ‰æŠ€æœ¯ç»“åˆï¼Œå¹¶è¯æ˜å®ƒèƒ½ä¸æ–­åœ°æé«˜æ€§èƒ½&lt;/p>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-4.png" alt="image.png" title="Figure 6. Overview of training set label distribution for five DIR datasets. They range from single-value prediction such as age, textual similarity score, and health condition score, to dense-value prediction such as depth estimation. More details are provided in Appendix B.å›¾6ã€‚äº”ä¸ª DIR æ•°æ®é›†çš„è®­ç»ƒé›†æ ‡ç­¾åˆ†å¸ƒæ¦‚è¿°ã€‚ å®ƒä»¬çš„èŒƒå›´ä»å•å€¼é¢„æµ‹ï¼ˆä¾‹å¦‚å¹´é¾„ã€æ–‡æœ¬ç›¸ä¼¼åº¦å¾—åˆ†å’Œå¥åº·çŠ¶å†µå¾—åˆ†ï¼‰åˆ°å¯†é›†å€¼é¢„æµ‹ï¼ˆä¾‹å¦‚æ·±åº¦ä¼°è®¡ï¼‰ã€‚ é™„å½• B ä¸­æä¾›äº†æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚">&lt;/p>
&lt;figure>Figure 6. Overview of training set label distribution for five DIR datasets. They range from single-value prediction such as age, textual similarity score, and health condition score, to dense-value prediction such as depth estimation. More details are provided in Appendix B.
&lt;p>å›¾6ã€‚äº”ä¸ª DIR æ•°æ®é›†çš„è®­ç»ƒé›†æ ‡ç­¾åˆ†å¸ƒæ¦‚è¿°ã€‚ å®ƒä»¬çš„èŒƒå›´ä»å•å€¼é¢„æµ‹ï¼ˆä¾‹å¦‚å¹´é¾„ã€æ–‡æœ¬ç›¸ä¼¼åº¦å¾—åˆ†å’Œå¥åº·çŠ¶å†µå¾—åˆ†ï¼‰åˆ°å¯†é›†å€¼é¢„æµ‹ï¼ˆä¾‹å¦‚æ·±åº¦ä¼°è®¡ï¼‰ã€‚ é™„å½• B ä¸­æä¾›äº†æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚&lt;/figure>&lt;/p>
&lt;p>&lt;a name="oPq0c">&lt;/a>&lt;/p>
&lt;h2 id="4-benchmarking-dir">4. Benchmarking DIR&lt;/h2>
&lt;p>â€ƒâ€ƒ&lt;strong>Datasets.&lt;/strong> We curate five DIR benchmarks that span computer vision, natural language processing, and healthcare.Fig. 6 shows the label density distribution of these datasets,and their level of imbalance.
â€ƒâ€ƒæ•°æ®é›†ã€‚æˆ‘ä»¬æ•´ç†äº†äº”ä¸ªDIRåŸºå‡†é›†ï¼ŒåŒ…æ‹¬CVã€NLPã€HCã€‚å›¾6å±•ç¤ºäº†è¿™äº›æ•°æ®é›†åœ°æ ‡ç­¾å¯†åº¦åˆ†å¸ƒå’Œä¸å¹³è¡¡ç­‰çº§ã€‚&lt;/p>
&lt;ul>
&lt;li>IMDB-WIKI-DIR (age): We construct IMDB-WIKI-DIR using the IMDB-WIKI dataset (Rothe et al., 2018), which contains 523.0K face images and the corresponding ages. We filter out unqualified images, and manually construct balanced validation and test set over the supported ages. The length of each bin is 1 year, with a minimum age of 0 and a maximum age of 186. The number of images per bin varies between 1 and 7149, exhibiting significant data imbalance. Overall, the curated dataset has 191.5K images for training, 11.0K images for validation and testing.&lt;/li>
&lt;li>IMDB-WIKI-DIRï¼ˆå¹´é¾„ï¼‰ï¼šæˆ‘ä»¬ä½¿ç”¨IMDB-WIKIæ•°æ®é›†æ„å»ºäº†IMDB-WIKI-DIRï¼ŒåŒ…å«523Kå¼ é¢éƒ¨å›¾ç‰‡å’Œå¯¹åº”å¹´é¾„ã€‚æˆ‘ä»¬è¿‡æ»¤æ‰ä¸åˆæ ¼å›¾ç‰‡å¹¶åœ¨æ”¯æŒçš„å¹´é¾„èŒƒå›´å†…æ‰‹åŠ¨æ„é€ å¹³è¡¡çš„éªŒè¯å’Œæµ‹è¯•é›†ã€‚æ¯ä¸ªbinçš„é•¿åº¦æ˜¯ä¸€å¹´ï¼Œæœ€å°å¹´é¾„ä¸º0ï¼Œæœ€å¤§å¹´é¾„ä¸º186.æ¯ä¸ªbinçš„å›¾åƒæ•°é‡ä¸º1-7149ä¹‹é—´ï¼Œè¡¨ç°å‡ºæ˜æ˜¾çš„æ•°æ®ä¸å¹³è¡¡ã€‚æ€»çš„æ¥è¯´ï¼Œæ•´ç†åçš„æ•°æ®é›†æœ‰191.5Kå¼ è®­ç»ƒå›¾ç‰‡ï¼Œ11Kå¼ éªŒè¯å’Œæµ‹è¯•å›¾ç‰‡ã€‚&lt;/li>
&lt;li>AgeDB-DIR (age): AgeDB-DIR is constructed in a similar manner from the AgeDB dataset (Moschoglou et al., 2017). It contains 12.2K images for training, with a minimum age of 0 and a maximum age of 101, and maximum bin density of 353 images and minimum bin density of 1. The validation and test set are balanced with 2.1K images.&lt;/li>
&lt;li>AgeDB-DIRï¼ˆå¹´é¾„ï¼‰ï¼šAgeDB-DIR ä»¥ç±»ä¼¼çš„æ–¹å¼ä» AgeDB æ•°æ®é›†æ„å»ºã€‚å®ƒåŒ…å«ç”¨äºè®­ç»ƒçš„ 12.2K å›¾åƒï¼Œæœ€å°å¹´é¾„ä¸º 0ï¼Œæœ€å¤§å¹´é¾„ä¸º 101ï¼Œæœ€å¤§ bin å¯†åº¦ä¸º 353 ä¸ªå›¾åƒï¼Œæœ€å° bin å¯†åº¦ä¸º 1ã€‚2.1Kå¼ å›¾ç‰‡çš„å¹³è¡¡éªŒè¯é›†å’Œæµ‹è¯•é›†ã€‚&lt;/li>
&lt;li>STS-B-DIR (text similarity score): We construct STS-BDIR from the Semantic Textual Similarity Benchmark (Cer et al., 2017; Wang et al., 2018), which is a collection of sentence pairs drawn from news headlines, video and image captions, and natural language inference data. Each pair is annotated by multiple annotators with an averaged continuous similarity score from 0 to 5. From the original training set of 7.2K pairs, we create a training set with 5.2K pairs, and balanced validation set and test set of 1K pairs each. The length of each bin is 0.1.&lt;/li>
&lt;li>STS-B-DIRï¼ˆæ–‡æœ¬ç›¸ä¼¼åº¦å¾—åˆ†ï¼‰ï¼šæˆ‘ä»¬ä»è¯­ä¹‰æ–‡æœ¬ç›¸ä¼¼åº¦åŸºå‡†æ•°æ®é›†æ„å»º STS-BDIRï¼Œå®ƒæ˜¯ä»æ–°é—»æ ‡é¢˜ã€è§†é¢‘å’Œå›¾åƒå­—å¹•ï¼Œä»¥åŠè‡ªç„¶è¯­è¨€æ¨ç†æ•°æ®ä¸­æå–çš„å¥å­å¯¹çš„é›†åˆ ã€‚ æ¯å¯¹ç”±å¤šä¸ªæ³¨é‡Šå™¨è¿›è¡Œæ³¨é‡Šï¼Œå¹³å‡è¿ç»­ç›¸ä¼¼åº¦å¾—åˆ†ä» 0 åˆ° 5ã€‚ä» 7.2K å¯¹çš„åŸå§‹è®­ç»ƒé›†ï¼Œæˆ‘ä»¬æ„å»ºä¸€ä¸ªåŒ…å« 5.2K å¯¹çš„è®­ç»ƒé›†ï¼Œä»¥åŠæ¯ä¸ª 1K å¯¹çš„å¹³è¡¡éªŒè¯é›†å’Œæµ‹è¯•é›†ã€‚ æ¯ä¸ª bin çš„é•¿åº¦ä¸º 0.1ã€‚&lt;/li>
&lt;li>NYUD2-DIR (depth): We create NYUD2-DIR based on the NYU Depth Dataset V2 (Nathan Silberman &amp;amp; Fergus, 2012), which provides images and depth maps for different indoor scenes. The depth maps have an upper bound of 10 meters and we set the bin length as 0.1 meter. Following standard practices (Bhat et al., 2020; Hu et al., 2019), we use 50K images for training and 654 images for testing. We randomly select 9357 test pixels for each bin to make the test set balanced.&lt;/li>
&lt;li>NYUD2-DIRï¼ˆæ·±åº¦ï¼‰ï¼šæˆ‘ä»¬åŸºäº NYU Depth Dataset V2åˆ›å»º NYUD2-DIRï¼Œå®ƒä¸ºä¸åŒçš„å®¤å†…åœºæ™¯æä¾›å›¾åƒå’Œæ·±åº¦å›¾ã€‚ æ·±åº¦å›¾çš„ä¸Šé™ä¸º 10 ç±³ï¼Œæˆ‘ä»¬å°† bin é•¿åº¦è®¾ç½®ä¸º 0.1 ç±³ã€‚ æŒ‰ç…§æ ‡å‡†åšæ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨ 50K å›¾åƒè¿›è¡Œè®­ç»ƒï¼Œä½¿ç”¨ 654 å›¾åƒè¿›è¡Œæµ‹è¯•ã€‚ æˆ‘ä»¬ä¸ºæ¯ä¸ª bin éšæœºé€‰æ‹© 9357 ä¸ªæµ‹è¯•åƒç´ ï¼Œä»¥ä½¿æµ‹è¯•é›†å¹³è¡¡ã€‚&lt;/li>
&lt;li>SHHS-DIR (health condition score): We create SHHSDIR based on the SHHS dataset (Quan et al., 1997), which contains full-night Polysomnography (PSG) from 2651 subjects. Available PSG signals include Electroencephalography (EEG), Electrocardiography (ECG), and breathing signals (airflow, abdomen, and thorax), which are used as inputs. The dataset also includes the 36- Item Short Form Health Survey (SF-36) (Ware Jr &amp;amp; Sherbourne, 1992) for each subject, where a General Health score is extracted. The score is used as the target value with a minimum score of 0 and maximum of 100.&lt;/li>
&lt;li>SHHS-DIRï¼ˆå¥åº·çŠ¶å†µè¯„åˆ†ï¼‰ï¼šæˆ‘ä»¬åŸºäº SHHS æ•°æ®é›†åˆ›å»º SHHSDIRï¼Œå…¶ä¸­åŒ…å«æ¥è‡ª 2651 åå—è¯•è€…çš„æ•´æ™šå¤šå¯¼ç¡çœ å›¾ï¼ˆPSGï¼‰ã€‚ å¯ç”¨çš„ PSG ä¿¡å·åŒ…æ‹¬ç”¨ä½œè¾“å…¥çš„è„‘ç”µå›¾ (EEG)ã€å¿ƒç”µå›¾ (ECG) å’Œå‘¼å¸ä¿¡å·ï¼ˆæ°”æµã€è…¹éƒ¨å’Œèƒ¸éƒ¨ï¼‰ã€‚ è¯¥æ•°æ®é›†è¿˜åŒ…æ‹¬æ¯ä¸ªå—è¯•è€…çš„ 36 é¡¹ç®€çŸ­å¥åº·è°ƒæŸ¥ (SF-36) ï¼Œå…¶ä¸­æå–äº†General Healthåˆ†æ•°ã€‚ åˆ†æ•°ç”¨ä½œç›®æ ‡å€¼ï¼Œæœ€ä½åˆ†æ•°ä¸º 0ï¼Œæœ€é«˜åˆ†æ•°ä¸º 100ã€‚&lt;/li>
&lt;/ul>
&lt;p>â€ƒâ€ƒ&lt;strong>Network Architectures.&lt;/strong> We employ ResNet-50 (He et al., 2016) as our backbone network for IMDB-WIKI-DIR and AgeDB-DIR. Following (Wang et al., 2018), we adopt the same BiLSTM + GloVe word embeddings baseline for STSB-DIR. For NYUD2-DIR, we use ResNet-50-based encoderdecoder architecture introduced in (Hu et al., 2019). Finally, for SHHS-DIR, we use the same CNN-RNN architecture with ResNet block for PSG signals as in (Wang et al., 2019).
â€ƒâ€ƒç½‘ç»œæ¶æ„ã€‚æˆ‘ä»¬é‡‡ç”¨ResNet-50ä½œä¸ºIMDB-WIKI-DIRå’ŒAgeDB-DIRçš„éª¨å¹²ç½‘ç»œã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¹STSB-DIRé‡‡ç”¨äº†ç›¸åŒçš„BiLSTM+GloVeè¯åµŒå…¥åŸºçº¿ã€‚å¯¹äºNYUD2-DIRï¼Œæˆ‘ä»¬ä½¿ç”¨(Hu et al., 2019)ä¸­ä»‹ç»çš„åŸºäºResNet-50çš„encoderdecoderæ¶æ„ã€‚æœ€åï¼Œå¯¹äº SHHS-DIRï¼Œæˆ‘ä»¬ä½¿ç”¨åŒæ ·çš„å¸¦ResNet å—çš„CNN-RNN æ¶æ„æ¥å¤„ç†PSGä¿¡å·ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒ&lt;strong>Baselines.&lt;/strong> Since the literature has only a few proposals for DIR, in addition to past work on imbalanced regression (Branco et al., 2017; Torgo et al., 2013), we adapt a few imbalanced classification methods for regression, and propose a strong set of baselines. Below, we describe the baselines, and how we can combine LDS with each method. For FDS, it can be directly integrated with any baseline as a calibration layer, as described in Sec. 3.2.&lt;br>
â€ƒâ€ƒåŸºçº¿ã€‚ç”±äºæ–‡çŒ®ä¸­åªæœ‰å°‘æ•°å…³äºDIRçš„å»ºè®®ï¼Œé™¤äº†è¿‡å»å…³äºä¸å¹³è¡¡å›å½’çš„å·¥ä½œï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸€äº›ä¸å¹³è¡¡å›å½’åˆ†ç±»æ–¹æ³•ï¼Œå¹¶æå‡ºäº†ä¸€ç»„å¼ºå¤§çš„åŸºçº¿ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†æè¿°åŸºçº¿ï¼Œä»¥åŠå¦‚ä½•å°†LDSä¸æ¯ç§æ–¹æ³•ç›¸ç»“åˆã€‚å¯¹äºFDSï¼Œå®ƒå¯ä»¥ç›´æ¥ä¸ä»»ä½•åŸºçº¿é›†æˆä½œä¸ºæ ¡å‡†å±‚ï¼Œå¦‚ç¬¬3.2èŠ‚æ‰€è¿°ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>$Vanilla model$: We use term &lt;strong>VANILLA&lt;/strong> to denote a model that does not include any technique for dealing with imbalanced data. To combine the vanilla model with LDS, we re-weight the loss function by multiplying it by the inverse of the LDS estimated density for each target bin.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>$Synthetic samples$: We choose existing methods for imbalanced regression, including &lt;strong>SMOTER&lt;/strong> (Torgo et al., 2013) and &lt;strong>SMOGN&lt;/strong> (Branco et al., 2017). SMOTER first defines frequent and rare regions using the original label density, and creates synthetic samples for pre-defined rare regions by linearly interpolating both inputs and targets. SMOGN further adds Gaussian noise to SMOTER. We note that LDS can be directly used for a better estimation of label density when dividing the target space.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>$Error-aware loss$: Inspired by the Focal loss (Lin et al., 2017) for classification, we propose a regression version called Focal-R, where the scaling factor is replaced by a continuous function that maps the absolute error into [0, 1]. Precisely, Focal-R loss based on L1 distance can be written as$\frac{1}{n} \sum_{i=1}^{n} \sigma\left(\left|\beta e_{i}\right|\right)^{\gamma} e_{i}$, where $e_i$ is the L1 error for i-th sample, $Ïƒ(\cdot)$ is the $Sigmoid$ function, and $Î², Î³$ are hyper-parameters. To combine Focal-R with LDS, we multiply the loss with the inverse frequency of the estimated label density.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>$Two-stage training$: Following (Kang et al., 2020) where feature and classifier are decoupled and trained in two stages, we propose a regression version called regressor re-training (RRT), where in the first stage we train the encoder normally, and in the second stage freeze the encoder and re-train the regressor $g(\cdot)$ with inverse re-weighting. When adding LDS, the re-weighting in the second stage is based on the label density estimated through LDS.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>$Cost-sensitive re-weighting$: Since we divide the target space into finite bins, classic re-weighting methods can be directly plugged in. We adopt two re-weighting schemes based on the label distribution: inverse-frequency weighting (INV) and its square-root weighting variant (SQINV). When combining with LDS, instead of using the original label density, we use the LDS estimated target density.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Vanillamodelï¼šæˆ‘ä»¬ä½¿ç”¨VANILLAè¡¨ç¤ºä¸åŒ…å«å¤„ç†ä¸å¹³è¡¡æ•°æ®çš„ä»»ä½•æŠ€æœ¯çš„æ¨¡å‹ã€‚ä¸ºäº†å°†æ¨¡å‹ä¸LDSç»“åˆï¼Œæˆ‘ä»¬é€šè¿‡å°†æŸå¤±å‡½æ•°ä¹˜æ¯ä¸ªç›®æ ‡binçš„LDSä¼°è®¡å¯†åº¦çš„å€’æ•°æ¥é‡åŠ æƒæŸå¤±å‡½æ•°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Syntheticsampleï¼šæˆ‘ä»¬é€‰æ‹©ç°å­˜çš„ä¸å¹³è¡¡å›å½’æ–¹æ³•ï¼ŒåŒ…æ‹¬SMOTERå’ŒSMOGNã€‚SMOTERé¦–å…ˆä½¿ç”¨åˆå§‹æ ‡ç­¾å¯†åº¦å®šä¹‰frequentåŒºåŸŸå’ŒrareåŒºåŸŸï¼Œå¹¶é€šè¿‡å¯¹è¾“å…¥å’Œç›®æ ‡è¿›è¡Œçº¿æ€§æ’å€¼æ¥ä¸ºé¢„å®šä¹‰çš„rareåŒºåŸŸåˆ›å»ºæ ·æœ¬ã€‚SMOGNå°†é«˜æ–¯å™ªå£°åŠ åˆ°SMOTERã€‚æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œåœ¨åˆ’åˆ†ç›®æ ‡ç©ºé—´æ—¶ï¼ŒLDSå¯ä»¥ç›´æ¥ä½¿ç”¨æ¥æ›´å¥½åœ°ä¼°è®¡ä¼°è®¡æ ‡ç­¾å¯†åº¦ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Error-awarelossï¼šå—ç”¨äºåˆ†ç±»çš„Focal losså¯å‘ï¼Œæˆ‘ä»¬æå‡ºä¸€ä¸ªFocal-Rçš„å›å½’ç‰ˆæœ¬ï¼Œå…¶ä¸­æ¯”ä¾‹å› å­è¢«ä¸€ä¸ªå°†ç»å¯¹è¯¯å·®æ˜ å°„åˆ°[0, 1]çš„è¿ç»­å‡½æ•°æ›¿ä»£ã€‚å‡†ç¡®çš„è¯´ï¼ŒåŸºäºL1è·ç¦»çš„Focal-RæŸå¤±å¯ä»¥å†™ä¸º$\frac{1}{n} \sum_{i=1}^{n} \sigma\left(\left|\beta e_{i}\right|\right)^{\gamma} e_{i}$ï¼Œå…¶ä¸­$e_i$æ—¶ç¬¬iä¸ªæ ·æœ¬çš„L1è¯¯å·®ï¼Œ$Ïƒ(\cdot)$æ˜¯sigmoidå‡½æ•°ï¼Œ$Î², Î³$æ˜¯è¶…å‚æ•°ã€‚ä¸ºäº†å°†Focal-Rå’ŒLDSç»“åˆï¼Œå°†æŸå¤±ä¹˜ä»¥ä¼°è®¡æ ‡ç­¾å¯†åº¦çš„é¢‘ç‡çš„å€’æ•°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Two-stagetrainingï¼šç»§ (Kang et al., 2020) å°†ç‰¹å¾å’Œåˆ†ç±»å™¨è§£è€¦å¹¶åˆ†ä¸¤ä¸ªé˜¶æ®µè¿›è¡Œè®­ç»ƒä¹‹åï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§ç§°ä¸ºå›å½’å™¨é‡è®­ç»ƒ (RRT) çš„å›å½’ç‰ˆæœ¬ï¼Œåœ¨ç¬¬ä¸€é˜¶æ®µæˆ‘ä»¬æ­£å¸¸è®­ç»ƒç¼–ç å™¨ï¼Œè€Œåœ¨ç¬¬äºŒé˜¶æ®µå†»ç»“ç¼–ç å™¨å¹¶ä½¿ç”¨åå‘é‡åŠ æƒé‡æ–°è®­ç»ƒå›å½’å™¨$g(\cdot)$ã€‚æ·»åŠ LDSåï¼Œç¬¬äºŒé˜¶æ®µçš„é‡æ–°åŠ æƒæ˜¯åŸºäºé€šè¿‡LDSä¼°è®¡çš„æ ‡ç­¾å¯†åº¦ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Cost-sensitive re-weightingï¼šç”±äºæˆ‘ä»¬å°†ç›®æ ‡ç©ºé—´åˆ†ä¸ºæœ‰é™çš„binï¼Œå› æ­¤å¯ä»¥ç›´æ¥æ’å…¥é‚£äº›ç»å…¸çš„é‡åŠ æƒæ–¹æ³•ã€‚æˆ‘ä»¬é‡‡ç”¨ä¸¤ç§åŸºäºæ ‡ç­¾åˆ†å¸ƒçš„é‡åŠ æƒæ–¹æ¡ˆï¼šINVå’ŒSQINVã€‚ä¸LDSç»“åˆæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨LDSä¼°è®¡çš„ç›®æ ‡å¯†åº¦ï¼Œè€Œä¸æ˜¯åŸå§‹çš„ç›®æ ‡å¯†åº¦ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>â€ƒâ€ƒ&lt;strong>Evaluation Process and Metrics.&lt;/strong> Following (Liu et al., 2019), we divide the target space into three disjoint subsets: many-shot region (bins with over 100 training samples), medium-shot region (bins with 20âˆ¼100 training samples), and few-shot region (bins with under 20 training samples), and report results on these subsets, as well as overall performance. We also refer to regions with no training samples as zero-shot, and investigate the ability of our techniques to generalize to zero-shot regions in Sec. 4.2. For metrics, we use common metrics for regression, such as the meanaverage-error (MAE), mean-squared-error (MSE), and Pearson correlation. We further propose another metric, called error Geometric Mean (&lt;strong>GM&lt;/strong>), and is defined as$\left(\prod_{i=1}^{n} e_{i}\right)^{\frac{1}{n}}$for better prediction fairness.&lt;br>
â€ƒâ€ƒè¯„ä¼°è¿‡ç¨‹å’ŒæŒ‡æ ‡ã€‚åœ¨ (Liu et al., 2019) ä¹‹åï¼Œæˆ‘ä»¬å°†ç›®æ ‡ç©ºé—´åˆ’åˆ†ä¸ºä¸‰ä¸ªä¸ç›¸äº¤çš„å­é›†ï¼šmany-shot åŒºåŸŸï¼ˆå…·æœ‰è¶…è¿‡ 100 ä¸ªè®­ç»ƒæ ·æœ¬çš„ binï¼‰ã€medium-shot åŒºåŸŸï¼ˆå…·æœ‰ 20âˆ¼100 ä¸ªè®­ç»ƒæ ·æœ¬çš„ binï¼‰å’Œfew-shotåŒºåŸŸï¼ˆè®­ç»ƒæ ·æœ¬å°‘äº 20 ä¸ªçš„ binï¼‰ï¼Œå¹¶è¯´æ˜è¿™äº›å­é›†çš„ç»“æœä»¥åŠæ•´ä½“æ€§èƒ½ã€‚ æˆ‘ä»¬å°†æ²¡æœ‰è®­ç»ƒæ ·æœ¬çš„åŒºåŸŸç§°ä¸ºzero-shotï¼Œå¹¶åœ¨ Sec.4.2ä¸­ç ”ç©¶æˆ‘ä»¬çš„æŠ€æœ¯æ³›åŒ–åˆ°è¯¥åŒºåŸŸçš„èƒ½åŠ›ã€‚ å¯¹äºæŒ‡æ ‡ï¼Œæˆ‘ä»¬ä½¿ç”¨å¸¸ç”¨çš„å›å½’æŒ‡æ ‡ï¼Œä¾‹å¦‚å‡å€¼è¯¯å·® (MAE)ã€å‡æ–¹è¯¯å·® (MSE) å’Œçš®å°”é€Šç›¸å…³æ€§ã€‚ æˆ‘ä»¬è¿›ä¸€æ­¥æå‡ºå¦ä¸€ä¸ªåº¦é‡ï¼Œç§°ä¸ºè¯¯å·®å‡ ä½•å¹³å‡å€¼ (GM)ï¼Œå®šä¹‰ä¸º $\left(\prod_{i=1}^{n} e_{i}\right)^{\frac{1}{n} }$ä»¥è·å¾—æ›´å¥½çš„é¢„æµ‹å…¬å¹³æ€§ã€‚
&lt;a name="qCLS0">&lt;/a>&lt;/p>
&lt;h3 id="41-main-results">4.1. Main Results&lt;/h3>
&lt;p>â€ƒâ€ƒWe report the main results in this section for all DIR datasets. All training details, hyper-parameter settings, and additional results are provided in Appendix C and D.
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-5.png" alt="image.png">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-6.png" alt="image.png">
&lt;strong>Inferring Age from Images: IMDB-WIKI-DIR &amp;amp; AgeDB-DIR.&lt;/strong> We report the performance of different methods in Table 1 and 2, respectively. For each dataset, we group the baselines into four sections to reflect their different strategies. First, as both tables indicate, when applied to modern high-dimensional data like images, SMOTER and SMOGN can actually degrade the performance in comparison to the vanilla model. Moreover, within each group, adding either LDS, FDS, or both leads to performance gains, while LDS + FDS often achieves the best results. Finally, when compared to the vanilla model, using our LDS and FDS maintains or slightly improves the performance overall and on the many-shot regions, while substantially boosting the performance for the medium-shot and few-shot regions.
â€ƒâ€ƒä»å›¾åƒæ¨æ–­å¹´é¾„ï¼šIMDB-WIKI-DIR å’Œ AgeDB-DIRã€‚ æˆ‘ä»¬åˆ†åˆ«åœ¨è¡¨ 1 å’Œè¡¨ 2 ä¸­æŠ¥å‘Šäº†ä¸åŒæ–¹æ³•çš„æ€§èƒ½ã€‚ å¯¹äºæ¯ä¸ªæ•°æ®é›†ï¼Œæˆ‘ä»¬å°†åŸºçº¿åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ä»¥åæ˜ å®ƒä»¬çš„ä¸åŒç­–ç•¥ã€‚ é¦–å…ˆï¼Œå¦‚ä¸¤ä¸ªè¡¨æ‰€ç¤ºï¼Œå½“åº”ç”¨äºç°ä»£çš„é«˜ç»´æ•°æ®ï¼ˆå¦‚å›¾åƒï¼‰æ—¶ï¼Œä¸æ™®é€šæ¨¡å‹ç›¸æ¯”ï¼ŒSMOTER å’Œ SMOGN å®é™…ä¸Šä¼šé™ä½æ€§èƒ½ã€‚ æ­¤å¤–ï¼Œåœ¨æ¯ä¸ªç»„ä¸­ï¼Œæ·»åŠ  LDSã€FDS æˆ–ä¸¤è€…éƒ½ä¼šå¯¼è‡´æ€§èƒ½æå‡ï¼Œè€Œ LDS + FDS é€šå¸¸ä¼šè·å¾—æœ€ä½³ç»“æœã€‚ æœ€åï¼Œä¸æ™®é€šæ¨¡å‹ç›¸æ¯”ï¼Œä½¿ç”¨æˆ‘ä»¬çš„ LDS å’Œ FDS ä¿æŒæˆ–ç•¥å¾®æé«˜äº†æ•´ä½“å’Œmany-shotåŒºåŸŸçš„æ€§èƒ½ï¼ŒåŒæ—¶æ˜¾è‘—æé«˜äº†medium-å’Œfew-shot åŒºåŸŸçš„æ€§èƒ½ã€‚&lt;/p>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-7.png" alt="image.png">
â€ƒâ€ƒ&lt;strong>Inferring Text Similarity Score: STS-B-DIR.&lt;/strong> Table 3 shows the results, where similar observations can be made on STS-B-DIR. Again, both SMOTER and SMOGN perform worse than the vanilla model. In contrast, both LDS and FDS consistently and substantially improve the results for various methods, especially in medium- and few-shot regions. The advantage is even more profound under Pearson correlation, which is commonly used for this NLP task.
â€ƒâ€ƒæ¨æ–­æ–‡æœ¬ç›¸ä¼¼åº¦å¾—åˆ†ï¼šSTS-B-DIRã€‚ è¡¨ 3 å±•ç¤ºäº†ç»“æœï¼Œå…¶ä¸­å¯ä»¥å¯¹ STS-B-DIR è¿›è¡Œç±»ä¼¼çš„è§‚å¯Ÿã€‚ åŒæ ·ï¼ŒSMOTER å’Œ SMOGN çš„è¡¨ç°éƒ½æ¯”vanillaæ¨¡å‹å·®ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼ŒLDS å’Œ FDS éƒ½æ”¹å–„äº†å„ç§æ–¹æ³•çš„ç»“æœï¼Œå°¤å…¶æ˜¯åœ¨ä¸­ç­‰å’Œå°‘æ ·æœ¬åŒºåŸŸã€‚ åœ¨NLP ä»»åŠ¡å¸¸ç”¨çš„Pearsonç›¸å…³æ€§ä¸‹ï¼Œä¼˜åŠ¿æ›´åŠ æ˜¾è‘—ã€‚&lt;/p>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-8.png" alt="image.png">
â€ƒâ€ƒ&lt;strong>Inferring Depth: NYUD2-DIR.&lt;/strong> For NYUD2-DIR, which is a dense regression task, we verify from Table 4 that adding LDS and FDS significantly improves the results. We note that the vanilla model can inevitably overfit to the manyshot regions during training. FDS and LDS help alleviate this effect, and generalize better to all regions, with minor degradation in the many-shot region but significant boosts for other regions.
â€ƒâ€ƒæ¨æ–­æ·±åº¦ï¼šNYUD2-DIRã€‚ å¯¹äºå¯†é›†å›å½’ä»»åŠ¡ NYUD2-DIRï¼Œæˆ‘ä»¬ä»è¡¨ 4 ä¸­éªŒè¯äº†æ·»åŠ  LDS å’Œ FDS å¯ä»¥æ˜¾è‘—æ”¹å–„ç»“æœã€‚ æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œvanilla æ¨¡å‹åœ¨è®­ç»ƒæœŸé—´ä¸å¯é¿å…åœ°ä¼šè¿‡åº¦æ‹Ÿåˆåˆ°manyshotåŒºåŸŸã€‚ FDS å’Œ LDS æœ‰åŠ©äºå‡è½»è¿™ç§å½±å“ï¼Œå¹¶æ›´å¥½åœ°æ³›åŒ–åˆ°æ‰€æœ‰åŒºåŸŸï¼Œåœ¨manyshotåŒºåŸŸæœ‰è½»å¾®çš„é€€åŒ–ï¼Œä½†åœ¨å…¶ä»–åŒºåŸŸæœ‰æ˜¾è‘—æå‡ã€‚&lt;/p>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-9.png" alt="image.png">
â€ƒâ€ƒ&lt;strong>Inferring Health Score: SHHS-DIR.&lt;/strong> Table 5 reports the results on SHHS-DIR. Since SMOTER and SMOGN are not directly applicable to this medical data, we skip them for this dataset. The results again confirm the effectiveness of both FDS and LDS when applied for real-world imbalanced regression tasks, where by combining FDS and LDS we often get the highest gains over all tested regions.
â€ƒâ€ƒæ¨æ–­å¥åº·è¯„åˆ†ï¼šSHHS-DIRã€‚ è¡¨ 5 è¯´æ˜äº† SHHS-DIR çš„ç»“æœã€‚ ç”±äº SMOTER å’Œ SMOGN å¹¶ä¸ç›´æ¥é€‚ç”¨äºè¯¥åŒ»å­¦æ•°æ®ï¼Œå› æ­¤æˆ‘ä»¬åœ¨æ­¤æ•°æ®é›†ä¸­è·³è¿‡å®ƒä»¬ã€‚ ç»“æœå†æ¬¡è¯å®äº† FDS å’Œ LDS åœ¨åº”ç”¨äºç°å®ä¸–ç•Œçš„ä¸å¹³è¡¡å›å½’ä»»åŠ¡æ—¶çš„æœ‰æ•ˆæ€§ï¼Œé€šè¿‡ç»“åˆ FDS å’Œ LDSï¼Œæˆ‘ä»¬é€šå¸¸åœ¨æ‰€æœ‰æµ‹è¯•åŒºåŸŸä¸­è·å¾—æœ€é«˜æ”¶ç›Šã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-10.png" alt="image.png" title="Figure 7. The absolute MAE gains of LDS + FDS over the vanilla model, on a curated subset of IMDB-WIKI-DIR with certain target values having no training data. We establish notable performance gains w.r.t. all regions, especially for extrapolation &amp;amp; interpolation.å›¾ 7. LDS + FDS åœ¨vanillaæ¨¡å‹ä¸Šçš„ç»å¯¹ MAE å¢ç›Šï¼Œåœ¨ IMDB-WIKI-DIR çš„ç²¾é€‰å­é›†ä¸Šï¼Œå…¶ä¸­æŸäº›ç›®æ ‡å€¼æ²¡æœ‰è®­ç»ƒæ•°æ®ã€‚ åœ¨æ‰€æœ‰åŒºåŸŸæœ‰ç€æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤–æ’å’Œå†…æ’ã€‚">&lt;/p>
&lt;figure>Figure 7. The absolute MAE gains of LDS + FDS over the vanilla model, on a curated subset of IMDB-WIKI-DIR with certain target values having no training data. We establish notable performance gains w.r.t. all regions, especially for extrapolation &amp; interpolation.
&lt;p>å›¾ 7. LDS + FDS åœ¨vanillaæ¨¡å‹ä¸Šçš„ç»å¯¹ MAE å¢ç›Šï¼Œåœ¨ IMDB-WIKI-DIR çš„ç²¾é€‰å­é›†ä¸Šï¼Œå…¶ä¸­æŸäº›ç›®æ ‡å€¼æ²¡æœ‰è®­ç»ƒæ•°æ®ã€‚ åœ¨æ‰€æœ‰åŒºåŸŸæœ‰ç€æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤–æ’å’Œå†…æ’ã€‚&lt;/figure>&lt;/p>
&lt;p>&lt;a name="f4V3z">&lt;/a>&lt;/p>
&lt;h3 id="42-further-analysis">4.2. Further Analysis&lt;/h3>
&lt;p>â€ƒâ€ƒ&lt;strong>Extrapolation &amp;amp; Interpolation.&lt;/strong> In real-world DIR tasks, certain target values can have no data at all (e.g., see SHHSDIR and STS-B-DIR in Fig. 6). This motivates the need for target extrapolation and interpolation. We curate a subset from the training set of IMDB-WIKI-DIR, which has no training data in certain regions (Fig. 7), but evaluate on the original testset for zero-shot generalization analysis.
â€ƒâ€ƒå¤–æ’å’Œå†…æ’ã€‚åœ¨ç°å®ä¸–ç•Œçš„DIRä»»åŠ¡ä¸­ï¼ŒæŸäº›ç›®æ ‡å€¼æ²¡æœ‰æ•°æ®ï¼ˆçœ‹å›¾6çš„SHHSDIRå’ŒSRS-B-DIRï¼‰ã€‚è¿™æ¿€å‘å¯¹ç›®æ ‡å¤–æ’å’Œå†…æ’çš„éœ€æ±‚ã€‚æˆ‘ä»¬æŒ‘é€‰äº†IMDB-WIKIè®­ç»ƒé›†ä¸­çš„ä¸€ä¸ªå­é›†ï¼Œè¯¥å­é›†åœ¨æŸäº›åŒºåŸŸæ²¡æœ‰è®­ç»ƒæ•°æ®ï¼ˆå›¾7ï¼‰è¿›è¡Œè®­ç»ƒï¼Œä½†åœ¨åŸå§‹æµ‹è¯•é›†ä¸Šè¯„ä¼°æ¥è¿›è¡Œé›¶æ ·æœ¬æ³›åŒ–åˆ†æã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-11.png" alt="image.png">
As Table 6 shows, compared to the vanilla model, LDS and FDS can both improve the results not only on regions that have data, but also achieve larger gains on those without data. Specifically, substantial improvements are established for both target interpolation and extrapolation, where interpolation enjoys larger boosts.
å¦‚è¡¨6æ‰€ç¤ºï¼Œè·Ÿvanillaæ¨¡å‹æ¯”è¾ƒï¼ŒLDSå’ŒFDSä¸ä»…åœ¨æœ‰æ•°æ®çš„åŒºåŸŸæé«˜æ€§èƒ½è¿˜èƒ½åœ¨æ²¡æœ‰æ•°æ®çš„åŒºåŸŸå–å¾—æ›´å¤§çš„æ”¶ç›Šã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨ç›®æ ‡å†…æ’å’Œå¤–æ’éƒ½æœ‰å®è´¨ä¸Šçš„æå‡ï¼Œå°¤å…¶åœ¨å†…æ’ä¸­ã€‚
We further visualize the absolute MAE gains of our method over vanilla model in Fig. 7. Our method provides a comprehensive treatment to the many, medium, few, as well as zero-shot regions, achieving remarkable performance gains.
æˆ‘ä»¬è¿›ä¸€æ­¥å¯è§†åŒ–æˆ‘ä»¬æ–¹æ³•çš„ç»å¯¹MAEæ”¶ç›Šåœ¨å›¾7ä¸­çš„vanillaæ¨¡å‹ä¸Šã€‚æˆ‘ä»¬çš„æ–¹æ³•å¯¹å¤šã€ä¸­ï¼Œå°‘ï¼Œé›¶åŒºåŸŸæä¾›å…¨é¢ç»¼åˆçš„å¤„ç†ï¼Œå®ç°äº†å·¨å¤§çš„æ”¶ç›Šã€‚
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-12.png" alt="image.png" title="(a) Feature statistics similarity for age 0, without FDS">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-13.png" alt="image.png" title="(b) Feature statistics similarity for age 0, with FDS">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-14.png" alt="image.png" title="(c) Statistics change">&lt;/p>
&lt;blockquote>
&lt;p>â€ƒâ€ƒFigure 8. Analysis on how FDS works.(a) &amp;amp; (b)Feature statistics similarity for anchor age 0, using model trained without and with FDS. (c) L1 distance between the running statistics$\left{\boldsymbol{\mu}&lt;em>{b}, \boldsymbol{\Sigma}&lt;/em>{b}\right}$and the smoothed statistics$\left{\tilde{\boldsymbol{\mu}}&lt;em>{b}, \widetilde{\boldsymbol{\Sigma}}&lt;/em>{b}\right}$during training.&lt;br>
å›¾8ï¼šå¯¹FDSå¦‚ä½•æœ‰æ•ˆçš„åˆ†æã€‚(a)å’Œ(b)anchor age 0çš„ç‰¹å¾ç»Ÿè®¡ç›¸ä¼¼æ€§ï¼Œä½¿ç”¨å¸¦FDSå’Œä¸å¸¦FDSçš„è®­ç»ƒæ¨¡å‹ã€‚(c)è¿è¡Œç»Ÿè®¡æ•°æ®$\left{\boldsymbol{\mu}&lt;em>{b}ã€\boldsymbol{\Sigma}&lt;/em>{b}\right}$ä¸å¹³æ»‘ç»Ÿè®¡æ•°æ®$\left{\tilde{\boldsymbol{\mu}}&lt;em>{b}, \widetilde{\boldsymbol{\Sigma}}&lt;/em>{b}\right}$åœ¨è®­ç»ƒæœŸé—´çš„L1è·ç¦»ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>â€ƒâ€ƒ&lt;strong>Understanding FDS.&lt;/strong> We investigate how FDS influences the feature statistics. In Fig. 8(a) and 8(b) we plot the similarity of the feature statistics for anchor age 0, using model trained without and with FDS. As the figure indicates, since age 0 lies in the few-shot region, the feature statistics can have a large bias, i.e., age 0 shares large similarity with region 40 âˆ¼ 80 as in Fig. 8(a). In contrast, when FDS is added, the statistics are better calibrated, resulting in a high similarity only in its neighborhood, and a gradually decreasing similarity score as target value becomes larger. We further visualize the L1 distance between the running statistics$\left{\boldsymbol{\mu}&lt;em>{b}, \boldsymbol{\Sigma}&lt;/em>{b}\right}$and the smoothed statistics$\left{\tilde{\boldsymbol{\mu}}&lt;em>{b}, \widetilde{\boldsymbol{\Sigma}}&lt;/em>{b}\right}$during training in Fig. 8(c). Interestingly, the average$L_1$distance becomes smaller and gradually diminishes as the training evolves, indicating that the model learns to generate features that are more accurate even without smoothing, and finally the smoothing module can be removed during inference. We provide more results for different anchor ages in Appendix E.7, where similar effects can be observed.
â€ƒâ€ƒç†è§£FDSã€‚æˆ‘ä»¬ç ”ç©¶äº†FDSå¦‚ä½•å½±å“ç‰¹å¾ç»Ÿè®¡å€¼ã€‚åœ¨å›¾8(a,b)ä¸­ï¼Œç”»å‡ºäº†ä½¿ç”¨å’Œæ²¡æœ‰ä½¿ç”¨FDSè®­ç»ƒåçš„æ¨¡å‹ä¸­anchor age 0çš„ç‰¹å¾ç»Ÿè®¡æ•°æ®ï¼ˆmeanã€varianceï¼‰çš„ç›¸ä¼¼æ€§ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œç”±äº0å²åœ¨å°‘æ ·æœ¬åŒºé—´ï¼Œå®ƒçš„ç‰¹å¾ç»Ÿè®¡å€¼ç”±å¾ˆå¤§çš„åå·®ï¼Œå³å›¾8(a)çœ‹å‡º0å²ä¸40-80å²çš„åŒºåŸŸæœ‰å¾ˆå¤§çš„ç›¸ä¼¼æ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå½“åŠ å…¥FDSåï¼Œç»Ÿè®¡æ•°æ®è¢«å¾ˆå¥½çš„æ ¡å‡†äº†ï¼Œä½¿å¾—ä»…åœ¨å…¶å‘¨å›´å…·æœ‰é«˜ç›¸ä¼¼åº¦ï¼Œå¹¶ä¸”éšç€ç›®æ ‡å€¼å˜å¤§ï¼Œç›¸ä¼¼åº¦éšä¹‹ä¸‹é™ã€‚å›¾8(c)å¯è§†åŒ–äº†è¿è¡Œç»Ÿè®¡æ•°æ®å’Œå¹³æ»‘ç»Ÿè®¡æ•°æ®é—´çš„L1è·ç¦»ã€‚æœ‰è¶£çš„æ˜¯ï¼Œéšç€è®­ç»ƒè¿›è¡Œï¼ŒL1è·ç¦»å˜å¾—æ›´å°å¹¶é€æ¸å¹³ç¨³ä¸‹é™ï¼Œè¿™è¡¨æ˜äº†æ¨¡å‹å³ä½¿åœ¨æ²¡æœ‰å¹³æ»‘çš„æƒ…å†µä¸‹å­¦ä¼šäº†ç”Ÿæˆæ›´å‡†ç¡®çš„ç‰¹å¾ï¼Œæœ€ç»ˆå¹³æ»‘æ¨¡å—å¯ä»¥åœ¨æ¨ç†é˜¶æ®µç§»é™¤ã€‚æˆ‘ä»¬æä¾›äº†æ›´å¤šçš„ç»“æœåœ¨é™„å½•E.7ï¼Œå¯ä»¥çœ‹åˆ°ç›¸ä¼¼çš„æ•ˆæœã€‚&lt;/p>
&lt;p>â€ƒâ€ƒ&lt;strong>Ablation: Kernel type for LDS &amp;amp; FDS (Appendix &lt;strong>&lt;a href="https://keepjolly.com/archives/delving-into-dir-translation/#ADrwB">&lt;strong>E.1&lt;/strong>&lt;/a>&lt;/strong>).&lt;/strong> We study the effects of different kernel types for LDS and FDS when applying distribution smoothing. We select three different kernel types, i.e., Gaussian, Laplacian, and Triangular kernel, and evaluate their influences on both LDS and FDS. In general, all kernel types lead to notable gains (e.g., 3.7% âˆ¼ 6.2% relative MSE gains on STS-B-DIR), with the Gaussian kernel often delivering the best results.
â€ƒâ€ƒæ¶ˆèå®éªŒï¼šLDSå’ŒFDSæ ¸ç±»å‹(é™„å½•E.1)ã€‚æˆ‘ä»¬ç ”ç©¶äº†åº”ç”¨åˆ†å¸ƒå¹³æ»‘æ—¶ä¸åŒæ ¸ç±»å‹å¯¹LDSå’ŒFDSçš„æ•ˆæœã€‚æˆ‘ä»¬é€‰æ‹©äº†ä¸‰ä¸ªä¸åŒæ ¸ç±»å‹ï¼Œå³Gaussianï¼ŒLaplicaianå’ŒTriangularï¼Œå¹¶ä¸”åœ¨LDSå’ŒFDSä¸Šè¯„ä¼°å®ƒä»¬çš„æ•ˆæœã€‚é€šå¸¸æ‰€æœ‰æ ¸ç±»å‹éƒ½ä¼šå¸¦æ¥æ˜¾è‘—æ•ˆæœï¼ˆå¦‚ï¼Œåœ¨STS-B-DIRä¸Šçš„ç›¸å¯¹MSEæ”¶ç›Šæ˜¯3.7%-6.2%ï¼‰ï¼Œå…¶ä¸­Gaussianæ ¸å¾€å¾€æ˜¯æœ€ä¼˜ç»“æœã€‚&lt;/p>
&lt;p>â€ƒâ€ƒ&lt;strong>Ablation: Different regression loss functions (Appendix E.2).&lt;/strong> We investigate the influence of different training loss functions on LDS and FDS. We select three common losses used for regression tasks, i.e., $L_1$ loss, MSE loss, and the Huber loss (also referred to as smoothed $L_1$loss). We find that similar results are obtained for all losses, indicating that both LDS and FDS are robust to different loss functions.
â€ƒâ€ƒæ¶ˆèå®éªŒï¼šä¸åŒçš„å›å½’æŸå¤±å‡½æ•°(é™„å½•E.2)ã€‚æˆ‘ä»¬ç ”ç©¶ äº†ä¸åŒè®­ç»ƒæ—¶çš„æŸå¤±å‡½æ•°å¯¹LDSå’ŒFDSçš„å½±å“ã€‚æˆ‘ä»¬é€‰æ‹©ä¸‰ä¸ªå¸¸è§çš„ç”¨äºå›å½’ä»»åŠ¡çš„æŸå¤±å‡½æ•°ï¼Œå³L1 lossï¼ŒMSE losså’ŒHuber lossï¼ˆä¹Ÿç§°ä¸ºå¹³æ»‘L1 lossï¼‰ã€‚æˆ‘ä»¬å‘ç°å¯¹äºæ‰€æœ‰æŸå¤±å‡½æ•°éƒ½è·å¾—äº†ç›¸ä¼¼çš„ç»“æœï¼Œè¿™è¡¨æ˜ LDS å’Œ FDS å¯¹ä¸åŒçš„æŸå¤±å‡½æ•°éƒ½å…·æœ‰é²æ£’æ€§ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒ&lt;strong>Ablation: Hyper-parameter for LDS &amp;amp; FDS (Appendix E.3).&lt;/strong> We investigate the effects of hyper-parameters on both LDS and FDS. As we mainly employ the Gaussian kernel for distribution smoothing, we extensively study different choices of the kernel size $l$ and standard deviation $Ïƒ$. Interestingly, we find LDS and FDS are surprisingly robust to different hyper-parameters in a given range, and obtain similar gains. For example, on STS-B-DIR with$l âˆˆ \left { 5,9,15 \right }$and$Ïƒ âˆˆ \left { 1,2,3 \right }$, overall MSE gains range from 3.3% to 6.2%, with$l = 5$and$Ïƒ = 2$exhibiting the best results.
â€ƒâ€ƒæ¶ˆèå®éªŒï¼šLDSå’ŒFDSçš„è¶…å‚æ•°(é™„å½•E.3)ã€‚æˆ‘ä»¬ç ”ç©¶äº†è¶…å‚æ•°å¯¹ LDS å’Œ FDS çš„å½±å“ã€‚ ç”±äºæˆ‘ä»¬ä¸»è¦ä½¿ç”¨é«˜æ–¯æ ¸è¿›è¡Œåˆ†å¸ƒå¹³æ»‘ï¼Œæˆ‘ä»¬å¹¿æ³›ç ”ç©¶äº†æ ¸å¤§å° l å’Œæ ‡å‡†å·® Ïƒ çš„ä¸åŒé€‰æ‹©ã€‚ æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬å‘ç° LDS å’Œ FDS å¯¹ç»™å®šèŒƒå›´å†…çš„ä¸åŒè¶…å‚æ•°å…·æœ‰æƒŠäººçš„é²æ£’æ€§ï¼Œå¹¶ä¸”è·å¾—äº†ç›¸ä¼¼çš„å¢ç›Šã€‚ ä¾‹å¦‚ï¼Œåœ¨ $l âˆˆ \left { 5,9,15 \right }$and$Ïƒ âˆˆ \left { 1,2,3 \right }$ çš„ STS-B-DIR ä¸Šï¼Œæ€»ä½“ MSE å¢ç›ŠèŒƒå›´ ä» 3.3% åˆ° 6.2%ï¼Œå…¶ä¸­ $l = 5$ å’Œ $Ïƒ = 2$ è¡¨ç°å‡ºæœ€å¥½çš„ç»“æœã€‚&lt;/p>
&lt;p>â€ƒâ€ƒ&lt;strong>Ablation: Robustness to diverse skewed label densities (Appendix E.4).&lt;/strong> We curate different imbalanced distributions for IMDB-WIKI-DIR by combining different number of disjoint skewed Gaussian distributions over the target space, with potential missing data in certain target regions, and evaluate the robustness of FDS and LDS to the distribution change. We verify that even under different imbalanced label distributions, LDS and FDS consistently boost the performance across all regions compared to the vanilla model, with relative MAE gains ranging from 8.8% to 12.4%.
â€ƒâ€ƒæ¶ˆèå®éªŒï¼šå¯¹ä¸åŒskewedæ ‡ç­¾å¯†åº¦çš„é²æ£’æ€§(é™„å½•E.4)ã€‚æˆ‘ä»¬é€šè¿‡å°†ç›®æ ‡ç©ºé—´ä¸Šä¸åŒæ•°é‡çš„ä¸ç›¸äº¤skewedé«˜æ–¯åˆ†å¸ƒä¸æŸäº›ç›®æ ‡åŒºåŸŸä¸­çš„æ½œåœ¨ç¼ºå¤±æ•°æ®ç›¸ç»“åˆï¼Œä¸º IMDB-WIKI-DIR ç®¡ç†ä¸åŒçš„ä¸å¹³è¡¡åˆ†å¸ƒï¼Œå¹¶è¯„ä¼° FDS å’Œ LDS å¯¹åˆ†å¸ƒå˜åŒ–çš„é²æ£’æ€§ã€‚ æˆ‘ä»¬éªŒè¯äº†å³ä½¿åœ¨ä¸åŒçš„ä¸å¹³è¡¡æ ‡ç­¾åˆ†å¸ƒä¸‹ï¼Œä¸æ™®é€šæ¨¡å‹ç›¸æ¯”ï¼ŒLDS å’Œ FDS ä¹Ÿèƒ½æŒç»­æå‡æ‰€æœ‰åŒºåŸŸçš„æ€§èƒ½ï¼Œç›¸å¯¹ MAE å¢ç›Šä» 8.8% åˆ° 12.4% ä¸ç­‰ã€‚&lt;/p>
&lt;p>â€ƒâ€ƒ&lt;strong>Comparisons to imbalanced classification methods (Appendix E.6).&lt;/strong> Finally, to gain more insights on the intrinsic difference between imbalanced classification &amp;amp; imbalanced regression problems, we directly apply existing imbalanced classification schemes on several appropriate DIR datasets, and show empirical comparisons with imbalanced regression approaches. We demonstrate in Appendix E.6 that LDS and FDS outperform imbalanced classification schemes by a large margin, where the errors for few-shot regions can be reduced by up to 50% to 60%. Interestingly, the results also show that imbalanced classification schemes often perform worse than even the vanilla regression model, which confirms that regression requires different approaches for data imbalance than simply applying classification methods. We note that imbalanced classification methods could fail on regression problems for several reasons. First, they ignore the similarity between data samples that are close w.r.t. the continuous target. Moreover, classification cannot extrapolate or interpolate in the continuous label space, therefore unable to deal with missing data in certain target regions.
â€ƒâ€ƒä¸ä¸å¹³è¡¡åˆ†ç±»æ–¹æ³•çš„æ¯”è¾ƒ(é™„å½•E.5)ã€‚æœ€åï¼Œä¸ºäº†æ›´æ·±å…¥åœ°äº†è§£ä¸å¹³è¡¡åˆ†ç±»å’Œä¸å¹³è¡¡å›å½’é—®é¢˜ä¹‹é—´çš„å†…åœ¨å·®å¼‚ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨å‡ ä¸ªé€‚å½“çš„ DIR æ•°æ®é›†ä¸Šåº”ç”¨ç°æœ‰çš„ä¸å¹³è¡¡åˆ†ç±»æ–¹æ¡ˆï¼Œå¹¶å±•ç¤ºä¸ä¸å¹³è¡¡å›å½’æ–¹æ³•çš„empirical æ¯”è¾ƒã€‚æˆ‘ä»¬åœ¨é™„å½• E.6 ä¸­è¯æ˜ï¼ŒLDS å’Œ FDS å¤§å¤§ä¼˜äºé‚£äº›ä¸å¹³è¡¡åˆ†ç±»æ–¹æ¡ˆï¼Œå…¶ä¸­å°‘æ ·æœ¬åŒºåŸŸçš„é”™è¯¯å¯ä»¥å‡å°‘å¤šè¾¾ 50% åˆ° 60%ã€‚æœ‰è¶£çš„æ˜¯ï¼Œç»“æœè¿˜è¡¨æ˜ï¼Œä¸å¹³è¡¡çš„åˆ†ç±»æ–¹æ¡ˆé€šå¸¸æ¯”æ™®é€šå›å½’æ¨¡å‹è¡¨ç°æ›´å·®ï¼Œè¿™è¯å®å›å½’éœ€è¦ä¸åŒçš„æ–¹æ³•æ¥è§£å†³æ•°æ®ä¸å¹³è¡¡é—®é¢˜ï¼Œè€Œä¸æ˜¯ç®€å•åœ°åº”ç”¨åˆ†ç±»æ–¹æ³•ã€‚æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œä¸å¹³è¡¡çš„åˆ†ç±»æ–¹æ¡ˆå¯èƒ½ä¼šå› ä¸ºå‡ ä¸ªåŸå› è€Œåœ¨å›å½’é—®é¢˜ä¸Šå¤±è´¥ã€‚é¦–å…ˆï¼Œä»–ä»¬å¿½ç•¥äº†ä¸è¿ç»­ç›®æ ‡æ¥è¿‘çš„æ•°æ®æ ·æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚æ­¤å¤–ï¼Œåˆ†ç±»æ— æ³•åœ¨è¿ç»­æ ‡ç­¾ç©ºé—´ä¸­è¿›è¡Œå¤–æ¨æˆ–å†…æ’ï¼Œå› æ­¤æ— æ³•å¤„ç†æŸäº›ç›®æ ‡åŒºåŸŸä¸­çš„ç¼ºå¤±æ•°æ®ã€‚
&lt;a name="LsUbt">&lt;/a>&lt;/p>
&lt;h2 id="5-conclusion">5. Conclusion&lt;/h2>
&lt;p>â€ƒâ€ƒWe introduce the DIR task that learns from natural imbalanced data with continuous targets, and generalizes to the entire target range. We propose two simple and effective algorithms for DIR that exploit the similarity between nearby targets in both label and feature spaces. Extensive results on five curated large-scale real-world DIR benchmarks confirm the superior performance of our methods. Our work fills the gap in benchmarks and techniques for practical DIR tasks. &lt;br>
â€ƒâ€ƒæˆ‘ä»¬å¼•å…¥äº† DIR ä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡ä»å…·æœ‰è¿ç»­ç›®æ ‡çš„è‡ªç„¶ä¸å¹³è¡¡æ•°æ®ä¸­å­¦ä¹ ï¼Œå¹¶æ¨å¹¿åˆ°æ•´ä¸ªç›®æ ‡èŒƒå›´ã€‚ æˆ‘ä»¬æå‡ºäº†ä¸¤ç§ç®€å•æœ‰æ•ˆçš„ DIR ç®—æ³•ï¼Œåˆ©ç”¨æ ‡ç­¾å’Œç‰¹å¾ç©ºé—´ä¸­ä¸´è¿‘ç›®æ ‡ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚ äº”ä¸ªæ•´ç†è¿‡çš„å¤§è§„æ¨¡çœŸå®ä¸–ç•Œ DIR åŸºå‡†æµ‹è¯•çš„å¹¿æ³›ç»“æœè¯å®äº†æˆ‘ä»¬æ–¹æ³•çš„å“è¶Šæ€§èƒ½ã€‚ æˆ‘ä»¬çš„å·¥ä½œå¡«è¡¥äº†å®é™… Deep Imbalanced Regression (DIR) ä»»åŠ¡çš„åŸºå‡†å’ŒæŠ€æœ¯æ–¹é¢çš„ç©ºç™½ã€‚&lt;/p>
&lt;hr>
&lt;p>&lt;a name="GAKZb">&lt;/a>&lt;/p>
&lt;h2 id="supplementary-material">Supplementary Material&lt;/h2>
&lt;p>&lt;a name="Nun91">&lt;/a>&lt;/p>
&lt;h3 id="a-pseudo-code-for-lds--fds">A. Pseudo Code for LDS &amp;amp; FDS&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-15.png" alt="image.png">
&lt;a name="cchrV">&lt;/a>&lt;/p>
&lt;h3 id="b-details-of-dir-datasets">B. Details of DIR Datasets&lt;/h3>
&lt;p>In this section, we provide the detailed information of the five curated DIR datasets we used in our experiments. Table 7 provides an overview of the five datasets.&lt;br>
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/2022/08/20220816201758-16.png" alt="image.png">
&lt;a name="ESOiR">&lt;/a>&lt;/p>
&lt;h3 id="c-experimental-settings">C. Experimental Settings&lt;/h3>
&lt;p>&lt;a name="tQC4e">&lt;/a>&lt;/p>
&lt;h3 id="d-additional-results">D. Additional Results&lt;/h3>
&lt;p>We provide complete evaluation results on the five DIR datasets, where more baselines and evaluation metrics are included in addition to the reported results in the main paper.&lt;br>
&lt;a name="E4UKC">&lt;/a>&lt;/p>
&lt;h3 id="e-further-analysis-and-ablation-studies">E. Further Analysis and Ablation Studies&lt;/h3>
&lt;p>&lt;a name="ADrwB">&lt;/a>&lt;/p>
&lt;h4 id="e1-kernel-type-for-lds--fds">E.1. Kernel Type for LDS &amp;amp; FDS&lt;/h4>
&lt;p>&lt;a name="xato0">&lt;/a>&lt;/p>
&lt;h4 id="e2-training-loss-for-lds--fds">E.2. Training Loss for LDS &amp;amp; FDS&lt;/h4>
&lt;p>&lt;a name="d5MnK">&lt;/a>&lt;/p>
&lt;h4 id="e3-hyper-parameters-for-lds--fds">E.3. Hyper-parameters for LDS &amp;amp; FDS&lt;/h4>
&lt;p>ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚å¤ªå¤šäº† è‡ªè¡ŒæŸ¥é˜…å§&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E7%A0%94%E7%A9%B6%E7%94%9F%E5%86%85%E5%AE%B9/">ç ”ç©¶ç”Ÿå†…å®¹</category><category domain="https://keepjolly.com/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</category><category domain="https://keepjolly.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">äººå·¥æ™ºèƒ½</category><category domain="https://keepjolly.com/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">æ·±åº¦å­¦ä¹ </category></item><item><title>æ¸…æ”¶è—ç”¨</title><link>https://keepjolly.com/archives/clean-collection/</link><guid isPermaLink="true">https://keepjolly.com/archives/clean-collection/</guid><pubDate>Sun, 31 Jul 2022 19:01:58 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;h2 id="æ·±åº¦å­¦ä¹ ">æ·±åº¦å­¦ä¹ &lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://blog.csdn.net/u013733326/article/details/79827273">å´æ©è¾¾è¯¾åä½œä¸šç›®å½•&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/Relph1119/stanford-deep-learning-notes">æ·±åº¦å­¦ä¹ ä½œä¸š ä¹ é¢˜æ— ç­”æ¡ˆ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://zhuanlan.zhihu.com/p/95510114">æ·±åº¦å­¦ä¹ ä½œä¸š ç¼–ç¨‹&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kyonhuang.top/Andrew-Ng-Deep-Learning-notes/#/">ã€Šæ·±åº¦å­¦ä¹ ã€‹ç¬”è®°&lt;/a>&lt;/li>
&lt;li>ä½œä¸š
&lt;ul>
&lt;li>&lt;a href="https://github.com/AdalbertoCq/Deep-Learning-Specialization-Coursera">æ·±åº¦å­¦ä¹ ä»£ç &lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.heywhale.com/mw/project/5e20243e2823a10036b542da">æ·±åº¦å­¦ä¹  ä¹ é¢˜ æœ‰ç­”æ¡ˆ&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://zh.d2l.ai">ææ²åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ &lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.bilibili.com/medialist/play/1567748478">ææ²æ·±åº¦å­¦ä¹ &lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.zhihu.com/question/332726203">å¦‚ä½•è‡ªå­¦æœºå™¨å­¦ä¹ &lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="å‰ç«¯">å‰ç«¯&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://imgtu.com/">å›¾åºŠ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.fastmock.site">åœ¨çº¿api&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="èµ„æºä¸‹è½½">èµ„æºä¸‹è½½&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://ziquyun.com/#">csdnä¸‹è½½&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://bilibili.iiilab.com">bç«™ä¸‹è½½&lt;/a>&lt;/li>
&lt;/ul></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E7%90%90%E8%A8%80/">çè¨€</category><category domain="https://keepjolly.com/categories/%E7%90%90%E8%A8%80/">çè¨€</category><category domain="https://keepjolly.com/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">æ·±åº¦å­¦ä¹ </category></item><item><title>picgoè¿›é˜¶ç©æ³•+è…¾è®¯äº‘</title><link>https://keepjolly.com/archives/picgo-jin-jie-wan-fa--teng-xun-yun/</link><guid isPermaLink="true">https://keepjolly.com/archives/picgo-jin-jie-wan-fa--teng-xun-yun/</guid><pubDate>Tue, 31 May 2022 22:36:39 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>å‚è€ƒé“¾æ¥ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cloud.tencent.com/developer/article/1474450">å€ŸåŠ©æ•°æ®ä¸‡è±¡ï¼ˆåŸä¸‡è±¡ä¼˜å›¾ï¼‰ï¼Œè®© hexo ä¹Ÿç”¨ä¸Š webp&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://tool.chinaz.com/tools/base64.aspx">Base64ç¼–ç è§£ç &lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.google.com/search?q=picgo%E8%87%AA%E5%AE%9A%E4%B9%89%E9%93%BE%E6%8E%A5%E6%A0%BC%E5%BC%8F&amp;amp;oq=picgo%E8%87%AA%E5%AE%9A%E4%B9%89%E9%93%BE%E6%8E%A5%E6%A0%BC%E5%BC%8F&amp;amp;aqs=chrome..69i57j69i61l2.6215j0j4&amp;amp;sourceid=chrome&amp;amp;ie=UTF-8">è‡ªå®šä¹‰é“¾æ¥æ ¼å¼&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.tencent.com/document/api/436/46782">æ·»åŠ ç›²æ°´å°&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://tin6.com/post/output-webp-format-images-based-on-alibaba-oss/">é˜¿é‡Œäº‘+picgo+è‡ªå®šä¹‰é“¾æ¥&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.tencent.com/document/product/460/58117">ç›²æ°´å°ä»·æ ¼&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://cloud.tencent.com/document/product/460/32832">æ•°æ®ä¸‡è±¡å¸¸è§é—®é¢˜&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>å› ä¸ºæƒ³ç€ä»Šæ™šå·²ç»æµªè´¹å¥½é•¿æ—¶é—´äº†ï¼Œç´¢æ€§æŠŠpicgoä¸Šä¼ å›¾ç‰‡ä¼˜åŒ–ä¸€ä¸‹ã€‚
&lt;a name="gp5WK">&lt;/a>&lt;/p>
&lt;h2 id="ä¸Šä¼ å›¾ç‰‡ä¸ºwebpæ ¼å¼å¹¶åŠ ç›²æ°´å°">ä¸Šä¼ å›¾ç‰‡ä¸ºwebpæ ¼å¼å¹¶åŠ ç›²æ°´å°&lt;/h2>
&lt;p>è‡ªå®šä¹‰é“¾æ¥æ ¼å¼å¦‚ä¸‹ï¼š$url?imageMogr2/format/webp|?watermark/3/type/3/text/XXXX&lt;/p>
&lt;ul>
&lt;li>|?watermark/3/type/3/text/XXXXï¼šç”Ÿæˆç›²æ°´å°ï¼Œå¦å¤–ç›²æ°´å°ç›®å‰çš„ä»·æ ¼æ˜¯æ·»åŠ ç›²æ°´å°ï¼š1å…ƒ/åƒæ¬¡ æå–ç›²æ°´å°ï¼š1å…ƒ/åƒæ¬¡&lt;/li>
&lt;li>XXXXè®°å¾—é€šè¿‡ä¸Šè¿°çš„&lt;a href="https://tool.chinaz.com/tools/base64.aspx">Base64ç¼–ç è§£ç &lt;/a>ç”Ÿæˆä½ çš„base64å­—ç¬¦ä¸²&lt;/li>
&lt;li>å®˜æ–¹æ–‡æ¡£å¥½åƒä¸å¯ä»¥httpså¼€å¤´ï¼Œç›®å‰ç”¨$urlæ²¡æœ‰ä»€ä¹ˆé—®é¢˜&lt;/li>
&lt;li>å¾®ä¿¡å°ç¨‹åºçš„å¤šå¤„ç†è§„åˆ™æ— æ•ˆåº”è¯¥æ€ä¹ˆåŠï¼Ÿ
&lt;ul>
&lt;li>è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š
&lt;ul>
&lt;li>ä½¿ç”¨æ ·å¼ã€‚&lt;/li>
&lt;li>æŠŠæ“ä½œç¬¦ â€œ|â€ æ›¿æ¢æˆ â€œ%7Câ€ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/2022/0520220531224449.png?imageMogr2/format/webp%7C?watermark/3/type/3/text/a2VlcGpvbGx5" alt="image.png">
&lt;a name="I8wnJ">&lt;/a>&lt;/p>
&lt;h2 id="æå–ç›²æ°´å°">æå–ç›²æ°´å°&lt;/h2>
&lt;p>å› ä¸ºéœ€è¦åˆ«äººæ‹¿æˆ‘çš„ç…§ç‰‡ï¼Œå¹¶ä¸”è¦ä¸Šä¼ åˆ°ä»–çš„cosæ‰èƒ½æå–ç›²æ°´å°
è¿™é‡Œæ”¾é“¾æ¥ï¼š&lt;a href="https://cloud.tencent.com/developer/article/1416987">Link&lt;/a>ã€&lt;a href="https://cloud.tencent.com/document/api/436/46782#.E6.8F.90.E5.8F.96.E7.9B.B2.E6.B0.B4.E5.8D.B0">Link2&lt;/a>&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E6%8A%80%E5%B7%A7/">æŠ€å·§</category><category domain="https://keepjolly.com/categories/%E6%8A%80%E5%B7%A7/">æŠ€å·§</category><category domain="https://keepjolly.com/tags/%E5%8D%9A%E5%AE%A2/">åšå®¢</category><category domain="https://keepjolly.com/tags/picgo/">picgo</category></item><item><title>picgoå®‰è£…æ’ä»¶ä¸æˆåŠŸ</title><link>https://keepjolly.com/archives/picgo-install-plugin/</link><guid isPermaLink="true">https://keepjolly.com/archives/picgo-install-plugin/</guid><pubDate>Tue, 31 May 2022 21:39:04 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>&lt;a href="https://cloud.tencent.com/developer/article/1834573">å®‰è£…picgo&lt;/a>
ä¸€å¼€å§‹å‘ç°picgo-plugin-super-prefix-masterè¿™ä¸ªæ’ä»¶ï¼Œæ•…å®‰è£…ï¼Œå› ä¸ºä»githubä¸Šä¸‹ä¸‹æ¥ï¼Œæ‰€ä»¥é‡‡å–äº†æœ¬åœ°ä¸Šä¼ æ’ä»¶è¿›è¡Œå®‰è£…ï¼Œè¿™ä¸€æ­¥å‘æ­»æˆ‘äº†ã€‚
&lt;a name="s1Nqf">&lt;/a>&lt;/p>
&lt;h2 id="super-prefixå®‰è£…">super-prefixå®‰è£…&lt;/h2>
&lt;p>åœ¨æ’ä»¶è®¾ç½®é‡Œè¾“å…¥&lt;strong>super-prefix&lt;/strong>ï¼Œæœç´¢åå³å¯å®‰è£…æˆåŠŸï¼Œæ³¨æ„ä½œè€…æ˜¯gclove
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/2022/0520220531213739.png?imageMogr2/format/webp" alt="image.png">
&lt;a name="rw9zn">&lt;/a>&lt;/p>
&lt;h3 id="é‡åˆ°çš„å‘">é‡åˆ°çš„å‘&lt;/h3>
&lt;p>æˆ‘æ˜¯ç›´æ¥åœ¨GitHubä¸Š&lt;a href="https://github.com/gclove/picgo-plugin-super-prefix/archive/refs/heads/master.zip">download&lt;/a>ä¸‹æ¥ï¼Œç„¶åæœ¬åœ°ä¸Šä¼ ï¼Œéå¸¸ä¸å»ºè®®æœ¬åœ°ä¸Šä¼ ï¼Œæœ‰bug
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/2022/0520220531213739-1.png?imageMogr2/format/webp" alt="image.png">
&lt;a name="mt5Ag">&lt;/a>&lt;/p>
&lt;h3 id="ä¿®æ”¹packagejson">ä¿®æ”¹package.json&lt;/h3>
&lt;p>åœ¨è¿™ä¸ªè·¯å¾„C:\Users\xxxx\AppData\Roaming\picgoä¸‹æ‰¾åˆ°package.jsonï¼Œé¦–å…ˆå°†é‡Œé¢çš„æœ¬åœ°ä¸Šä¼ çš„super-prefixåˆ é™¤(ctrl+f æŸ¥æ‰¾å³å¯)ï¼Œå¦‚æœæ²¡æœ‰ä¹Ÿæ²¡äº‹
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/2022/0520220531213739-2.png?imageMogr2/format/webp" alt="image.png">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/2022/0520220531213739-3.png?imageMogr2/format/webp" alt="image.png">
&lt;a name="xPSIg">&lt;/a>&lt;/p>
&lt;h3 id="åˆ é™¤node_modulesä¸­çš„package-lockjsonçš„å­—æ®µå€¼">åˆ é™¤node_modulesä¸­çš„.package-lock.jsonçš„å­—æ®µå€¼&lt;/h3>
&lt;p>1.å…ˆä»&lt;a href="https://keepjolly.com/archives/picgo-install-plugin/#s1Nqf">ç¬¬ä¸€æ­¥&lt;/a>ä»æœç´¢æ å®‰è£…å
2.é”™è¯¯å¤ç°ä¸äº†äº†ï¼Œæ€»ä¹‹åœ¨æ–‡ä»¶æœ€ä¸Šé¢ä¼šæœ‰ä¸ª../.../destop/picgo-plugin-super-prefixçš„ä¸€ä¸²ä»£ç ï¼Œä¸€ç›´åˆ é™¤**{ xxxxx},**ä¸ºæ­¢,ç„¶åé‡å¯è½¯ä»¶å³å¯
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/2022/0520220531213739-4.png?imageMogr2/format/webp" alt="image.png">
&lt;a name="WI8eW">&lt;/a>&lt;/p>
&lt;h2 id="pic-migrateå®‰è£…">pic-migrateå®‰è£…&lt;/h2>
&lt;p>å®‰è£…ç…§ä¸Šé¢æ¥å³å¯ï¼Œä½†æ˜¯å®‰è£…å®Œæˆåè®°å¾—é…ç½®å®ƒï¼Œæ–‡ä»¶ååç¼€ä»»æ„å³å¯
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/2022/0520220531213739-5.png?imageMogr2/format/webp" alt="image.png">&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6/">é—®é¢˜é›†é”¦</category><category domain="https://keepjolly.com/categories/%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6/">é—®é¢˜é›†é”¦</category><category domain="https://keepjolly.com/tags/%E5%8D%9A%E5%AE%A2/">åšå®¢</category></item><item><title>YOLOv1åˆä½“éªŒ</title><link>https://keepjolly.com/archives/yolov1-first-try/</link><guid isPermaLink="true">https://keepjolly.com/archives/yolov1-first-try/</guid><pubDate>Fri, 27 May 2022 16:14:59 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>ä¸‹è½½VOC2012æ•°æ®é›†ï¼Œè¿™é‡Œç”¨çš„æ˜¯é•œåƒï¼š&lt;a href="https://pjreddie.com/projects/pascal-voc-dataset-mirror/">é•œåƒç½‘å€&lt;/a>ã€&lt;a href="http://pjreddie.com/media/files/VOCtrainval_11-May-2012.tar">Train/Validation dataset&lt;/a>ã€&lt;a href="http://pjreddie.com/media/files/VOC2012test.tar">test dataset&lt;/a>
æ³¨æ„ç›´æ¥å¤åˆ¶é“¾æ¥ï¼Œæµè§ˆå™¨ä¸ä¼šæ¥ç®¡ä¸‹è½½ï¼Œéœ€è¦æ‰“å¼€è¿…é›·ï¼ˆæœ€å¥½æœ‰è¶…çº§ä¼šå‘˜ï¼‰
åŸæœ¬æƒ³å¤ç°çš„ï¼Œå¸ˆå…„å‘Šè¯‰æˆ‘è¿˜æ˜¯ç›´æ¥çœ‹v3å¥½ï¼Œæ•…æºœ~
å‚è€ƒé“¾æ¥ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.cnblogs.com/yifanrensheng/p/12871235.html#_label4_1">ç›®æ ‡æ£€æµ‹ï¼šYOLOV1&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blog.csdn.net/qq_37619128/article/details/122385654">YOLOv1æŸå¤±å‡½æ•°&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.jianshu.com/p/cad68ca85e27">YOLO v1æ·±å…¥ç†è§£&lt;/a> å¯ä»¥çœ‹çœ‹è¯„è®ºåŒº&lt;/li>
&lt;li>&lt;a href="https://zhuanlan.zhihu.com/p/25045711">YOLOï¼šå®æ—¶å¿«é€Ÿç›®æ ‡æ£€æµ‹&lt;/a> å¯ä»¥çœ‹çœ‹è¯„è®ºåŒº&lt;/li>
&lt;li>&lt;a href="https://blog.csdn.net/Roaddd/article/details/114266308">ã€ç›®æ ‡æ£€æµ‹ã€‘å•é˜¶æ®µç®—æ³•--YOLOv1è¯¦è§£&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://zhuanlan.zhihu.com/p/70387154">ã€è®ºæ–‡è§£è¯»ã€‘Yoloä¸‰éƒ¨æ›²è§£è¯»â€”â€”Yolov1&lt;/a> å¯ä»¥çœ‹çœ‹è¯„è®ºåŒº&lt;/li>
&lt;/ul>
&lt;h2 id="yolov1ç®€ä»‹">YOLOv1ç®€ä»‹&lt;/h2>
&lt;p>ç›¸æ¯”äº R-CNN ç³»åˆ—çš„æ–¹æ³•ï¼ŒYOLOæä¾›äº†å¦å¤–ä¸€ç§æ€è·¯ï¼Œå°† Object Detection çš„é—®é¢˜è½¬åŒ–æˆä¸€ä¸ª Regression é—®é¢˜ã€‚ç»™å®šè¾“å…¥å›¾åƒï¼Œç›´æ¥åœ¨å›¾åƒçš„å¤šä¸ªä½ç½®ä¸Šå›å½’å‡ºç›®æ ‡çš„bounding boxä»¥åŠå…¶åˆ†ç±»ç±»åˆ«ã€‚YOLOæ˜¯ä¸€ä¸ªå¯ä»¥&lt;strong>ä¸€æ¬¡æ€§é¢„æµ‹&lt;/strong>å¤šä¸ªBoxä½ç½®å’Œç±»åˆ«çš„å·ç§¯ç¥ç»ç½‘ç»œï¼Œèƒ½å¤Ÿå®ç°ç«¯åˆ°ç«¯çš„ç›®æ ‡æ£€æµ‹å’Œè¯†åˆ«ï¼Œå…¶æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯é€Ÿåº¦å¿«ã€‚YOLOæ²¡æœ‰é€‰æ‹©æ»‘åŠ¨çª—å£ï¼ˆsilding windowï¼‰æˆ–æå–proposalçš„æ–¹å¼è®­ç»ƒç½‘ç»œï¼Œè€Œæ˜¯ç›´æ¥é€‰ç”¨æ•´å›¾è®­ç»ƒæ¨¡å‹ã€‚è¿™æ ·åšçš„å¥½å¤„åœ¨äºå¯ä»¥æ›´å¥½çš„åŒºåˆ†ç›®æ ‡å’ŒèƒŒæ™¯åŒºåŸŸï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œé‡‡ç”¨proposalè®­ç»ƒæ–¹å¼çš„Fast-R-CNNå¸¸å¸¸æŠŠèƒŒæ™¯åŒºåŸŸè¯¯æ£€ä¸ºç‰¹å®šç›®æ ‡ã€‚ä½†æ˜¯YOLOç›®æ ‡åŒºåŸŸå®šä½è¯¯å·®æ›´å¤§ï¼ˆç‰¹åˆ«æ˜¯å°ç›®æ ‡ï¼‰ã€‚
ä¼˜ç‚¹ï¼š&lt;/p>
&lt;blockquote>
&lt;p>First, YOLO is extremely fast. Since we frame detection as a regression problem we don't need a complex pipeline.ï¼ˆè¿™é‡Œçš„å›å½’é—®é¢˜ä¸æ˜¯ç‰¹åˆ«ç†è§£ã€‚å›å½’çš„ç›®çš„æ˜¯é¢„æµ‹æ•°å€¼å‹çš„ç›®æ ‡å€¼ï¼Œè¾“å…¥å›¾åƒç»è¿‡ä¸€æ¬¡ç½‘ç»œï¼Œä¾¿èƒ½å¾—åˆ°å›¾åƒä¸­æ‰€æœ‰ç‰©ä½“çš„ä½ç½®å’Œå…¶æ‰€å±ç±»åˆ«åŠç›¸åº”çš„ç½®ä¿¡æ¦‚ç‡ï¼‰
Second, YOLO reasons globally about the image when making predictions. Unlike sliding window and region proposal-based techniques, YOLO sees the entire image.
Third, YOLO learns generalizable representations of objects. When trained on natural images and tested on art- work, YOLO outperforms top detection methods like DPM and R-CNN by a wide margin.&lt;/p>
&lt;/blockquote>
&lt;h2 id="imagepnghttpshalo-1310118673cosap-singaporemyqcloudcomhaloblogyolov11653536968541-23b5ea20-24dc-4fe6-ad35-f550474f62b2pngimagemogr2formatwebp">&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/yolov1/1653536968541-23b5ea20-24dc-4fe6-ad35-f550474f62b2.png?imageMogr2/format/webp" alt="image.png">&lt;/h2>
&lt;p>Our system models detection as a regression problem. It divides the image into an S Ã— S grid and for each grid cell predicts B bounding boxes, confidence for those boxes, and C class probabilities. These predictions are encoded as an S Ã— S Ã— (B âˆ— 5 + C) tensor.&lt;br>
å®ç°æ–¹æ¡ˆï¼š&lt;a href="https://www.jianshu.com/p/cad68ca85e27">Link&lt;/a>ï¼Œå¤§è‡´ä¸‹é¢è¿™ä¸ªåŒºåŸŸï¼Œå› ä¸ºéƒ½æ˜¯åŸæ–‡æ‘˜æŠ„ï¼Œæ‰€ä»¥ä¸å…¨éƒ¨å¤åˆ¶äº†ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>1ï¼‰ç»“æ„&lt;/strong>
å»æ‰å€™é€‰åŒºè¿™ä¸ªæ­¥éª¤ä»¥åï¼ŒYOLOçš„ç»“æ„éå¸¸ç®€å•ï¼Œå°±æ˜¯å•çº¯çš„å·ç§¯ã€æ± åŒ–æœ€ååŠ äº†ä¸¤å±‚å…¨è¿æ¥ã€‚å•çœ‹ç½‘ç»œç»“æ„çš„è¯ï¼Œå’Œæ™®é€šçš„CNNå¯¹è±¡åˆ†ç±»ç½‘ç»œå‡ ä¹æ²¡æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œæœ€å¤§çš„å·®å¼‚æ˜¯æœ€åè¾“å‡ºå±‚ç”¨çº¿æ€§å‡½æ•°åšæ¿€æ´»å‡½æ•°ï¼Œå› ä¸ºéœ€è¦é¢„æµ‹bounding boxçš„ä½ç½®ï¼ˆæ•°å€¼å‹ï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯å¯¹è±¡çš„æ¦‚ç‡ã€‚æ‰€ä»¥ç²—ç•¥æ¥è¯´ï¼ŒYOLOçš„æ•´ä¸ªç»“æ„å°±æ˜¯è¾“å…¥å›¾ç‰‡ç»è¿‡ç¥ç»ç½‘ç»œçš„å˜æ¢å¾—åˆ°ä¸€ä¸ªè¾“å‡ºçš„å¼ é‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>å¦å¤–æ–‡ä¸­å°†å›¾ç‰‡resizeä¸º448*448ï¼Œä¸€äº›å›¾ç‰‡ä¼šå‘ç”Ÿå¾ˆå¤§çš„å˜å½¢ï¼Œæ‰€ä»¥å°½é‡è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®åˆ†å¸ƒä¿æŒä¸€è‡´ã€‚&lt;/li>
&lt;li>YOLOå¹¶æ²¡æœ‰é¢„å…ˆè®¾ç½®2ä¸ªbounding boxçš„å¤§å°å’Œå½¢çŠ¶ï¼Œä¹Ÿæ²¡æœ‰å¯¹æ¯ä¸ªbounding boxåˆ†åˆ«è¾“å‡ºä¸€ä¸ªå¯¹è±¡çš„é¢„æµ‹ã€‚å®ƒçš„æ„æ€ä»…ä»…æ˜¯å¯¹ä¸€ä¸ªå¯¹è±¡é¢„æµ‹å‡º2ä¸ªbounding boxï¼Œé€‰æ‹©é¢„æµ‹å¾—ç›¸å¯¹æ¯”è¾ƒå‡†çš„é‚£ä¸ªã€‚è¿™é‡Œé‡‡ç”¨2ä¸ªbounding boxï¼Œæœ‰ç‚¹ä¸å®Œå…¨ç®—ç›‘ç£ç®—æ³•ï¼Œè€Œæ˜¯åƒè¿›åŒ–ç®—æ³•ã€‚å¦‚æœæ˜¯ç›‘ç£ç®—æ³•ï¼Œæˆ‘ä»¬éœ€è¦&lt;strong>äº‹å…ˆ&lt;/strong>æ ¹æ®æ ·æœ¬å°±èƒ½ç»™å‡ºä¸€ä¸ªæ­£ç¡®çš„bounding boxä½œä¸ºå›å½’çš„ç›®æ ‡ã€‚ä½†YOLOçš„2ä¸ªbounding boxäº‹å…ˆå¹¶ä¸çŸ¥é“ä¼šåœ¨ä»€ä¹ˆä½ç½®ï¼Œåªæœ‰ç»è¿‡å‰å‘è®¡ç®—ï¼Œç½‘ç»œä¼šè¾“å‡º2ä¸ªbounding boxï¼Œè¿™ä¸¤ä¸ªbounding boxä¸æ ·æœ¬ä¸­å¯¹è±¡å®é™…çš„bounding boxè®¡ç®—IOUã€‚è¿™æ—¶æ‰èƒ½ç¡®å®šï¼ŒIOUå€¼å¤§çš„é‚£ä¸ªbounding boxï¼Œä½œä¸ºè´Ÿè´£é¢„æµ‹è¯¥å¯¹è±¡çš„bounding boxã€‚
è®­ç»ƒå¼€å§‹é˜¶æ®µï¼Œç½‘ç»œé¢„æµ‹çš„bounding boxå¯èƒ½éƒ½æ˜¯ä¹±æ¥çš„ï¼Œä½†æ€»æ˜¯é€‰æ‹©IOUç›¸å¯¹å¥½ä¸€äº›çš„é‚£ä¸ªï¼Œéšç€è®­ç»ƒçš„è¿›è¡Œï¼Œæ¯ä¸ªbounding boxä¼šé€æ¸æ“…é•¿å¯¹æŸäº›æƒ…å†µçš„é¢„æµ‹ï¼ˆå¯èƒ½æ˜¯å¯¹è±¡å¤§å°ã€å®½é«˜æ¯”ã€ä¸åŒç±»å‹çš„å¯¹è±¡ç­‰ï¼‰ã€‚æ‰€ä»¥ï¼Œè¿™æ˜¯ä¸€ç§è¿›åŒ–æˆ–è€…éç›‘ç£å­¦ä¹ çš„æ€æƒ³ã€‚&lt;/li>
&lt;li>responsibleï¼š We assign one predictor to be â€œresponsibleâ€ for predicting an object based on which prediction has the highest current IOU with the ground truth. This leads to specialization between the bounding box predictors. Each predictor gets better at predicting certain sizes, aspect ratios, or classes of object, improving overall recall.&lt;/li>
&lt;li>è®¾ç½‘æ ¼æ•°é‡ä¸º S&lt;em>Sï¼Œæ¯ä¸ªç½‘æ ¼äº§ç”ŸBä¸ªè¾¹æ¡†ï¼Œæ•°æ®é›†åŒ…å«Cä¸ªä¸åŒçš„å¯¹è±¡ã€‚è¿™æ—¶ï¼Œè¾“å‡ºçš„é•¿åº¦ä¸ºï¼š$(C+B&lt;/em>(4+1))&lt;em>S&lt;/em>S$&lt;/li>
&lt;/ul>
&lt;h2 id="è®ºæ–‡å…³é”®éƒ¨åˆ†ç¿»è¯‘unified-detection">è®ºæ–‡å…³é”®éƒ¨åˆ†ç¿»è¯‘ï¼šUnified Detection&lt;/h2>
&lt;p>We unify the separate components of object detection into a single neural network. Our network uses features from the entire image to predict each bounding box. It also predicts all bounding boxes across all classes for an image simultaneously. This means our network reasons globally about the full image and all the objects in the image. The YOLO design enables end-to-end training and realtime speeds while maintaining high average precision.&lt;/p>
&lt;p>æˆ‘ä»¬å°†ç›®æ ‡æ£€æµ‹çš„ä¸åŒç»„ä»¶æ•´åˆåˆ°ä¸€ä¸ªç¥ç»ç½‘ç»œä¸­ã€‚æˆ‘ä»¬çš„ç½‘ç»œä½¿ç”¨æ•´å¼ å›¾ç‰‡çš„ç‰¹å¾æ¥é¢„æµ‹æ¯ä¸€ä¸ªè¾¹ç•Œæ¡†ã€‚å®ƒè¿˜åŒæ—¶é¢„æµ‹å›¾åƒçš„æ‰€æœ‰ç±»ä¸­çš„æ¯ä¸€ä¸ªè¾¹ç•Œæ¡†ã€‚è¿™è¡¨ç¤ºæˆ‘ä»¬çš„ç½‘ç»œå…¨å±€æ¨ç†æ•´å¼ å›¾ç‰‡å’Œå›¾ç‰‡ä¸Šçš„æ‰€æœ‰å¯¹è±¡ã€‚YOLOçš„è®¾è®¡å¯ä»¥è¿›è¡Œç«¯åˆ°ç«¯è®­ç»ƒå’Œè¾¾åˆ°å®æ—¶çš„é€Ÿåº¦å¹¶ä¸”ä¿æŒç›¸å¯¹é«˜çš„å‡†ç¡®åº¦ã€‚
Our system divides the input image into an_ S _Ã— &lt;em>S&lt;/em> grid. If the center of an object falls into a grid cell, that grid cell is responsible for detecting that object.&lt;/p>
&lt;p>æˆ‘ä»¬çš„ç³»ç»Ÿå°†è¾“å…¥å›¾ç‰‡åˆ†æˆSÃ—Sçš„ç½‘æ ¼ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„ä¸­å¿ƒç‚¹è½åœ¨æŸä¸ªç½‘æ ¼å†…ï¼Œåˆ™è¿™ä¸ªç½‘æ ¼è´Ÿè´£é¢„æµ‹è¿™ä¸ªå¯¹è±¡ã€‚ï¼ˆè®¡ç®—å‡ºè¯¥Objectçš„bounding boxçš„ä¸­å¿ƒä½ç½®ï¼Œè¿™ä¸ªä¸­å¿ƒä½ç½®è½åœ¨å“ªä¸ªgridï¼Œè¯¥gridå¯¹åº”çš„è¾“å‡ºå‘é‡ä¸­è¯¥å¯¹è±¡çš„ç±»åˆ«æ¦‚ç‡æ˜¯1ï¼ˆè¯¥girdè´Ÿè´£é¢„æµ‹è¯¥å¯¹è±¡ï¼‰ï¼Œæ‰€æœ‰å…¶å®ƒgridå¯¹è¯¥Objectçš„é¢„æµ‹æ¦‚ç‡è®¾ä¸º0ï¼ˆä¸è´Ÿè´£é¢„æµ‹è¯¥å¯¹è±¡ï¼‰&lt;a href="https://www.jianshu.com/p/cad68ca85e27">å‚è€ƒç½‘å€&lt;/a>ã€‚å¦å¤–æœ€å¤šèƒ½æ£€æµ‹å‡ºS*Sä¸ªç‰©ä½“ï¼Œå¦‚æœæ¯ä¸ªç‰©ä½“çš„ä¸­å¿ƒç‚¹åœ¨æ¯ä¸ªç½‘æ ¼å†…ï¼‰
Each grid cell predicts &lt;em>B&lt;/em> bounding boxes and confidence scores for those boxes. These confidence scores reflect how confident the model is that the box contains an object and also how accurate it thinks the box is that it predicts. Formally we define confidence as $\operatorname{Pr}(\text { Object }) * \mathrm{IOU}_{\text {pred }}^{\text {truth }}$. If no object exists in that cell, the confidence scores should be zero. Otherwise we want the confidence score to equal the intersection over union (IOU) between the predicted box and the ground truth.&lt;/p>
&lt;p>æ¯ä¸ªç½‘æ ¼é¢„æµ‹Bä¸ªbboxeså’Œè¿™äº›boxesçš„ç½®ä¿¡åº¦ã€‚å…¶ä¸­ç½®ä¿¡åº¦åæ˜ äº†æ¨¡å‹å¯¹è¿™ä¸ªboxåŒ…å«å¯¹è±¡çš„ä¿¡ä»»åº¦å’Œæ¨¡å‹è®¤ä¸ºè¿™ä¸ªboxé¢„æµ‹æœ‰æ— å¯¹è±¡çš„å‡†ç¡®åº¦ã€‚æˆ‘ä»¬å®šä¹‰ç½®ä¿¡åº¦ä¸ºæœ‰æ— å¯¹è±¡çš„é¢„æµ‹å€¼ï¼ˆé0å³1ï¼‰* truth boxå’Œpred boxçš„äº¤å¹¶æ¯”ã€‚å¦‚æœæ²¡æœ‰objectåœ¨ç½‘æ ¼å†…ï¼Œåˆ™ç½®ä¿¡åº¦åº”ä¸º0. å¦åˆ™æˆ‘ä»¬å°†ç½®ä¿¡åº¦ç­‰äºé¢„æµ‹æ¡†å’ŒçœŸå®æ¡†çš„äº¤å¹¶æ¯”ã€‚&lt;/p>
&lt;p>Each bounding box consists of 5 predictions: &lt;em>x&lt;/em>, &lt;em>y&lt;/em>, &lt;em>w&lt;/em>, &lt;em>h&lt;/em>,_ _and confidence. The (&lt;em>x,&lt;/em> &lt;em>y&lt;/em>) coordinates represent the center of the box relative to the bounds of the grid cell. The width and height are predicted relative to the whole image. Finally the confidence prediction represents the IOU between the predicted box and any ground truth box.&lt;/p>
&lt;p>æ¯ä¸ªbboxåŒ…å«5ä¸ªé¢„æµ‹å€¼ï¼šx, y, w, h and ç½®ä¿¡åº¦ã€‚(x, y)è¡¨ç¤ºbboxç›¸å¯¹äºç½‘æ ¼å•å…ƒæ ¼è¾¹ç•Œçš„ä¸­å¿ƒåæ ‡ã€‚é¢„æµ‹çš„é«˜å®½ç›¸å¯¹äºæ•´å¼ å›¾ç‰‡çš„é«˜å®½ã€‚æœ€åï¼Œç½®ä¿¡åº¦é¢„æµ‹è¡¨ç¤ºpred and truth çš„äº¤å¹¶æ¯”&lt;/p>
&lt;p>Each grid cell also predicts &lt;em>C&lt;/em> conditional class probabilities, $\operatorname{Pr}\left(\text { Class }&lt;em>{i} \mid \text { Object }\right)$. These probabilities are conditioned on the grid cell containing an object. We only predict one set of class probabilities per grid cell, regardless of the number of boxes&lt;/em> B_.&lt;/p>
&lt;p>æ¯ä¸ªç½‘æ ¼ä¹Ÿé¢„æµ‹Cä¸ªæ¡ä»¶ç±»å‹æ¦‚ç‡ï¼Œå³å­˜åœ¨å¯¹è±¡æ—¶ï¼Œå±äºæŸç±»åˆ«çš„æ¦‚ç‡ã€‚è¿™äº›æ¦‚ç‡ä»¥ç½‘æ ¼å†…åŒ…å«å¯¹è±¡ä¸ºæ¡ä»¶ã€‚æˆ‘ä»¬ä»…é¢„æµ‹æ¯ä¸ªç½‘æ ¼çš„ä¸€ç³»åˆ—çš„ç±»åˆ«æ¦‚ç‡ï¼Œä¸ç®¡bboxçš„ä¸ªæ•°ã€‚ï¼ˆç›¸å½“äºæ¯ä¸ªç½‘æ ¼åªè¾“å‡ºä¸€ä¸ªç±»å‹æ¦‚ç‡ï¼Œè€Œä¸ä¼šè¾“å‡ºbboxçš„ç±»åˆ«æ¦‚ç‡ï¼Œbboxè¾“å‡ºç½®ä¿¡åº¦ï¼‰
At test time we multiply the conditional class probabilities and the individual box confidence predictions, $\begin{equation*} \operatorname{Pr}\left(\text { Class }&lt;em>{i} \mid \text { Object }\right) * \operatorname{Pr}(\text { Object }) * \mathrm{IOU}&lt;/em>{\text {pred }}^{\text {truth }}=\operatorname{Pr}\left(\text { Class }&lt;em>{i}\right) * \mathrm{IOU}&lt;/em>{\text {pred }}^{\text {truth }} \end{equation*}$
which gives us class-specific confidence scores for each box. These scores encode both the probability of that class appearing in the box and how well the predicted box fits the object.&lt;/p>
&lt;p>åœ¨æµ‹è¯•é˜¶æ®µæˆ‘ä»¬å°†conditional class probabilitiesä¹˜ä¸Šæ¯ä¸ªbboxçš„ç½®ä¿¡åº¦é¢„æµ‹å€¼ï¼Œå…¬å¼ä¸­iæŒ‡çš„æ˜¯ç±»åˆ«ä¸ªæ•°ï¼Œæ‰€ä»¥æœ‰$\operatorname{Pr}\left(\text { Class }&lt;em>{1}\right) * \mathrm{IOU}&lt;/em>{\text {pred }}^{\text {truth }}ã€ \operatorname{Pr}\left(\text { Class }&lt;em>{2}\right) * \mathrm{IOU}&lt;/em>{\text {pred }}^{\text {truth }}...\operatorname{Pr}\left(\text { Class }&lt;em>{i}\right) * \mathrm{IOU}&lt;/em>{\text {pred }}^{\text {truth }}$ï¼Œè¿™æ ·å­ä½¿æˆ‘ä»¬å¾—åˆ°å…³äºæ¯ä¸ªbboxçš„ç‰¹å®šç±»çš„ç½®ä¿¡åº¦ã€‚è¿™äº›å€¼ä¹Ÿåæ˜ äº†bounding boxæ˜¯å¦å«æœ‰Objectå’Œbounding boxåæ ‡çš„å‡†ç¡®åº¦ã€‚&lt;/p>
&lt;p>æœ€ååœ¨PASCAL VOCä¸­ S=7ï¼ŒB=2ï¼ŒC=20ï¼Œæœ€ç»ˆè¾“å‡ºä¸º7Ã—7Ã—30çš„æ ‡é‡ï¼ˆ30=(4+1)*2+20, 4æ˜¯xywhï¼Œ1æ˜¯ç½®ä¿¡åº¦ï¼Œ2æ˜¯bboxä¸ªæ•°ï¼Œ20ç±»åˆ«æ•°ï¼‰&lt;/p>
&lt;h2 id="æŸå¤±å‡½æ•°">æŸå¤±å‡½æ•°&lt;/h2>
&lt;p>å›¾ç‰‡æ¥æºï¼š&lt;a href="https://www.cnblogs.com/yifanrensheng/p/12871235.html#_label4_1">Link&lt;/a>&lt;/p>
&lt;h2 id="imagepnghttpshalo-1310118673cosap-singaporemyqcloudcomhaloblogyolov11653446878220-7d2da09d-efaa-4f2f-8bcf-30e14fdc5bfbpngimagemogr2formatwebp">&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/yolov1/1653446878220-7d2da09d-efaa-4f2f-8bcf-30e14fdc5bfb.png?imageMogr2/format/webp" alt="image.png">&lt;/h2>
&lt;h2 id="imagepnghttpshalo-1310118673cosap-singaporemyqcloudcomhaloblogyolov11653546402345-b302bc1a-36f6-439c-ac36-8f3e4e24b882pngimagemogr2formatwebp">&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/yolov1/1653546402345-b302bc1a-36f6-439c-ac36-8f3e4e24b882.png?imageMogr2/format/webp" alt="image.png">&lt;/h2>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/yolov1/1653447175456-063291b7-cbdc-47b6-b461-90e3d88d7593.png?imageMogr2/format/webp" alt="image.png">
$1_{ij}^{obj}$è¡¨ç¤ºç¬¬iä¸ªç½‘æ ¼ä¸­çš„ç¬¬jä¸ªbboxæœ‰å¯¹è±¡
$1_{ij}^{noobj}$è¡¨ç¤ºç¬¬iä¸ªç½‘æ ¼ä¸­çš„ç¬¬jä¸ªbboxæ— å¯¹è±¡&lt;/p>
&lt;ul>
&lt;li>ç¬¬ä¸€è¡Œæ˜¯é¢„æµ‹æ¡†çš„ä¸­å¿ƒï¼Œåªè®¡ç®—å«æœ‰ç‰©ä½“æ—¶çš„bbox(IOUå¤§çš„é‚£ä¸ª)æŸå¤±å€¼ï¼Œå› ä¸º$1_{ij}^{obj}$æ— å¯¹è±¡å…¶å€¼ä¸º0ã€‚&lt;/li>
&lt;li>ç¬¬äºŒè¡Œæ˜¯é¢„æµ‹æ¡†çš„é«˜å®½ï¼Œä¸ç¬¬ä¸€è¡Œä¸åŒçš„æ˜¯whå–äº†æ ¹å·ï¼Œå¦‚æœä¸å–æ ¹å·ï¼ŒæŸå¤±å‡½æ•°åˆ™åå‘äºè°ƒæ•´å¤§å°ºå¯¸çš„é¢„æµ‹æ¡†ï¼Œå› ä¸ºä¿®æ”¹å°å°ºå¯¸çš„è¯å¯¹lossæœ‰è¾ƒå¤§çš„å½±å“ï¼Œå¦‚h=1000ï¼Œerror=25ï¼›h=100ï¼Œerror=25çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥å°æ¡†çš„è¯¯å·®è¦ä¸¥é‡ï¼Œå› æ­¤lossè¦åŠ å¤§ï¼Œä½†æ˜¯ä¸å–å¹³æ–¹æ ¹åˆ™1000-975 = 100-75ï¼Œ Sum-squared error also equally weights errors in large boxes and small boxesï¼ŒåŠ äº†æ ¹å·åˆ™sqrt(1000)-sqrt(975) â‰ˆ0.4 &amp;lt; sqrt(100)-sqrt(75) â‰ˆ1.33ï¼Œæ­¤æ—¶å°æ¡†è¯¯å·®å°±ä½“ç°å‡ºæ¥äº†ã€‚å¹³æ–¹æ ¹å‡½æ•°çš„ä¸Šå‡è¶‹åŠ¿æ˜¯é€’å‡çš„ï¼Œè¶Šæ¥è¶Šå¹³ç¼“ï¼ˆè¯„è®ºæœ€åä¸€é¡µï¼š&lt;a href="https://www.jianshu.com/p/cad68ca85e27">Link&lt;/a>ï¼‰ã€‚&lt;/li>
&lt;li>ç¬¬ä¸‰è¡Œæ˜¯é¢„æµ‹æ¡†åŒ…å«å¯¹è±¡æ—¶çš„ç½®ä¿¡åº¦&lt;/li>
&lt;li>ç¬¬å››è¡Œæ˜¯é¢„æµ‹æ¡†ä¸åŒ…å«å¯¹è±¡æ—¶çš„ç½®ä¿¡åº¦ï¼Œè¿™é‡Œè§£é‡ŠæŒºå¤šçš„ï¼Œæˆ‘ä¹Ÿåˆ†è¾¨ä¸è¿‡æ¥å“ªä¸ªæ˜¯å¯¹çš„ï¼Œæ•…å…¨å¤åˆ¶è¿‡æ¥äº†ã€‚
&lt;ul>
&lt;li>ç¬¬4è¡Œæ˜¯ä¸å­˜åœ¨å¯¹è±¡çš„bounding boxçš„ç½®ä¿¡åº¦è¯¯å·®ã€‚å› ä¸ºä¸å­˜åœ¨å¯¹è±¡çš„bounding boxåº”è¯¥è€è€å®å®çš„è¯´&amp;quot;æˆ‘è¿™é‡Œæ²¡æœ‰å¯¹è±¡&amp;quot;ï¼Œä¹Ÿå°±æ˜¯è¾“å‡ºå°½é‡ä½çš„ç½®ä¿¡åº¦ã€‚å¦‚æœå®ƒä¸æ°å½“çš„è¾“å‡ºè¾ƒé«˜çš„ç½®ä¿¡åº¦ï¼Œä¼šä¸çœŸæ­£&amp;quot;è´Ÿè´£&amp;quot;è¯¥å¯¹è±¡é¢„æµ‹çš„é‚£ä¸ªbounding boxäº§ç”Ÿæ··æ·†ã€‚å…¶å®å°±åƒå¯¹è±¡åˆ†ç±»ä¸€æ ·ï¼Œæ­£ç¡®çš„å¯¹è±¡æ¦‚ç‡æœ€å¥½æ˜¯1ï¼Œæ‰€æœ‰å…¶å®ƒå¯¹è±¡çš„æ¦‚ç‡æœ€å¥½æ˜¯0ã€‚&lt;/li>
&lt;li>å¦‚æœä¸€äº›æ …æ ¼ä¸­æ²¡æœ‰objectï¼ˆä¸€å¹…å›¾ä¸­è¿™ç§æ …æ ¼å¾ˆå¤šï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šå°†è¿™äº›æ …æ ¼ä¸­çš„bounding boxçš„confidence ç½®ä¸º0ï¼Œç›¸æ¯”äºè¾ƒå°‘çš„æœ‰objectçš„æ …æ ¼ï¼Œè¿™äº›ä¸åŒ…å«ç‰©ä½“çš„æ …æ ¼å¯¹æ¢¯åº¦æ›´æ–°çš„è´¡çŒ®ä¼šè¿œå¤§äºåŒ…å«ç‰©ä½“çš„æ …æ ¼å¯¹æ¢¯åº¦æ›´æ–°çš„è´¡çŒ®ï¼Œè¿™ä¼šå¯¼è‡´ç½‘ç»œä¸ç¨³å®šç”šè‡³å‘æ•£ã€‚&lt;/li>
&lt;li>ä¸åŒ…å«objçš„ç½®ä¿¡åº¦æŸå¤±å°±æ˜¯åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯åŒ…å«objçš„grid cellä¸­çš„ä¸¤ä¸ªBBoxä¸­ä¸è´Ÿè´£é¢„æµ‹çš„é‚£ä¸ªBBoxï¼Œå¦å¤–ä¸€éƒ¨åˆ†æ˜¯ä¸åŒ…å«objçš„grid cellçš„bboxã€‚æŸå¤±è®¡ç®—æ—¶ï¼Œè´Ÿè´£é¢„æµ‹ç‰©ä½“çš„bboxçš„ä¾¿ç­¾å€¼å°±æ˜¯IOUçš„å€¼ï¼Œä¸è´Ÿè´£é¢„æµ‹ç‰©ä½“çš„bboxçš„æ ‡ç­¾å€¼å°±æ˜¯0ï¼ˆåŒ…å«ä¸Šè¿°æ‰€æè¿°çš„ä¸¤éƒ¨åˆ†ï¼‰ï¼Œé¢„æµ‹å€¼å°±æ˜¯ç½‘ç»œç›´æ¥è¾“å‡ºå‡ºæ¥çš„ï¼Œè®¡ç®—æ—¶å°±æ˜¯ä¸¤è€…ç›¸å‡åå–å¹³æ–¹ã€‚&lt;/li>
&lt;li>åç»­æˆ‘çš„ç†è§£ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬äºŒå¹…å›¾ï¼Œå› ä¸ºæ¯ä¸ªç½‘æ ¼éƒ½ä¼šè¾“å‡ºé¢„æµ‹å€¼ï¼Œå³ä½¿bboxçš„Cè¾ƒå°ï¼Œ$(C_i-C^{hat}_i)=(0-0.2)^2&lt;em>48&lt;/em>2$ä¹Ÿä¼šå˜å¾—å¾ˆå¤§(48æ˜¯åŒ…å«å¯¹è±¡æ—¶49-1ï¼Œç„¶å*bboxä¸ªæ•°ï¼Œå…¶å®è¿˜è¦+1ï¼Œå› ä¸ºIOUå°çš„é‚£ä¸ªä¹Ÿè¢«æ·˜æ±°äº†)ï¼Œæ‰€ä»¥è¦ä¹˜ä¸ªå°æ•°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ç¬¬äº”è¡Œæ˜¯ç½‘æ ¼åŒ…å«ç‰©ä½“æ—¶çš„ç‰©ä½“ç±»åˆ«æ¦‚ç‡ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="è®­ç»ƒè¿‡ç¨‹å’Œæ¨ç†interferenceè¿‡ç¨‹">è®­ç»ƒè¿‡ç¨‹å’Œæ¨ç†interferenceè¿‡ç¨‹&lt;/h2>
&lt;h3 id="train">train&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/yolov1/1653550530915-bf70a1d9-4f2c-4c8f-b0c5-530cc486582f.png?imageMogr2/format/webp" alt="image.png">
ä½œè€…é‡‡ç”¨ImageNet 1000-class æ•°æ®é›†æ¥é¢„è®­ç»ƒå·ç§¯å±‚ã€‚é¢„è®­ç»ƒé˜¶æ®µï¼Œé‡‡ç”¨ä¸Šå›¾ç½‘ç»œä¸­çš„å‰20å·ç§¯å±‚ï¼ˆåŒ…æ‹¬æ± åŒ–å±‚ï¼‰ï¼Œå¤–åŠ average-pooling å±‚å’Œå…¨è¿æ¥å±‚ã€‚ç„¶åï¼Œå°†æ¨¡å‹è½¬æ¢ä¸ºæ£€æµ‹æ¨¡å‹ä½¿ç”¨DarkNetæ¶æ„å¹¶ç”¨äºinterferenceé˜¶æ®µã€‚ä½œè€…å‘é¢„è®­ç»ƒæ¨¡å‹ä¸­åŠ å…¥äº†4ä¸ªå·ç§¯å±‚å’Œä¸¤å±‚å…¨è¿æ¥å±‚ï¼Œæé«˜äº†æ¨¡å‹è¾“å…¥åˆ†è¾¨ç‡ï¼ˆ224Ã—224-&amp;gt;448Ã—448ï¼‰ã€‚æœ€åä¸€å±‚é¢„æµ‹ç±»åˆ«æ¦‚ç‡å’Œbounding boxåæ ‡å€¼ã€‚bounding boxçš„å®½å’Œé«˜é€šè¿‡è¾“å…¥å›¾åƒå®½å’Œé«˜å½’ä¸€åŒ–åˆ°0-1åŒºé—´ã€‚æœ€åä¸€å±‚é‡‡ç”¨linear activationï¼Œå…¶å®ƒå±‚ä½¿ç”¨ leaky rectified linearã€‚ä½œè€…é‡‡ç”¨sum-squared errorä¸ºç›®æ ‡å‡½æ•°æ¥ä¼˜åŒ–ï¼Œå¢åŠ bounding box lossæƒé‡ï¼Œå‡å°‘ç½®ä¿¡åº¦æƒé‡ï¼Œå®éªŒä¸­ï¼Œè®¾å®šä¸º$Î»_{coord} =5$,$Î»_{noobj} = .5$ã€‚
ä½œè€…è¿˜é‡‡ç”¨äº†dropoutå’Œ data augmentationæ¥é¢„é˜²è¿‡æ‹Ÿåˆã€‚dropoutå€¼ä¸º0.5ï¼›data augmentationåŒ…æ‹¬ï¼šrandom scalingï¼Œtranslationï¼Œadjust exposureå’Œsaturationã€‚&lt;/p>
&lt;h3 id="inference">inference&lt;/h3>
&lt;p>è®­ç»ƒå¥½çš„YOLOç½‘ç»œï¼Œè¾“å…¥ä¸€å¼ å›¾ç‰‡ï¼Œå°†è¾“å‡ºä¸€ä¸ª 7&lt;em>7&lt;/em>30 çš„å¼ é‡ï¼ˆtensorï¼‰æ¥è¡¨ç¤ºå›¾ç‰‡ä¸­æ‰€æœ‰ç½‘æ ¼åŒ…å«çš„å¯¹è±¡ï¼ˆæ¦‚ç‡ï¼‰ä»¥åŠè¯¥å¯¹è±¡å¯èƒ½çš„2ä¸ªä½ç½®ï¼ˆbounding boxï¼‰å’Œç½®ä¿¡åº¦ã€‚
å› ä¸ºä¸€äº›å¤§ç‰©ä½“æˆ–è€…é è¿‘å¤šä¸ªç½‘æ ¼çš„è¾¹ç•Œçš„ç‰©ä½“ä¼šäº§ç”Ÿå¤šä¸ªé¢„æµ‹æ¡†ï¼ŒYOLOé‡‡ç”¨NMSï¼ˆNon-maximal suppressionï¼Œéæå¤§å€¼æŠ‘åˆ¶ï¼‰ç®—æ³•æ¥å‡å°‘ã€‚&lt;/p>
&lt;h3 id="limitation">limitation&lt;/h3>
&lt;ol>
&lt;li>YOLOçš„æ¯ä¸€ä¸ªç½‘æ ¼åªé¢„æµ‹ä¸¤ä¸ªboxesï¼Œä¸€ç§ç±»åˆ«ã€‚è¿™å¯¼è‡´æ¨¡å‹å¯¹ç›¸é‚»ç›®æ ‡é¢„æµ‹å‡†ç¡®ç‡ä¸‹é™ã€‚å› æ­¤ï¼ŒYOLOå¯¹æˆé˜Ÿåˆ—çš„ç›®æ ‡ï¼ˆå¦‚ ä¸€ç¾¤é¸Ÿï¼‰è¯†åˆ«å‡†ç¡®ç‡è¾ƒä½ã€‚&lt;/li>
&lt;li>YOLOæ˜¯ä»æ•°æ®ä¸­å­¦ä¹ é¢„æµ‹bounding boxesï¼Œå› æ­¤ï¼Œå¯¹æ–°çš„æˆ–è€…ä¸å¸¸è§è§’åº¦çš„ç›®æ ‡æ— æ³•è¯†åˆ«ã€‚&lt;/li>
&lt;li>YOLOçš„losså‡½æ•°å¯¹small bounding boxeså’Œlarge bounding boxesçš„errorå¹³ç­‰å¯¹å¾…ï¼Œå½±å“äº†æ¨¡å‹è¯†åˆ«å‡†ç¡®ç‡ã€‚å› ä¸ºå¯¹äºå°çš„bounding boxesï¼Œsmall errorå½±å“æ›´å¤§ã€‚ä¸»è¦è¯†åˆ«é”™è¯¯æ¥æºæ˜¯ä¸æ­£ç¡®çš„å®šä½æ¡†ã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="é”™è¯¯åˆ†æ">é”™è¯¯åˆ†æ&lt;/h3>
&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/yolov1/1653554508484-c0c71686-f569-4709-91cf-76565620cda4.png?imageMogr2/format/webp" alt="image.png">
é¢„æµ‹ç»“æœåŒ…æ‹¬ä»¥ä¸‹å‡ ç±»ï¼š
æ­£ç¡®ï¼šç±»åˆ«æ­£ç¡®ï¼ŒIOU&amp;gt;0.5
å®šä½ï¼šç±»åˆ«æ­£ç¡®ï¼Œ0.1&amp;lt;IOU&amp;lt;0.5
ç±»ä¼¼ï¼šç±»åˆ«ç›¸ä¼¼ï¼ŒIOU&amp;gt;0.1
å…¶å®ƒï¼šç±»åˆ«é”™è¯¯ï¼ŒIOU&amp;gt;0.1
èƒŒæ™¯ï¼šIOU&amp;lt;0.1&lt;/p>
&lt;h2 id="æ–‡ä¸­çš„å°æŠ€å·§">æ–‡ä¸­çš„å°æŠ€å·§&lt;/h2>
&lt;ol>
&lt;li>å›å½’offsetä»£æ›¿ç›´æ¥å›å½’åæ ‡&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>We parametrize the bounding box x and y coordinates to be offsets of a particular grid cell location so they are also bounded between 0 and 1&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>(x, y)ä¸ç›´æ¥å›å½’ä¸­å¿ƒç‚¹åæ ‡æ•°å€¼ï¼Œè€Œæ˜¯å›å½’ç›¸å¯¹äºæ ¼ç‚¹å·¦ä¸Šè§’åæ ‡çš„ä½ç§»å€¼ã€‚&lt;/strong> ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªæ ¼ç‚¹ä¸­ç‰©ä½“åæ ‡ä¸º (2.3, 3.6) ï¼Œå¦ä¸€ä¸ªæ ¼ç‚¹ä¸­çš„ç‰©ä½“åæ ‡ä¸º(4.2, 4.6)ï¼Œè¿™å››ä¸ªæ•°å€¼è®©ç¥ç»ç½‘ç»œæš´åŠ›å›å½’ï¼Œæœ‰ä¸€å®šéš¾åº¦ã€‚æ‰€ä»¥è¿™é‡Œçš„offsetæ˜¯æŒ‡ï¼Œæ—¢ç„¶æ ¼ç‚¹å·²çŸ¥ï¼Œé‚£ä¹ˆç‰©ä½“ä¸­å¿ƒç‚¹çš„åæ ‡ä¸€å®šåœ¨æ ¼ç‚¹æ­£æ–¹å½¢é‡Œï¼Œç›¸å¯¹äºæ ¼ç‚¹å·¦ä¸Šè§’çš„ä½ç§»å€¼ä¸€å®šåœ¨åŒºé—´[0, 1)ä¸­ã€‚è®©ç¥ç»ç½‘ç»œå»é¢„æµ‹ (0.3, 0.6) ä¸ (0.2, 0.6) ä¼šæ›´åŠ å®¹æ˜“ï¼Œåœ¨ä½¿ç”¨æ—¶ï¼ŒåŠ ä¸Šæ ¼ç‚¹å·¦ä¸Šè§’åæ ‡(2, 3)ã€(4, 4)å³å¯ã€‚&lt;/p>
&lt;h2 id="heading">&lt;/h2>
&lt;p>ä¸ºä»€ä¹ˆä¸€ä¸ªç½‘æ ¼åªæ£€æµ‹ä¸€ä¸ªç›®æ ‡ï¼š&lt;a href="https://www.zdaiot.com/DeepLearningApplications/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/%E5%AE%9E%E6%97%B6%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%EF%BC%9AYOLO%E3%80%81YOLOv2%E4%BB%A5%E5%8F%8AYOLOv3/">å®æ—¶ç›®æ ‡æ£€æµ‹&lt;/a>&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E7%A0%94%E7%A9%B6%E7%94%9F%E5%86%85%E5%AE%B9/">ç ”ç©¶ç”Ÿå†…å®¹</category><category domain="https://keepjolly.com/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%B7%B5/">æ·±åº¦å­¦ä¹ å®è·µ</category><category domain="https://keepjolly.com/tags/python/">Python</category><category domain="https://keepjolly.com/tags/pytorch/">pytorch</category></item><item><title>å½¢æ€å­¦--è…èš€è¿ç®—è¯¦ç»†è¿‡ç¨‹</title><link>https://keepjolly.com/archives/morphology-erosion/</link><guid isPermaLink="true">https://keepjolly.com/archives/morphology-erosion/</guid><pubDate>Tue, 10 May 2022 20:04:00 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>åœ¨ç½‘ä¸Šç¿»çœ‹è®¸å¤šï¼Œéƒ½æ˜¯åªè®²å®šä¹‰ï¼Œä¸è®²è¿‡ç¨‹ï¼Œæ•…æˆ‘æ ¹æ®ä¸€é“é¢˜ç›®æ¥è¯¦ç»†ä»‹ç»å¦‚ä½•è¿›è¡Œè…èš€è¿ç®—ï¼Œè†¨èƒ€è¿ç®—ä¸è…èš€è¿ç®—å·®ä¸å¤šå°±ä¸å¤šåŠ èµ˜è¿°äº†ã€‚
é¢˜ç›®å¦‚ä¸‹ï¼š
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/erode/1652099989022-aeabc97e-01aa-439e-8731-a6a82f1519f6.png?imageMogr2/format/webp" alt="image.png">
ç¨‹åºå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">numpy&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">np&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">cv2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">A&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]],&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">uint8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Ac&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">A&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Ac&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(np.pad(Ac, (1, 1), mode=&amp;#39;constant&amp;#39;, constant_values=(1, 1)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">T1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]],&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">uint8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">T2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">array&lt;/span>&lt;span class="p">([[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]],&lt;/span> &lt;span class="n">np&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">uint8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">img1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">erode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># äº‹å®ä¸Šè¿™é‡Œæ˜¯cv2.erode(Ac, T2, borderValue=1)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">img2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cv2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">erode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Ac&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">img1&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">img2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/erode/1652178834944-470bbccb-eeb8-45a6-866d-ad0f0bb5cb75.png?imageMogr2/format/webp" alt="image.png">&lt;/p>
&lt;h2 id="äº§ç”Ÿimg1">äº§ç”Ÿimg1&lt;/h2>
&lt;p>é¦–å…ˆè®²img1æ˜¯å¦‚ä½•å‡ºæ¥çš„ã€‚ï¼ˆå®‰åˆ©ä¸€ä¸ªæˆªå›¾ç¥å™¨ï¼Œ&lt;strong>snipaste&lt;/strong>ï¼‰
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/erode/1652178700984-15502084-6486-4bdd-8d9d-e249cc5ed697.png?imageMogr2/format/webp" alt="image.png">
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/erode/1652176451686-49ddb2db-2548-41de-85d0-4da0e36557e4.png?imageMogr2/format/webp" alt="image.png">
å›¾ç‰‡æˆ‘ä¸ªäººæ„Ÿè§‰å¾ˆæ¸…æ™°äº†ï¼Œé™¤äº†æœ‰ç‚¹ä¹±ã€‚é¡ºåºä»çº¢è‰²å­—â†’ç»¿è‰²å­—â†’è“è‰²å­—â†’ç´«è‰²å­—â†’ç™½è‰²å­—&lt;/p>
&lt;blockquote>
&lt;p>ç–‘é—®è§£å†³ï¼š
&lt;a href="https://docs.opencv.org/4.x/db/df6/tutorial_erosion_dilatation.html">Eroding and Dilating&lt;/a>
&lt;a href="http://opencv.jp/opencv-2.2_org/cpp/imgproc_image_filtering.html#cv-erode">cv2.erodeå‚æ•°è§£é‡Š&lt;/a>
å¦‚æœæ— æŒ‡å®šï¼Œé»˜è®¤ä¸ºç»“æ„å…ƒç´ ä¸­ç‚¹&lt;/p>
&lt;/blockquote>
&lt;h2 id="äº§ç”Ÿimg2">äº§ç”Ÿimg2&lt;/h2>
&lt;p>æ¥ä¸‹æ¥æ˜¯img2ï¼ŒåŸç†å·®ä¸å¤šï¼Œé™¤äº†ä¸€å¼€å§‹é‡åˆ°è¡¥é›†ï¼Œçœ‹åˆ°å¥½å¤š1æœ‰ç‚¹æ…Œã€‚
&lt;strong>æ³¨æ„ï¼šå½“é‡åˆ°è¿™ç§æƒ…å†µï¼Œopencvä¼šä¸ºå›¾åƒæ‰©å……è¾¹ç•Œï¼Œå…¶å€¼ä¸º1.&lt;/strong>
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/erode/1652183808346-615c12e5-15d4-4549-973c-41aede64701a.png?imageMogr2/format/webp" alt="image.png">
å›¾ä¸­ä¸åŒé¢œè‰²çš„çŸ©é˜µå¤§éƒ¨åˆ†å€¼ä¸å˜ï¼Œæ˜¯å› ä¸ºåœ¨æ¯æ¬¡æ¯”è¾ƒéƒ½æ˜¯æ¯”è¾ƒåŸå›¾ï¼Œè€Œä¸æ˜¯ä¿®æ”¹åçš„å›¾ã€‚&lt;/p>
&lt;h2 id="æ±‚å¹¶é›†">æ±‚å¹¶é›†&lt;/h2>
&lt;p>å…¨ä¸º1æ‰ä¸º1
&lt;img src="https://halo-1310118673.cos.ap-singapore.myqcloud.com/halo/blog/erode/1652183929130-f20288b6-083c-47c2-b19b-758cb542ec58.png?imageMogr2/format/webp" alt="image.png">&lt;/p></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E5%BA%94%E7%94%A8/">åº”ç”¨</category><category domain="https://keepjolly.com/categories/%E5%BA%94%E7%94%A8/">åº”ç”¨</category><category domain="https://keepjolly.com/tags/python/">Python</category><category domain="https://keepjolly.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/">è®¡ç®—æœºè§†è§‰</category></item><item><title>(leetcode) ä¸€å‘¨å…­é¢˜.md</title><link>https://keepjolly.com/archives/leetcode-one-week-six-ans/</link><guid isPermaLink="true">https://keepjolly.com/archives/leetcode-one-week-six-ans/</guid><pubDate>Sat, 30 Apr 2022 14:50:31 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;p>è‡³æ­¤ä¸€ä¸ªæœˆå…¨éƒ¨æ‰“å¡ï¼Œä¹‹åæŒ‰ä¸“é¢˜æ¥è¿›è¡Œæé«˜&lt;/p>
&lt;h2 id="éšæœºæ•°ç´¢å¼•httpsleetcode-cncomproblemsrandom-pick-index">&lt;a href="https://leetcode-cn.com/problems/random-pick-index/">éšæœºæ•°ç´¢å¼•&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æš´åŠ›&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Solution&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="fm">__init__&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nums&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nums&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">pick&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ–°å»ºå­—å…¸ key:int value:list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">dic&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dic&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">num&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dic&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">num&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">choice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dic&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ°´å¡˜æŠ½æ ·&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://zhuanlan.zhihu.com/p/29178293&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Solution&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="fm">__init__&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nums&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nums&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">pick&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cnt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cnt&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randrange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cnt&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># éšæœºæŠ½kä¸ª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä»…ä¾›å‚è€ƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">ReservoirSampling&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">k&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">target&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">num&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">idx&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cnt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">k&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">target&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cnt&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ran&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randrange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cnt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">ran&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">ran&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">res&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä¸‰ç»´å½¢ä½“æŠ•å½±é¢ç§¯httpsleetcode-cncomproblemsprojection-area-of-3d-shapes">&lt;a href="https://leetcode-cn.com/problems/projection-area-of-3d-shapes/">ä¸‰ç»´å½¢ä½“æŠ•å½±é¢ç§¯&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç®€å•é¢˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">projectionArea&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">grid&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]])&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">grid&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">row&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">grid&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">y&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">row&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">row&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">item&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">z&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">item&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä¸€è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># zip(*grid) æŒ‰åˆ—è¾“å‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># *è¿”å›tuple **è¿”å›å­—å…¸&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://baijiahao.baidu.com/s?id=1719090099795374109&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">projectionArea&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">grid&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]])&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">g&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">g&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">grid&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">g&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">zip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">grid&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å¤ªå¹³æ´‹å¤§è¥¿æ´‹æ°´æµé—®é¢˜httpsleetcode-cncomproblemspacific-atlantic-water-flow">&lt;a href="https://leetcode-cn.com/problems/pacific-atlantic-water-flow/">å¤ªå¹³æ´‹å¤§è¥¿æ´‹æ°´æµé—®é¢˜&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Solution&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">pacificAtlantic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]])&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">heights&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">search&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">starts&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">visited&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">set&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">visited&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">visited&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">nx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ny&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">nx&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">ny&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nx&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">ny&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="n">heights&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ny&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">starts&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">visited&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ä»ä¸Šå·¦éå†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pacific&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">)]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ä»ä¸‹å³éå†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">atlantic&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">)]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">[(&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">search&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pacific&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">search&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">atlantic&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æŒ‰å¥‡å¶æ’åºæ•°ç»„httpsleetcode-cncomproblemssort-array-by-parity">&lt;a href="https://leetcode-cn.com/problems/sort-array-by-parity/">æŒ‰å¥‡å¶æ’åºæ•°ç»„&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åŒæŒ‡é’ˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">sortArrayByParity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">t&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">nums&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä¸€è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">sortArrayByParity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">sorted&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">keys&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">!=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å»ºç«‹å››å‰æ ‘httpsleetcode-cncomproblemsconstruct-quad-tree">&lt;a href="https://leetcode-cn.com/problems/construct-quad-tree/">å»ºç«‹å››å‰æ ‘&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">construct&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">grid&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]])&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;Node&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r0&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r1&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c0&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">c1&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;Node&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">grid&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">grid&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">r0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">c0&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Node&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kc">False&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r0&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r1&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c0&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">c1&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r0&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r1&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c0&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">c1&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r0&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r1&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c0&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">c1&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r0&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r1&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c0&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">c1&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Node&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">grid&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">r0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">c0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">grid&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">grid&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æœ€å°å·®å€¼-ihttpsleetcode-cncomproblemssmallest-range-i">&lt;a href="https://leetcode-cn.com/problems/smallest-range-i/">æœ€å°å·®å€¼ I&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">smallestRangeI&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">k&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E5%8A%9B%E6%89%A3/">åŠ›æ‰£</category><category domain="https://keepjolly.com/categories/leetcode/">leetcode</category><category domain="https://keepjolly.com/tags/%E5%8A%9B%E6%89%A3/">åŠ›æ‰£</category></item><item><title>(leetcode) ä¸€å‘¨ä¸ƒé¢˜.md</title><link>https://keepjolly.com/archives/leetcode-week-1/</link><guid isPermaLink="true">https://keepjolly.com/archives/leetcode-week-1/</guid><pubDate>Sun, 24 Apr 2022 14:27:55 +0000</pubDate><author>1366475809@qq.com (Rurouni)</author><copyright>åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«(æˆ‘ä¼šé«˜å¼ºåº¦è‡ªæœçš„å–”ğŸ‘Š)ã€‚</copyright><description>&lt;h2 id="æœ€å¸¸è§çš„å•è¯httpsleetcode-cncomproblemsmost-common-word">&lt;a href="https://leetcode-cn.com/problems/most-common-word/">æœ€å¸¸è§çš„å•è¯&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è‡ªå·±å†™çš„æ°´ä»£ç &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">mostCommonWord&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">paragraph&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">banned&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ss&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># å°†å­—ç¬¦ä¸²è½¬æˆå°å†™å­—æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">paragraph&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">paragraph&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lower&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">banned&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">banned&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">banned&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lower&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åˆ¤æ–­æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦æ²¡æœ‰ç©ºæ ¼æˆ–å…¶ä»–ç¬¦å·&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">paragraph&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="s1">&amp;#39;z&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># å°†bob,ä¸­&amp;#39;,&amp;#39;é€ æˆçš„&amp;#39;&amp;#39;åˆ é™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ss&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æœ€åä¸€ä¸ªå­—ç¬¦ä¸²åŠ å…¥æ•°ç»„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">flag&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ss&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Counter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ss&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">banned&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è·å–æœ€å¤§å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">banned&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">del&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®˜è§£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">mostCommonWord&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">paragraph&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">banned&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ban&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">banned&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">freq&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Counter&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">word&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">paragraph&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è·å–å­—ç¬¦ä¸²æ¨¡æ¿ï¼Œ&amp;#39;Bob like Joe&amp;#39;=&amp;gt;[Bob, like, Joe]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># n+1 æ’é™¤äº†å•è¯ç»“å°¾çš„æƒ…å†µ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># i&amp;lt;n ä½¿å¾—paragraph[i]ä¸ä¼šè¶Šç•Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">paragraph&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isalpha&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">word&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">paragraph&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lower&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">word&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">word&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">ban&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">freq&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">word&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">word&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maxFreq&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">freq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">word&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">word&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">freq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">items&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">maxFreq&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä¸€è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://leetcode-cn.com/problems/most-common-word/solution/by-jam007-3la9/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">mostCommonWord&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">paragraph&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">banned&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Counter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findall&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;\w+&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">paragraph&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lower&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">banned&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">most_common&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å­—å…¸åºæ’æ•°httpsleetcode-cncomproblemslexicographical-numbers">&lt;a href="https://leetcode-cn.com/problems/lexicographical-numbers/">å­—å…¸åºæ’æ•°&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®˜è§£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">lexicalOrder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">num&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># ä¿å­˜1 100 1000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">num&lt;/span> &lt;span class="o">*=&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># num % 10 = 9æ˜¯åˆ¤æ–­å°¾æ•°æ˜¯å¦åˆ°å¤´ï¼Œå› ä¸ºå†åŠ 1åˆ™å˜ä¸º10ï¼Œåˆ°å¤´åˆ™ä½¿numå˜ä¸º9&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># num + 1 &amp;gt; nï¼š+1æ˜¯ä¸ºäº†åé¢çš„num+=1ï¼Œå¹¶ä¸”åˆ¤æ–­numæ˜¯ä¸æ˜¯è¶…è¿‡äº†nï¼Œè¶…è¿‡åˆ™ä½¿num//10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">num&lt;/span> &lt;span class="o">//=&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="c1"># ä½¿numå¤åŸ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">num&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># dfs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://leetcode-cn.com/problems/lexicographical-numbers/solution/by-ac_oier-ktn7/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">lexicalOrder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">num&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">limit&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">limit&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">num&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">limit&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åº“å‡½æ•°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">lexicalOrder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">sorted&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å­—ç¬¦çš„æœ€çŸ­è·ç¦»httpsleetcode-cncomproblemsshortest-distance-to-a-character">&lt;a href="https://leetcode-cn.com/problems/shortest-distance-to-a-character/">å­—ç¬¦çš„æœ€çŸ­è·ç¦»&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®˜è§£çš„-nã€2*n ç§’å•Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">shortestToChar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">idx&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">idx&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nb">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®˜è§£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">shortestToChar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ä½¿i-idx å˜ä¸ºæœ€å¤§&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">idx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åŒç†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">idx&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># bfs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://leetcode-cn.com/problems/shortest-distance-to-a-character/solution/-by-yu-niang-niang-4qgd/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">shortestToChar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">queue&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Queue&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ch&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">ch&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">put&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">q&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">empty&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">idx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">q&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># idx != 0 ä½¿å…¶ä¸è¶Šç•Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">idx&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">put&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># idx+1 &amp;lt; n ä½¿å…¶ä¸è¶Šç•Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">idx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">put&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">idx&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ–‡ä»¶çš„æœ€é•¿ç»å¯¹è·¯å¾„httpsleetcode-cncomproblemslongest-absolute-file-path">&lt;a href="https://leetcode-cn.com/problems/longest-absolute-file-path/">æ–‡ä»¶çš„æœ€é•¿ç»å¯¹è·¯å¾„&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39; è§£é¢˜æ€è·¯ æœ¬é¢˜ä¸ºæ±‚è§£æ–‡ä»¶å¤¹è·¯å¾„çš„æœ€å¤§å€¼ï¼Œå…¶ä¸­ä¼šæ·»åŠ  /
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">1. ç”¨ depth_length_map ä¿ç•™æ¯å±‚è·¯å¾„çš„é•¿åº¦ï¼Œ input.split(&amp;#39;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;) åˆ‡åˆ†ä¸ºæ¯è¡Œåˆ†ææ¯è¡Œé•¿åº¦ä¸æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">2. line.count(&amp;#39;&lt;/span>&lt;span class="se">\t&lt;/span>&lt;span class="s1">&amp;#39;) çš„ä¸ªæ•°æ¥åˆ¤æ–­æ˜¯ç¬¬å‡ å±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">3. line.count(&amp;#39;.&amp;#39;) çš„ä¸ªæ•°åˆ¤æ–­æ˜¯å¦æœ‰æ–‡ä»¶ï¼Œæœ‰æ–‡ä»¶è·å–å½“å‰æœ€é•¿è·¯å¾„å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">4. æ¯å±‚éƒ½è¦æ·»åŠ depthä¸ª / ï¼Œ é•¿åº¦éœ€è¦ä¿®æ”¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¾ˆå¦™çš„è§£æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://leetcode-cn.com/problems/longest-absolute-file-path/solution/wen-jian-de-zui-chang-jue-dui-lu-jing-by-fi0r/1516846&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">lengthLongestPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">input&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># -1å±‚ä¸ºäº†æ ¹ç›®å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depth_length&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">word&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">word&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\t&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è¦†ç›–ä¹‹å‰çš„æ–‡ä»¶é•¿åº¦ï¼Œè®¡ç®—å®Œ.extå‰é¢çš„é•¿åº¦åå°±æ— ç”¨äº†ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># +ä¸Šä¸€å±‚çš„æ–‡ä»¶å¤¹é•¿åº¦+å½“å‰é•¿åº¦-å­—ç¬¦&amp;#39;\t&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depth_length&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">depth&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">depth_length&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">depth&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">word&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">depth&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># å½“é‡åˆ°.extæ–‡ä»¶è®¡ç®—é•¿åº¦&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">word&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># +depthæ˜¯ä¸ºäº†æ¯å±‚éƒ½è¦æ·»åŠ depthä¸ª /&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">depth_length&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">depth&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">res&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¯ä»¥è¾“å‡ºå­—ç¬¦ä¸²&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">lengthLongestPath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">input&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">input&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">map&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ¯æ¬¡é‡ç½®æ–‡ä»¶å¤¹æ·±åº¦&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">level&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è®¡ç®—æ·±åº¦&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\t&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">level&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è®¡ç®—å½“å‰å­—ç¬¦ï¼ˆä¸åŒ…æ‹¬&amp;#39;\n&amp;#39;&amp;#39;\t&amp;#39;ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">isDir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">isDir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æˆªå–å½“å‰å­—ç¬¦ä¸²&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cur&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># è·å–ä»¥å‰çš„è·¯å¾„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">prev&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">map&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">level&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ‹¼æ¥è·¯å¾„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cur&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">prev&lt;/span> &lt;span class="ow">is&lt;/span> &lt;span class="kc">None&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="n">prev&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">cur&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">isDir&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">level&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># elif é˜²æ­¢éæ–‡ä»¶ã€æ–‡ä»¶å¤¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å±±ç¾Šæ‹‰ä¸æ–‡httpsleetcode-cncomproblemsgoat-latin">&lt;a href="https://leetcode-cn.com/problems/goat-latin/">å±±ç¾Šæ‹‰ä¸æ–‡&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¤ªç¦»è°±äº†ï¼Œé™¤äº†å˜é‡å‘½åä¸ä¸€æ ·ï¼Œä»–çš„è¿è¡Œæ¯”æˆ‘å¿«&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¤åˆ¶æˆä»–çš„ï¼Œé€Ÿåº¦å¿«äº†ï¼Œè«éæ˜¯ä»£ç æ ¼å¼åŒ–çš„é—®é¢˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 36ms&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">toGoatLatin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sentence&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;e&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;i&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;o&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;u&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;E&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;I&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;O&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;U&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">words&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sentence&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39; &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">word&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">words&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">word&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">words&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">word&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;ma&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">words&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">word&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">word&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;ma&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s1">&amp;#39; &amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">words&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 20ms&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">toGoatLatin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sentence&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;e&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;i&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;o&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;u&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;E&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;I&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;O&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;U&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">words&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">sentence&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39; &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">word&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">words&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">word&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">words&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">word&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s1">&amp;#39;ma&amp;#39;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">words&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">word&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">word&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s1">&amp;#39;ma&amp;#39;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s1">&amp;#39; &amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">words&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ—‹è½¬å‡½æ•°httpsleetcode-cncomproblemsrotate-function">&lt;a href="https://leetcode-cn.com/problems/rotate-function/">æ—‹è½¬å‡½æ•°&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æƒ³ä¸å‡ºæ¥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ¥è‡ªå®«æ°´ä¸‰å¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">maxRotateFunction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">num&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cur&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cur&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cur&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">cur&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cur&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®˜è§£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># F(0)ä¸F(1)ç›¸å·®ä¸€ä¸ªnumSum, å¹¶ä¸”(n-1)*nums[n-1]å˜ä¸º0 æ‰€ä»¥-n*nums[n-1]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">maxRotateFunction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">numSum&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">f&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># æ¯ä¸€æ¬¡æ±‚æ–°fï¼Œå…¶æ—§fæœ€åä¸€ä¸ªå¿…ä¸º0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">numSum&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">res&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä¸€è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ‘˜è‡ªæäº¤è®°å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">maxRotateFunction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">accumulate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">reversed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="k">lambda&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">initial&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åŒç™¾ï¼Ÿ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://leetcode-cn.com/problems/rotate-function/solution/by-jam007-wyqt/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">maxRotateFunction&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cur&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">idx&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">num&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">idx&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">num&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">total&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nums&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cur&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">total&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">nums&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cur&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">cur&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">res&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="n">res&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">res&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®‰è£…æ …æ httpsleetcode-cncomproblemserect-the-fence">&lt;a href="https://leetcode-cn.com/problems/erect-the-fence/">å®‰è£…æ …æ &lt;/a>&lt;/h2>
&lt;p>å›°éš¾é¢˜ pass&lt;/p>
&lt;h2 id="äºŒè¿›åˆ¶é—´è·httpsleetcode-cncomproblemsbinary-gap">&lt;a href="https://leetcode-cn.com/problems/binary-gap/">äºŒè¿›åˆ¶é—´è·&lt;/a>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¥½è€¶ ac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">binaryGap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">bin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">right&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">left&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">left&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">left&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">left&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">right&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">left&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">right&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">left&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®˜è§£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">binaryGap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">last&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">last&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">last&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ans&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description><category domain="https://keepjolly.com/posts/">posts</category><category domain="https://keepjolly.com/posts/%E5%8A%9B%E6%89%A3/">åŠ›æ‰£</category><category domain="https://keepjolly.com/categories/leetcode/">leetcode</category><category domain="https://keepjolly.com/tags/python/">Python</category><category domain="https://keepjolly.com/tags/%E5%8A%9B%E6%89%A3/">åŠ›æ‰£</category></item></channel></rss>