<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.140.2"><meta name="theme-color" content="#fff" />
    <meta name="color-scheme" content="light dark">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>C&#43;&#43;学习 | 悠闲の小屋</title>

    <link rel="stylesheet" href="/css/meme.min.css" />

    
    
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.js" defer></script><script src="/js/meme.min.js"></script>

    

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;family=Cinzel&#43;Decorative:wght@700&amp;display=swap" media="print" onload="this.media='all'" />
        <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;family=Cinzel&#43;Decorative:wght@700&amp;display=swap" /></noscript>

    <meta name="author" content="" /><meta name="description" content="source insight
C&#43;&#43; 概括 C&#43;&#43;优点
强大的封装能力：既有开发工程能力，又保留高性能 高性能：运行快，快并且占用资源少是C&#43;&#43;的追求 低功耗：适合嵌入式 C&#43;&#43;缺点：
……" />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#2a6df4" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="悠闲の小屋" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="悠闲の小屋" />
    <meta name="msapplication-starturl" content="../../" />
    <meta name="msapplication-TileColor" content="#fff" />
    <meta name="msapplication-TileImage" content="../../icons/mstile-150x150.png" />
    <link rel="manifest" href="/manifest.json" />

    
    

    
    <link rel="canonical" href="http://localhost:1313/archives/cplusplus-learn/" />
    

<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "datePublished": "2023-03-26T09:06:56+00:00",
        "dateModified": "2024-05-03T14:50:48+08:00",
        "url": "http://localhost:1313/archives/cplusplus-learn/",
        "headline": "C++学习",
        "description": "source insight\nC++ 概括 C++优点\n强大的封装能力：既有开发工程能力，又保留高性能 高性能：运行快，快并且占用资源少是C++的追求 低功耗：适合嵌入式 C++缺点：\n……",
        "inLanguage" : "zh-CN",
        "articleSection": "posts",
        "wordCount":  8530 ,
        "image": ["https://pic.keepjolly.com/halo/blog/2023/03/20230326090137.png?imageMogr2/format/webp%7C","https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-1.png?imageMogr2/format/webp%7C","https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-2.png?imageMogr2/format/webp%7C","https://pic.keepjolly.com/halo/blog/2023/05/20230527212359.png?imageMogr2/format/webp%7C","https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-3.png?imageMogr2/format/webp%7C","https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-4.png?imageMogr2/format/webp%7C","https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-5.png?imageMogr2/format/webp%7C","https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-6.png?imageMogr2/format/webp%7C","https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-7.png?imageMogr2/format/webp%7C","https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-8.png?imageMogr2/format/webp%7C","https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-9.png?imageMogr2/format/webp%7C"],
        "author": {
            "@type": "Person",
            "url": "http://localhost:1313/",
            
        },
        "license": "在保留本文作者及本文链接的前提下，非商业用途随意转载分享(我会高强度自搜的喔👊)。",
        "publisher": {
            "@type": "Organization",
            "name": "悠闲の小屋",
            "url": "http://localhost:1313/"
        },
        "mainEntityOfPage": {
            "@type": "WebSite",
            "@id": "http://localhost:1313/"
        }
    }
</script>

    

<meta name="twitter:card" content="summary_large_image" />



    



<meta property="og:title" content="C&#43;&#43;学习" />
<meta property="og:description" content="source insight
C&#43;&#43; 概括 C&#43;&#43;优点
强大的封装能力：既有开发工程能力，又保留高性能 高性能：运行快，快并且占用资源少是C&#43;&#43;的追求 低功耗：适合嵌入式 C&#43;&#43;缺点：
……" />
<meta property="og:url" content="http://localhost:1313/archives/cplusplus-learn/" />
<meta property="og:site_name" content="悠闲の小屋" />
<meta property="og:locale" content="zh" /><meta property="og:image" content="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137.png?imageMogr2/format/webp%7C" />
<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2023-03-26T09:06:56&#43;00:00" />
    <meta property="article:modified_time" content="2024-05-03T14:50:48&#43;08:00" />
    
    <meta property="article:section" content="posts" />


        <meta name="google-site-verification" content="mBjLYgXaXR8EAfTNbi4DTVC5KOJuBHpZDsmtgbgC6Rs" />

    
    

    
</head>

    <body>
        <div class="container">
            
    <header class="header">
        
            <div class="header-wrapper">
                <div class="header-inner single">
                    
    <div class="site-brand">
        
            <a href="/" class="brand">悠闲の小屋</a>
        
    </div>

                    <nav class="nav">
    <ul class="menu" id="menu">
        
            
        
        
        
        
            
                <li class="menu-item"><a href="/categories/"><span class="menu-item-name">分类</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/tags/"><span class="menu-item-name">标签</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/about/"><span class="menu-item-name">关于</span></a>
                </li>
            
        
            
                
                    
                    
                        <li class="menu-item">
                            <a id="theme-switcher" href="#"><span class="icon theme-icon-light">🌞</span><span class="icon theme-icon-dark">🌙</span></a>
                        </li>
                    
                
            
        
            
                <li class="menu-item search-item">
                        <form id="search" class="search" role="search">
    <label for="search-input"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon search-icon"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></label>
    <input type="search" id="search-input" class="search-input">
</form>

<template id="search-result" hidden>
    <article class="content post">
        <h2 class="post-title"><a class="summary-title-link"></a></h2>
        <summary class="summary"></summary>
        <div class="read-more-container">
            <a class="read-more-link">阅读更多 »</a>
        </div>
    </article>
</template>

                    </li>
                
            
        
    </ul>
</nav>

                    
                </div>
            </div>
            
    <input type="checkbox" id="nav-toggle" aria-hidden="true" />
    <label for="nav-toggle" class="nav-toggle"></label>
    <label for="nav-toggle" class="nav-curtain"></label>


        
    </header>




            
            
    
    <div class = "toc-wrapper">
        
<div class="post-toc" id="post-toc">
<aside>
    <header>
    <h4>文章の字数: 8530</h4> 
    </header>
    
    
    <nav id="TableOfContents">
  <ol>
    <li><a href="#c-概括">C++ 概括</a></li>
    <li><a href="#c-基础语法">C++ 基础语法</a>
      <ol>
        <li><a href="#编程语言层次">编程语言层次</a></li>
        <li><a href="#数据类型">数据类型</a></li>
        <li><a href="#常量">常量</a></li>
      </ol>
    </li>
    <li><a href="#运算符与表达式">运算符与表达式</a>
      <ol>
        <li><a href="#关系运算符">关系运算符</a></li>
        <li><a href="#杂项运算符">杂项运算符</a></li>
        <li><a href="#补码">补码</a></li>
        <li><a href="#字节序">字节序</a></li>
        <li><a href="#位运算">位运算</a></li>
      </ol>
    </li>
    <li><a href="#c陷阱和c改进">C陷阱和C++改进</a>
      <ol>
        <li><a href="#char语法陷阱">char语法陷阱</a></li>
        <li><a href="#数组退化陷阱">数组退化陷阱</a></li>
        <li><a href="#移位问题">移位问题</a></li>
        <li><a href="#类型转换问题">类型转换问题</a></li>
        <li><a href="#溢出问题">溢出问题</a></li>
        <li><a href="#字符串问题">字符串问题</a></li>
        <li><a href="#头文件顺序">头文件顺序</a></li>
      </ol>
    </li>
    <li><a href="#基础容器">基础容器</a>
      <ol>
        <li><a href="#数组差一错误">数组（差一错误）</a>
          <ol>
            <li><a href="#vector">vector</a></li>
          </ol>
        </li>
        <li><a href="#字符串">字符串</a>
          <ol>
            <li><a href="#常用函数安全问题">常用函数安全问题</a></li>
          </ol>
        </li>
        <li><a href="#string-和-char">String 和 char*</a></li>
      </ol>
    </li>
    <li><a href="#c指针">C++指针</a>
      <ol>
        <li><a href="#左值与右值">左值与右值</a></li>
        <li><a href="#指针分类">指针分类</a>
          <ol>
            <li><a href="#数组指针">数组指针</a></li>
            <li><a href="#const指针">const指针</a></li>
            <li><a href="#多级指针">多级指针</a></li>
            <li><a href="#野指针">野指针</a></li>
          </ol>
        </li>
        <li><a href="#指针基本操作">指针基本操作</a></li>
        <li><a href="#内存分配">内存分配</a></li>
        <li><a href="#c智能指针">C++智能指针</a></li>
        <li><a href="#引用">引用</a></li>
      </ol>
    </li>
    <li><a href="#c基础语法">C++基础语法</a>
      <ol>
        <li><a href="#if">if</a></li>
        <li><a href="#枚举">枚举</a></li>
        <li><a href="#union--struct">Union / Struct</a></li>
        <li><a href="#循环">循环</a></li>
        <li><a href="#函数重载">函数重载</a></li>
        <li><a href="#命名空间">命名空间</a></li>
        <li><a href="#函数体heck过程">函数体heck过程</a></li>
        <li><a href="#内联函数inline">内联函数inline</a></li>
        <li><a href="#递归">递归</a></li>
      </ol>
    </li>
    <li><a href="#c高级语法">C++高级语法</a>
      <ol>
        <li><a href="#类">类</a></li>
        <li><a href="#运算符重载">运算符重载</a>
          <ol>
            <li><a href="#临时对象">临时对象</a></li>
            <li><a href="#前置后置">前置后置++</a></li>
            <li><a href="#标准输入输出">标准输入输出</a></li>
            <li><a href="#文件操作">文件操作</a></li>
          </ol>
        </li>
        <li><a href="#头文件重定义">头文件重定义</a></li>
        <li><a href="#深拷贝-浅拷贝-move操作">深拷贝 浅拷贝 move操作</a></li>
        <li><a href="#继承">继承</a></li>
        <li><a href="#三大特性">三大特性</a></li>
      </ol>
    </li>
    <li><a href="#编程思想">编程思想</a>
      <ol>
        <li><a href="#单例模式">单例模式</a></li>
        <li><a href="#观察者模式">观察者模式</a></li>
        <li><a href="#voidnullptr">void*、nullptr</a></li>
        <li><a href="#c的类型转换">C++的类型转换</a></li>
        <li><a href="#适配器模式">适配器模式</a></li>
        <li><a href="#泛型编程">泛型编程</a></li>
      </ol>
    </li>
    <li><a href="#进阶编程">进阶编程</a>
      <ol>
        <li><a href="#stl标准库">STL标准库</a>
          <ol>
            <li><a href="#容器">容器</a></li>
          </ol>
        </li>
        <li><a href="#函数指针仿函数模板">函数指针、仿函数模板</a></li>
        <li><a href="#自定义迭代器">自定义迭代器</a></li>
        <li><a href="#容器适配器">容器适配器</a></li>
        <li><a href="#空间适配器">空间适配器</a></li>
        <li><a href="#boost库">boost库</a></li>
        <li><a href="#多线程">多线程</a></li>
      </ol>
    </li>
    <li><a href="#linux编程">Linux编程</a>
      <ol>
        <li><a href="#makefile">makefile</a></li>
      </ol>
    </li>
    <li><a href="#项目实战">项目实战</a></li>
    <li><a href="#调试">调试</a>
      <ol>
        <li><a href="#汇编语言">汇编语言</a></li>
      </ol>
    </li>
  </ol>
</nav>
    
    
</aside>
<a href="#" id="toc-toggle"></a>
</div>

<div class = "toc-phone">
    <nav class="contents">
  <h2 id="contents" class="contents-title">目录</h2><ol class="toc">
    <li><a id="contents:c-概括" href="#c-概括">C++ 概括</a></li>
    <li><a id="contents:c-基础语法" href="#c-基础语法">C++ 基础语法</a>
      <ol>
        <li><a id="contents:编程语言层次" href="#编程语言层次">编程语言层次</a></li>
        <li><a id="contents:数据类型" href="#数据类型">数据类型</a></li>
        <li><a id="contents:常量" href="#常量">常量</a></li>
      </ol>
    </li>
    <li><a id="contents:运算符与表达式" href="#运算符与表达式">运算符与表达式</a>
      <ol>
        <li><a id="contents:关系运算符" href="#关系运算符">关系运算符</a></li>
        <li><a id="contents:杂项运算符" href="#杂项运算符">杂项运算符</a></li>
        <li><a id="contents:补码" href="#补码">补码</a></li>
        <li><a id="contents:字节序" href="#字节序">字节序</a></li>
        <li><a id="contents:位运算" href="#位运算">位运算</a></li>
      </ol>
    </li>
    <li><a id="contents:c陷阱和c改进" href="#c陷阱和c改进">C陷阱和C++改进</a>
      <ol>
        <li><a id="contents:char语法陷阱" href="#char语法陷阱">char语法陷阱</a></li>
        <li><a id="contents:数组退化陷阱" href="#数组退化陷阱">数组退化陷阱</a></li>
        <li><a id="contents:移位问题" href="#移位问题">移位问题</a></li>
        <li><a id="contents:类型转换问题" href="#类型转换问题">类型转换问题</a></li>
        <li><a id="contents:溢出问题" href="#溢出问题">溢出问题</a></li>
        <li><a id="contents:字符串问题" href="#字符串问题">字符串问题</a></li>
        <li><a id="contents:头文件顺序" href="#头文件顺序">头文件顺序</a></li>
      </ol>
    </li>
    <li><a id="contents:基础容器" href="#基础容器">基础容器</a>
      <ol>
        <li><a id="contents:数组差一错误" href="#数组差一错误">数组（差一错误）</a>
          <ol>
            <li><a id="contents:vector" href="#vector">vector</a></li>
          </ol>
        </li>
        <li><a id="contents:字符串" href="#字符串">字符串</a>
          <ol>
            <li><a id="contents:常用函数安全问题" href="#常用函数安全问题">常用函数安全问题</a></li>
          </ol>
        </li>
        <li><a id="contents:string-和-char" href="#string-和-char">String 和 char*</a></li>
      </ol>
    </li>
    <li><a id="contents:c指针" href="#c指针">C++指针</a>
      <ol>
        <li><a id="contents:左值与右值" href="#左值与右值">左值与右值</a></li>
        <li><a id="contents:指针分类" href="#指针分类">指针分类</a>
          <ol>
            <li><a id="contents:数组指针" href="#数组指针">数组指针</a></li>
            <li><a id="contents:const指针" href="#const指针">const指针</a></li>
            <li><a id="contents:多级指针" href="#多级指针">多级指针</a></li>
            <li><a id="contents:野指针" href="#野指针">野指针</a></li>
          </ol>
        </li>
        <li><a id="contents:指针基本操作" href="#指针基本操作">指针基本操作</a></li>
        <li><a id="contents:内存分配" href="#内存分配">内存分配</a></li>
        <li><a id="contents:c智能指针" href="#c智能指针">C++智能指针</a></li>
        <li><a id="contents:引用" href="#引用">引用</a></li>
      </ol>
    </li>
    <li><a id="contents:c基础语法" href="#c基础语法">C++基础语法</a>
      <ol>
        <li><a id="contents:if" href="#if">if</a></li>
        <li><a id="contents:枚举" href="#枚举">枚举</a></li>
        <li><a id="contents:union--struct" href="#union--struct">Union / Struct</a></li>
        <li><a id="contents:循环" href="#循环">循环</a></li>
        <li><a id="contents:函数重载" href="#函数重载">函数重载</a></li>
        <li><a id="contents:命名空间" href="#命名空间">命名空间</a></li>
        <li><a id="contents:函数体heck过程" href="#函数体heck过程">函数体heck过程</a></li>
        <li><a id="contents:内联函数inline" href="#内联函数inline">内联函数inline</a></li>
        <li><a id="contents:递归" href="#递归">递归</a></li>
      </ol>
    </li>
    <li><a id="contents:c高级语法" href="#c高级语法">C++高级语法</a>
      <ol>
        <li><a id="contents:类" href="#类">类</a></li>
        <li><a id="contents:运算符重载" href="#运算符重载">运算符重载</a>
          <ol>
            <li><a id="contents:临时对象" href="#临时对象">临时对象</a></li>
            <li><a id="contents:前置后置" href="#前置后置">前置后置++</a></li>
            <li><a id="contents:标准输入输出" href="#标准输入输出">标准输入输出</a></li>
            <li><a id="contents:文件操作" href="#文件操作">文件操作</a></li>
          </ol>
        </li>
        <li><a id="contents:头文件重定义" href="#头文件重定义">头文件重定义</a></li>
        <li><a id="contents:深拷贝-浅拷贝-move操作" href="#深拷贝-浅拷贝-move操作">深拷贝 浅拷贝 move操作</a></li>
        <li><a id="contents:继承" href="#继承">继承</a></li>
        <li><a id="contents:三大特性" href="#三大特性">三大特性</a></li>
      </ol>
    </li>
    <li><a id="contents:编程思想" href="#编程思想">编程思想</a>
      <ol>
        <li><a id="contents:单例模式" href="#单例模式">单例模式</a></li>
        <li><a id="contents:观察者模式" href="#观察者模式">观察者模式</a></li>
        <li><a id="contents:voidnullptr" href="#voidnullptr">void*、nullptr</a></li>
        <li><a id="contents:c的类型转换" href="#c的类型转换">C++的类型转换</a></li>
        <li><a id="contents:适配器模式" href="#适配器模式">适配器模式</a></li>
        <li><a id="contents:泛型编程" href="#泛型编程">泛型编程</a></li>
      </ol>
    </li>
    <li><a id="contents:进阶编程" href="#进阶编程">进阶编程</a>
      <ol>
        <li><a id="contents:stl标准库" href="#stl标准库">STL标准库</a>
          <ol>
            <li><a id="contents:容器" href="#容器">容器</a></li>
          </ol>
        </li>
        <li><a id="contents:函数指针仿函数模板" href="#函数指针仿函数模板">函数指针、仿函数模板</a></li>
        <li><a id="contents:自定义迭代器" href="#自定义迭代器">自定义迭代器</a></li>
        <li><a id="contents:容器适配器" href="#容器适配器">容器适配器</a></li>
        <li><a id="contents:空间适配器" href="#空间适配器">空间适配器</a></li>
        <li><a id="contents:boost库" href="#boost库">boost库</a></li>
        <li><a id="contents:多线程" href="#多线程">多线程</a></li>
      </ol>
    </li>
    <li><a id="contents:linux编程" href="#linux编程">Linux编程</a>
      <ol>
        <li><a id="contents:makefile" href="#makefile">makefile</a></li>
      </ol>
    </li>
    <li><a id="contents:项目实战" href="#项目实战">项目实战</a></li>
    <li><a id="contents:调试" href="#调试">调试</a>
      <ol>
        <li><a id="contents:汇编语言" href="#汇编语言">汇编语言</a></li>
      </ol>
    </li>
  </ol>
</nav>
    <hr></hr>
</div>


    </div>
    

<main class="main single" id="main">
    <div class="main-inner">

        

        <article class="content post h-entry" data-align="justify" data-type="posts" data-toc-num="true">

            <h1 class="post-title p-name">C++学习</h1>

            

            
                
            

            

            <div class="post-body e-content">
                <p>source insight</p>
<h2 id="c-概括"><a href="#c-概括" class="anchor-link">#</a>C++ 概括</h2>
<p>C++优点</p>
<ul>
<li>强大的封装能力：既有开发工程能力，又保留高性能</li>
<li>高性能：运行快，快并且占用资源少是C++的追求</li>
<li>低功耗：适合嵌入式</li>
</ul>
<p>C++缺点：</p>
<ul>
<li>语法复杂，细节多</li>
<li>需要好的规范和范式</li>
</ul>
<h2 id="c-基础语法"><a href="#c-基础语法" class="anchor-link">#</a>C++ 基础语法</h2>
<h3 id="编程语言层次"><a href="#编程语言层次" class="anchor-link">#</a>编程语言层次</h3>
<ol>
<li>机器语言，汇编语言</li>
<li>编译型语言 C++，C
<ol>
<li><img src="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137.png?imageMogr2/format/webp%7C" alt="image"></li>
</ol>
</li>
<li>解释型语言 Basic Python Java</li>
<li>脚本语言 bash csh</li>
</ol>
<ul>
<li>逐级运行效率低，更易理解</li>
</ul>
<h3 id="数据类型"><a href="#数据类型" class="anchor-link">#</a>数据类型</h3>
<p><img src="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-1.png?imageMogr2/format/webp%7C" alt="image">
疑问，为什么64位三个字节对齐</p>
<h3 id="常量"><a href="#常量" class="anchor-link">#</a>常量</h3>
<p>定义常量的方法：</p>
<ul>
<li>#define： #define PI 3.14159
<ul>
<li>#define MA(x) x*(x-1)</li>
<li>MA(1 + (a + b)) = 1+(a+b)*(1+(a+b)-1)</li>
</ul>
</li>
<li>const：const double PI = 3.14159 （推荐）</li>
</ul>
<p>整数常量前缀：0x 十六进制、0 八进制、0b<br>
整数常量后缀：u(unsigned)、l(long)、可组合使用，大小写任意<br>
字符常量：单引号括起来，用L（必须大写）表示宽字符常量</p>
<h2 id="运算符与表达式"><a href="#运算符与表达式" class="anchor-link">#</a>运算符与表达式</h2>
<h3 id="关系运算符"><a href="#关系运算符" class="anchor-link">#</a>关系运算符</h3>
<p>A == B 其值为bool类型 而直接判断为1为int类型，注意空间大小</p>
<h3 id="杂项运算符"><a href="#杂项运算符" class="anchor-link">#</a>杂项运算符</h3>
<p>，：顺序执行一系列运算后，取最后一个表达式的值（int o = a,b,c）</p>
<h3 id="补码"><a href="#补码" class="anchor-link">#</a>补码</h3>
<p>正数原补反码一致<br>
负数</p>
<ul>
<li>反码是原码除符号位取反，补码=反码+1，反码=补码-1</li>
<li>二进制to补码：$B 2 T_{w}(\vec{x}) \stackrel{.}{=} x_{w-1} 2^{w-1}+\sum_{i=0}^{w-2} x_{i} 2^{i}$</li>
</ul>
<p><a href="https://bbs.huaweicloud.com/blogs/280855" target="_blank" rel="noopener">一文搞清二进制补码</a></p>
<h3 id="字节序"><a href="#字节序" class="anchor-link">#</a>字节序</h3>
<p>一个字在内存中如何以byte存放</p>
<ul>
<li>大端法：大多数IBM机器、网络传输，正序存放 8f ff ff ff</li>
<li>小端法：Intel兼容机，逆序存放，但字节内正序 ff ff ff 8f</li>
</ul>
<h3 id="位运算"><a href="#位运算" class="anchor-link">#</a>位运算</h3>
<h2 id="c陷阱和c改进"><a href="#c陷阱和c改进" class="anchor-link">#</a>C陷阱和C++改进</h2>
<h3 id="char语法陷阱"><a href="#char语法陷阱" class="anchor-link">#</a>char语法陷阱</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">c1</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">yes</span><span class="err">&#39;</span><span class="p">;</span> <span class="c1">// 截断：1.保留第一个字符 2.保留第二个字符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">c1</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// char* 32bi机器占4位，64占8位，为了搜索整个地址空间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">&#34;/&#34;</span><span class="p">;</span> <span class="c1">// ==&gt; &#39;/&#39;&#39;\0&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// const char* s2 = &#39;/&#39;; 字符常量-&gt;char* 类型不匹配
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">s2</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">c1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">	<span class="c1">// C++ 改进， string 在namespace std中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s1</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">yes</span><span class="err">&#39;</span><span class="p">);</span>  <span class="c1">// s
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s2</span><span class="p">(</span><span class="s">&#34;yes&#34;</span><span class="p">);</span>   <span class="c1">// yes
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="数组退化陷阱"><a href="#数组退化陷阱" class="anchor-link">#</a>数组退化陷阱</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// double average1(int arr[10], int len) {
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">double</span> <span class="nf">average1</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span> <span class="n">arr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// C：数组退化成指针
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 传递char数组可以通过计算到&#39;\0&#39;的长度来不借助len
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">double</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 形参arr[10]变为int指针,arr[0]为int类型 =&gt; len = 4/4 = 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// int len = sizeof(arr) / sizeof(arr[0]); 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">result</span> <span class="o">+=</span> <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">result</span> <span class="o">/</span> <span class="n">len</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// C++ 改进
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">double</span> <span class="nf">average3</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">v</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// auto it = v.begin();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="p">(;</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">result</span> <span class="o">+=</span> <span class="o">*</span><span class="n">it</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">result</span> <span class="o">/</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">double</span> <span class="nf">average2DV</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span> <span class="n">vv</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="n">result</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">vv</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">vv</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">result</span> <span class="o">+=</span> <span class="n">vv</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">			<span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">vv</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="p">;</span>  <span class="c1">// +&#39; &#39;自动变为int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">result</span> <span class="o">/</span> <span class="n">size</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">arr</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span><span class="mi">50</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// std::cout &lt;&lt; average1(arr, len) &lt;&lt; std::endl;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">vt</span><span class="p">{</span> <span class="mi">12</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">average3</span><span class="p">(</span><span class="n">vt</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">vv</span><span class="p">{</span><span class="mi">8</span><span class="p">,</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">average2DV</span><span class="p">(</span><span class="n">vv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="移位问题"><a href="#移位问题" class="anchor-link">#</a>移位问题</h3>
<p>问题：<br>
逻辑右移还是算数右移  -&gt; 右移只对无符号数<br>
移位操作位数的限制 -&gt; 移位数大于0， 小于位数</p>
<ul>
<li>C中需要考虑整数移位上下文情况（有无符号数，类型占字节数）</li>
</ul>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;bitset&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">char</span> <span class="n">a1</span> <span class="o">=</span> <span class="mh">0x63</span><span class="p">;</span>  <span class="c1">// 0110 0011
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">a1</span> <span class="o">=</span> <span class="p">(</span><span class="n">a1</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">);</span>  <span class="c1">// 0000 0110  逻辑右移
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;0x%x</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">a1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kt">char</span> <span class="n">a2</span> <span class="o">=</span> <span class="mh">0x95</span><span class="p">;</span>  <span class="c1">// 1001 0101
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">a2</span> <span class="o">=</span> <span class="p">(</span><span class="n">a2</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">);</span>  <span class="c1">// 1111 1001  算法右移
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;0x%x</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">a2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">a3</span> <span class="o">=</span> <span class="mh">0x95</span><span class="p">;</span>  <span class="c1">// 1001 0101  C建议先转无符号再右移
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">a3</span> <span class="o">=</span> <span class="p">(</span><span class="n">a3</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">);</span>			  <span class="c1">// 0000 1001  逻辑右移
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">printf</span><span class="p">(</span><span class="s">&#34;0x%x</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">a3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//const unsigned char priv = 0xff;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//const unsigned char P_BACKUP = (1 &lt;&lt; 7);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//const unsigned char P_ADMIN = (1 &lt;&lt; 8);  // 超过char位数-&gt; =0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//// 判断用户权限的技巧
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//if (priv &amp; P_BACKUP) cout &lt;&lt; &#34;BACKUP&#34; &lt;&lt; endl;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">// C++ 改进
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">bitset</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">&gt;</span> <span class="n">priv</span> <span class="o">=</span> <span class="mh">0xff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">bitset</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">&gt;</span>  <span class="n">P_BACKUP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">bitset</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">&gt;</span>  <span class="n">P_ADMIN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">);</span>  <span class="c1">// 超过char位数-&gt; =0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 判断用户权限的技巧
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span> <span class="o">&amp;</span> <span class="n">P_BACKUP</span><span class="p">)</span> <span class="o">==</span> <span class="n">P_BACKUP</span><span class="p">)</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;BACKUP&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="类型转换问题"><a href="#类型转换问题" class="anchor-link">#</a>类型转换问题</h3>
<p>C缺陷：隐式转换问题（sizeof(unsigned long long) 跟int比较，int转换为unsigned int）、double除法问题<br>
C++改进：static_cast、const_cast、dynamic_cast、reinterpret_cast，建议尽量少使用转换，多长啊</p>
<h3 id="溢出问题"><a href="#溢出问题" class="anchor-link">#</a>溢出问题</h3>
<p>C整数固定为int所占字节，溢出会有问题<br>
C++：使用boost库的cpp_int</p>
<h3 id="字符串问题"><a href="#字符串问题" class="anchor-link">#</a>字符串问题</h3>
<p>C 以'\0'结尾，遇到即停止，忽视其后面的值，运行效率低，只能以'\0'表示字符串结束<br>
C++：string库（仍保留'\0'）、redis库（用多个结构体优化存储空间，并用len防止'\0'问题）<br>
字符串比较 &gt;&lt; 比较的是首地址大小</p>
<h3 id="头文件顺序"><a href="#头文件顺序" class="anchor-link">#</a>头文件顺序</h3>
<ul>
<li>系统的头文件要放在最前面；</li>
<li>其次是语言相关的；</li>
<li>然后比较古老的第三方库头文件；</li>
<li>比较新的第三方库头文件；</li>
<li>最后才是自定义的头文件。</li>
</ul>
<h2 id="基础容器"><a href="#基础容器" class="anchor-link">#</a>基础容器</h2>
<h3 id="数组差一错误"><a href="#数组差一错误" class="anchor-link">#</a>数组（差一错误）</h3>
<ul>
<li>off-by-one error
<ul>
<li>解决思路：先考虑简单特例，然后外推结果；仔细计算边界</li>
<li>判断范围时采取左闭右开，使其相减为元素个数 for (int i =0; i&lt;10; i++)</li>
<li><img src="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-2.png?imageMogr2/format/webp%7C" alt="image"></li>
</ul>
</li>
</ul>
<p><a href="https://blog.csdn.net/caomiao2006/article/details/7401833" target="_blank" rel="noopener">数组的下标访问和指针访问方式效率分析</a><br>
二维数组访问时的原则：尽可能满足空间局部性</p>
<ul>
<li>在一个小的时间窗口内，访问的变量地址越接近越好，执行速度越快</li>
<li>一般将最长的循环放最内层，最短的放最外层，以减少CPU跨切循环层的次数</li>
</ul>
<h4 id="vector"><a href="#vector" class="anchor-link">#</a>vector</h4>
<h3 id="字符串"><a href="#字符串" class="anchor-link">#</a>字符串</h3>
<p>表示Unicode字符集：</p>
<ul>
<li>UTF-8：1byte表示字符，兼容ASCII码；特点是存储效率高，变长（不方便内部随机访问），无字节序问题（作为外部编码，供其他平台使用Linux）
<ul>
<li>微软平台下又细分为UTF-8-BOM，二进制首位为EF BB BF，可能在其他平台有问题，可以删去首位来适配</li>
</ul>
</li>
<li>UTF-16：分为UTF-16BD(big endian)、UTF-16LD(little endian)；特点是定长（方便内部随机访问），有<a href="#UlvJH">字节序</a>问题。
<ul>
<li>BD文件的二进制首位为FE FF、LD为FF FE（正序）</li>
</ul>
</li>
<li>UTF-32：分为UTF-32BD、UTF-32LD；特点同上</li>
</ul>
<p>字符串的指针表示方法</p>
<ul>
<li>char[] 和 char*的区别：
<ol>
<li>char[] 地址不可变 其内的值可变</li>
<li>char* 地址可变，其内的值取决于所指存储区域是否可变</li>
</ol>
</li>
</ul>
<h4 id="常用函数安全问题"><a href="#常用函数安全问题" class="anchor-link">#</a>常用函数安全问题</h4>
<ul>
<li>strlen、strcpy等没有对边界检查容易导致缓冲区溢出，修改一些值</li>
<li>修改为strlen_s、strcpy_s等函数</li>
<li>调试时加入_CRT_SECURE_NO_WARNINGS</li>
</ul>
<h3 id="string-和-char"><a href="#string-和-char" class="anchor-link">#</a>String 和 char*</h3>
<p>char* / char[] ：</p>
<ul>
<li>strcpy_s 拷贝</li>
<li>strlen 字符串长度</li>
<li>strcat 拼接</li>
<li>strcmp 比较ASCII码</li>
</ul>
<p>String：</p>
<ul>
<li>=</li>
<li>str.size() \ str.length()</li>
<li>+=</li>
<li>==</li>
<li>str.capacity() 容量，自动扩容</li>
</ul>
<p>相比来说String 性能不是特别好</p>
<h2 id="c指针"><a href="#c指针" class="anchor-link">#</a>C++指针</h2>
<p>指针占用空间由操作系统位数决定，因为要指向所有地址</p>
<h3 id="左值与右值"><a href="#左值与右值" class="anchor-link">#</a>左值与右值</h3>
<p>左值为编译器为其单独分配一块存储空间，可以取其地址。可以放在任意侧赋值运算符</p>
<ul>
<li>函数或数据成员的名字</li>
</ul>
<p>右值为数据本身，不能取其地址。只能放在赋值运算符右侧。</p>
<ul>
<li>没有标识符(变量名)，不可以&amp;取地址的表达式，一般称为“临时对象”。</li>
</ul>
<h3 id="指针分类"><a href="#指针分类" class="anchor-link">#</a>指针分类</h3>
<h4 id="数组指针"><a href="#数组指针" class="anchor-link">#</a>数组指针</h4>
<p>array of pointers：</p>
<ul>
<li>int* a[4]，包含四个指针的a数组</li>
<li>输出结果：*(a[3])</li>
</ul>
<p>a pointer to an array：</p>
<ul>
<li>int (*a)[4]，指向一个包含四个值的数组，其中4要与数组个数匹配</li>
<li>输出结果：(*a)[3] -&gt; array[3]  &lt;=&gt; *(array+3)  &lt;=&gt; array[3]</li>
<li>同样的
<ul>
<li>int *a = array</li>
<li>输出结果：*(a+3)</li>
</ul>
</li>
</ul>
<h4 id="const指针"><a href="#const指针" class="anchor-link">#</a>const指针</h4>
<p>const修饰的部分为不可修改内容，其修饰的部分看左侧最近的部分，如果左侧没有，则看右侧</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;stdafx.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">MAX_LEN</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">char</span> <span class="n">strHelloworld</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#34;helloworld&#34;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 与strHelloWorld变量共享内存
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">char</span> <span class="k">const</span> <span class="o">*</span> <span class="n">pStr1</span> <span class="o">=</span> <span class="s">&#34;helloworld&#34;</span><span class="p">;</span>       <span class="c1">// const char* 不能修改指向的char内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 导致此处赋值后使得pStr1指向的空间可被修改，不能只读
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">char</span><span class="o">*</span> <span class="k">const</span> <span class="n">pStr2</span> <span class="o">=</span> <span class="n">strHelloworld</span><span class="p">;</span>		<span class="c1">// 不能修改指针值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">char</span> <span class="k">const</span><span class="o">*</span> <span class="k">const</span> <span class="n">pStr3</span> <span class="o">=</span> <span class="s">&#34;helloworld&#34;</span><span class="p">;</span>  <span class="c1">// const char* const 不能修改内容和指针
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">pStr1</span> <span class="o">=</span> <span class="n">strHelloworld</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//pStr2 = strHelloworld;              // pStr2不可改
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//pStr3 = strHelloworld;              // pStr3不可改
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">strnlen_s</span><span class="p">(</span><span class="n">pStr2</span><span class="p">,</span> <span class="n">MAX_LEN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">len</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="o">++</span><span class="n">index</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//pStr1[index] += 1;                // pStr1里的值不可改
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">pStr2</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//pStr3[index] += 1;                // pStr3里的值不可改
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h4 id="多级指针"><a href="#多级指针" class="anchor-link">#</a>多级指针</h4>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span><span class="o">*</span> <span class="n">b</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span><span class="o">**</span> <span class="n">c</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// *有从右向左的结合性，不清楚优先级就用括号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">*</span><span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">=</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">12</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h4 id="野指针"><a href="#野指针" class="anchor-link">#</a>野指针</h4>
<p>未初始化的指针</p>
<ul>
<li>可能导致无法定位错误</li>
<li>用指针进行间接访问时，确保访问的值已被初始化赋值</li>
</ul>
<p>NULL指针</p>
<ul>
<li>初始化指针，使其无地址</li>
<li>对指针进行间接引用时，最好判断指针是否NULL</li>
<li>不用，没有初始化，超出范围时，使其NULL</li>
</ul>
<p>野指针分类</p>
<ul>
<li>指针变量没有初始化</li>
<li>已经释放不用的指针没有置NULL</li>
<li>指针操作超越了变量的作用范围，指向不确定的空间</li>
</ul>
<h3 id="指针基本操作"><a href="#指针基本操作" class="anchor-link">#</a>指针基本操作</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kt">char</span><span class="w"> </span><span class="n">ch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;a&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ch</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// ++,--操作符</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cp2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">++</span><span class="n">cp</span><span class="p">;</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cp3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp</span><span class="o">++</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cp4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">--</span><span class="n">cp</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cp5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cp</span><span class="o">--</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// ++ 左值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//++cp2 = 97;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//cp2++ = 97;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// *++, ++*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*++</span><span class="n">cp2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">98</span><span class="p">;</span><span class="w"> </span><span class="c1">// cp2地址加1后赋值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">char</span><span class="w"> </span><span class="n">ch3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*++</span><span class="n">cp2</span><span class="p">;</span><span class="w">  </span><span class="c1">// cp2地址加1后将引用的值给左值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="n">cp2</span><span class="o">++</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">98</span><span class="p">;</span><span class="w">  </span><span class="c1">// 将cp2指向的空间赋值后地址加1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">char</span><span class="w"> </span><span class="n">ch4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">cp2</span><span class="o">++</span><span class="p">;</span><span class="w">  </span><span class="c1">// 将cp引用的值给左值后地址加1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// ++++, ----操作符等</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">2</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//c = a++b;                  // error</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">++</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">  </span><span class="c1">// 贪心法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//d = a++++b;             // error</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">char</span><span class="w"> </span><span class="n">ch5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">++*++</span><span class="n">cp</span><span class="p">;</span><span class="w"> </span><span class="c1">// 1.先cp地址+1, 2.得到其引用的值, 3.值+1, 4.赋给左值</span><span class="w">
</span></span></span></code></pre></td></tr></table></div>
</div>
</div><p><a href="https://www.iteye.com/blog/hzdiy-736816" target="_blank" rel="noopener">delete and delete[]</a>、删除指针后并不会置为nullptr
对于像 int/char/long/int*/struct 等等简单数据类型，由于对象没有 destructor，所以用 delete 和 delete [] 是一样的！但是如果是C++ 对象数组就不同了！</p>
<h3 id="内存分配"><a href="#内存分配" class="anchor-link">#</a>内存分配</h3>
<p><img src="https://pic.keepjolly.com/halo/blog/2023/05/20230527212359.png?imageMogr2/format/webp%7C" alt="image"></p>
<ul>
<li>stack：由程序分配地址</li>
<li>heap：由程序员分配地址 new/delete</li>
<li>heap和bss之间是常量区</li>
<li>bss：未初始化区</li>
<li>gvap：初始化区</li>
<li>text：代码、函数。。。</li>
</ul>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                                 <span class="c1">// (GVAR)全局初始化区 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span><span class="o">*</span> <span class="n">p1</span><span class="p">;</span>                                   <span class="c1">// (bss)全局未初始化区 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>                                 <span class="c1">// (text)代码区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>                               <span class="c1">// (stack)栈区变量 32位/64位地址递减/递增 栈区初始化值cc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">char</span> <span class="n">s</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34;abc&#34;</span><span class="p">;</span>                      <span class="c1">// (stack)栈区变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">int</span><span class="o">*</span><span class="n">p2</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>                           <span class="c1">// (stack)栈区变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">char</span> <span class="o">*</span><span class="n">p3</span> <span class="o">=</span> <span class="s">&#34;123456&#34;</span><span class="p">;</span>                   <span class="c1">// 123456\0在常量区, p3在(stack)栈区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">static</span> <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                      <span class="c1">// (GVAR)全局(静态)初始化区  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">p1</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>                      <span class="c1">// (heap)堆区变量 32位/64位地址递增 堆区初始化值cd
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">p2</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>                      <span class="c1">// (heap)堆区变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">char</span><span class="o">*</span> <span class="n">p4</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>                <span class="c1">// (heap)堆区变量 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">strcpy_s</span><span class="p">(</span><span class="n">p4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s">&#34;123456&#34;</span><span class="p">);</span>             <span class="c1">// (text)代码区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>                              <span class="c1">// (text)代码区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="c智能指针"><a href="#c智能指针" class="anchor-link">#</a>C++智能指针</h3>
<p>auto_ptr:</p>
<ul>
<li>C++17 废弃</li>
<li>会自动删除指针以及指向的对象，会产生所有权转移现象</li>
</ul>
<p>unique_ptr:</p>
<ul>
<li>专属所有权，unique_ptr管理的内存，只能被一个指针持有，不支持复制</li>
<li>该指针禁止复制，因此用是std::move()语句进行所有权转移</li>
<li>离开作用域后，自动释放指针和数据</li>
</ul>
<p><a href="https://stackoverflow.com/a/20895705" target="_blank" rel="noopener">share_ptr</a> / weak_ptr：</p>
<ul>
<li>通过一个引用计数共享对象，当计数位0时，调用析构函数</li>
<li>会带来额外的存储开 销</li>
<li>weak_ptr用于防止循环引用</li>
</ul>
<h3 id="引用"><a href="#引用" class="anchor-link">#</a>引用</h3>
<p>一个特殊的指针，可以看作是变量的别名，但会同时修改变量的值，且不可更换指针对象<br>
有了指针为什么还要引用？为了支持函数运算符重载<br>
有了引用为什么还用指针？为了兼容C<br>
函数传参说明：</p>
<ul>
<li>对内置基础类型（如int，double）而言，函数传递时pass by value更高效，直接传值而不是指针/引用</li>
<li>对面向对象中的自定义类型而言，传递时pass by reference to const更高效，因为防止传递大数据而使用地址占用空间更小，const为了防止无意的修改</li>
</ul>
<h2 id="c基础语法"><a href="#c基础语法" class="anchor-link">#</a>C++基础语法</h2>
<h3 id="if"><a href="#if" class="anchor-link">#</a>if</h3>
<p>if将命中率高（更容易判true/false）的条件放首位，使得判断条件更快<br>
与switch比较<br>
使用场景：</p>
<ul>
<li>switch只支持常量值固定相等的分支判断</li>
<li>if可以判断区间</li>
<li>switch是if的特集</li>
</ul>
<p>性能比较：</p>
<ul>
<li>分支较少时，差别不大；分支多时，switch更快，因为是汇编是查表的形式</li>
<li>if多分支的开始几个分支效果高，之后效率递减；因为汇编下需要不断判断再跳转</li>
<li>switch所有case速度几乎一样，查表形式</li>
</ul>
<h3 id="枚举"><a href="#枚举" class="anchor-link">#</a>枚举</h3>
<ul>
<li>枚举值不可以做左值</li>
<li>非枚举变量不可以赋值给枚举变量，除非强转；枚举可以赋值给非枚举</li>
</ul>
<h3 id="union--struct"><a href="#union--struct" class="anchor-link">#</a>Union / Struct</h3>
<p>共用体</p>
<ul>
<li>所有变量占用最大空间的变量的存储空间</li>
<li>大字节最后赋值会覆盖小字节内容</li>
<li>赋值从内存最右边赋值</li>
</ul>
<p>缺省对齐原则</p>
<ul>
<li>char 任何地址</li>
<li>short 偶数地址</li>
<li>int 4的整数倍地址</li>
<li>double 8的整数倍地址
<ul>
<li>32位内存里一行四字节，变量占用空间不足会扩充到最大占用空间变量</li>
<li>32位，char+int=8；8+double=16</li>
<li>32位，char[5]+int = 16；16+double=24</li>
</ul>
</li>
<li>修改默认编译选项：
<ul>
<li>visual C++：#pragma pack(n)</li>
<li>g++：<em>attribute</em>(aligned(n))、<em>attribute</em>(<em>packed</em>)</li>
</ul>
</li>
</ul>
<h3 id="循环"><a href="#循环" class="anchor-link">#</a>循环</h3>
<p>do while更快 while 次之 for最慢，但实际开发不重视速度的话，无所谓</p>
<h3 id="函数重载"><a href="#函数重载" class="anchor-link">#</a>函数重载</h3>
<ol>
<li>看debug运行过程</li>
<li>看反汇编的地址</li>
<li>找到debug/.obj文件，搜搜函数名，复制【?函数名@@xx】，搜索【undname】，cmd命令 【undname 复制值】</li>
</ol>
<p>用函数指针来确定某个函数：</p>
<ul>
<li>一般形式：数据类型(*指针变量名)(参数表)</li>
<li>bool ProcessNum(int i, int j, int(*p)(int a, int b))   // 回调函数</li>
</ul>
<h3 id="命名空间"><a href="#命名空间" class="anchor-link">#</a>命名空间</h3>
<p>namespace 空间名{ ... }<br>
注意使用using namespace std，会引入所有空间内方法，可能会导致方法名冲突</p>
<ul>
<li>建议引入特定空间内方法名，using namespace std::cout;</li>
<li>或直接指定该方法是该空间内，std::cout &lt;&lt;</li>
</ul>
<h3 id="函数体heck过程"><a href="#函数体heck过程" class="anchor-link">#</a>函数体heck过程</h3>
<p>函数调用方式：_cdecl(/Gd) (C/C++→高级→调用约定)</p>
<div class="table-container"><table>
  <thead>
      <tr>
          <th>低地址</th>
          <th>esp</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>...</td>
          <td>...</td>
      </tr>
      <tr>
          <td>（地址向上递减）</td>
          <td>ebx （栈向上增长）</td>
      </tr>
      <tr>
          <td>高地址</td>
          <td>ebp</td>
      </tr>
  </tbody>
</table></div>
<p>传参时为什么默认参数要在最右边，因为汇编时先push最右边的值（不同调用方式有差别）</p>
<h3 id="内联函数inline"><a href="#内联函数inline" class="anchor-link">#</a>内联函数inline</h3>
<p>用空间换时间，复杂函数可能不会内联</p>
<h3 id="递归"><a href="#递归" class="anchor-link">#</a>递归</h3>
<p>四个基本法则：</p>
<ul>
<li>基准情形：无需递归就能解出</li>
<li>不断递进：每次递归都靠近基准情形</li>
<li>设计法则：假设所有递归都能运行</li>
<li>合成效益法则：不做重复性工作</li>
</ul>
<p>缺陷：</p>
<ul>
<li>空间上开辟大量栈空间</li>
<li>时间上大量重复运算</li>
</ul>
<p>优化：</p>
<ul>
<li>尾递归：所有递归形式的调用都出现在函数的末尾</li>
<li>使用循环替代</li>
<li>使用动态规划，空间换时间</li>
</ul>
<h2 id="c高级语法"><a href="#c高级语法" class="anchor-link">#</a>C++高级语法</h2>
<h3 id="类"><a href="#类" class="anchor-link">#</a>类</h3>
<p>C++使用struct、class定义类<br>
struct默认成员权限是public、class默认private</p>
<h3 id="运算符重载"><a href="#运算符重载" class="anchor-link">#</a>运算符重载</h3>
<h4 id="临时对象"><a href="#临时对象" class="anchor-link">#</a>临时对象</h4>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// main调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Complex</span> <span class="n">C</span><span class="p">;</span> <span class="n">C</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 对象函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Complex</span> <span class="n">Complex</span><span class="o">::</span><span class="k">operator</span><span class="o">+</span> <span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 创建临时对象，并且会触发拷贝构造，浪费时间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">Complex</span> <span class="n">tmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">tmp</span><span class="p">.</span><span class="n">_real</span> <span class="o">=</span> <span class="n">_real</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">_real</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">tmp</span><span class="p">.</span><span class="n">_image</span> <span class="o">=</span> <span class="n">_image</span> <span class="o">+</span> <span class="n">c</span><span class="p">.</span><span class="n">_image</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">tmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// 直接返回创建对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//return Complex(_real + c._real, _image + c._image);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><p>临时对象的处理：</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// 1. 自建拷贝构造
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Complex</span><span class="o">::</span><span class="n">Complex</span><span class="p">(</span><span class="k">const</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">_real</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">_real</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">_image</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">_image</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Complex::Complex(const Complex&amp; c)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 2. 定义时赋值（下次都定义时赋值）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Complex</span> <span class="n">C</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span> <span class="c1">// 并且重载符直接return对象 而不是创建临时对象
</span></span></span><span class="line"><span class="cl"><span class="c1">// 此外可节省调用默认构造函数
</span></span></span></code></pre></td></tr></table></div>
</div>
</div><h4 id="前置后置"><a href="#前置后置" class="anchor-link">#</a>前置后置++</h4>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">Complex</span><span class="o">&amp;</span> <span class="n">Complex</span><span class="o">::</span><span class="k">operator</span><span class="o">++</span> <span class="p">()</span> <span class="c1">// 前置++ 效率快
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">_real</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">_image</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">Complex</span> <span class="n">Complex</span><span class="o">::</span><span class="k">operator</span><span class="o">++</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="c1">// 后置++
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//Complex tmp(*this);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//_real++;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//_image++;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//return tmp;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="nf">Complex</span><span class="p">(</span><span class="n">_real</span><span class="o">++</span><span class="p">,</span> <span class="n">_image</span><span class="o">++</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h4 id="标准输入输出"><a href="#标准输入输出" class="anchor-link">#</a>标准输入输出</h4>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// .h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">cin</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">friend</span> <span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">Complex</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">friend</span> <span class="n">istream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">istream</span><span class="o">&amp;</span> <span class="n">is</span><span class="p">,</span> <span class="n">Complex</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// .cpp
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">Complex</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;real value is  &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">x</span><span class="p">.</span><span class="n">_real</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;  image value is &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">x</span><span class="p">.</span><span class="n">_image</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">os</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">istream</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">istream</span><span class="o">&amp;</span> <span class="n">is</span><span class="p">,</span> <span class="n">Complex</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">is</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">_real</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">_image</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">is</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 防止缓冲区遗留数据：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">cin</span><span class="p">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">numeric_limits</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">streamsize</span><span class="o">&gt;::</span><span class="n">max</span><span class="p">(),</span> <span class="sc">&#39;\n&#39;</span><span class="p">);</span> <span class="c1">// 清空缓冲区脏数据
</span></span></span></code></pre></td></tr></table></div>
</div>
</div><p>使用转义字符。使用 &quot;&lt;&quot; 代替 “&lt;” , 使用 &quot;&gt;&quot; 代替 &quot;&gt;&quot;。防止识别为html</p>
<h4 id="文件操作"><a href="#文件操作" class="anchor-link">#</a>文件操作</h4>
<p>文件的打开方式：</p>
<ul>
<li>ios::in 打开文件进行读（ifstream默认）</li>
<li>ios::out 打开文件进行写（ofstream默认ios::out | ios::trunc）</li>
<li>ios::ate  打开一个已有输入/输出的文件并查找到文件尾</li>
<li>ios::app 打开文件如没有则创建文件，在尾部添加数据</li>
<li>ios::nocreate 如果文件不存在，则打开操作失败</li>
<li>ios::trunc 如文件存在，清楚文件原有内容</li>
<li>ios::binary 以二进制打开</li>
</ul>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">bufferLen</span> <span class="o">=</span> <span class="mi">2048</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">bool</span> <span class="nf">CopyFile</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">src</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">dst</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// 打开源文件和目标文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 源文件以二进制读的方式打开
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 目标文件以二进制写的方式打开
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">ifstream</span> <span class="n">in</span><span class="p">(</span><span class="n">src</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">ofstream</span> <span class="n">out</span><span class="p">(</span><span class="n">dst</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span>  <span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// 判断文件打开是否成功，失败返回false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">in</span> <span class="o">||</span> <span class="o">!</span><span class="n">out</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// 从源文件中读取数据，写到目标文件中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// 通过读取源文件的EOF来判断读写是否结束
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">char</span> <span class="n">temp</span><span class="p">[</span><span class="n">bufferLen</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">in</span><span class="p">.</span><span class="n">eof</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="n">bufferLen</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">streamsize</span> <span class="n">count</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">gcount</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">out</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="n">count</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// 关闭源文件和目标文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">in</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="n">out</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="头文件重定义"><a href="#头文件重定义" class="anchor-link">#</a>头文件重定义</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#ifndef _SOMEFILE_H_ </span><span class="c1">// 任意专属名称
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define _SOMEFILE_H_
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="cp">#endif </span><span class="c1">//末尾
</span></span></span><span class="line"><span class="cl"><span class="c1">// 使用宏防止同一个文件被多次包含；
</span></span></span><span class="line"><span class="cl"><span class="c1">// 优点：可移植性好；缺点：无法防止宏名重复，难以排错
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#pragma once
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// 使用编译器防止
</span></span></span><span class="line"><span class="cl"><span class="c1">// 优点：防止宏重复；缺点：可移植性不好
</span></span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="深拷贝-浅拷贝-move操作"><a href="#深拷贝-浅拷贝-move操作" class="anchor-link">#</a>深拷贝 浅拷贝 move操作</h3>
<p>浅拷贝：只拷贝指针地址，C++默认拷贝构造函数与赋值运算符重载都是浅拷贝；节省空间，但会引发多次释放。<br>
深拷贝：重新分配堆内存，拷贝指针指向内容。浪费空间，但不会多次释放。</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">String</span><span class="o">::</span><span class="n">String</span><span class="p">(</span><span class="k">const</span> <span class="n">String</span> <span class="o">&amp;</span><span class="n">other</span><span class="p">){</span>  <span class="c1">// 拷贝构造函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">m_data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">strlen</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">m_data</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">m_data</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">strcpy</span><span class="p">(</span><span class="n">m_data</span><span class="p">,</span> <span class="n">other</span><span class="p">.</span><span class="n">m_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		<span class="nf">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">String</span><span class="o">&amp;</span> <span class="n">String</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span> <span class="p">(</span><span class="k">const</span> <span class="n">String</span> <span class="o">&amp;</span><span class="n">other</span><span class="p">){</span>  <span class="c1">// 赋值函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="p">(</span><span class="k">this</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// 释放原有的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">delete</span><span class="p">[</span> <span class="p">]</span> <span class="n">m_data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// 重新分配资源并赋值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">m_data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">strlen</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">m_data</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="n">m_data</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">strcpy</span><span class="p">(</span><span class="n">m_data</span><span class="p">,</span> <span class="n">other</span><span class="p">.</span><span class="n">m_data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		<span class="nf">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><p>兼有两者优点：1. 计数，2. move操作<br>
move：当旧指针不用时，资源让渡给新指针，即move操作</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// 调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">String</span> <span class="nf">s2A</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">s1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="n">String</span><span class="o">::</span><span class="n">String</span><span class="p">(</span><span class="n">String</span><span class="o">&amp;&amp;</span> <span class="n">other</span><span class="p">){</span>  <span class="c1">// 移动构造函数  &amp;&amp;右值引用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">m_data</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// 资源让渡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">m_data</span> <span class="o">=</span> <span class="n">other</span><span class="p">.</span><span class="n">m_data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">other</span><span class="p">.</span><span class="n">m_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">String</span> <span class="n">s3A</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">s3A</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">s2A</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">String</span><span class="o">&amp;</span> <span class="n">String</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">String</span><span class="o">&amp;&amp;</span> <span class="n">rhs</span><span class="p">)</span><span class="k">noexcept</span><span class="p">{</span>  <span class="c1">// 移动赋值运算符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span><span class="p">(</span><span class="k">this</span> <span class="o">!=</span> <span class="o">&amp;</span><span class="n">rhs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">delete</span><span class="p">[]</span> <span class="n">m_data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">m_data</span> <span class="o">=</span> <span class="n">rhs</span><span class="p">.</span><span class="n">m_data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">rhs</span><span class="p">.</span><span class="n">m_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="继承"><a href="#继承" class="anchor-link">#</a>继承</h3>
<p>// 面对变化，尽可能少修改原有的逻辑，要扩充逻辑</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span>  <span class="c1">// 抽象类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">double</span> <span class="n">Area</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="c1">// 子类方法实现不一致加上virtual 不创建对象用=0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Show</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">SetColor</span><span class="p">(</span><span class="kt">int</span> <span class="n">color</span><span class="p">)</span> <span class="p">{</span> <span class="n">_color</span> <span class="o">=</span> <span class="n">color</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">Display</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">Area</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">_color</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Square</span><span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">Square</span><span class="p">(</span><span class="kt">double</span> <span class="n">len</span><span class="p">)</span> <span class="o">:</span><span class="n">_len</span><span class="p">(</span><span class="n">len</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">Show</span><span class="p">()</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Square&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="nf">Area</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="n">_len</span><span class="o">*</span><span class="n">_len</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="n">_len</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><p><img src="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-3.png?imageMogr2/format/webp%7C" alt="image"><br>
所以sizeof(s1) = 16 = 8+4+4</p>
<h3 id="三大特性"><a href="#三大特性" class="anchor-link">#</a>三大特性</h3>
<p>封装、继承、多态<br>
<img src="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-4.png?imageMogr2/format/webp%7C" alt="image"></p>
<h2 id="编程思想"><a href="#编程思想" class="anchor-link">#</a>编程思想</h2>
<h3 id="单例模式"><a href="#单例模式" class="anchor-link">#</a>单例模式</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// .h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Singleton</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">static</span> <span class="k">const</span> <span class="n">Singleton</span><span class="o">*</span> <span class="n">getInstance</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">static</span> <span class="kt">void</span> <span class="nf">DoSomething</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Do Something&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 将构造和析构函数私有化，防止外部访问
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">Singleton</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="o">~</span><span class="n">Singleton</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">static</span> <span class="n">Singleton</span><span class="o">*</span> <span class="n">This</span><span class="p">;</span> <span class="c1">// 使用静态变量帮助解决资源的分配和释放
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="c1">// .cpp
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&#34;Singleton.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// 无法解析的外部符号 &#34;private: static class Singleton * Singleton::This&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Singleton</span><span class="o">*</span> <span class="n">Singleton</span><span class="o">::</span><span class="n">This</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span> <span class="c1">// = new Singleton();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">const</span> <span class="n">Singleton</span><span class="o">*</span> <span class="n">Singleton</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">This</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">This</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">This</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Singleton</span><span class="o">::</span><span class="n">Singleton</span><span class="p">(){}</span>
</span></span><span class="line"><span class="cl"><span class="n">Singleton</span><span class="o">::~</span><span class="n">Singleton</span><span class="p">(){}</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><p><a href="https://cloud.tencent.com/developer/article/1670804" target="_blank" rel="noopener">懒汉模式和恶汉模式 null/new</a></p>
<h3 id="观察者模式"><a href="#观察者模式" class="anchor-link">#</a>观察者模式</h3>
<p>观察者关注被观察者动态，如果被观察者动态更新，则通知观察者做出相应处理。</p>
<h3 id="voidnullptr"><a href="#voidnullptr" class="anchor-link">#</a>void*、nullptr</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// C
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define NULL((void*)0)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// C++
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define NULL
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>  <span class="cp">#ifdef _cplusplus
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define NULL 0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>  <span class="cp">#else
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="cp">#define NULL((void*)0)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>  <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// vc++即使定义指针为NULL，也会转成nullptr即void*
</span></span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="c的类型转换"><a href="#c的类型转换" class="anchor-link">#</a>C++的类型转换</h3>
<p>const_cast：用于将const转换成非const</p>
<ul>
<li>const变量传给带非const参数的函数</li>
</ul>
<p>reinterpret_cast：重新解释类型，两者内存空间必须一致，不检查指向的内容和其指针类型<br>
static_cast：基本类型转换，有继承关系的类对象和类指针转换，由程序员来检查是否错误，没有动态转换的类型安全检查开销<br>
dynamic_cast：只用于包含虚函数的类，用于多态中，向上向下转换时，错误则置空，增加检查开销</p>
<h3 id="适配器模式"><a href="#适配器模式" class="anchor-link">#</a>适配器模式</h3>
<p>将一个类的接口或实现类转化成客户要求的另一个新功能接口，实现复用。</p>
<ul>
<li>采用多重继承的方式
<ul>
<li>实现新功能接口</li>
<li>创建适配器类继承新功能接口和旧功能实现类或接口</li>
<li>在类中实现新功能</li>
<li>创建接口对象指针 指向新实现类，调用方法</li>
</ul>
</li>
<li>采用组合方式
<ul>
<li>实现新功能接口</li>
<li>创建适配器继承接口，并在类内创建旧类对象</li>
<li>新功能中使用旧类对象调用旧方法</li>
<li>创建接口对象指针 指向新实现类，调用方法</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">LegacyRectangle</span>  <span class="c1">// 旧
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">LegacyRectangle</span><span class="p">(</span><span class="kt">double</span> <span class="n">x1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">_x1</span> <span class="o">=</span> <span class="n">x1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kt">void</span> <span class="nf">LegacyDraw</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;LegacyRectangle:: LegacyDraw()&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">_x1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="kt">double</span> <span class="n">_x1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Rectangle</span>  <span class="c1">// 新接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">void</span> <span class="n">Draw</span><span class="p">(</span><span class="n">string</span> <span class="n">str</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//虚函数用于继承给子类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 第一种适配的方式：使用多重继承
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">RectangleAdapter</span><span class="o">:</span> <span class="k">public</span> <span class="n">Rectangle</span><span class="p">,</span> <span class="k">public</span> <span class="n">LegacyRectangle</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">RectangleAdapter</span><span class="p">(</span><span class="kt">double</span> <span class="n">w</span><span class="p">)</span> <span class="o">:</span> <span class="n">LegacyRectangle</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;RectangleAdapter&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Draw</span><span class="p">(</span><span class="n">string</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;RectangleAdapter::Draw()&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">LegacyDraw</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 组合方式的Adapter
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">RectangleAdapter2</span> <span class="o">:</span><span class="k">public</span> <span class="n">Rectangle</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">RectangleAdapter2</span><span class="p">(</span><span class="kt">double</span> <span class="n">w</span><span class="p">)</span> <span class="o">:</span><span class="n">_lRect</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;RectangleAdapter2&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Draw</span><span class="p">(</span><span class="n">string</span> <span class="n">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;RectangleAdapter2::Draw()&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">_lRect</span><span class="p">.</span><span class="n">LegacyDraw</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">LegacyRectangle</span> <span class="n">_lRect</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="c1">// main
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">RectangleAdapter</span> <span class="nf">ra</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">Rectangle</span><span class="o">*</span> <span class="n">pR</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ra</span><span class="p">;</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="泛型编程"><a href="#泛型编程" class="anchor-link">#</a>泛型编程</h3>
<p>::方法名() 调用自己的函数<br>
泛型编程是一种静态期多态，通过编译器生成最直接的代码。</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="n">Class</span> <span class="n">T1</span><span class="p">,</span> <span class="k">class</span> <span class="nc">T2</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">max</span><span class="p">(</span><span class="n">T1</span> <span class="n">a</span><span class="p">,</span> <span class="n">T2</span> <span class="n">b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span> <span class="o">?</span> <span class="nl">a</span><span class="p">:</span><span class="n">b</span><span class="p">);</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h2 id="进阶编程"><a href="#进阶编程" class="anchor-link">#</a>进阶编程</h2>
<h3 id="stl标准库"><a href="#stl标准库" class="anchor-link">#</a>STL标准库</h3>
<h4 id="容器"><a href="#容器" class="anchor-link">#</a>容器</h4>
<ul>
<li>序列式容器
<ul>
<li>可排序，vector、list、deque，而stack、queue、priority_queue是容器适配器</li>
</ul>
</li>
<li>关联式容器
<ul>
<li>每个数据元素由键值对组成，set，multiset，map，multimap</li>
<li>note：迭代器删除时，注意删除操作使得迭代器失效，iter = .erase(iter) or iter++</li>
</ul>
</li>
</ul>
<h3 id="函数指针仿函数模板"><a href="#函数指针仿函数模板" class="anchor-link">#</a>函数指针、仿函数模板</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// C++仿函数模板
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">SortTF</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">bool</span> <span class="nf">operator</span><span class="p">()</span> <span class="p">(</span><span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DisplayTF</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kr">inline</span> <span class="kt">void</span> <span class="nf">operator</span><span class="p">()</span> <span class="p">(</span><span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">)</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// C++仿函数模板
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">arr4</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="n">sort</span><span class="p">(</span><span class="n">arr4</span><span class="p">,</span> <span class="n">arr4</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">SortF</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="n">for_each</span><span class="p">(</span><span class="n">arr4</span><span class="p">,</span> <span class="n">arr4</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">DisplayF</span><span class="p">());</span>
</span></span><span class="line"><span class="cl"><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="自定义迭代器"><a href="#自定义迭代器" class="anchor-link">#</a>自定义迭代器</h3>
<p>必须提供iterator_traits的五种特性，才能和STL共同使用：</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// 分别是迭代器类型、元素类型、距离类型、指针类型与reference类型
</span></span></span><span class="line"><span class="cl"><span class="c1">//template&lt;class Iterator&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1">//struct iterator_traits
</span></span></span><span class="line"><span class="cl"><span class="c1">//{
</span></span></span><span class="line"><span class="cl"><span class="c1">//	typedef typename Iterator::difference_type difference_type;
</span></span></span><span class="line"><span class="cl"><span class="c1">//	typedef typename Iterator::value_type value_type;
</span></span></span><span class="line"><span class="cl"><span class="c1">//	typedef typename Iterator::pointer pointer;
</span></span></span><span class="line"><span class="cl"><span class="c1">//	typedef typename Iterator::reference reference;
</span></span></span><span class="line"><span class="cl"><span class="c1">//	typedef typename Iterator::iterator_category iterator_category;
</span></span></span><span class="line"><span class="cl"><span class="c1">//}；
</span></span></span></code></pre></td></tr></table></div>
</div>
</div><h3 id="容器适配器"><a href="#容器适配器" class="anchor-link">#</a>容器适配器</h3>
<ul>
<li>stack：先进后出，底层是deque</li>
<li>queue：先进先出，底层deque</li>
<li>priority_queue：进行堆排序，底层是vector或deque</li>
</ul>
<h3 id="空间适配器"><a href="#空间适配器" class="anchor-link">#</a>空间适配器</h3>
<h3 id="boost库"><a href="#boost库" class="anchor-link">#</a>boost库</h3>
<h3 id="多线程"><a href="#多线程" class="anchor-link">#</a>多线程</h3>
<p>加锁应尽可能粒度最小化</p>
<h2 id="linux编程"><a href="#linux编程" class="anchor-link">#</a>Linux编程</h2>
<h3 id="makefile"><a href="#makefile" class="anchor-link">#</a>makefile</h3>
<p><a href="https://www.gnu.org/software/make/manual/" target="_blank" rel="noopener">https://www.gnu.org/software/make/manual/</a>
<img src="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-5.png?imageMogr2/format/webp%7C" alt="image"></p>
<ul>
<li><strong>Makefile基本规则</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// 目标： 依赖
</span></span></span><span class="line"><span class="cl"><span class="c1">// 		命令 (前面有个tab)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">main</span><span class="p">:</span> <span class="n">test</span><span class="p">.</span><span class="n">o</span> <span class="n">main</span><span class="p">.</span><span class="n">o</span>
</span></span><span class="line"><span class="cl">    <span class="n">g</span><span class="o">++</span> <span class="n">test</span><span class="p">.</span><span class="n">o</span> <span class="n">main</span><span class="p">.</span><span class="n">o</span> <span class="o">-</span><span class="n">o</span> <span class="n">main</span>
</span></span><span class="line"><span class="cl"><span class="n">test</span><span class="p">.</span><span class="nl">o</span><span class="p">:</span> <span class="n">test</span><span class="p">.</span><span class="n">cpp</span>
</span></span><span class="line"><span class="cl">    <span class="n">g</span><span class="o">++</span> <span class="o">-</span><span class="n">c</span> <span class="n">test</span><span class="p">.</span><span class="n">cpp</span> <span class="o">-</span><span class="n">o</span> <span class="n">test</span><span class="p">.</span><span class="n">o</span>
</span></span><span class="line"><span class="cl"><span class="n">main</span><span class="p">.</span><span class="nl">o</span><span class="p">:</span> <span class="n">main</span><span class="p">.</span><span class="n">cpp</span>
</span></span><span class="line"><span class="cl">    <span class="n">g</span><span class="o">++</span> <span class="o">-</span><span class="n">c</span> <span class="n">main</span><span class="p">.</span><span class="n">cpp</span> <span class="o">-</span><span class="n">o</span> <span class="n">main</span><span class="p">.</span><span class="n">o</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><ul>
<li><strong>Makefile的简化规则</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// 变量定义：变量 = 字符串
</span></span></span><span class="line"><span class="cl"><span class="c1">// 变量使用：$(变量名)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">TARGET</span> <span class="o">=</span> <span class="n">main</span>
</span></span><span class="line"><span class="cl"><span class="n">OBJS</span> <span class="o">=</span> <span class="n">test</span><span class="p">.</span><span class="n">o</span> <span class="n">main</span><span class="p">.</span><span class="n">o</span>
</span></span><span class="line"><span class="cl"><span class="err">$</span><span class="p">(</span><span class="n">TARGET</span><span class="p">)</span><span class="o">:</span> <span class="err">$</span><span class="p">(</span><span class="n">OBJS</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">g</span><span class="o">++</span> <span class="err">$</span><span class="p">(</span><span class="n">OBJS</span><span class="p">)</span> <span class="o">-</span><span class="n">o</span> <span class="err">$</span><span class="p">(</span><span class="n">TARGET</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">test</span><span class="p">.</span><span class="nl">o</span><span class="p">:</span> <span class="n">test</span><span class="p">.</span><span class="n">cpp</span>
</span></span><span class="line"><span class="cl"><span class="n">main</span><span class="p">.</span><span class="nl">o</span><span class="p">:</span> <span class="n">main</span><span class="p">.</span><span class="n">cpp</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nl">PHONY</span><span class="p">:</span> <span class="n">clean</span>
</span></span><span class="line"><span class="cl"><span class="nl">clean</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">rm</span> <span class="err">$</span><span class="p">(</span><span class="n">TARGET</span><span class="p">)</span> <span class="err">$</span><span class="p">(</span><span class="n">OBJS</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 不生成目标文件的命令最好使用.PHONY 使其为假想目标
</span></span></span><span class="line"><span class="cl"><span class="c1">// 扩展用法  /usr/local/bin/系统环境变量（查看echo $path）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">install</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">cp</span> <span class="p">.</span><span class="o">/</span><span class="n">main</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mainTest</span>
</span></span><span class="line"><span class="cl"><span class="nl">uninstall</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">rm</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mainTest</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><p><img src="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-6.png?imageMogr2/format/webp%7C" alt="image"></p>
<ul>
<li><strong>Makefile动态库</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nv">TARGET</span> <span class="o">=</span> main // main 和 .o的区别 试试main.o or <span class="nb">test</span>
</span></span><span class="line"><span class="cl"><span class="nv">OBJS</span> <span class="o">=</span> test.o
</span></span><span class="line"><span class="cl"><span class="nv">LIB</span> <span class="o">=</span> libtest.so
</span></span><span class="line"><span class="cl"><span class="nv">CXXFLAGS</span> <span class="o">=</span> -c -fPIC
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">$(TARGET)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">LIB</span><span class="k">)</span> <span class="n">main</span>.<span class="n">o</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CXX<span class="k">)</span> main.o -o <span class="k">$(</span>TARGET<span class="k">)</span> -L. -ltest -Wl,-rpath ./
</span></span><span class="line"><span class="cl"><span class="nf">$(LIB)</span><span class="o">:</span><span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CXX<span class="k">)</span> -shared <span class="k">$(</span>OBJS<span class="k">)</span> -o <span class="k">$(</span>LIB<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">$(OBJS)</span><span class="o">:</span><span class="n">test</span>.<span class="n">cpp</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CXX<span class="k">)</span> <span class="k">$(</span>CXXFLAGS<span class="k">)</span> test.cpp -o <span class="k">$(</span>OBJS<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">main.o</span><span class="o">:</span> <span class="n">main</span>.<span class="n">cpp</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CXX<span class="k">)</span> <span class="k">$(</span>CXXFLAGS<span class="k">)</span> main.cpp -o main.o
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">clean</span>
</span></span><span class="line"><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	rm <span class="k">$(</span>TARGET<span class="k">)</span> <span class="k">$(</span>OBJS<span class="k">)</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><ul>
<li>自动变量和模式变量</li>
</ul>
<p><img src="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-7.png?imageMogr2/format/webp%7C" alt="image"></p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nv">TARGET</span> <span class="o">=</span> main
</span></span><span class="line"><span class="cl"><span class="nv">OBJS</span> <span class="o">=</span> test.o
</span></span><span class="line"><span class="cl"><span class="nv">LIB</span> <span class="o">=</span> libtest.so
</span></span><span class="line"><span class="cl"><span class="nv">CXXFLAGS</span> <span class="o">=</span> -c -fPIC
</span></span><span class="line"><span class="cl"><span class="nv">LDFLAGS</span> <span class="o">=</span> -L. -ltest -Wl,-rpath <span class="k">$(</span>@D<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">$(TARGET)</span><span class="o">:</span> <span class="n">main</span>.<span class="n">o</span> <span class="k">$(</span><span class="nv">LIB</span><span class="k">)</span> // 第一个依赖<span class="n">main</span>.<span class="n">o</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CXX<span class="k">)</span> $&lt; -o <span class="nv">$@</span> <span class="k">$(</span>LDFLAGS<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nf">$(LIB)</span><span class="o">:</span><span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CXX<span class="k">)</span> -shared $^ -o <span class="nv">$@</span>
</span></span><span class="line"><span class="cl"><span class="nf">%.o</span><span class="o">:</span>%.<span class="n">cpp</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>CXX<span class="k">)</span> <span class="k">$(</span>CXXFLAGS<span class="k">)</span> $^ -o <span class="nv">$@</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">clean</span>
</span></span><span class="line"><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">$(</span>RM<span class="k">)</span> <span class="k">$(</span>TARGET<span class="k">)</span> <span class="k">$(</span>OBJS<span class="k">)</span> <span class="k">$(</span>LIB<span class="k">)</span> main.o
</span></span></code></pre></td></tr></table></div>
</div>
</div><h2 id="项目实战"><a href="#项目实战" class="anchor-link">#</a>项目实战</h2>
<p>在qt项目下新建bat文件，输入qmake -tp vc 项目名.pro 即可生成sln文件</p>
<h2 id="调试"><a href="#调试" class="anchor-link">#</a>调试</h2>
<h3 id="汇编语言"><a href="#汇编语言" class="anchor-link">#</a>汇编语言</h3>
<p><img src="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-8.png?imageMogr2/format/webp%7C" alt="image">
<img src="https://pic.keepjolly.com/halo/blog/2023/03/20230326090137-9.png?imageMogr2/format/webp%7C" alt="image"></p>

            </div>

            


        </article>

        

        


        


        


        


        


        
    <footer class="minimal-footer">
        
            <div class="post-tag"><a href="/tags/c-/" rel="tag" class="post-tag-link">#c</a></div>
        
        
            <div class="post-category">
                <a href="/posts/" class="post-category-link active">posts</a> | 
            </div>
        
        
    </footer>



        


        


        


    </div>
</main>


            
    <div id="back-to-top" class="back-to-top">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a>
    </div>


            

        </div>
        

        
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css">
<script>
    if (typeof renderMathInElement === 'undefined') {
        const getScript = (options) => {
            const script = document.createElement('script');
            script.defer = true;
            script.crossOrigin = 'anonymous';
            Object.keys(options).forEach((key) => {
                script[key] = options[key];
            });
            document.body.appendChild(script);
        };
        getScript({
            src: 'https:\/\/cdn.jsdelivr.net\/npm\/katex@0.13.0\/dist\/katex.min.js',
            onload: () => {
                getScript({
                    src: 'https:\/\/cdn.jsdelivr.net\/npm\/katex@0.13.0\/dist\/contrib\/mhchem.min.js',
                    onload: () => {
                        getScript({
                            src: 'https:\/\/cdn.jsdelivr.net\/npm\/katex@0.13.0\/dist\/contrib\/auto-render.min.js',
                            onload: () => {
                                renderKaTex();
                            }
                        });
                    }
                });
            }
        });
    } else {
        renderKaTex();
    }
    function renderKaTex() {
        renderMathInElement(
            document.body,
            {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "\\[", right: "\\]", display: true},
                    {left: "$", right: "$", display: false},
                    {left: "\\(", right: "\\)", display: false}
                ]
            }
        );
    }
</script>










    <script src="https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js"></script>

<script>
    let imgNodes = document.querySelectorAll('div.post-body img');
    imgNodes = Array.from(imgNodes).filter(node => node.parentNode.tagName !== "A");

    mediumZoom(imgNodes, {
        background: 'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'
    })
</script>









    </body>
</html>
